(function(Rn,Ur){typeof exports=="object"&&typeof module<"u"?module.exports=Ur(require("vue")):typeof define=="function"&&define.amd?define(["vue"],Ur):(Rn=typeof globalThis<"u"?globalThis:Rn||self,Rn.FlowDesigner=Ur(Rn.vue))})(this,function(Rn){"use strict";var Ur,He,wd,_i,Sd,Od,pu,Ad,vu,gu,yu,zo={},Cd=[],n0=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Za=Array.isArray;function Yr(t,e){for(var n in e)t[n]=e[n];return t}function mu(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ae(t,e,n){var r,i,o,a={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Ur.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)a[o]===void 0&&(a[o]=t.defaultProps[o]);return Ja(t,a,r,i,null)}function Ja(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++wd,__i:-1,__u:0};return i==null&&He.vnode!=null&&He.vnode(o),o}function Qa(){return{current:null}}function Gi(t){return t.children}function Ge(t,e){this.props=t,this.context=e}function Ui(t,e){if(e==null)return t.__?Ui(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Ui(t):null}function Td(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Td(t)}}function Nd(t){(!t.__d&&(t.__d=!0)&&_i.push(t)&&!es.__r++||Sd!==He.debounceRendering)&&((Sd=He.debounceRendering)||Od)(es)}function es(){var t,e,n,r,i,o,a,s;for(_i.sort(pu);t=_i.shift();)t.__d&&(e=_i.length,r=void 0,o=(i=(n=t).__v).__e,a=[],s=[],n.__P&&((r=Yr({},i)).__v=i.__v+1,He.vnode&&He.vnode(r),_u(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[o]:null,a,o??Ui(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,Ld(a,r,s),r.__e!=o&&Td(r)),_i.length>e&&_i.sort(pu));es.__r=0}function Md(t,e,n,r,i,o,a,s,l,u,f){var c,d,h,v,p,g,y=r&&r.__k||Cd,m=e.length;for(l=r0(n,e,y,l,m),c=0;c<m;c++)(h=n.__k[c])!=null&&(d=h.__i===-1?zo:y[h.__i]||zo,h.__i=c,g=_u(t,h,d,i,o,a,s,l,u,f),v=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&bu(d.ref,null,h),f.push(h.ref,h.__c||v,h)),p==null&&v!=null&&(p=v),4&h.__u||d.__k===h.__k?l=Pd(h,l,t):typeof h.type=="function"&&g!==void 0?l=g:v&&(l=v.nextSibling),h.__u&=-7);return n.__e=p,l}function r0(t,e,n,r,i){var o,a,s,l,u,f=n.length,c=f,d=0;for(t.__k=new Array(i),o=0;o<i;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=o+d,(a=t.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Ja(null,a,null,null,null):Za(a)?Ja(Gi,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?Ja(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,s=null,(u=a.__i=i0(a,n,l,c))!==-1&&(c--,(s=n[u])&&(s.__u|=2)),s==null||s.__v===null?(u==-1&&d--,typeof a.type!="function"&&(a.__u|=4)):u!=l&&(u==l-1?d--:u==l+1?d++:(u>l?d--:d++,a.__u|=4))):t.__k[o]=null;if(c)for(o=0;o<f;o++)(s=n[o])!=null&&!(2&s.__u)&&(s.__e==r&&(r=Ui(s)),Id(s,s));return r}function Pd(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=Pd(r[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=Ui(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ts(t,e){return e=e||[],t==null||typeof t=="boolean"||(Za(t)?t.some(function(n){ts(n,e)}):e.push(t)),e}function i0(t,e,n,r){var i,o,a=t.key,s=t.type,l=e[n];if(l===null||l&&a==l.key&&s===l.type&&!(2&l.__u))return n;if(r>(l!=null&&!(2&l.__u)?1:0))for(i=n-1,o=n+1;i>=0||o<e.length;){if(i>=0){if((l=e[i])&&!(2&l.__u)&&a==l.key&&s===l.type)return i;i--}if(o<e.length){if((l=e[o])&&!(2&l.__u)&&a==l.key&&s===l.type)return o;o++}}return-1}function Dd(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||n0.test(e)?n:n+"px"}function ns(t,e,n,r,i){var o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Dd(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||Dd(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Ad,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=vu,t.addEventListener(e,o?yu:gu,o)):t.removeEventListener(e,o?yu:gu,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Rd(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=vu++;else if(e.t<n.u)return;return n(He.event?He.event(e):e)}}}function _u(t,e,n,r,i,o,a,s,l,u){var f,c,d,h,v,p,g,y,m,A,T,k,C,S,I,X,Q,ue=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=e.__e=n.__e]),(f=He.__b)&&f(e);e:if(typeof ue=="function")try{if(y=e.props,m="prototype"in ue&&ue.prototype.render,A=(f=ue.contextType)&&r[f.__c],T=f?A?A.props.value:f.__:r,n.__c?g=(c=e.__c=n.__c).__=c.__E:(m?e.__c=c=new ue(y,T):(e.__c=c=new Ge(y,T),c.constructor=ue,c.render=a0),A&&A.sub(c),c.props=y,c.state||(c.state={}),c.context=T,c.__n=r,d=c.__d=!0,c.__h=[],c._sb=[]),m&&c.__s==null&&(c.__s=c.state),m&&ue.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Yr({},c.__s)),Yr(c.__s,ue.getDerivedStateFromProps(y,c.__s))),h=c.props,v=c.state,c.__v=e,d)m&&ue.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),m&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(m&&ue.getDerivedStateFromProps==null&&y!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,T),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,T)===!1||e.__v==n.__v)){for(e.__v!=n.__v&&(c.props=y,c.state=c.__s,c.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(he){he&&(he.__=e)}),k=0;k<c._sb.length;k++)c.__h.push(c._sb[k]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,T),m&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,v,p)})}if(c.context=T,c.props=y,c.__P=t,c.__e=!1,C=He.__r,S=0,m){for(c.state=c.__s,c.__d=!1,C&&C(e),f=c.render(c.props,c.state,c.context),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[]}else do c.__d=!1,C&&C(e),f=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++S<25);c.state=c.__s,c.getChildContext!=null&&(r=Yr(Yr({},r),c.getChildContext())),m&&!d&&c.getSnapshotBeforeUpdate!=null&&(p=c.getSnapshotBeforeUpdate(h,v)),s=Md(t,Za(X=f!=null&&f.type===Gi&&f.key==null?f.props.children:f)?X:[X],e,n,r,i,o,a,s,l,u),c.base=e.__e,e.__u&=-161,c.__h.length&&a.push(c),g&&(c.__E=c.__=null)}catch(he){if(e.__v=null,l||o!=null)if(he.then){for(e.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,e.__e=s}else for(Q=o.length;Q--;)mu(o[Q]);else e.__e=n.__e,e.__k=n.__k;He.__e(he,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):s=e.__e=o0(n.__e,e,n,r,i,o,a,l,u);return(f=He.diffed)&&f(e),128&e.__u?void 0:s}function Ld(t,e,n){for(var r=0;r<n.length;r++)bu(n[r],n[++r],n[++r]);He.__c&&He.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){He.__e(o,i.__v)}})}function o0(t,e,n,r,i,o,a,s,l){var u,f,c,d,h,v,p,g=n.props,y=e.props,m=e.type;if(m=="svg"?i="http://www.w3.org/2000/svg":m=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((h=o[u])&&"setAttribute"in h==!!m&&(m?h.localName==m:h.nodeType==3)){t=h,o[u]=null;break}}if(t==null){if(m==null)return document.createTextNode(y);t=document.createElementNS(i,m,y.is&&y),s&&(He.__m&&He.__m(e,o),s=!1),o=null}if(m===null)g===y||s&&t.data===y||(t.data=y);else{if(o=o&&Ur.call(t.childNodes),g=n.props||zo,!s&&o!=null)for(g={},u=0;u<t.attributes.length;u++)g[(h=t.attributes[u]).name]=h.value;for(u in g)if(h=g[u],u!="children"){if(u=="dangerouslySetInnerHTML")c=h;else if(!(u in y)){if(u=="value"&&"defaultValue"in y||u=="checked"&&"defaultChecked"in y)continue;ns(t,u,null,h,i)}}for(u in y)h=y[u],u=="children"?d=h:u=="dangerouslySetInnerHTML"?f=h:u=="value"?v=h:u=="checked"?p=h:s&&typeof h!="function"||g[u]===h||ns(t,u,h,g[u],i);if(f)s||c&&(f.__html===c.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(c&&(t.innerHTML=""),Md(t,Za(d)?d:[d],e,n,r,m=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&Ui(n,0),s,l),o!=null)for(u=o.length;u--;)mu(o[u]);s||(u="value",m=="progress"&&v==null?t.removeAttribute("value"):v!==void 0&&(v!==t[u]||m=="progress"&&!v||m=="option"&&v!==g[u])&&ns(t,u,v,g[u],i),u="checked",p!==void 0&&p!==t[u]&&ns(t,u,p,g[u],i))}return t}function bu(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){He.__e(i,n)}}function Id(t,e,n){var r,i;if(He.unmount&&He.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||bu(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){He.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&Id(r[i],e,n||typeof t.type!="function");n||mu(t.__e),t.__c=t.__=t.__e=void 0}function a0(t,e,n){return this.constructor(t,n)}function s0(t,e,n){var r,i,o,a;e==document&&(e=document.documentElement),He.__&&He.__(t,e),i=(r=!1)?null:e.__k,o=[],a=[],_u(e,t=e.__k=ae(Gi,null,[t]),i||zo,zo,e.namespaceURI,i?null:e.firstChild?Ur.call(e.childNodes):null,o,i?i.__e:e.firstChild,r,a),Ld(o,t,a)}Ur=Cd.slice,He={__e:function(t,e,n,r){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(s){t=s}throw t}},wd=0,Ge.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Yr({},this.state),typeof t=="function"&&(t=t(Yr({},n),this.props)),t&&Yr(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Nd(this))},Ge.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Nd(this))},Ge.prototype.render=Gi,_i=[],Od=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pu=function(t,e){return t.__v.__b-e.__v.__b},es.__r=0,Ad=/(PointerCapture)$|Capture$/i,vu=0,gu=Rd(!1),yu=Rd(!0);var l0="An invariant failed, however the error is obfuscated because this is a production build.",rs=[];Object.freeze(rs);var xu={};Object.freeze(xu);function pn(){return++ie.mobxGuid}function De(t){throw Et(!1,t),"X"}function Et(t,e){if(!t)throw new Error("[mobx] "+(e||l0))}var jd=[];function u0(t,e){return process.env.NODE_ENV==="production"||jd.indexOf(t)!==-1?!1:(jd.push(t),console.error("[mobx] Deprecated: "+t),!0)}function Eu(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var is=function(){};function f0(t){var e=[];return t.forEach(function(n){e.indexOf(n)===-1&&e.push(n)}),e}function wu(t){return t!==null&&typeof t=="object"}function bi(t){if(t===null||typeof t!="object")return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}function c0(t){if(Vi(t)||nn(t))return t;if(Array.isArray(t))return new Map(t);if(bi(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}else return De("Cannot convert to map from '"+t+"'")}function Yi(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function d0(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function kd(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!n||n.configurable!==!1&&n.writable!==!1}function h0(t,e){process.env.NODE_ENV!=="production"&&!kd(t,e)&&De("Cannot make property '"+e.toString()+"' observable, it is not configurable and writable in the target object")}function Vr(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(r){return wu(r)&&r[n]===!0}}function Vi(t){return t instanceof Map}function Xo(t){return t instanceof Set}function Su(t){var e=new Set;for(var n in t)e.add(n);return Object.getOwnPropertySymbols(t).forEach(function(r){Object.getOwnPropertyDescriptor(t,r).enumerable&&e.add(r)}),Array.from(e)}function Ln(t){return t&&t.toString?t.toString():new String(t).toString()}function Bd(t){return t===null?null:typeof t=="object"?""+t:t}var p0=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Me=Symbol("mobx administration"),Ki=function(){function t(e){e===void 0&&(e="Atom@"+pn()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ot.NOT_TRACKING}return t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},t.prototype.reportObserved=function(){return Jd(this)},t.prototype.reportChanged=function(){Qn(),F0(this),er()},t.prototype.toString=function(){return this.name},t}(),Ou=Vr("Atom",Ki);function Au(t,e,n){e===void 0&&(e=is),n===void 0&&(n=is);var r=new Ki(t);return e!==is&&eb(r,e),n!==is&&ah(r,n),r}function v0(t,e){return Sh(t,e)}function g0(t,e){return Object.is(t,e)}var qi={structural:v0,default:g0};/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var Cu=function(t,e){return Cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Cu(t,e)};function y0(t,e){Cu(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _t=function(){return _t=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_t.apply(this,arguments)};function Zn(t){var e=typeof Symbol=="function"&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function Zi(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Tu(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Zi(arguments[e]));return t}var os=Symbol("mobx did run lazy initializers"),Go=Symbol("mobx pending decorators"),m0={},_0={};function b0(t,e){var n=e?m0:_0;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return xi(this),this[t]},set:function(r){xi(this),this[t]=r}})}function xi(t){var e,n;if(t[os]!==!0){var r=t[Go];if(r){Yi(t,os,!0);var i=Tu(Object.getOwnPropertySymbols(r),Object.keys(r));try{for(var o=Zn(i),a=o.next();!a.done;a=o.next()){var s=a.value,l=r[s];l.propertyCreator(t,l.prop,l.descriptor,l.decoratorTarget,l.decoratorArguments)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}}}function Fd(t,e){return function(){var r,i=function(a,s,l,u){if(u===!0)return e(a,s,l,a,r),null;if(process.env.NODE_ENV!=="production"&&!$d(arguments)&&De("This function is a decorator, but it wasn't invoked like a decorator"),!Object.prototype.hasOwnProperty.call(a,Go)){var f=a[Go];Yi(a,Go,_t({},f))}return a[Go][s]={prop:s,propertyCreator:e,descriptor:l,decoratorTarget:a,decoratorArguments:r},b0(s,t)};return $d(arguments)?(r=rs,i.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),i)}}function $d(t){return(t.length===2||t.length===3)&&(typeof t[1]=="string"||typeof t[1]=="symbol")||t.length===4&&t[3]===!0}function Uo(t,e,n){return qr(t)?t:Array.isArray(t)?$.array(t,{name:n}):bi(t)?$.object(t,void 0,{name:n}):Vi(t)?$.map(t,{name:n}):Xo(t)?$.set(t,{name:n}):t}function x0(t,e,n){return t==null||or(t)||br(t)||nn(t)||In(t)?t:Array.isArray(t)?$.array(t,{name:n,deep:!1}):bi(t)?$.object(t,void 0,{name:n,deep:!1}):Vi(t)?$.map(t,{name:n,deep:!1}):Xo(t)?$.set(t,{name:n,deep:!1}):De(process.env.NODE_ENV!=="production"&&"The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets")}function as(t){return t}function E0(t,e,n){if(process.env.NODE_ENV!=="production"&&qr(t))throw"observable.struct should not be used with observable values";return Sh(t,e)?e:t}function ss(t){Et(t);var e=Fd(!0,function(r,i,o,a,s){process.env.NODE_ENV!=="production"&&Et(!o||!o.get,'@observable cannot be used on getter (property "'+Ln(i)+'"), use @computed instead.');var l=o?o.initializer?o.initializer.call(r):o.value:void 0;Fu(r).addObservableProp(i,l,t)}),n=typeof process<"u"&&process.env&&process.env.NODE_ENV!=="production"?function(){return arguments.length<2?De("Incorrect decorator invocation. @observable decorator doesn't expect any arguments"):e.apply(null,arguments)}:e;return n.enhancer=t,n}var Hd={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Hd);function w0(t){/^(deep|name|equals|defaultDecorator|proxy)$/.test(t)||De("invalid option for (extend)observable: "+t)}function Ji(t){if(t==null)return Hd;if(typeof t=="string")return{name:t,deep:!0,proxy:!0};if(process.env.NODE_ENV!=="production"){if(typeof t!="object")return De("expected options object");Object.keys(t).forEach(w0)}return t}var Nu=ss(Uo),S0=ss(x0),Wd=ss(as),O0=ss(E0);function ls(t){return t.defaultDecorator?t.defaultDecorator.enhancer:t.deep===!1?as:Uo}function A0(t,e,n){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return Nu.apply(null,arguments);if(qr(t))return t;var r=bi(t)?$.object(t,e,n):Array.isArray(t)?$.array(t,e):Vi(t)?$.map(t,e):Xo(t)?$.set(t,e):t;if(r!==t)return r;De(process.env.NODE_ENV!=="production"&&"The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'")}var zd={box:function(t,e){arguments.length>2&&Yo("box");var n=Ji(e);return new wi(t,ls(n),n.name,!0,n.equals)},array:function(t,e){arguments.length>2&&Yo("array");var n=Ji(e);return pb(t,ls(n),n.name)},map:function(t,e){arguments.length>2&&Yo("map");var n=Ji(e);return new Bu(t,ls(n),n.name)},set:function(t,e){arguments.length>2&&Yo("set");var n=Ji(e);return new mh(t,ls(n),n.name)},object:function(t,e,n){typeof arguments[1]=="string"&&Yo("object");var r=Ji(n);if(r.proxy===!1)return ju({},t,e,r);var i=lh(r),o=ju({},void 0,void 0,r),a=cb(o);return uh(a,t,e,i),a},ref:Wd,shallow:S0,deep:Nu,struct:O0},$=A0;Object.keys(zd).forEach(function(t){return $[t]=zd[t]});function Yo(t){De("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}var us=Fd(!1,function(t,e,n,r,i){process.env.NODE_ENV!=="production"&&Et(n&&n.get,"Trying to declare a computed value for unspecified getter '"+Ln(e)+"'");var o=n.get,a=n.set,s=i[0]||{};Fu(t).addComputedProp(t,e,_t({get:o,set:a,context:t},s))}),C0=us({equals:qi.structural}),gt=function(e,n,r){if(typeof n=="string"||e!==null&&typeof e=="object"&&arguments.length===1)return us.apply(null,arguments);process.env.NODE_ENV!=="production"&&(Et(typeof e=="function","First argument to `computed` should be an expression."),Et(arguments.length<3,"Computed takes one or two arguments if used as function"));var i=typeof n=="object"?n:{};return i.get=e,i.set=typeof n=="function"?n:i.set,i.name=i.name||e.name||"",new to(i)};gt.struct=C0;var ot;(function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"})(ot||(ot={}));var Jn;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(Jn||(Jn={}));var fs=function(){function t(e){this.cause=e}return t}();function Vo(t){return t instanceof fs}function Mu(t){switch(t.dependenciesState){case ot.UP_TO_DATE:return!1;case ot.NOT_TRACKING:case ot.STALE:return!0;case ot.POSSIBLY_STALE:{for(var e=Du(!0),n=eo(),r=t.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(no(a)){if(ie.disableErrorBoundaries)a.get();else try{a.get()}catch{return Kr(n),Ko(e),!0}if(t.dependenciesState===ot.STALE)return Kr(n),Ko(e),!0}}return Ud(t),Kr(n),Ko(e),!1}}}function Qi(t){var e=t.observers.size>0;ie.computationDepth>0&&e&&De(process.env.NODE_ENV!=="production"&&"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: "+t.name),!ie.allowStateChanges&&(e||ie.enforceActions==="strict")&&De(process.env.NODE_ENV!=="production"&&(ie.enforceActions?"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ")+t.name)}function T0(t){process.env.NODE_ENV!=="production"&&!ie.allowStateReads&&ie.observableRequiresReaction&&console.warn("[mobx] Observable "+t.name+" being read outside a reactive context")}function Xd(t,e,n){var r=Du(!0);Ud(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++ie.runId;var i=ie.trackingDerivation;ie.trackingDerivation=t;var o;if(ie.disableErrorBoundaries===!0)o=e.call(n);else try{o=e.call(n)}catch(a){o=new fs(a)}return ie.trackingDerivation=i,M0(t),N0(t),Ko(r),o}function N0(t){process.env.NODE_ENV!=="production"&&t.observing.length===0&&(ie.reactionRequiresObservable||t.requiresObservable)&&console.warn("[mobx] Derivation "+t.name+" is created/updated without reading any observable value")}function M0(t){for(var e=t.observing,n=t.observing=t.newObserving,r=ot.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++){var s=n[a];s.diffValue===0&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}for(n.length=i,t.newObserving=null,o=e.length;o--;){var s=e[o];s.diffValue===0&&qd(s,t),s.diffValue=0}for(;i--;){var s=n[i];s.diffValue===1&&(s.diffValue=0,B0(s,t))}r!==ot.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}function Pu(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)qd(e[n],t);t.dependenciesState=ot.NOT_TRACKING}function Gd(t){var e=eo();try{return t()}finally{Kr(e)}}function eo(){var t=ie.trackingDerivation;return ie.trackingDerivation=null,t}function Kr(t){ie.trackingDerivation=t}function Du(t){var e=ie.allowStateReads;return ie.allowStateReads=t,e}function Ko(t){ie.allowStateReads=t}function Ud(t){if(t.dependenciesState!==ot.UP_TO_DATE){t.dependenciesState=ot.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=ot.UP_TO_DATE}}var cs=0,P0=1,Yd=Object.getOwnPropertyDescriptor(function(){},"name"),D0=Yd&&Yd.configurable;function Ei(t,e,n){process.env.NODE_ENV!=="production"&&(Et(typeof e=="function","`action` can only be invoked on functions"),(typeof t!="string"||!t)&&De("actions should have valid names, got: '"+t+"'"));var r=function(){return Vd(t,e,n||this,arguments)};return r.isMobxAction=!0,process.env.NODE_ENV!=="production"&&D0&&Object.defineProperty(r,"name",{value:t}),r}function Vd(t,e,n,r){var i=R0(t,n,r);try{return e.apply(n,r)}catch(o){throw i.error=o,o}finally{L0(i)}}function R0(t,e,n){var r=Ht()&&!!t,i=0;if(r&&process.env.NODE_ENV!=="production"){i=Date.now();var o=n&&n.length||0,a=new Array(o);if(o>0)for(var s=0;s<o;s++)a[s]=n[s];wn({type:"action",name:t,object:e,arguments:a})}var l=eo();Qn();var u=ds(!0),f=Du(!0),c={prevDerivation:l,prevAllowStateChanges:u,prevAllowStateReads:f,notifySpy:r,startTime:i,actionId:P0++,parentActionId:cs};return cs=c.actionId,c}function L0(t){cs!==t.actionId&&De("invalid action stack. did you forget to finish an action?"),cs=t.parentActionId,t.error!==void 0&&(ie.suppressReactionErrors=!0),hs(t.prevAllowStateChanges),Ko(t.prevAllowStateReads),er(),Kr(t.prevDerivation),t.notifySpy&&process.env.NODE_ENV!=="production"&&Sn({time:Date.now()-t.startTime}),ie.suppressReactionErrors=!1}function ds(t){var e=ie.allowStateChanges;return ie.allowStateChanges=t,e}function hs(t){ie.allowStateChanges=t}var wi=function(t){y0(e,t);function e(n,r,i,o,a){i===void 0&&(i="ObservableValue@"+pn()),o===void 0&&(o=!0),a===void 0&&(a=qi.default);var s=t.call(this,i)||this;return s.enhancer=r,s.name=i,s.equals=a,s.hasUnreportedChange=!1,s.value=r(n,void 0,i),o&&Ht()&&process.env.NODE_ENV!=="production"&&Si({type:"create",name:s.name,newValue:""+s.value}),s}return e.prototype.dehanceValue=function(n){return this.dehancer!==void 0?this.dehancer(n):n},e.prototype.set=function(n){var r=this.value;if(n=this.prepareNewValue(n),n!==ie.UNCHANGED){var i=Ht();i&&process.env.NODE_ENV!=="production"&&wn({type:"update",name:this.name,newValue:n,oldValue:r}),this.setNewValue(n),i&&process.env.NODE_ENV!=="production"&&Sn()}},e.prototype.prepareNewValue=function(n){if(Qi(this),mr(this)){var r=_r(this,{object:this,type:"update",newValue:n});if(!r)return ie.UNCHANGED;n=r.newValue}return n=this.enhancer(n,this.value,this.name),this.equals(this.value,n)?ie.UNCHANGED:n},e.prototype.setNewValue=function(n){var r=this.value;this.value=n,this.reportChanged(),rr(this)&&ir(this,{type:"update",object:this,newValue:n,oldValue:r})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(n){return Zo(this,n)},e.prototype.observe=function(n,r){return r&&n({object:this,type:"update",newValue:this.value,oldValue:void 0}),Jo(this,n)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return Bd(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(Ki),I0=Vr("ObservableValue",wi),to=function(){function t(e){this.dependenciesState=ot.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ot.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+pn(),this.value=new fs(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Jn.NONE,Et(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+pn(),e.set&&(this.setter=Ei(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?qi.structural:qi.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return t.prototype.onBecomeStale=function(){H0(this)},t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},t.prototype.get=function(){this.isComputing&&De("Cycle detected in computation "+this.name+": "+this.derivation),ie.inBatch===0&&this.observers.size===0&&!this.keepAlive?Mu(this)&&(this.warnAboutUntrackedRead(),Qn(),this.value=this.computeValue(!1),er()):(Jd(this),Mu(this)&&this.trackAndCompute()&&$0(this));var e=this.value;if(Vo(e))throw e.cause;return e},t.prototype.peek=function(){var e=this.computeValue(!1);if(Vo(e))throw e.cause;return e},t.prototype.set=function(e){if(this.setter){Et(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else Et(!1,process.env.NODE_ENV!=="production"&&"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},t.prototype.trackAndCompute=function(){Ht()&&process.env.NODE_ENV!=="production"&&Si({object:this.scope,type:"compute",name:this.name});var e=this.value,n=this.dependenciesState===ot.NOT_TRACKING,r=this.computeValue(!0),i=n||Vo(e)||Vo(r)||!this.equals(e,r);return i&&(this.value=r),i},t.prototype.computeValue=function(e){this.isComputing=!0,ie.computationDepth++;var n;if(e)n=Xd(this,this.derivation,this.scope);else if(ie.disableErrorBoundaries===!0)n=this.derivation.call(this.scope);else try{n=this.derivation.call(this.scope)}catch(r){n=new fs(r)}return ie.computationDepth--,this.isComputing=!1,n},t.prototype.suspend=function(){this.keepAlive||(Pu(this),this.value=void 0)},t.prototype.observe=function(e,n){var r=this,i=!0,o=void 0;return Z0(function(){var a=r.get();if(!i||n){var s=eo();e({type:"update",object:r,newValue:a,oldValue:o}),Kr(s)}i=!1,o=a})},t.prototype.warnAboutUntrackedRead=function(){process.env.NODE_ENV!=="production"&&(this.requiresReaction===!0&&De("[mobx] Computed value "+this.name+" is read outside a reactive context"),this.isTracing!==Jn.NONE&&console.log("[mobx.trace] '"+this.name+"' is being read outside a reactive context. Doing a full recompute"),ie.computedRequiresReaction&&console.warn("[mobx] Computed value "+this.name+" is being read outside a reactive context. Doing a full recompute"))},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return Bd(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(),no=Vr("ComputedValue",to),ps=function(){function t(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return t}(),j0={};function vs(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:j0}var gs=!0,Kd=!1,ie=function(){var t=vs();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(gs=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new ps().version&&(gs=!1),gs?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new ps):(setTimeout(function(){Kd||De("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new ps)}();function k0(){(ie.pendingReactions.length||ie.inBatch||ie.isRunningReactions)&&De("isolateGlobalState should be called before MobX is running any reactions"),Kd=!0,gs&&(--vs().__mobxInstanceCount===0&&(vs().__mobxGlobals=void 0),ie=new ps)}function Ru(){return ie}function B0(t,e){t.observers.add(e),t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function qd(t,e){t.observers.delete(e),t.observers.size===0&&Zd(t)}function Zd(t){t.isPendingUnobservation===!1&&(t.isPendingUnobservation=!0,ie.pendingUnobservations.push(t))}function Qn(){ie.inBatch++}function er(){if(--ie.inBatch===0){nh();for(var t=ie.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,n.observers.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof to&&n.suspend())}ie.pendingUnobservations=[]}}function Jd(t){T0(t);var e=ie.trackingDerivation;return e!==null?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(t.observers.size===0&&ie.inBatch>0&&Zd(t),!1)}function F0(t){t.lowestObserverState!==ot.STALE&&(t.lowestObserverState=ot.STALE,t.observers.forEach(function(e){e.dependenciesState===ot.UP_TO_DATE&&(e.isTracing!==Jn.NONE&&Qd(e,t),e.onBecomeStale()),e.dependenciesState=ot.STALE}))}function $0(t){t.lowestObserverState!==ot.STALE&&(t.lowestObserverState=ot.STALE,t.observers.forEach(function(e){e.dependenciesState===ot.POSSIBLY_STALE?e.dependenciesState=ot.STALE:e.dependenciesState===ot.UP_TO_DATE&&(t.lowestObserverState=ot.UP_TO_DATE)}))}function H0(t){t.lowestObserverState===ot.UP_TO_DATE&&(t.lowestObserverState=ot.POSSIBLY_STALE,t.observers.forEach(function(e){e.dependenciesState===ot.UP_TO_DATE&&(e.dependenciesState=ot.POSSIBLY_STALE,e.isTracing!==Jn.NONE&&Qd(e,t),e.onBecomeStale())}))}function Qd(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===Jn.BREAK){var n=[];eh(nb(t),n,1),new Function(`debugger;
/*
Tracing '`+t.name+`'

You are entering this break point because derivation '`+t.name+"' is being traced and '"+e.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(t instanceof to?t.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+n.join(`
`)+`
*/
    `)()}}function eh(t,e,n){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+new Array(n).join("	")+t.name),t.dependencies&&t.dependencies.forEach(function(r){return eh(r,e,n+1)})}var qo=function(){function t(e,n,r,i){e===void 0&&(e="Reaction@"+pn()),i===void 0&&(i=!1),this.name=e,this.onInvalidate=n,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=ot.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+pn(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Jn.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,ie.pendingReactions.push(this),nh())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Qn(),this._isScheduled=!1,Mu(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Ht()&&process.env.NODE_ENV!=="production"&&Si({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}er()}},t.prototype.track=function(e){if(!this.isDisposed){Qn();var n=Ht(),r;n&&process.env.NODE_ENV!=="production"&&(r=Date.now(),wn({name:this.name,type:"reaction"})),this._isRunning=!0;var i=Xd(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Pu(this),Vo(i)&&this.reportExceptionInDerivation(i.cause),n&&process.env.NODE_ENV!=="production"&&Sn({time:Date.now()-r}),er()}},t.prototype.reportExceptionInDerivation=function(e){var n=this;if(this.errorHandler){this.errorHandler(e,this);return}if(ie.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";ie.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,e),Ht()&&Si({type:"error",name:this.name,message:r,error:""+e}),ie.globalReactionErrorHandlers.forEach(function(i){return i(e,n)})},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Qn(),Pu(this),er()))},t.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[Me]=this,e},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(e){e===void 0&&(e=!1),lb(this,e)},t}(),th=100,Lu=function(t){return t()};function nh(){ie.inBatch>0||ie.isRunningReactions||Lu(W0)}function W0(){ie.isRunningReactions=!0;for(var t=ie.pendingReactions,e=0;t.length>0;){++e===th&&(console.error("Reaction doesn't converge to a stable state after "+th+" iterations."+(" Probably there is a cycle in the reactive function: "+t[0])),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}ie.isRunningReactions=!1}var ys=Vr("Reaction",qo);function z0(t){var e=Lu;Lu=function(n){return t(function(){return e(n)})}}function Ht(){return process.env.NODE_ENV!=="production"&&!!ie.spyListeners.length}function Si(t){if(process.env.NODE_ENV!=="production"&&ie.spyListeners.length)for(var e=ie.spyListeners,n=0,r=e.length;n<r;n++)e[n](t)}function wn(t){if(process.env.NODE_ENV!=="production"){var e=_t(_t({},t),{spyReportStart:!0});Si(e)}}var X0={spyReportEnd:!0};function Sn(t){process.env.NODE_ENV!=="production"&&Si(t?_t(_t({},t),{spyReportEnd:!0}):X0)}function G0(t){return process.env.NODE_ENV==="production"?(console.warn("[mobx.spy] Is a no-op in production builds"),function(){}):(ie.spyListeners.push(t),Eu(function(){ie.spyListeners=ie.spyListeners.filter(function(e){return e!==t})}))}function U0(){De(process.env.NODE_ENV!=="production"&&"@action fields are not reassignable")}function rh(t){return function(e,n,r){if(r){if(process.env.NODE_ENV!=="production"&&r.get!==void 0)return De("@action cannot be used with getters");if(r.value)return{value:Ei(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Ei(t,i.call(this))}}}return Y0(t).apply(this,arguments)}}function Y0(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(i){Yi(this,n,F(t,i))}})}}function V0(t,e,n,r){return r===!0?(Iu(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Iu(this,e,n.value||n.initializer.call(this)),this[e]},set:U0}:{enumerable:!1,configurable:!0,set:function(i){Iu(this,e,i)},get:function(){}}}var F=function(e,n,r,i){if(arguments.length===1&&typeof e=="function")return Ei(e.name||"<unnamed action>",e);if(arguments.length===2&&typeof n=="function")return Ei(e,n);if(arguments.length===1&&typeof e=="string")return rh(e);if(i===!0)Yi(e,n,Ei(e.name||n,r.value,this));else return rh(n).apply(null,arguments)};F.bound=V0;function K0(t,e){var n=typeof t=="string"?t:t.name||"<unnamed action>",r=typeof t=="function"?t:e;return process.env.NODE_ENV!=="production"&&(Et(typeof r=="function"&&r.length===0,"`runInAction` expects a function without arguments"),(typeof n!="string"||!n)&&De("actions should have valid names, got: '"+n+"'")),Vd(n,r,this,void 0)}function q0(t){return typeof t=="function"&&t.isMobxAction===!0}function Iu(t,e,n){Yi(t,e,Ei(e,n.bind(t)))}function Z0(t,e){e===void 0&&(e=xu),process.env.NODE_ENV!=="production"&&(Et(typeof t=="function","Autorun expects a function as first argument"),Et(q0(t)===!1,"Autorun does not accept actions since actions are untrackable"));var n=e&&e.name||t.name||"Autorun@"+pn(),r=!e.scheduler&&!e.delay,i;if(r)i=new qo(n,function(){this.track(s)},e.onError,e.requiresObservable);else{var o=ih(e),a=!1;i=new qo(n,function(){a||(a=!0,o(function(){a=!1,i.isDisposed||i.track(s)}))},e.onError,e.requiresObservable)}function s(){t(i)}return i.schedule(),i.getDisposer()}var J0=function(t){return t()};function ih(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:J0}function oh(t,e,n){n===void 0&&(n=xu),process.env.NODE_ENV!=="production"&&(Et(typeof t=="function","First argument to reaction should be a function"),Et(typeof n=="object","Third argument of reactions should be an object"));var r=n.name||"Reaction@"+pn(),i=F(r,n.onError?Q0(n.onError,e):e),o=!n.scheduler&&!n.delay,a=ih(n),s=!0,l=!1,u,f=n.compareStructural?qi.structural:n.equals||qi.default,c=new qo(r,function(){s||o?d():l||(l=!0,a(d))},n.onError,n.requiresObservable);function d(){if(l=!1,!c.isDisposed){var h=!1;c.track(function(){var v=t(c);h=s||!f(u,v),u=v}),s&&n.fireImmediately&&i(u,c),!s&&h===!0&&i(u,c),s&&(s=!1)}}return c.schedule(),c.getDisposer()}function Q0(t,e){return function(){try{return e.apply(this,arguments)}catch(n){t.call(this,n)}}}function eb(t,e,n){return sh("onBecomeObserved",t,e)}function ah(t,e,n){return sh("onBecomeUnobserved",t,e)}function sh(t,e,n,r){var i=Jr(e),o=n,a=t+"Listeners";i[a]?i[a].add(o):i[a]=new Set([o]);var s=i[t];return typeof s!="function"?De(process.env.NODE_ENV!=="production"&&"Not an atom that can be (un)observed"):function(){var l=i[a];l&&(l.delete(o),l.size===0&&delete i[a])}}function tb(t){var e=t.enforceActions,n=t.computedRequiresReaction,r=t.computedConfigurable,i=t.disableErrorBoundaries,o=t.reactionScheduler,a=t.reactionRequiresObservable,s=t.observableRequiresReaction;if(k0(),e!==void 0){(typeof e=="boolean"||e==="strict")&&u0(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);var l=void 0;switch(e){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:De("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}ie.enforceActions=l,ie.allowStateChanges=!(l===!0||l==="strict")}n!==void 0&&(ie.computedRequiresReaction=!!n),a!==void 0&&(ie.reactionRequiresObservable=!!a),s!==void 0&&(ie.observableRequiresReaction=!!s,ie.allowStateReads=!ie.observableRequiresReaction),r!==void 0&&(ie.computedConfigurable=!!r),i!==void 0&&(i===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),ie.disableErrorBoundaries=!!i),o&&z0(o)}function ju(t,e,n,r){process.env.NODE_ENV!=="production"&&(Et(arguments.length>=2&&arguments.length<=4,"'extendObservable' expected 2-4 arguments"),Et(typeof t=="object","'extendObservable' expects an object as first argument"),Et(!nn(t),"'extendObservable' should not be used on maps, use map.merge instead")),r=Ji(r);var i=lh(r);return xi(t),Fu(t,r.name,i.enhancer),e&&uh(t,e,n,i),t}function lh(t){return t.defaultDecorator||(t.deep===!1?Wd:Nu)}function uh(t,e,n,r){var i,o,a,s;if(process.env.NODE_ENV!=="production"&&(Et(!qr(e),"Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540"),n)){var l=Su(n);try{for(var u=Zn(l),f=u.next();!f.done;f=u.next()){var c=f.value;c in e||De("Trying to declare a decorator for unspecified property '"+Ln(c)+"'")}}catch(y){i={error:y}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}Qn();try{var l=p0(e);try{for(var d=Zn(l),h=d.next();!h.done;h=d.next()){var c=h.value,v=Object.getOwnPropertyDescriptor(e,c);process.env.NODE_ENV!=="production"&&(bi(e)||De("'extendObservable' only accepts plain objects as second argument"),dh(v.value)&&De("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead"));var p=n&&c in n?n[c]:v.get?us:r;process.env.NODE_ENV!=="production"&&typeof p!="function"&&De("Not a valid decorator for '"+Ln(c)+"', got: "+p);var g=p(t,c,v,!0);g&&Object.defineProperty(t,c,g)}}catch(m){a={error:m}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}finally{er()}}function nb(t,e){return fh(Jr(t,e))}function fh(t){var e={name:t.name};return t.observing&&t.observing.length>0&&(e.dependencies=f0(t.observing).map(fh)),e}function ch(t,e){if(t==null)return!1;if(e!==void 0){if(or(t)===!1||!t[Me].values.has(e))return!1;var n=Jr(t,e);return no(n)}return no(t)}function dh(t){return arguments.length>1?De(process.env.NODE_ENV!=="production"&&"isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property"):ch(t)}function hh(t,e){return typeof e!="string"?De(process.env.NODE_ENV!=="production"&&"isComputed expected a property name as second argument"):ch(t,e)}function rb(t,e){return t==null?!1:or(t)||!!t[Me]||Ou(t)||ys(t)||no(t)}function qr(t){return arguments.length!==1&&De(process.env.NODE_ENV!=="production"&&"isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),rb(t)}function ro(t){return or(t)?t[Me].getKeys():nn(t)||In(t)?Array.from(t.keys()):br(t)?t.map(function(e,n){return n}):De(process.env.NODE_ENV!=="production"&&"'keys()' can only be used on observable objects, arrays, sets and maps")}function ib(t){return or(t)?ro(t).map(function(e){return t[e]}):nn(t)?ro(t).map(function(e){return t.get(e)}):In(t)?Array.from(t.values()):br(t)?t.slice():De(process.env.NODE_ENV!=="production"&&"'values()' can only be used on observable objects, arrays, sets and maps")}function ob(t){return or(t)?ro(t).map(function(e){return[e,t[e]]}):nn(t)?ro(t).map(function(e){return[e,t.get(e)]}):In(t)?Array.from(t.entries()):br(t)?t.map(function(e,n){return[n,e]}):De(process.env.NODE_ENV!=="production"&&"'entries()' can only be used on observable objects, arrays and maps")}function ku(t,e,n){if(arguments.length===2&&!In(t)){Qn();var r=e;try{for(var i in r)ku(t,i,r[i])}finally{er()}return}if(or(t)){var o=t[Me],a=o.values.get(e);a?o.write(e,n):o.addObservableProp(e,n,o.defaultEnhancer)}else if(nn(t))t.set(e,n);else if(In(t))t.add(e);else if(br(t))typeof e!="number"&&(e=parseInt(e,10)),Et(e>=0,"Not a valid index: '"+e+"'"),Qn(),e>=t.length&&(t.length=e+1),t[e]=n,er();else return De(process.env.NODE_ENV!=="production"&&"'set()' can only be used on observable objects, arrays and maps")}function ph(t,e,n,r){return ab(t,e,n)}function ab(t,e,n){return bs(t).observe(e,n)}var sb={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function io(t,e,n,r){return r.detectCycles&&t.set(e,n),n}function Zr(t,e,n){if(!e.recurseEverything&&!qr(t)||typeof t!="object")return t;if(t===null)return null;if(t instanceof Date)return t;if(I0(t))return Zr(t.get(),e,n);qr(t)&&ro(t);var r=e.detectCycles===!0;if(r&&t!==null&&n.has(t))return n.get(t);if(br(t)||Array.isArray(t)){var i=io(n,t,[],e),o=t.map(function(h){return Zr(h,e,n)});i.length=o.length;for(var a=0,s=o.length;a<s;a++)i[a]=o[a];return i}if(In(t)||Object.getPrototypeOf(t)===Set.prototype)if(e.exportMapsAsObjects===!1){var l=io(n,t,new Set,e);return t.forEach(function(h){l.add(Zr(h,e,n))}),l}else{var u=io(n,t,[],e);return t.forEach(function(h){u.push(Zr(h,e,n))}),u}if(nn(t)||Object.getPrototypeOf(t)===Map.prototype)if(e.exportMapsAsObjects===!1){var f=io(n,t,new Map,e);return t.forEach(function(h,v){f.set(v,Zr(h,e,n))}),f}else{var c=io(n,t,{},e);return t.forEach(function(h,v){c[v]=Zr(h,e,n)}),c}var d=io(n,t,{},e);return Su(t).forEach(function(h){d[h]=Zr(t[h],e,n)}),d}function tr(t,e){typeof e=="boolean"&&(e={detectCycles:e}),e||(e=sb),e.detectCycles=e.detectCycles===void 0?e.recurseEverything===!0:e.detectCycles===!0;var n;return e.detectCycles&&(n=new Map),Zr(t,e,n)}function lb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;typeof t[t.length-1]=="boolean"&&(n=t.pop());var r=ub(t);if(!r)return De(process.env.NODE_ENV!=="production"&&"'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");r.isTracing===Jn.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?Jn.BREAK:Jn.LOG}function ub(t){switch(t.length){case 0:return ie.trackingDerivation;case 1:return Jr(t[0]);case 2:return Jr(t[0],t[1])}}function nr(t,e){e===void 0&&(e=void 0),Qn();try{return t.apply(e)}finally{er()}}function ms(t){return t[Me]}function _s(t){return typeof t=="string"||typeof t=="number"||typeof t=="symbol"}var fb={has:function(t,e){if(e===Me||e==="constructor"||e===os)return!0;var n=ms(t);return _s(e)?n.has(e):e in t},get:function(t,e){if(e===Me||e==="constructor"||e===os)return t[e];var n=ms(t),r=n.values.get(e);if(r instanceof Ki){var i=r.get();return i===void 0&&n.has(e),i}return _s(e)&&n.has(e),t[e]},set:function(t,e,n){return _s(e)?(ku(t,e,n),!0):!1},deleteProperty:function(t,e){if(!_s(e))return!1;var n=ms(t);return n.remove(e),!0},ownKeys:function(t){var e=ms(t);return e.keysAtom.reportObserved(),Reflect.ownKeys(t)},preventExtensions:function(t){return De("Dynamic observable objects cannot be frozen"),!1}};function cb(t){var e=new Proxy(t,fb);return t[Me].proxy=e,e}function mr(t){return t.interceptors!==void 0&&t.interceptors.length>0}function Zo(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),Eu(function(){var r=n.indexOf(e);r!==-1&&n.splice(r,1)})}function _r(t,e){var n=eo();try{for(var r=Tu(t.interceptors||[]),i=0,o=r.length;i<o&&(e=r[i](e),Et(!e||e.type,"Intercept handlers should return nothing or a change object"),!!e);i++);return e}finally{Kr(n)}}function rr(t){return t.changeListeners!==void 0&&t.changeListeners.length>0}function Jo(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),Eu(function(){var r=n.indexOf(e);r!==-1&&n.splice(r,1)})}function ir(t,e){var n=eo(),r=t.changeListeners;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](e);Kr(n)}}var db=1e4,hb={get:function(t,e){return e===Me?t[Me]:e==="length"?t[Me].getArrayLength():typeof e=="number"?Lr.get.call(t,e):typeof e=="string"&&!isNaN(e)?Lr.get.call(t,parseInt(e)):Lr.hasOwnProperty(e)?Lr[e]:t[e]},set:function(t,e,n){return e==="length"&&t[Me].setArrayLength(n),typeof e=="number"&&Lr.set.call(t,e,n),typeof e=="symbol"||isNaN(e)?t[e]=n:Lr.set.call(t,parseInt(e),n),!0},preventExtensions:function(t){return De("Observable arrays cannot be frozen"),!1}};function pb(t,e,n,r){n===void 0&&(n="ObservableArray@"+pn()),r===void 0&&(r=!1);var i=new vh(n,e,r);d0(i.values,Me,i);var o=new Proxy(i.values,hb);if(i.proxy=o,t&&t.length){var a=ds(!0);i.spliceWithArray(0,0,t),hs(a)}return o}var vh=function(){function t(e,n,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new Ki(e||"ObservableArray@"+pn()),this.enhancer=function(i,o){return n(i,o,e+"[..]")}}return t.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},t.prototype.dehanceValues=function(e){return this.dehancer!==void 0&&e.length>0?e.map(this.dehancer):e},t.prototype.intercept=function(e){return Zo(this,e)},t.prototype.observe=function(e,n){return n===void 0&&(n=!1),n&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Jo(this,e)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(e){if(typeof e!="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var n=this.values.length;if(e!==n)if(e>n){for(var r=new Array(e-n),i=0;i<e-n;i++)r[i]=void 0;this.spliceWithArray(n,0,r)}else this.spliceWithArray(e,n-e)},t.prototype.updateArrayLength=function(e,n){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=n},t.prototype.spliceWithArray=function(e,n,r){var i=this;Qi(this.atom);var o=this.values.length;if(e===void 0?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),arguments.length===1?n=o-e:n==null?n=0:n=Math.max(0,Math.min(n,o-e)),r===void 0&&(r=rs),mr(this)){var a=_r(this,{object:this.proxy,type:"splice",index:e,removedCount:n,added:r});if(!a)return rs;n=a.removedCount,r=a.added}if(r=r.length===0?r:r.map(function(u){return i.enhancer(u,void 0)}),process.env.NODE_ENV!=="production"){var s=r.length-n;this.updateArrayLength(o,s)}var l=this.spliceItemsIntoValues(e,n,r);return(n!==0||r.length!==0)&&this.notifyArraySplice(e,r,l),this.dehanceValues(l)},t.prototype.spliceItemsIntoValues=function(e,n,r){var i;if(r.length<db)return(i=this.values).splice.apply(i,Tu([e,n],r));var o=this.values.slice(e,e+n);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+n)),o},t.prototype.notifyArrayChildUpdate=function(e,n,r){var i=!this.owned&&Ht(),o=rr(this),a=o||i?{object:this.proxy,type:"update",index:e,newValue:n,oldValue:r}:null;i&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},a),{name:this.atom.name})),this.atom.reportChanged(),o&&ir(this,a),i&&process.env.NODE_ENV!=="production"&&Sn()},t.prototype.notifyArraySplice=function(e,n,r){var i=!this.owned&&Ht(),o=rr(this),a=o||i?{object:this.proxy,type:"splice",index:e,removed:r,added:n,removedCount:r.length,addedCount:n.length}:null;i&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},a),{name:this.atom.name})),this.atom.reportChanged(),o&&ir(this,a),i&&process.env.NODE_ENV!=="production"&&Sn()},t}(),Lr={intercept:function(t){return this[Me].intercept(t)},observe:function(t,e){e===void 0&&(e=!1);var n=this[Me];return n.observe(t,e)},clear:function(){return this.splice(0)},replace:function(t){var e=this[Me];return e.spliceWithArray(0,e.values.length,t)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=this[Me];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(t);case 2:return i.spliceWithArray(t,e)}return i.spliceWithArray(t,e,n)},spliceWithArray:function(t,e,n){var r=this[Me];return r.spliceWithArray(t,e,n)},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[Me];return n.spliceWithArray(n.values.length,0,t),n.values.length},pop:function(){return this.splice(Math.max(this[Me].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[Me];return n.spliceWithArray(0,0,t),n.values.length},reverse:function(){process.env.NODE_ENV!=="production"&&console.warn("[mobx] `observableArray.reverse()` will not update the array in place. Use `observableArray.slice().reverse()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().reverse())` to reverse & update in place");var t=this.slice();return t.reverse.apply(t,arguments)},sort:function(t){process.env.NODE_ENV!=="production"&&console.warn("[mobx] `observableArray.sort()` will not update the array in place. Use `observableArray.slice().sort()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().sort())` to sort & update in place");var e=this.slice();return e.sort.apply(e,arguments)},remove:function(t){var e=this[Me],n=e.dehanceValues(e.values).indexOf(t);return n>-1?(this.splice(n,1),!0):!1},get:function(t){var e=this[Me];if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(t,e){var n=this[Me],r=n.values;if(t<r.length){Qi(n.atom);var i=r[t];if(mr(n)){var o=_r(n,{type:"update",object:n.proxy,index:t,newValue:e});if(!o)return;e=o.newValue}e=n.enhancer(e,i);var a=e!==i;a&&(r[t]=e,n.notifyArrayChildUpdate(t,e,i))}else if(t===r.length)n.spliceWithArray(t,0,[e]);else throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(t){typeof Array.prototype[t]=="function"&&(Lr[t]=function(){var e=this[Me];e.atom.reportObserved();var n=e.dehanceValues(e.values);return n[t].apply(n,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(t){typeof Array.prototype[t]=="function"&&(Lr[t]=function(e,n){var r=this,i=this[Me];i.atom.reportObserved();var o=i.dehanceValues(i.values);return o[t](function(a,s){return e.call(n,a,s,r)},n)})}),["reduce","reduceRight"].forEach(function(t){Lr[t]=function(){var e=this,n=this[Me];n.atom.reportObserved();var r=arguments[0];return arguments[0]=function(i,o,a){return o=n.dehanceValue(o),r(i,o,a,e)},n.values[t].apply(n.values,arguments)}});var vb=Vr("ObservableArrayAdministration",vh);function br(t){return wu(t)&&vb(t[Me])}var gh,gb={},Bu=function(){function t(e,n,r){if(n===void 0&&(n=Uo),r===void 0&&(r="ObservableMap@"+pn()),this.enhancer=n,this.name=r,this[gh]=gb,this._keysAtom=Au(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return t.prototype._has=function(e){return this._data.has(e)},t.prototype.has=function(e){var n=this;if(!ie.trackingDerivation)return this._has(e);var r=this._hasMap.get(e);if(!r){var i=r=new wi(this._has(e),as,this.name+"."+Ln(e)+"?",!1);this._hasMap.set(e,i),ah(i,function(){return n._hasMap.delete(e)})}return r.get()},t.prototype.set=function(e,n){var r=this._has(e);if(mr(this)){var i=_r(this,{type:r?"update":"add",object:this,newValue:n,name:e});if(!i)return this;n=i.newValue}return r?this._updateValue(e,n):this._addValue(e,n),this},t.prototype.delete=function(e){var n=this;if(Qi(this._keysAtom),mr(this)){var r=_r(this,{type:"delete",object:this,name:e});if(!r)return!1}if(this._has(e)){var i=Ht(),o=rr(this),r=o||i?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return i&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},r),{name:this.name,key:e})),nr(function(){n._keysAtom.reportChanged(),n._updateHasMapEntry(e,!1);var s=n._data.get(e);s.setNewValue(void 0),n._data.delete(e)}),o&&ir(this,r),i&&process.env.NODE_ENV!=="production"&&Sn(),!0}return!1},t.prototype._updateHasMapEntry=function(e,n){var r=this._hasMap.get(e);r&&r.setNewValue(n)},t.prototype._updateValue=function(e,n){var r=this._data.get(e);if(n=r.prepareNewValue(n),n!==ie.UNCHANGED){var i=Ht(),o=rr(this),a=o||i?{type:"update",object:this,oldValue:r.value,name:e,newValue:n}:null;i&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},a),{name:this.name,key:e})),r.setNewValue(n),o&&ir(this,a),i&&process.env.NODE_ENV!=="production"&&Sn()}},t.prototype._addValue=function(e,n){var r=this;Qi(this._keysAtom),nr(function(){var s=new wi(n,r.enhancer,r.name+"."+Ln(e),!1);r._data.set(e,s),n=s.value,r._updateHasMapEntry(e,!0),r._keysAtom.reportChanged()});var i=Ht(),o=rr(this),a=o||i?{type:"add",object:this,name:e,newValue:n}:null;i&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},a),{name:this.name,key:e})),o&&ir(this,a),i&&process.env.NODE_ENV!=="production"&&Sn()},t.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var e=this,n=this.keys();return xs({next:function(){var r=n.next(),i=r.done,o=r.value;return{done:i,value:i?void 0:e.get(o)}}})},t.prototype.entries=function(){var e=this,n=this.keys();return xs({next:function(){var r=n.next(),i=r.done,o=r.value;return{done:i,value:i?void 0:[o,e.get(o)]}}})},t.prototype[gh=Me,Symbol.iterator]=function(){return this.entries()},t.prototype.forEach=function(e,n){var r,i;try{for(var o=Zn(this),a=o.next();!a.done;a=o.next()){var s=Zi(a.value,2),l=s[0],u=s[1];e.call(n,u,l,this)}}catch(f){r={error:f}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},t.prototype.merge=function(e){var n=this;return nn(e)&&(e=e.toJS()),nr(function(){var r=ds(!0);try{bi(e)?Su(e).forEach(function(i){return n.set(i,e[i])}):Array.isArray(e)?e.forEach(function(i){var o=Zi(i,2),a=o[0],s=o[1];return n.set(a,s)}):Vi(e)?(e.constructor!==Map&&De("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach(function(i,o){return n.set(o,i)})):e!=null&&De("Cannot initialize map from "+e)}finally{hs(r)}}),this},t.prototype.clear=function(){var e=this;nr(function(){Gd(function(){var n,r;try{for(var i=Zn(e.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;e.delete(a)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}})})},t.prototype.replace=function(e){var n=this;return nr(function(){var r,i,o,a,s=c0(e),l=new Map,u=!1;try{for(var f=Zn(n._data.keys()),c=f.next();!c.done;c=f.next()){var d=c.value;if(!s.has(d)){var h=n.delete(d);if(h)u=!0;else{var v=n._data.get(d);l.set(d,v)}}}}catch(I){r={error:I}}finally{try{c&&!c.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}try{for(var p=Zn(s.entries()),g=p.next();!g.done;g=p.next()){var y=Zi(g.value,2),d=y[0],v=y[1],m=n._data.has(d);if(n.set(d,v),n._data.has(d)){var A=n._data.get(d);l.set(d,A),m||(u=!0)}}}catch(I){o={error:I}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}if(!u)if(n._data.size!==l.size)n._keysAtom.reportChanged();else for(var T=n._data.keys(),k=l.keys(),C=T.next(),S=k.next();!C.done;){if(C.value!==S.value){n._keysAtom.reportChanged();break}C=T.next(),S=k.next()}n._data=l}),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var e,n,r={};try{for(var i=Zn(this),o=i.next();!o.done;o=i.next()){var a=Zi(o.value,2),s=a[0],l=a[1];r[typeof s=="symbol"?s:Ln(s)]=l}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map(function(n){return Ln(n)+": "+(""+e.get(n))}).join(", ")+" }]"},t.prototype.observe=function(e,n){return process.env.NODE_ENV!=="production"&&Et(n!==!0,"`observe` doesn't support fireImmediately=true in combination with maps."),Jo(this,e)},t.prototype.intercept=function(e){return Zo(this,e)},t}(),nn=Vr("ObservableMap",Bu),yh,yb={},mh=function(){function t(e,n,r){if(n===void 0&&(n=Uo),r===void 0&&(r="ObservableSet@"+pn()),this.name=r,this[yh]=yb,this._data=new Set,this._atom=Au(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(i,o){return n(i,o,r)},e&&this.replace(e)}return t.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},t.prototype.clear=function(){var e=this;nr(function(){Gd(function(){var n,r;try{for(var i=Zn(e._data.values()),o=i.next();!o.done;o=i.next()){var a=o.value;e.delete(a)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}})})},t.prototype.forEach=function(e,n){var r,i;try{for(var o=Zn(this),a=o.next();!a.done;a=o.next()){var s=a.value;e.call(n,s,s,this)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(e){var n=this;if(Qi(this._atom),mr(this)){var r=_r(this,{type:"add",object:this,newValue:e});if(!r)return this}if(!this.has(e)){nr(function(){n._data.add(n.enhancer(e,void 0)),n._atom.reportChanged()});var i=Ht(),o=rr(this),r=o||i?{type:"add",object:this,newValue:e}:null;i&&process.env.NODE_ENV!=="production"&&wn(r),o&&ir(this,r),i&&process.env.NODE_ENV!=="production"&&Sn()}return this},t.prototype.delete=function(e){var n=this;if(mr(this)){var r=_r(this,{type:"delete",object:this,oldValue:e});if(!r)return!1}if(this.has(e)){var i=Ht(),o=rr(this),r=o||i?{type:"delete",object:this,oldValue:e}:null;return i&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},r),{name:this.name})),nr(function(){n._atom.reportChanged(),n._data.delete(e)}),o&&ir(this,r),i&&process.env.NODE_ENV!=="production"&&Sn(),!0}return!1},t.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},t.prototype.entries=function(){var e=0,n=Array.from(this.keys()),r=Array.from(this.values());return xs({next:function(){var i=e;return e+=1,i<r.length?{value:[n[i],r[i]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var e=this,n=0,r=Array.from(this._data.values());return xs({next:function(){return n<r.length?{value:e.dehanceValue(r[n++]),done:!1}:{done:!0}}})},t.prototype.replace=function(e){var n=this;return In(e)&&(e=e.toJS()),nr(function(){var r=ds(!0);try{Array.isArray(e)?(n.clear(),e.forEach(function(i){return n.add(i)})):Xo(e)?(n.clear(),e.forEach(function(i){return n.add(i)})):e!=null&&De("Cannot initialize set from "+e)}finally{hs(r)}}),this},t.prototype.observe=function(e,n){return process.env.NODE_ENV!=="production"&&Et(n!==!0,"`observe` doesn't support fireImmediately=true in combination with sets."),Jo(this,e)},t.prototype.intercept=function(e){return Zo(this,e)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},t.prototype[yh=Me,Symbol.iterator]=function(){return this.values()},t}(),In=Vr("ObservableSet",mh),_h=function(){function t(e,n,r,i){n===void 0&&(n=new Map),this.target=e,this.values=n,this.name=r,this.defaultEnhancer=i,this.keysAtom=new Ki(r+".keys")}return t.prototype.read=function(e){return this.values.get(e).get()},t.prototype.write=function(e,n){var r=this.target,i=this.values.get(e);if(i instanceof to){i.set(n);return}if(mr(this)){var o=_r(this,{type:"update",object:this.proxy||r,name:e,newValue:n});if(!o)return;n=o.newValue}if(n=i.prepareNewValue(n),n!==ie.UNCHANGED){var a=rr(this),s=Ht(),o=a||s?{type:"update",object:this.proxy||r,oldValue:i.value,name:e,newValue:n}:null;s&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},o),{name:this.name,key:e})),i.setNewValue(n),a&&ir(this,o),s&&process.env.NODE_ENV!=="production"&&Sn()}},t.prototype.has=function(e){var n=this.pendingKeys||(this.pendingKeys=new Map),r=n.get(e);if(r)return r.get();var i=!!this.values.get(e);return r=new wi(i,as,this.name+"."+Ln(e)+"?",!1),n.set(e,r),r.get()},t.prototype.addObservableProp=function(e,n,r){r===void 0&&(r=this.defaultEnhancer);var i=this.target;if(h0(i,e),mr(this)){var o=_r(this,{object:this.proxy||i,name:e,type:"add",newValue:n});if(!o)return;n=o.newValue}var a=new wi(n,r,this.name+"."+Ln(e),!1);this.values.set(e,a),n=a.value,Object.defineProperty(i,e,mb(e)),this.notifyPropertyAddition(e,n)},t.prototype.addComputedProp=function(e,n,r){var i=this.target;r.name=r.name||this.name+"."+Ln(n),this.values.set(n,new to(r)),(e===i||kd(e,n))&&Object.defineProperty(e,n,_b(n))},t.prototype.remove=function(e){if(this.values.has(e)){var n=this.target;if(mr(this)){var r=_r(this,{object:this.proxy||n,name:e,type:"remove"});if(!r)return}try{Qn();var i=rr(this),o=Ht(),a=this.values.get(e),s=a&&a.get();if(a&&a.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var l=this.pendingKeys.get(e);l&&l.set(!1)}delete this.target[e];var r=i||o?{type:"remove",object:this.proxy||n,oldValue:s,name:e}:null;o&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},r),{name:this.name,key:e})),i&&ir(this,r),o&&process.env.NODE_ENV!=="production"&&Sn()}finally{er()}}},t.prototype.illegalAccess=function(e,n){console.warn("Property '"+n+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(e,n){return process.env.NODE_ENV!=="production"&&Et(n!==!0,"`observe` doesn't support the fire immediately property for observable objects."),Jo(this,e)},t.prototype.intercept=function(e){return Zo(this,e)},t.prototype.notifyPropertyAddition=function(e,n){var r=rr(this),i=Ht(),o=r||i?{type:"add",object:this.proxy||this.target,name:e,newValue:n}:null;if(i&&process.env.NODE_ENV!=="production"&&wn(_t(_t({},o),{name:this.name,key:e})),r&&ir(this,o),i&&process.env.NODE_ENV!=="production"&&Sn(),this.pendingKeys){var a=this.pendingKeys.get(e);a&&a.set(!0)}this.keysAtom.reportChanged()},t.prototype.getKeys=function(){var e,n;this.keysAtom.reportObserved();var r=[];try{for(var i=Zn(this.values),o=i.next();!o.done;o=i.next()){var a=Zi(o.value,2),s=a[0],l=a[1];l instanceof wi&&r.push(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t}();function Fu(t,e,n){if(e===void 0&&(e=""),n===void 0&&(n=Uo),Object.prototype.hasOwnProperty.call(t,Me))return t[Me];process.env.NODE_ENV!=="production"&&Et(Object.isExtensible(t),"Cannot make the designated object observable; it is not extensible"),bi(t)||(e=(t.constructor.name||"ObservableObject")+"@"+pn()),e||(e="ObservableObject@"+pn());var r=new _h(t,new Map,Ln(e),n);return Yi(t,Me,r),r}var bh=Object.create(null),xh=Object.create(null);function mb(t){return bh[t]||(bh[t]={configurable:!0,enumerable:!0,get:function(){return this[Me].read(t)},set:function(e){this[Me].write(t,e)}})}function Eh(t){var e=t[Me];return e||(xi(t),t[Me])}function _b(t){return xh[t]||(xh[t]={configurable:ie.computedConfigurable,enumerable:!1,get:function(){return Eh(this).read(t)},set:function(e){Eh(this).write(t,e)}})}var bb=Vr("ObservableObjectAdministration",_h);function or(t){return wu(t)?(xi(t),bb(t[Me])):!1}function Jr(t,e){if(typeof t=="object"&&t!==null){if(br(t))return e!==void 0&&De(process.env.NODE_ENV!=="production"&&"It is not possible to get index atoms from arrays"),t[Me].atom;if(In(t))return t[Me];if(nn(t)){var n=t;if(e===void 0)return n._keysAtom;var r=n._data.get(e)||n._hasMap.get(e);return r||De(process.env.NODE_ENV!=="production"&&"the entry '"+e+"' does not exist in the observable map '"+$u(t)+"'"),r}if(xi(t),e&&!t[Me]&&t[e],or(t)){if(!e)return De(process.env.NODE_ENV!=="production"&&"please specify a property");var r=t[Me].values.get(e);return r||De(process.env.NODE_ENV!=="production"&&"no observable property '"+e+"' found on the observable object '"+$u(t)+"'"),r}if(Ou(t)||no(t)||ys(t))return t}else if(typeof t=="function"&&ys(t[Me]))return t[Me];return De(process.env.NODE_ENV!=="production"&&"Cannot obtain atom from "+t)}function bs(t,e){if(t||De("Expecting some object"),e!==void 0)return bs(Jr(t,e));if(Ou(t)||no(t)||ys(t)||nn(t)||In(t))return t;if(xi(t),t[Me])return t[Me];De(process.env.NODE_ENV!=="production"&&"Cannot obtain administration from "+t)}function $u(t,e){var n;return e!==void 0?n=Jr(t,e):or(t)||nn(t)||In(t)?n=bs(t):n=Jr(t),n.name}var wh=Object.prototype.toString;function Sh(t,e,n){return n===void 0&&(n=-1),Hu(t,e,n)}function Hu(t,e,n,r,i){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var o=typeof t;if(o!=="function"&&o!=="object"&&typeof e!="object")return!1;var a=wh.call(t);if(a!==wh.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}t=Oh(t),e=Oh(e);var s=a==="[object Array]";if(!s){if(typeof t!="object"||typeof e!="object")return!1;var l=t.constructor,u=e.constructor;if(l!==u&&!(typeof l=="function"&&l instanceof l&&typeof u=="function"&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],i=i||[];for(var f=r.length;f--;)if(r[f]===t)return i[f]===e;if(r.push(t),i.push(e),s){if(f=t.length,f!==e.length)return!1;for(;f--;)if(!Hu(t[f],e[f],n-1,r,i))return!1}else{var c=Object.keys(t),d=void 0;if(f=c.length,Object.keys(e).length!==f)return!1;for(;f--;)if(d=c[f],!(xb(e,d)&&Hu(t[d],e[d],n-1,r,i)))return!1}return r.pop(),i.pop(),!0}function Oh(t){return br(t)?t.slice():Vi(t)||nn(t)||Xo(t)||In(t)?Array.from(t.entries()):t}function xb(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xs(t){return t[Symbol.iterator]=Eb,t}function Eb(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");try{process.env.NODE_ENV}catch{var Ah=vs();typeof process>"u"&&(Ah.process={}),Ah.process.env={}}(function(){function t(){}if(t.name!=="testCodeMinification"&&process.env.NODE_ENV!=="production"&&typeof process<"u"&&process.env.IGNORE_MOBX_MINIFY_WARNING!=="true"){var e=["process","env","NODE_ENV"].join(".");console.warn("[mobx] you are running a minified build, but '"+e+"' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle")}})(),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:G0,extras:{getDebugName:$u},$mobx:Me});function wb(t){return!(t.prototype&&t.prototype.render)&&!Ge.isPrototypeOf(t)}function Ch(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.prefix,r=n===void 0?"":n,i=e.suffix,o=i===void 0?"":i,a=t.displayName||t.name||t.constructor&&t.constructor.name||"<component>";return r+a+o}var Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nh=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Mh=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ph=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Dh=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},Rh=console;function Sb(t){var e=Ru().allowStateChanges;return Ru().allowStateChanges=t,e}function Ob(t){Ru().allowStateChanges=t}function Ab(t,e,n,r,i){var o=Sb(t),a=void 0;try{a=e(n,r,i)}finally{Ob(o)}return a}function Lh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=t[e],i=jh[e],o=r?n===!0?function(){i.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),i.apply(this,arguments)}:i;t[e]=o}function Ih(t,e){if(t==null||e==null||(typeof t>"u"?"undefined":Th(t))!=="object"||(typeof e>"u"?"undefined":Th(e))!=="object")return t!==e;var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(var r=void 0,i=n.length-1;r=n[i];i--)if(e[r]!==t[r])return!0;return!1}var jh={componentWillMount:function(){var e=this,n=Ch(this),r=!1,i=!1;function o(c){var d=this[c],h=Au("reactive "+c);Object.defineProperty(this,c,{configurable:!0,enumerable:!0,get:function(){return h.reportObserved(),d},set:function(p){!i&&Ih(d,p)?(d=p,r=!0,h.reportChanged(),r=!1):d=p}})}o.call(this,"props"),o.call(this,"state");var a=this.render.bind(this),s=null,l=!1,u=function(){return s=new qo(n+".render()",function(){if(!l&&(l=!0,typeof e.componentWillReact=="function"&&e.componentWillReact(),e.__$mobxIsUnmounted!==!0)){var d=!0;try{i=!0,r||Ge.prototype.forceUpdate.call(e),d=!1}finally{i=!1,d&&s.dispose()}}}),s.reactComponent=e,f.$mobx=s,e.render=f,f(e.props,e.state,e.context)},f=function(d,h,v){l=!1;var p=void 0,g=void 0;if(s.track(function(){try{g=Ab(!1,a,d,h,v)}catch(y){p=y}}),p)throw p;return g};this.render=u},componentWillUnmount:function(){this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(e,n){return this.state!==n?!0:Ih(this.props,e)}};function Wu(t){if(arguments.length>1&&Rh.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),t.isMobxInjector===!0&&Rh.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),wb(t)){var e,n;return Wu((n=e=function(i){Ph(o,i);function o(){return Nh(this,o),Dh(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return Mh(o,[{key:"render",value:function(){return t.call(this,this.props,this.context)}}]),o}(Ge),e.displayName=Ch(t),n))}if(!t)throw new Error("Please pass a valid component to 'observer'");var r=t.prototype||t;return Cb(r),t.isMobXReactObserver=!0,t}function Cb(t){Lh(t,"componentWillMount",!0),Lh(t,"componentDidMount"),t.shouldComponentUpdate||(t.shouldComponentUpdate=jh.shouldComponentUpdate)}var Tb=Wu(function(t){var e=t.children;return e[0]()});Tb.displayName="Observer";var Nb=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mb(t,e){return e={exports:{}},t(e,e.exports),e.exports}Mb(function(t,e){(function(n,r){t.exports=r()})(Nb,function(){var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);return function f(c,d,h){if(typeof d!="string"){if(u){var v=l(d);v&&v!==u&&f(c,v,h)}var p=o(d);a&&(p=p.concat(a(d)));for(var g=0;g<p.length;++g){var y=p[g];if(!n[y]&&!r[y]&&(!h||!h[y])){var m=s(d,y);try{i(c,y,m)}catch{}}}return c}return c}})});var kh={children:!0,key:!0,ref:!0},Bh=console;if(function(t){Ph(e,t);function e(){return Nh(this,e),Dh(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Mh(e,[{key:"render",value:function(r){var i=r.children;return i.length>1?ae("div",null," ",i," "):i[0]}},{key:"getChildContext",value:function(){var r={},i=this.context.mobxStores;if(i)for(var o in i)r[o]=i[o];for(var a in this.props)!kh[a]&&a!=="suppressChangedStoreWarning"&&(r[a]=this.props[a]);return{mobxStores:r}}},{key:"componentWillReceiveProps",value:function(r){if(Object.keys(r).length!==Object.keys(this.props).length&&Bh.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!r.suppressChangedStoreWarning)for(var i in r)!kh[i]&&this.props[i]!==r[i]&&Bh.warn("MobX Provider: Provided store '"+i+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),e}(Ge),!Ge)throw new Error("mobx-preact requires Preact to be available");var xr,zu,Fh,$h=[],Wt=He,Hh=Wt.__b,Wh=Wt.__r,zh=Wt.diffed,Xh=Wt.__c,Gh=Wt.unmount,Uh=Wt.__;function Pb(){for(var t;t=$h.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Es),t.__H.__h.forEach(Xu),t.__H.__h=[]}catch(e){t.__H.__h=[],Wt.__e(e,t.__v)}}Wt.__b=function(t){xr=null,Hh&&Hh(t)},Wt.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Uh&&Uh(t,e)},Wt.__r=function(t){Wh&&Wh(t);var e=(xr=t.__c).__H;e&&(zu===xr?(e.__h=[],xr.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(Es),e.__h.forEach(Xu),e.__h=[])),zu=xr},Wt.diffed=function(t){zh&&zh(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&($h.push(e)!==1&&Fh===Wt.requestAnimationFrame||((Fh=Wt.requestAnimationFrame)||Db)(Pb)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),zu=xr=null},Wt.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Es),n.__h=n.__h.filter(function(r){return!r.__||Xu(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Wt.__e(r,n.__v)}}),Xh&&Xh(t,e)},Wt.unmount=function(t){Gh&&Gh(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Es(r)}catch(i){e=i}}),n.__H=void 0,e&&Wt.__e(e,n.__v))};var Yh=typeof requestAnimationFrame=="function";function Db(t){var e,n=function(){clearTimeout(r),Yh&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Yh&&(e=requestAnimationFrame(n))}function Es(t){var e=xr,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),xr=e}function Xu(t){var e=xr;t.__c=t.__(),xr=e}function Rb(t,e){for(var n in e)t[n]=e[n];return t}function Vh(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function Kh(t,e){this.props=t,this.context=e}(Kh.prototype=new Ge).isPureReactComponent=!0,Kh.prototype.shouldComponentUpdate=function(t,e){return Vh(this.props,t)||Vh(this.state,e)};var qh=He.__b;He.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),qh&&qh(t)};var Lb=He.__e;He.__e=function(t,e,n,r){if(t.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}Lb(t,e,n,r)};var Zh=He.unmount;function Jh(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=Rb({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return Jh(r,e,n)})),t}function Qh(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return Qh(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function Gu(){this.__u=0,this.o=null,this.__b=null}function ep(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ws(){this.i=null,this.l=null}He.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Zh&&Zh(t)},(Gu.prototype=new Ge).__c=function(t,e){var n=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var i=ep(r.__v),o=!1,a=function(){o||(o=!0,n.__R=null,i?i(s):s())};n.__R=a;var s=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=Qh(l,l.__c.__P,l.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(a,a)},Gu.prototype.componentWillUnmount=function(){this.o=[]},Gu.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Jh(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&ae(Gi,null,t.fallback);return i&&(i.__u&=-33),[ae(Gi,null,e.__a?null:t.children),i]};var tp=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(ws.prototype=new Ge).__a=function(t){var e=this,n=ep(e.__v),r=e.l.get(t);return r[0]++,function(i){var o=function(){e.props.revealOrder?(r.push(i),tp(e,t,r)):i()};n?n(o):o()}},ws.prototype.render=function(t){this.i=null,this.l=new Map;var e=ts(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},ws.prototype.componentDidUpdate=ws.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){tp(t,n,e)})};var Ib=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,jb=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,kb=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Bb=/[A-Z0-9]/g,Fb=typeof document<"u",$b=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function np(t,e,n){return e.__k==null&&(e.textContent=""),s0(t,e),typeof n=="function"&&n(),t?t.__c:null}Ge.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Ge.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var rp=He.event;function Hb(){}function Wb(){return this.cancelBubble}function zb(){return this.defaultPrevented}He.event=function(t){return rp&&(t=rp(t)),t.persist=Hb,t.isPropagationStopped=Wb,t.isDefaultPrevented=zb,t.nativeEvent=t};var Xb={enumerable:!1,configurable:!0,get:function(){return this.class}},ip=He.vnode;He.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,i={},o=r.indexOf("-")===-1;for(var a in n){var s=n[a];if(!(a==="value"&&"defaultValue"in n&&s==null||Fb&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&s===!0?s="":l==="translate"&&s==="no"?s=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||$b(n.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":kb.test(a)&&(a=l):l=a="oninput":o&&jb.test(a)?a=a.replace(Bb,"-$&").toLowerCase():s===null&&(s=void 0),l==="oninput"&&i[a=l]&&(a="oninputCapture"),i[a]=s}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ts(n.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=ts(n.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",Xb)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),e.props=i}(t),t.$$typeof=Ib,ip&&ip(t)};var op=He.__r;He.__r=function(t){op&&op(t),t.__c};var ap=He.diffed;He.diffed=function(t){ap&&ap(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};var Gb=0;function B(t,e,n,r,i,o){e||(e={});var a,s,l=e;if("ref"in l)for(s in l={},e)s=="ref"?a=e[s]:l[s]=e[s];var u={type:t,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Gb,__i:-1,__u:0,__source:i,__self:o};if(typeof t=="function"&&(a=t.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return He.vnode&&He.vnode(u),u}var sp=typeof global=="object"&&global&&global.Object===Object&&global,Ub=typeof self=="object"&&self&&self.Object===Object&&self,kt=sp||Ub||Function("return this")(),qt=kt.Symbol,lp=Object.prototype,Yb=lp.hasOwnProperty,Vb=lp.toString,Qo=qt?qt.toStringTag:void 0;function Kb(t){var e=Yb.call(t,Qo),n=t[Qo];try{t[Qo]=void 0;var r=!0}catch{}var i=Vb.call(t);return r&&(e?t[Qo]=n:delete t[Qo]),i}var qb=Object.prototype,Zb=qb.toString;function Jb(t){return Zb.call(t)}var Qb="[object Null]",ex="[object Undefined]",up=qt?qt.toStringTag:void 0;function rn(t){return t==null?t===void 0?ex:Qb:up&&up in Object(t)?Kb(t):Jb(t)}function Nt(t){return t!=null&&typeof t=="object"}var tx="[object Symbol]";function On(t){return typeof t=="symbol"||Nt(t)&&rn(t)==tx}var nx=NaN;function fp(t){return typeof t=="number"?t:On(t)?nx:+t}function Ot(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Le=Array.isArray,cp=qt?qt.prototype:void 0,dp=cp?cp.toString:void 0;function An(t){if(typeof t=="string")return t;if(Le(t))return Ot(t,An)+"";if(On(t))return dp?dp.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Ss(t,e){return function(n,r){var i;if(n===void 0&&r===void 0)return e;if(n!==void 0&&(i=n),r!==void 0){if(i===void 0)return r;typeof n=="string"||typeof r=="string"?(n=An(n),r=An(r)):(n=fp(n),r=fp(r)),i=t(n,r)}return i}}var rx=Ss(function(t,e){return t+e},0),ix=/\s/;function hp(t){for(var e=t.length;e--&&ix.test(t.charAt(e)););return e}var ox=/^\s+/;function pp(t){return t&&t.slice(0,hp(t)+1).replace(ox,"")}function At(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var vp=NaN,ax=/^[-+]0x[0-9a-f]+$/i,sx=/^0b[01]+$/i,lx=/^0o[0-7]+$/i,ux=parseInt;function jn(t){if(typeof t=="number")return t;if(On(t))return vp;if(At(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=At(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=pp(t);var n=sx.test(t);return n||lx.test(t)?ux(t.slice(2),n?2:8):ax.test(t)?vp:+t}var fx=1/0,cx=17976931348623157e292;function Ir(t){if(!t)return t===0?t:0;if(t=jn(t),t===fx||t===-1/0){var e=t<0?-1:1;return e*cx}return t===t?t:0}function We(t){var e=Ir(t),n=e%1;return e===e?n?e-n:e:0}var dx="Expected a function";function hx(t,e){if(typeof e!="function")throw new TypeError(dx);return t=We(t),function(){if(--t<1)return e.apply(this,arguments)}}function vn(t){return t}var px="[object AsyncFunction]",vx="[object Function]",gx="[object GeneratorFunction]",yx="[object Proxy]";function jr(t){if(!At(t))return!1;var e=rn(t);return e==vx||e==gx||e==px||e==yx}var Os=kt["__core-js_shared__"],gp=function(){var t=/[^.]+$/.exec(Os&&Os.keys&&Os.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function mx(t){return!!gp&&gp in t}var _x=Function.prototype,bx=_x.toString;function Oi(t){if(t!=null){try{return bx.call(t)}catch{}try{return t+""}catch{}}return""}var xx=/[\\^$.*+?()[\]{}|]/g,Ex=/^\[object .+?Constructor\]$/,wx=Function.prototype,Sx=Object.prototype,Ox=wx.toString,Ax=Sx.hasOwnProperty,Cx=RegExp("^"+Ox.call(Ax).replace(xx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yp(t){if(!At(t)||mx(t))return!1;var e=jr(t)?Cx:Ex;return e.test(Oi(t))}function Tx(t,e){return t==null?void 0:t[e]}function Ai(t,e){var n=Tx(t,e);return yp(n)?n:void 0}var ea=Ai(kt,"WeakMap"),As=ea&&new ea,mp=As?function(t,e){return As.set(t,e),t}:vn,_p=Object.create,oo=function(){function t(){}return function(e){if(!At(e))return{};if(_p)return _p(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function ta(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=oo(t.prototype),r=t.apply(n,e);return At(r)?r:n}}var Nx=1;function Mx(t,e,n){var r=e&Nx,i=ta(t);function o(){var a=this&&this!==kt&&this instanceof o?i:t;return a.apply(r?n:this,arguments)}return o}function Cn(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Px=Math.max;function bp(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,l=e.length,u=Px(o-a,0),f=Array(l+u),c=!r;++s<l;)f[s]=e[s];for(;++i<a;)(c||i<o)&&(f[n[i]]=t[i]);for(;u--;)f[s++]=t[i++];return f}var Dx=Math.max;function xp(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,f=Dx(o-s,0),c=Array(f+u),d=!r;++i<f;)c[i]=t[i];for(var h=i;++l<u;)c[h+l]=e[l];for(;++a<s;)(d||i<o)&&(c[h+n[a]]=t[i++]);return c}function Rx(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function Cs(){}var Lx=4294967295;function Ze(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Lx,this.__views__=[]}Ze.prototype=oo(Cs.prototype),Ze.prototype.constructor=Ze;function ao(){}var Uu=As?function(t){return As.get(t)}:ao,so={},Ix=Object.prototype,jx=Ix.hasOwnProperty;function Ts(t){for(var e=t.name+"",n=so[e],r=jx.call(so,e)?n.length:0;r--;){var i=n[r],o=i.func;if(o==null||o==t)return i.name}return e}function kn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}kn.prototype=oo(Cs.prototype),kn.prototype.constructor=kn;function gn(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function Ep(t){if(t instanceof Ze)return t.clone();var e=new kn(t.__wrapped__,t.__chain__);return e.__actions__=gn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var kx=Object.prototype,Bx=kx.hasOwnProperty;function _(t){if(Nt(t)&&!Le(t)&&!(t instanceof Ze)){if(t instanceof kn)return t;if(Bx.call(t,"__wrapped__"))return Ep(t)}return new kn(t)}_.prototype=Cs.prototype,_.prototype.constructor=_;function Yu(t){var e=Ts(t),n=_[e];if(typeof n!="function"||!(e in Ze.prototype))return!1;if(t===n)return!0;var r=Uu(n);return!!r&&t===r[0]}var Fx=800,$x=16,Hx=Date.now;function wp(t){var e=0,n=0;return function(){var r=Hx(),i=$x-(r-n);if(n=r,i>0){if(++e>=Fx)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Sp=wp(mp),Wx=/\{\n\/\* \[wrapped with (.+)\] \*/,zx=/,? & /;function Xx(t){var e=t.match(Wx);return e?e[1].split(zx):[]}var Gx=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Ux(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Gx,`{
/* [wrapped with `+e+`] */
`)}function Vu(t){return function(){return t}}var Ns=function(){try{var t=Ai(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Yx=Ns?function(t,e){return Ns(t,"toString",{configurable:!0,enumerable:!1,value:Vu(e),writable:!0})}:vn,Ku=wp(Yx);function Bn(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function Ms(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Op(t){return t!==t}function Vx(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function lo(t,e,n){return e===e?Vx(t,e,n):Ms(t,Op,n)}function Ps(t,e){var n=t==null?0:t.length;return!!n&&lo(t,e,0)>-1}var Kx=1,qx=2,Zx=8,Jx=16,Qx=32,eE=64,tE=128,nE=256,rE=512,iE=[["ary",tE],["bind",Kx],["bindKey",qx],["curry",Zx],["curryRight",Jx],["flip",rE],["partial",Qx],["partialRight",eE],["rearg",nE]];function oE(t,e){return Bn(iE,function(n){var r="_."+n[0];e&n[1]&&!Ps(t,r)&&t.push(r)}),t.sort()}function Ap(t,e,n){var r=e+"";return Ku(t,Ux(r,oE(Xx(r),n)))}var aE=4,sE=8,Cp=32,Tp=64;function Np(t,e,n,r,i,o,a,s,l,u){var f=e&sE,c=f?a:void 0,d=f?void 0:a,h=f?o:void 0,v=f?void 0:o;e|=f?Cp:Tp,e&=~(f?Tp:Cp),e&aE||(e&=-4);var p=[t,e,i,h,c,v,d,s,l,u],g=n.apply(void 0,p);return Yu(t)&&Sp(g,p),g.placeholder=r,Ap(g,t,e)}function uo(t){var e=t;return e.placeholder}var lE=9007199254740991,uE=/^(?:0|[1-9]\d*)$/;function kr(t,e){var n=typeof t;return e=e??lE,!!e&&(n=="number"||n!="symbol"&&uE.test(t))&&t>-1&&t%1==0&&t<e}var fE=Math.min;function cE(t,e){for(var n=t.length,r=fE(e.length,n),i=gn(t);r--;){var o=e[r];t[r]=kr(o,n)?i[o]:void 0}return t}var Mp="__lodash_placeholder__";function Qr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];(a===e||a===Mp)&&(t[n]=Mp,o[i++]=n)}return o}var dE=1,hE=2,pE=8,vE=16,gE=128,yE=512;function Ds(t,e,n,r,i,o,a,s,l,u){var f=e&gE,c=e&dE,d=e&hE,h=e&(pE|vE),v=e&yE,p=d?void 0:ta(t);function g(){for(var y=arguments.length,m=Array(y),A=y;A--;)m[A]=arguments[A];if(h)var T=uo(g),k=Rx(m,T);if(r&&(m=bp(m,r,i,h)),o&&(m=xp(m,o,a,h)),y-=k,h&&y<u){var C=Qr(m,T);return Np(t,e,Ds,g.placeholder,n,m,C,s,l,u-y)}var S=c?n:this,I=d?S[t]:t;return y=m.length,s?m=cE(m,s):v&&y>1&&m.reverse(),f&&l<y&&(m.length=l),this&&this!==kt&&this instanceof g&&(I=p||ta(I)),I.apply(S,m)}return g}function mE(t,e,n){var r=ta(t);function i(){for(var o=arguments.length,a=Array(o),s=o,l=uo(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Qr(a,l);if(o-=u.length,o<n)return Np(t,e,Ds,i.placeholder,void 0,a,u,void 0,void 0,n-o);var f=this&&this!==kt&&this instanceof i?r:t;return Cn(f,this,a)}return i}var _E=1;function bE(t,e,n,r){var i=e&_E,o=ta(t);function a(){for(var s=-1,l=arguments.length,u=-1,f=r.length,c=Array(f+l),d=this&&this!==kt&&this instanceof a?o:t;++u<f;)c[u]=r[u];for(;l--;)c[u++]=arguments[++s];return Cn(d,i?n:this,c)}return a}var Pp="__lodash_placeholder__",qu=1,xE=2,EE=4,Dp=8,na=128,Rp=256,wE=Math.min;function SE(t,e){var n=t[1],r=e[1],i=n|r,o=i<(qu|xE|na),a=r==na&&n==Dp||r==na&&n==Rp&&t[7].length<=e[8]||r==(na|Rp)&&e[7].length<=e[8]&&n==Dp;if(!(o||a))return t;r&qu&&(t[2]=e[2],i|=n&qu?0:EE);var s=e[3];if(s){var l=t[3];t[3]=l?bp(l,s,e[4]):s,t[4]=l?Qr(t[3],Pp):e[4]}return s=e[5],s&&(l=t[5],t[5]=l?xp(l,s,e[6]):s,t[6]=l?Qr(t[5],Pp):e[6]),s=e[7],s&&(t[7]=s),r&na&&(t[8]=t[8]==null?e[8]:wE(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}var OE="Expected a function",Lp=1,AE=2,Ip=8,jp=16,kp=32,CE=64,Bp=Math.max;function Br(t,e,n,r,i,o,a,s){var l=e&AE;if(!l&&typeof t!="function")throw new TypeError(OE);var u=r?r.length:0;if(u||(e&=-97,r=i=void 0),a=a===void 0?a:Bp(We(a),0),s=s===void 0?s:We(s),u-=i?i.length:0,e&CE){var f=r,c=i;r=i=void 0}var d=l?void 0:Uu(t),h=[t,e,n,r,i,f,c,o,a,s];if(d&&SE(h,d),t=h[0],e=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===void 0?l?0:t.length:Bp(h[9]-u,0),!s&&e&(Ip|jp)&&(e&=-25),!e||e==Lp)var v=Mx(t,e,n);else e==Ip||e==jp?v=mE(t,e,s):(e==kp||e==(Lp|kp))&&!i.length?v=bE(t,e,n,r):v=Ds.apply(void 0,h);var p=d?mp:Sp;return Ap(p(v,h),t,e)}var TE=128;function Fp(t,e,n){return e=n?void 0:e,e=t&&e==null?t.length:e,Br(t,TE,void 0,void 0,void 0,void 0,e)}function Fr(t,e,n){e=="__proto__"&&Ns?Ns(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ar(t,e){return t===e||t!==t&&e!==e}var NE=Object.prototype,ME=NE.hasOwnProperty;function ra(t,e,n){var r=t[e];(!(ME.call(t,e)&&ar(r,n))||n===void 0&&!(e in t))&&Fr(t,e,n)}function Er(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;l===void 0&&(l=t[s]),i?Fr(n,s,l):ra(n,s,l)}return n}var $p=Math.max;function Hp(t,e,n){return e=$p(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=$p(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Cn(t,this,s)}}function Ue(t,e){return Ku(Hp(t,e,vn),t+"")}var PE=9007199254740991;function Rs(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=PE}function yn(t){return t!=null&&Rs(t.length)&&!jr(t)}function on(t,e,n){if(!At(n))return!1;var r=typeof e;return(r=="number"?yn(n)&&kr(e,n.length):r=="string"&&e in n)?ar(n[e],t):!1}function fo(t){return Ue(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,a&&on(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}var DE=Object.prototype;function ia(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||DE;return t===n}function Zu(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var RE="[object Arguments]";function Wp(t){return Nt(t)&&rn(t)==RE}var zp=Object.prototype,LE=zp.hasOwnProperty,IE=zp.propertyIsEnumerable,Ci=Wp(function(){return arguments}())?Wp:function(t){return Nt(t)&&LE.call(t,"callee")&&!IE.call(t,"callee")};function Ju(){return!1}var Xp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gp=Xp&&typeof module=="object"&&module&&!module.nodeType&&module,jE=Gp&&Gp.exports===Xp,Up=jE?kt.Buffer:void 0,kE=Up?Up.isBuffer:void 0,ei=kE||Ju,BE="[object Arguments]",FE="[object Array]",$E="[object Boolean]",HE="[object Date]",WE="[object Error]",zE="[object Function]",XE="[object Map]",GE="[object Number]",UE="[object Object]",YE="[object RegExp]",VE="[object Set]",KE="[object String]",qE="[object WeakMap]",ZE="[object ArrayBuffer]",JE="[object DataView]",QE="[object Float32Array]",ew="[object Float64Array]",tw="[object Int8Array]",nw="[object Int16Array]",rw="[object Int32Array]",iw="[object Uint8Array]",ow="[object Uint8ClampedArray]",aw="[object Uint16Array]",sw="[object Uint32Array]",wt={};wt[QE]=wt[ew]=wt[tw]=wt[nw]=wt[rw]=wt[iw]=wt[ow]=wt[aw]=wt[sw]=!0,wt[BE]=wt[FE]=wt[ZE]=wt[$E]=wt[JE]=wt[HE]=wt[WE]=wt[zE]=wt[XE]=wt[GE]=wt[UE]=wt[YE]=wt[VE]=wt[KE]=wt[qE]=!1;function lw(t){return Nt(t)&&Rs(t.length)&&!!wt[rn(t)]}function Tn(t){return function(e){return t(e)}}var Yp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oa=Yp&&typeof module=="object"&&module&&!module.nodeType&&module,uw=oa&&oa.exports===Yp,Qu=uw&&sp.process,Fn=function(){try{var t=oa&&oa.require&&oa.require("util").types;return t||Qu&&Qu.binding&&Qu.binding("util")}catch{}}(),Vp=Fn&&Fn.isTypedArray,co=Vp?Tn(Vp):lw,fw=Object.prototype,cw=fw.hasOwnProperty;function Kp(t,e){var n=Le(t),r=!n&&Ci(t),i=!n&&!r&&ei(t),o=!n&&!r&&!i&&co(t),a=n||r||i||o,s=a?Zu(t.length,String):[],l=s.length;for(var u in t)(e||cw.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||kr(u,l)))&&s.push(u);return s}function qp(t,e){return function(n){return t(e(n))}}var dw=qp(Object.keys,Object),hw=Object.prototype,pw=hw.hasOwnProperty;function ef(t){if(!ia(t))return dw(t);var e=[];for(var n in Object(t))pw.call(t,n)&&n!="constructor"&&e.push(n);return e}function Bt(t){return yn(t)?Kp(t):ef(t)}var vw=Object.prototype,gw=vw.hasOwnProperty,lt=fo(function(t,e){if(ia(e)||yn(e)){Er(e,Bt(e),t);return}for(var n in e)gw.call(e,n)&&ra(t,n,e[n])});function yw(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var mw=Object.prototype,_w=mw.hasOwnProperty;function bw(t){if(!At(t))return yw(t);var e=ia(t),n=[];for(var r in t)r=="constructor"&&(e||!_w.call(t,r))||n.push(r);return n}function mn(t){return yn(t)?Kp(t,!0):bw(t)}var xw=fo(function(t,e){Er(e,mn(e),t)}),tf=fo(function(t,e,n,r){Er(e,mn(e),t,r)}),Ew=fo(function(t,e,n,r){Er(e,Bt(e),t,r)}),ww=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sw=/^\w*$/;function nf(t,e){if(Le(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||On(t)?!0:Sw.test(t)||!ww.test(t)||e!=null&&t in Object(e)}var aa=Ai(Object,"create");function Ow(){this.__data__=aa?aa(null):{},this.size=0}function Aw(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Cw="__lodash_hash_undefined__",Tw=Object.prototype,Nw=Tw.hasOwnProperty;function Mw(t){var e=this.__data__;if(aa){var n=e[t];return n===Cw?void 0:n}return Nw.call(e,t)?e[t]:void 0}var Pw=Object.prototype,Dw=Pw.hasOwnProperty;function Rw(t){var e=this.__data__;return aa?e[t]!==void 0:Dw.call(e,t)}var Lw="__lodash_hash_undefined__";function Iw(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=aa&&e===void 0?Lw:e,this}function Ti(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ti.prototype.clear=Ow,Ti.prototype.delete=Aw,Ti.prototype.get=Mw,Ti.prototype.has=Rw,Ti.prototype.set=Iw;function jw(){this.__data__=[],this.size=0}function Ls(t,e){for(var n=t.length;n--;)if(ar(t[n][0],e))return n;return-1}var kw=Array.prototype,Bw=kw.splice;function Fw(t){var e=this.__data__,n=Ls(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Bw.call(e,n,1),--this.size,!0}function $w(t){var e=this.__data__,n=Ls(e,t);return n<0?void 0:e[n][1]}function Hw(t){return Ls(this.__data__,t)>-1}function Ww(t,e){var n=this.__data__,r=Ls(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function $r(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$r.prototype.clear=jw,$r.prototype.delete=Fw,$r.prototype.get=$w,$r.prototype.has=Hw,$r.prototype.set=Ww;var sa=Ai(kt,"Map");function zw(){this.size=0,this.__data__={hash:new Ti,map:new(sa||$r),string:new Ti}}function Xw(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Is(t,e){var n=t.__data__;return Xw(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Gw(t){var e=Is(this,t).delete(t);return this.size-=e?1:0,e}function Uw(t){return Is(this,t).get(t)}function Yw(t){return Is(this,t).has(t)}function Vw(t,e){var n=Is(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Hr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hr.prototype.clear=zw,Hr.prototype.delete=Gw,Hr.prototype.get=Uw,Hr.prototype.has=Yw,Hr.prototype.set=Vw;var Kw="Expected a function";function js(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Kw);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(js.Cache||Hr),n}js.Cache=Hr;var qw=500;function Zw(t){var e=js(t,function(r){return n.size===qw&&n.clear(),r}),n=e.cache;return e}var Jw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qw=/\\(\\)?/g,Zp=Zw(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Jw,function(n,r,i,o){e.push(i?o.replace(Qw,"$1"):r||n)}),e});function ct(t){return t==null?"":An(t)}function ti(t,e){return Le(t)?t:nf(t,e)?[t]:Zp(ct(t))}function wr(t){if(typeof t=="string"||On(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Ni(t,e){e=ti(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[wr(e[n++])];return n&&n==r?t:void 0}function ho(t,e,n){var r=t==null?void 0:Ni(t,e);return r===void 0?n:r}function rf(t,e){for(var n=-1,r=e.length,i=Array(r),o=t==null;++n<r;)i[n]=o?void 0:ho(t,e[n]);return i}function ni(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Jp=qt?qt.isConcatSpreadable:void 0;function e1(t){return Le(t)||Ci(t)||!!(Jp&&t&&t[Jp])}function zt(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=e1),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?zt(s,e-1,n,r,i):ni(i,s):r||(i[i.length]=s)}return i}function Qp(t){var e=t==null?0:t.length;return e?zt(t,1):[]}function Wr(t){return Ku(Hp(t,void 0,Qp),t+"")}var t1=Wr(rf),ks=qp(Object.getPrototypeOf,Object),n1="[object Object]",r1=Function.prototype,i1=Object.prototype,ev=r1.toString,o1=i1.hasOwnProperty,a1=ev.call(Object);function la(t){if(!Nt(t)||rn(t)!=n1)return!1;var e=ks(t);if(e===null)return!0;var n=o1.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&ev.call(n)==a1}var s1="[object DOMException]",l1="[object Error]";function of(t){if(!Nt(t))return!1;var e=rn(t);return e==l1||e==s1||typeof t.message=="string"&&typeof t.name=="string"&&!la(t)}var tv=Ue(function(t,e){try{return Cn(t,void 0,e)}catch(n){return of(n)?n:new Error(n)}}),u1="Expected a function";function nv(t,e){var n;if(typeof e!="function")throw new TypeError(u1);return t=We(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var f1=1,c1=32,Bs=Ue(function(t,e,n){var r=f1;if(n.length){var i=Qr(n,uo(Bs));r|=c1}return Br(t,r,e,n,i)});Bs.placeholder={};var d1=Wr(function(t,e){return Bn(e,function(n){n=wr(n),Fr(t,n,Bs(t[n],t))}),t}),h1=1,p1=2,v1=32,af=Ue(function(t,e,n){var r=h1|p1;if(n.length){var i=Qr(n,uo(af));r|=v1}return Br(e,r,t,n,i)});af.placeholder={};function $n(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function ri(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:$n(t,e,n)}var g1="\\ud800-\\udfff",y1="\\u0300-\\u036f",m1="\\ufe20-\\ufe2f",_1="\\u20d0-\\u20ff",b1=y1+m1+_1,x1="\\ufe0e\\ufe0f",E1="\\u200d",w1=RegExp("["+E1+g1+b1+x1+"]");function po(t){return w1.test(t)}function S1(t){return t.split("")}var rv="\\ud800-\\udfff",O1="\\u0300-\\u036f",A1="\\ufe20-\\ufe2f",C1="\\u20d0-\\u20ff",T1=O1+A1+C1,N1="\\ufe0e\\ufe0f",M1="["+rv+"]",sf="["+T1+"]",lf="\\ud83c[\\udffb-\\udfff]",P1="(?:"+sf+"|"+lf+")",iv="[^"+rv+"]",ov="(?:\\ud83c[\\udde6-\\uddff]){2}",av="[\\ud800-\\udbff][\\udc00-\\udfff]",D1="\\u200d",sv=P1+"?",lv="["+N1+"]?",R1="(?:"+D1+"(?:"+[iv,ov,av].join("|")+")"+lv+sv+")*",L1=lv+sv+R1,I1="(?:"+[iv+sf+"?",sf,ov,av,M1].join("|")+")",j1=RegExp(lf+"(?="+lf+")|"+I1+L1,"g");function k1(t){return t.match(j1)||[]}function sr(t){return po(t)?k1(t):S1(t)}function uv(t){return function(e){e=ct(e);var n=po(e)?sr(e):void 0,r=n?n[0]:e.charAt(0),i=n?ri(n,1).join(""):e.slice(1);return r[t]()+i}}var uf=uv("toUpperCase");function fv(t){return uf(ct(t).toLowerCase())}function ff(t,e,n,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function cf(t){return function(e){return t==null?void 0:t[e]}}var B1={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},F1=cf(B1),$1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,H1="\\u0300-\\u036f",W1="\\ufe20-\\ufe2f",z1="\\u20d0-\\u20ff",X1=H1+W1+z1,G1="["+X1+"]",U1=RegExp(G1,"g");function cv(t){return t=ct(t),t&&t.replace($1,F1).replace(U1,"")}var Y1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function V1(t){return t.match(Y1)||[]}var K1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function q1(t){return K1.test(t)}var dv="\\ud800-\\udfff",Z1="\\u0300-\\u036f",J1="\\ufe20-\\ufe2f",Q1="\\u20d0-\\u20ff",eS=Z1+J1+Q1,hv="\\u2700-\\u27bf",pv="a-z\\xdf-\\xf6\\xf8-\\xff",tS="\\xac\\xb1\\xd7\\xf7",nS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rS="\\u2000-\\u206f",iS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vv="A-Z\\xc0-\\xd6\\xd8-\\xde",oS="\\ufe0e\\ufe0f",gv=tS+nS+rS+iS,yv="[']",mv="["+gv+"]",aS="["+eS+"]",_v="\\d+",sS="["+hv+"]",bv="["+pv+"]",xv="[^"+dv+gv+_v+hv+pv+vv+"]",lS="\\ud83c[\\udffb-\\udfff]",uS="(?:"+aS+"|"+lS+")",fS="[^"+dv+"]",Ev="(?:\\ud83c[\\udde6-\\uddff]){2}",wv="[\\ud800-\\udbff][\\udc00-\\udfff]",vo="["+vv+"]",cS="\\u200d",Sv="(?:"+bv+"|"+xv+")",dS="(?:"+vo+"|"+xv+")",Ov="(?:"+yv+"(?:d|ll|m|re|s|t|ve))?",Av="(?:"+yv+"(?:D|LL|M|RE|S|T|VE))?",Cv=uS+"?",Tv="["+oS+"]?",hS="(?:"+cS+"(?:"+[fS,Ev,wv].join("|")+")"+Tv+Cv+")*",pS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gS=Tv+Cv+hS,yS="(?:"+[sS,Ev,wv].join("|")+")"+gS,mS=RegExp([vo+"?"+bv+"+"+Ov+"(?="+[mv,vo,"$"].join("|")+")",dS+"+"+Av+"(?="+[mv,vo+Sv,"$"].join("|")+")",vo+"?"+Sv+"+"+Ov,vo+"+"+Av,vS,pS,_v,yS].join("|"),"g");function _S(t){return t.match(mS)||[]}function Nv(t,e,n){return t=ct(t),e=n?void 0:e,e===void 0?q1(t)?_S(t):V1(t):t.match(e)||[]}var bS="[']",xS=RegExp(bS,"g");function go(t){return function(e){return ff(Nv(cv(e).replace(xS,"")),t,"")}}var ES=go(function(t,e,n){return e=e.toLowerCase(),t+(n?fv(e):e)});function wS(){if(!arguments.length)return[];var t=arguments[0];return Le(t)?t:[t]}var SS=kt.isFinite,OS=Math.min;function df(t){var e=Math[t];return function(n,r){if(n=jn(n),r=r==null?0:OS(We(r),292),r&&SS(n)){var i=(ct(n)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+r));return i=(ct(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return e(n)}}var AS=df("ceil");function Mv(t){var e=_(t);return e.__chain__=!0,e}var CS=Math.ceil,TS=Math.max;function NS(t,e,n){(n?on(t,e,n):e===void 0)?e=1:e=TS(We(e),0);var r=t==null?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Array(CS(r/e));i<r;)a[o++]=$n(t,i,i+=e);return a}function Mi(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function MS(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=jn(n),n=n===n?n:0),e!==void 0&&(e=jn(e),e=e===e?e:0),Mi(jn(t),e,n)}function PS(){this.__data__=new $r,this.size=0}function DS(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function RS(t){return this.__data__.get(t)}function LS(t){return this.__data__.has(t)}var IS=200;function jS(t,e){var n=this.__data__;if(n instanceof $r){var r=n.__data__;if(!sa||r.length<IS-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hr(r)}return n.set(t,e),this.size=n.size,this}function lr(t){var e=this.__data__=new $r(t);this.size=e.size}lr.prototype.clear=PS,lr.prototype.delete=DS,lr.prototype.get=RS,lr.prototype.has=LS,lr.prototype.set=jS;function Pv(t,e){return t&&Er(e,Bt(e),t)}function kS(t,e){return t&&Er(e,mn(e),t)}var Dv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Rv=Dv&&typeof module=="object"&&module&&!module.nodeType&&module,BS=Rv&&Rv.exports===Dv,Lv=BS?kt.Buffer:void 0,Iv=Lv?Lv.allocUnsafe:void 0;function jv(t,e){if(e)return t.slice();var n=t.length,r=Iv?Iv(n):new t.constructor(n);return t.copy(r),r}function ii(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function hf(){return[]}var FS=Object.prototype,$S=FS.propertyIsEnumerable,kv=Object.getOwnPropertySymbols,pf=kv?function(t){return t==null?[]:(t=Object(t),ii(kv(t),function(e){return $S.call(t,e)}))}:hf;function HS(t,e){return Er(t,pf(t),e)}var WS=Object.getOwnPropertySymbols,Bv=WS?function(t){for(var e=[];t;)ni(e,pf(t)),t=ks(t);return e}:hf;function zS(t,e){return Er(t,Bv(t),e)}function Fv(t,e,n){var r=e(t);return Le(t)?r:ni(r,n(t))}function vf(t){return Fv(t,Bt,pf)}function gf(t){return Fv(t,mn,Bv)}var yf=Ai(kt,"DataView"),mf=Ai(kt,"Promise"),yo=Ai(kt,"Set"),$v="[object Map]",XS="[object Object]",Hv="[object Promise]",Wv="[object Set]",zv="[object WeakMap]",Xv="[object DataView]",GS=Oi(yf),US=Oi(sa),YS=Oi(mf),VS=Oi(yo),KS=Oi(ea),Zt=rn;(yf&&Zt(new yf(new ArrayBuffer(1)))!=Xv||sa&&Zt(new sa)!=$v||mf&&Zt(mf.resolve())!=Hv||yo&&Zt(new yo)!=Wv||ea&&Zt(new ea)!=zv)&&(Zt=function(t){var e=rn(t),n=e==XS?t.constructor:void 0,r=n?Oi(n):"";if(r)switch(r){case GS:return Xv;case US:return $v;case YS:return Hv;case VS:return Wv;case KS:return zv}return e});var qS=Object.prototype,ZS=qS.hasOwnProperty;function JS(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&ZS.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Fs=kt.Uint8Array;function _f(t){var e=new t.constructor(t.byteLength);return new Fs(e).set(new Fs(t)),e}function QS(t,e){var n=e?_f(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var eO=/\w*$/;function tO(t){var e=new t.constructor(t.source,eO.exec(t));return e.lastIndex=t.lastIndex,e}var Gv=qt?qt.prototype:void 0,Uv=Gv?Gv.valueOf:void 0;function nO(t){return Uv?Object(Uv.call(t)):{}}function Yv(t,e){var n=e?_f(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var rO="[object Boolean]",iO="[object Date]",oO="[object Map]",aO="[object Number]",sO="[object RegExp]",lO="[object Set]",uO="[object String]",fO="[object Symbol]",cO="[object ArrayBuffer]",dO="[object DataView]",hO="[object Float32Array]",pO="[object Float64Array]",vO="[object Int8Array]",gO="[object Int16Array]",yO="[object Int32Array]",mO="[object Uint8Array]",_O="[object Uint8ClampedArray]",bO="[object Uint16Array]",xO="[object Uint32Array]";function EO(t,e,n){var r=t.constructor;switch(e){case cO:return _f(t);case rO:case iO:return new r(+t);case dO:return QS(t,n);case hO:case pO:case vO:case gO:case yO:case mO:case _O:case bO:case xO:return Yv(t,n);case oO:return new r;case aO:case uO:return new r(t);case sO:return tO(t);case lO:return new r;case fO:return nO(t)}}function Vv(t){return typeof t.constructor=="function"&&!ia(t)?oo(ks(t)):{}}var wO="[object Map]";function SO(t){return Nt(t)&&Zt(t)==wO}var Kv=Fn&&Fn.isMap,qv=Kv?Tn(Kv):SO,OO="[object Set]";function AO(t){return Nt(t)&&Zt(t)==OO}var Zv=Fn&&Fn.isSet,Jv=Zv?Tn(Zv):AO,CO=1,TO=2,NO=4,Qv="[object Arguments]",MO="[object Array]",PO="[object Boolean]",DO="[object Date]",RO="[object Error]",eg="[object Function]",LO="[object GeneratorFunction]",IO="[object Map]",jO="[object Number]",tg="[object Object]",kO="[object RegExp]",BO="[object Set]",FO="[object String]",$O="[object Symbol]",HO="[object WeakMap]",WO="[object ArrayBuffer]",zO="[object DataView]",XO="[object Float32Array]",GO="[object Float64Array]",UO="[object Int8Array]",YO="[object Int16Array]",VO="[object Int32Array]",KO="[object Uint8Array]",qO="[object Uint8ClampedArray]",ZO="[object Uint16Array]",JO="[object Uint32Array]",bt={};bt[Qv]=bt[MO]=bt[WO]=bt[zO]=bt[PO]=bt[DO]=bt[XO]=bt[GO]=bt[UO]=bt[YO]=bt[VO]=bt[IO]=bt[jO]=bt[tg]=bt[kO]=bt[BO]=bt[FO]=bt[$O]=bt[KO]=bt[qO]=bt[ZO]=bt[JO]=!0,bt[RO]=bt[eg]=bt[HO]=!1;function Hn(t,e,n,r,i,o){var a,s=e&CO,l=e&TO,u=e&NO;if(n&&(a=i?n(t,r,i,o):n(t)),a!==void 0)return a;if(!At(t))return t;var f=Le(t);if(f){if(a=JS(t),!s)return gn(t,a)}else{var c=Zt(t),d=c==eg||c==LO;if(ei(t))return jv(t,s);if(c==tg||c==Qv||d&&!i){if(a=l||d?{}:Vv(t),!s)return l?zS(t,kS(a,t)):HS(t,Pv(a,t))}else{if(!bt[c])return i?t:{};a=EO(t,c,s)}}o||(o=new lr);var h=o.get(t);if(h)return h;o.set(t,a),Jv(t)?t.forEach(function(g){a.add(Hn(g,e,n,g,t,o))}):qv(t)&&t.forEach(function(g,y){a.set(y,Hn(g,e,n,y,t,o))});var v=u?l?gf:vf:l?mn:Bt,p=f?void 0:v(t);return Bn(p||t,function(g,y){p&&(y=g,g=t[y]),ra(a,y,Hn(g,e,n,y,t,o))}),a}var QO=4;function eA(t){return Hn(t,QO)}var tA=1,nA=4;function Fe(t){return Hn(t,tA|nA)}var rA=1,iA=4;function oA(t,e){return e=typeof e=="function"?e:void 0,Hn(t,rA|iA,e)}var aA=4;function sA(t,e){return e=typeof e=="function"?e:void 0,Hn(t,aA,e)}function lA(){return new kn(this.value(),this.__chain__)}function uA(t){for(var e=-1,n=t==null?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function fA(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return ni(Le(n)?gn(n):[n],zt(e,1))}var cA="__lodash_hash_undefined__";function dA(t){return this.__data__.set(t,cA),this}function hA(t){return this.__data__.has(t)}function Pi(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Hr;++e<n;)this.add(t[e])}Pi.prototype.add=Pi.prototype.push=dA,Pi.prototype.has=hA;function bf(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function ua(t,e){return t.has(e)}var pA=1,vA=2;function ng(t,e,n,r,i,o){var a=n&pA,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),f=o.get(e);if(u&&f)return u==e&&f==t;var c=-1,d=!0,h=n&vA?new Pi:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var v=t[c],p=e[c];if(r)var g=a?r(p,v,c,e,t,o):r(v,p,c,t,e,o);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!bf(e,function(y,m){if(!ua(h,m)&&(v===y||i(v,y,n,r,o)))return h.push(m)})){d=!1;break}}else if(!(v===p||i(v,p,n,r,o))){d=!1;break}}return o.delete(t),o.delete(e),d}function xf(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function $s(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var gA=1,yA=2,mA="[object Boolean]",_A="[object Date]",bA="[object Error]",xA="[object Map]",EA="[object Number]",wA="[object RegExp]",SA="[object Set]",OA="[object String]",AA="[object Symbol]",CA="[object ArrayBuffer]",TA="[object DataView]",rg=qt?qt.prototype:void 0,Ef=rg?rg.valueOf:void 0;function NA(t,e,n,r,i,o,a){switch(n){case TA:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case CA:return!(t.byteLength!=e.byteLength||!o(new Fs(t),new Fs(e)));case mA:case _A:case EA:return ar(+t,+e);case bA:return t.name==e.name&&t.message==e.message;case wA:case OA:return t==e+"";case xA:var s=xf;case SA:var l=r&gA;if(s||(s=$s),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=yA,a.set(t,e);var f=ng(s(t),s(e),r,i,o,a);return a.delete(t),f;case AA:if(Ef)return Ef.call(t)==Ef.call(e)}return!1}var MA=1,PA=Object.prototype,DA=PA.hasOwnProperty;function RA(t,e,n,r,i,o){var a=n&MA,s=vf(t),l=s.length,u=vf(e),f=u.length;if(l!=f&&!a)return!1;for(var c=l;c--;){var d=s[c];if(!(a?d in e:DA.call(e,d)))return!1}var h=o.get(t),v=o.get(e);if(h&&v)return h==e&&v==t;var p=!0;o.set(t,e),o.set(e,t);for(var g=a;++c<l;){d=s[c];var y=t[d],m=e[d];if(r)var A=a?r(m,y,d,e,t,o):r(y,m,d,t,e,o);if(!(A===void 0?y===m||i(y,m,n,r,o):A)){p=!1;break}g||(g=d=="constructor")}if(p&&!g){var T=t.constructor,k=e.constructor;T!=k&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof k=="function"&&k instanceof k)&&(p=!1)}return o.delete(t),o.delete(e),p}var LA=1,ig="[object Arguments]",og="[object Array]",Hs="[object Object]",IA=Object.prototype,ag=IA.hasOwnProperty;function jA(t,e,n,r,i,o){var a=Le(t),s=Le(e),l=a?og:Zt(t),u=s?og:Zt(e);l=l==ig?Hs:l,u=u==ig?Hs:u;var f=l==Hs,c=u==Hs,d=l==u;if(d&&ei(t)){if(!ei(e))return!1;a=!0,f=!1}if(d&&!f)return o||(o=new lr),a||co(t)?ng(t,e,n,r,i,o):NA(t,e,l,n,r,i,o);if(!(n&LA)){var h=f&&ag.call(t,"__wrapped__"),v=c&&ag.call(e,"__wrapped__");if(h||v){var p=h?t.value():t,g=v?e.value():e;return o||(o=new lr),i(p,g,n,r,o)}}return d?(o||(o=new lr),RA(t,e,n,r,i,o)):!1}function fa(t,e,n,r,i){return t===e?!0:t==null||e==null||!Nt(t)&&!Nt(e)?t!==t&&e!==e:jA(t,e,n,r,fa,i)}var kA=1,BA=2;function wf(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],u=t[l],f=s[1];if(a&&s[2]){if(u===void 0&&!(l in t))return!1}else{var c=new lr;if(r)var d=r(u,f,l,t,e,c);if(!(d===void 0?fa(f,u,kA|BA,r,c):d))return!1}}return!0}function sg(t){return t===t&&!At(t)}function Sf(t){for(var e=Bt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,sg(i)]}return e}function lg(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function ug(t){var e=Sf(t);return e.length==1&&e[0][2]?lg(e[0][0],e[0][1]):function(n){return n===t||wf(n,t,e)}}function FA(t,e){return t!=null&&e in Object(t)}function fg(t,e,n){e=ti(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=wr(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Rs(i)&&kr(a,i)&&(Le(t)||Ci(t)))}function Of(t,e){return t!=null&&fg(t,e,FA)}var $A=1,HA=2;function cg(t,e){return nf(t)&&sg(e)?lg(wr(t),e):function(n){var r=ho(n,t);return r===void 0&&r===e?Of(n,t):fa(e,r,$A|HA)}}function Af(t){return function(e){return e==null?void 0:e[t]}}function WA(t){return function(e){return Ni(e,t)}}function dg(t){return nf(t)?Af(wr(t)):WA(t)}function Ie(t){return typeof t=="function"?t:t==null?vn:typeof t=="object"?Le(t)?cg(t[0],t[1]):ug(t):dg(t)}var zA="Expected a function";function XA(t){var e=t==null?0:t.length,n=Ie;return t=e?Ot(t,function(r){if(typeof r[1]!="function")throw new TypeError(zA);return[n(r[0]),r[1]]}):[],Ue(function(r){for(var i=-1;++i<e;){var o=t[i];if(Cn(o[0],this,r))return Cn(o[1],this,r)}})}function hg(t,e,n){var r=n.length;if(t==null)return!r;for(t=Object(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===void 0&&!(i in t)||!o(a))return!1}return!0}function GA(t){var e=Bt(t);return function(n){return hg(n,t,e)}}var UA=1;function YA(t){return GA(Hn(t,UA))}function VA(t,e){return e==null||hg(t,e,Bt(e))}function KA(t,e,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function pg(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var Cf=pg();function Sr(t,e){return t&&Cf(t,e,Bt)}function vg(t,e){return function(n,r){if(n==null)return n;if(!yn(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var oi=vg(Sr);function qA(t,e,n,r){return oi(t,function(i,o,a){e(r,i,n(i),a)}),r}function Ws(t,e){return function(n,r){var i=Le(n)?KA:qA,o=e?e():{};return i(n,t,Ie(r),o)}}var ZA=Object.prototype,JA=ZA.hasOwnProperty,QA=Ws(function(t,e,n){JA.call(t,n)?++t[n]:Fr(t,n,1)});function eC(t,e){var n=oo(t);return e==null?n:Pv(n,e)}var tC=8;function Tf(t,e,n){e=n?void 0:e;var r=Br(t,tC,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=Tf.placeholder,r}Tf.placeholder={};var nC=16;function Nf(t,e,n){e=n?void 0:e;var r=Br(t,nC,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=Nf.placeholder,r}Nf.placeholder={};var zs=function(){return kt.Date.now()},rC="Expected a function",iC=Math.max,oC=Math.min;function Xs(t,e,n){var r,i,o,a,s,l,u=0,f=!1,c=!1,d=!0;if(typeof t!="function")throw new TypeError(rC);e=jn(e)||0,At(n)&&(f=!!n.leading,c="maxWait"in n,o=c?iC(jn(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d);function h(C){var S=r,I=i;return r=i=void 0,u=C,a=t.apply(I,S),a}function v(C){return u=C,s=setTimeout(y,e),f?h(C):a}function p(C){var S=C-l,I=C-u,X=e-S;return c?oC(X,o-I):X}function g(C){var S=C-l,I=C-u;return l===void 0||S>=e||S<0||c&&I>=o}function y(){var C=zs();if(g(C))return m(C);s=setTimeout(y,p(C))}function m(C){return s=void 0,d&&r?h(C):(r=i=void 0,a)}function A(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function T(){return s===void 0?a:m(zs())}function k(){var C=zs(),S=g(C);if(r=arguments,i=this,l=C,S){if(s===void 0)return v(l);if(c)return clearTimeout(s),s=setTimeout(y,e),h(l)}return s===void 0&&(s=setTimeout(y,e)),a}return k.cancel=A,k.flush=T,k}function aC(t,e){return t==null||t!==t?e:t}var gg=Object.prototype,sC=gg.hasOwnProperty,lC=Ue(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&on(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=mn(o),s=-1,l=a.length;++s<l;){var u=a[s],f=t[u];(f===void 0||ar(f,gg[u])&&!sC.call(t,u))&&(t[u]=o[u])}return t});function Mf(t,e,n){(n!==void 0&&!ar(t[e],n)||n===void 0&&!(e in t))&&Fr(t,e,n)}function Pt(t){return Nt(t)&&yn(t)}function Pf(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function yg(t){return Er(t,mn(t))}function uC(t,e,n,r,i,o,a){var s=Pf(t,n),l=Pf(e,n),u=a.get(l);if(u){Mf(t,n,u);return}var f=o?o(s,l,n+"",t,e,a):void 0,c=f===void 0;if(c){var d=Le(l),h=!d&&ei(l),v=!d&&!h&&co(l);f=l,d||h||v?Le(s)?f=s:Pt(s)?f=gn(s):h?(c=!1,f=jv(l,!0)):v?(c=!1,f=Yv(l,!0)):f=[]:la(l)||Ci(l)?(f=s,Ci(s)?f=yg(s):(!At(s)||jr(s))&&(f=Vv(l))):c=!1}c&&(a.set(l,f),i(f,l,r,o,a),a.delete(l)),Mf(t,n,f)}function Gs(t,e,n,r,i){t!==e&&Cf(e,function(o,a){if(i||(i=new lr),At(o))uC(t,e,a,n,Gs,r,i);else{var s=r?r(Pf(t,a),o,a+"",t,e,i):void 0;s===void 0&&(s=o),Mf(t,a,s)}},mn)}function mg(t,e,n,r,i,o){return At(t)&&At(e)&&(o.set(e,t),Gs(t,e,void 0,mg,o),o.delete(e)),t}var _g=fo(function(t,e,n,r){Gs(t,e,n,r)}),fC=Ue(function(t){return t.push(void 0,mg),Cn(_g,void 0,t)}),cC="Expected a function";function bg(t,e,n){if(typeof t!="function")throw new TypeError(cC);return setTimeout(function(){t.apply(void 0,n)},e)}var dC=Ue(function(t,e){return bg(t,1,e)}),hC=Ue(function(t,e,n){return bg(t,jn(e)||0,n)});function Df(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var pC=200;function ca(t,e,n,r){var i=-1,o=Ps,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=Ot(e,Tn(n))),r?(o=Df,a=!1):e.length>=pC&&(o=ua,a=!1,e=new Pi(e));e:for(;++i<s;){var f=t[i],c=n==null?f:n(f);if(f=r||f!==0?f:0,a&&c===c){for(var d=u;d--;)if(e[d]===c)continue e;l.push(f)}else o(e,c,r)||l.push(f)}return l}var vC=Ue(function(t,e){return Pt(t)?ca(t,zt(e,1,Pt,!0)):[]});function Nn(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var gC=Ue(function(t,e){var n=Nn(e);return Pt(n)&&(n=void 0),Pt(t)?ca(t,zt(e,1,Pt,!0),Ie(n)):[]}),yC=Ue(function(t,e){var n=Nn(e);return Pt(n)&&(n=void 0),Pt(t)?ca(t,zt(e,1,Pt,!0),void 0,n):[]}),mC=Ss(function(t,e){return t/e},1);function _C(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:We(e),$n(t,e<0?0:e,r)):[]}function bC(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:We(e),e=r-e,$n(t,0,e<0?0:e)):[]}function Us(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?$n(t,r?0:o,r?o+1:i):$n(t,r?o+1:0,r?i:o)}function xC(t,e){return t&&t.length?Us(t,Ie(e),!0,!0):[]}function EC(t,e){return t&&t.length?Us(t,Ie(e),!0):[]}function Or(t){return typeof t=="function"?t:vn}function at(t,e){var n=Le(t)?Bn:oi;return n(t,Or(e))}function wC(t,e){for(var n=t==null?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}var xg=pg(!0);function Rf(t,e){return t&&xg(t,e,Bt)}var Eg=vg(Rf,!0);function SC(t,e){var n=Le(t)?wC:Eg;return n(t,Or(e))}function OC(t,e,n){t=ct(t),e=An(e);var r=t.length;n=n===void 0?r:Mi(We(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function AC(t,e){return Ot(e,function(n){return[n,t[n]]})}function CC(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=[r,r]}),n}var TC="[object Map]",NC="[object Set]";function wg(t){return function(e){var n=Zt(e);return n==TC?xf(e):n==NC?CC(e):AC(e,t(e))}}var zr=wg(Bt),MC=wg(mn),PC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},DC=cf(PC),Sg=/[&<>"']/g,RC=RegExp(Sg.source);function Og(t){return t=ct(t),t&&RC.test(t)?t.replace(Sg,DC):t}var Ag=/[\\^$.*+?()[\]{}|]/g,LC=RegExp(Ag.source);function IC(t){return t=ct(t),t&&LC.test(t)?t.replace(Ag,"\\$&"):t}function Cg(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function jC(t,e){var n=!0;return oi(t,function(r,i,o){return n=!!e(r,i,o),n}),n}function kC(t,e,n){var r=Le(t)?Cg:jC;return n&&on(t,e,n)&&(e=void 0),r(t,Ie(e))}var BC=4294967295;function Tg(t){return t?Mi(We(t),0,BC):0}function FC(t,e,n,r){var i=t.length;for(n=We(n),n<0&&(n=-n>i?0:i+n),r=r===void 0||r>i?i:We(r),r<0&&(r+=i),r=n>r?0:Tg(r);n<r;)t[n++]=e;return t}function $C(t,e,n,r){var i=t==null?0:t.length;return i?(n&&typeof n!="number"&&on(t,e,n)&&(n=0,r=i),FC(t,e,n,r)):[]}function Ng(t,e){var n=[];return oi(t,function(r,i,o){e(r,i,o)&&n.push(r)}),n}function HC(t,e){var n=Le(t)?ii:Ng;return n(t,Ie(e))}function Mg(t){return function(e,n,r){var i=Object(e);if(!yn(e)){var o=Ie(n);e=Bt(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var WC=Math.max;function Lf(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:We(n);return i<0&&(i=WC(r+i,0)),Ms(t,Ie(e),i)}var ai=Mg(Lf);function Pg(t,e,n){var r;return n(t,function(i,o,a){if(e(i,o,a))return r=o,!1}),r}function zC(t,e){return Pg(t,Ie(e),Sr)}var XC=Math.max,GC=Math.min;function Dg(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=r-1;return n!==void 0&&(i=We(n),i=n<0?XC(r+i,0):GC(i,r-1)),Ms(t,Ie(e),i,!0)}var UC=Mg(Dg);function YC(t,e){return Pg(t,Ie(e),Rf)}function VC(t){return t&&t.length?t[0]:void 0}function Rg(t,e){var n=-1,r=yn(t)?Array(t.length):[];return oi(t,function(i,o,a){r[++n]=e(i,o,a)}),r}function Mn(t,e){var n=Le(t)?Ot:Rg;return n(t,Ie(e))}function KC(t,e){return zt(Mn(t,e),1)}var qC=1/0;function ZC(t,e){return zt(Mn(t,e),qC)}function JC(t,e,n){return n=n===void 0?1:We(n),zt(Mn(t,e),n)}var QC=1/0;function eT(t){var e=t==null?0:t.length;return e?zt(t,QC):[]}function tT(t,e){var n=t==null?0:t.length;return n?(e=e===void 0?1:We(e),zt(t,e)):[]}var nT=512;function rT(t){return Br(t,nT)}var iT=df("floor"),oT="Expected a function",aT=8,sT=32,lT=128,uT=256;function Lg(t){return Wr(function(e){var n=e.length,r=n,i=kn.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if(typeof o!="function")throw new TypeError(oT);if(i&&!a&&Ts(o)=="wrapper")var a=new kn([],!0)}for(r=a?r:n;++r<n;){o=e[r];var s=Ts(o),l=s=="wrapper"?Uu(o):void 0;l&&Yu(l[0])&&l[1]==(lT|aT|sT|uT)&&!l[4].length&&l[9]==1?a=a[Ts(l[0])].apply(a,l[3]):a=o.length==1&&Yu(o)?a[s]():a.thru(o)}return function(){var u=arguments,f=u[0];if(a&&u.length==1&&Le(f))return a.plant(f).value();for(var c=0,d=n?e[c].apply(this,u):f;++c<n;)d=e[c].call(this,d);return d}})}var fT=Lg(),cT=Lg(!0);function dT(t,e){return t==null?t:Cf(t,Or(e),mn)}function hT(t,e){return t==null?t:xg(t,Or(e),mn)}function pT(t,e){return t&&Sr(t,Or(e))}function vT(t,e){return t&&Rf(t,Or(e))}function gT(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function Ys(t,e){return ii(e,function(n){return jr(t[n])})}function yT(t){return t==null?[]:Ys(t,Bt(t))}function mT(t){return t==null?[]:Ys(t,mn(t))}var _T=Object.prototype,bT=_T.hasOwnProperty,xT=Ws(function(t,e,n){bT.call(t,n)?t[n].push(e):Fr(t,n,[e])});function If(t,e){return t>e}function Vs(t){return function(e,n){return typeof e=="string"&&typeof n=="string"||(e=jn(e),n=jn(n)),t(e,n)}}var ET=Vs(If),wT=Vs(function(t,e){return t>=e}),ST=Object.prototype,OT=ST.hasOwnProperty;function AT(t,e){return t!=null&&OT.call(t,e)}function Ks(t,e){return t!=null&&fg(t,e,AT)}var CT=Math.max,TT=Math.min;function NT(t,e,n){return t>=TT(e,n)&&t<CT(e,n)}function MT(t,e,n){return e=Ir(e),n===void 0?(n=e,e=0):n=Ir(n),t=jn(t),NT(t,e,n)}var PT="[object String]";function qs(t){return typeof t=="string"||!Le(t)&&Nt(t)&&rn(t)==PT}function jf(t,e){return Ot(e,function(n){return t[n]})}function mo(t){return t==null?[]:jf(t,Bt(t))}var DT=Math.max;function RT(t,e,n,r){t=yn(t)?t:mo(t),n=n&&!r?We(n):0;var i=t.length;return n<0&&(n=DT(i+n,0)),qs(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&lo(t,e,n)>-1}var LT=Math.max;function Ig(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:We(n);return i<0&&(i=LT(r+i,0)),lo(t,e,i)}function IT(t){var e=t==null?0:t.length;return e?$n(t,0,-1):[]}var jT=Math.min;function kf(t,e,n){for(var r=n?Df:Ps,i=t[0].length,o=t.length,a=o,s=Array(o),l=1/0,u=[];a--;){var f=t[a];a&&e&&(f=Ot(f,Tn(e))),l=jT(f.length,l),s[a]=!n&&(e||i>=120&&f.length>=120)?new Pi(a&&f):void 0}f=t[0];var c=-1,d=s[0];e:for(;++c<i&&u.length<l;){var h=f[c],v=e?e(h):h;if(h=n||h!==0?h:0,!(d?ua(d,v):r(u,v,n))){for(a=o;--a;){var p=s[a];if(!(p?ua(p,v):r(t[a],v,n)))continue e}d&&d.push(v),u.push(h)}}return u}function Bf(t){return Pt(t)?t:[]}var kT=Ue(function(t){var e=Ot(t,Bf);return e.length&&e[0]===t[0]?kf(e):[]}),BT=Ue(function(t){var e=Nn(t),n=Ot(t,Bf);return e===Nn(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?kf(n,Ie(e)):[]}),FT=Ue(function(t){var e=Nn(t),n=Ot(t,Bf);return e=typeof e=="function"?e:void 0,e&&n.pop(),n.length&&n[0]===t[0]?kf(n,void 0,e):[]});function $T(t,e,n,r){return Sr(t,function(i,o,a){e(r,n(i),o,a)}),r}function jg(t,e){return function(n,r){return $T(n,t,e(r),{})}}var HT=Object.prototype,WT=HT.toString,zT=jg(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=WT.call(e)),t[e]=n},Vu(vn)),kg=Object.prototype,XT=kg.hasOwnProperty,GT=kg.toString,UT=jg(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=GT.call(e)),XT.call(t,e)?t[e].push(n):t[e]=[n]},Ie);function Bg(t,e){return e.length<2?t:Ni(t,$n(e,0,-1))}function da(t,e,n){e=ti(e,t),t=Bg(t,e);var r=t==null?t:t[wr(Nn(e))];return r==null?void 0:Cn(r,t,n)}var YT=Ue(da),VT=Ue(function(t,e,n){var r=-1,i=typeof e=="function",o=yn(t)?Array(t.length):[];return oi(t,function(a){o[++r]=i?Cn(e,a,n):da(a,e,n)}),o}),KT="[object ArrayBuffer]";function qT(t){return Nt(t)&&rn(t)==KT}var Fg=Fn&&Fn.isArrayBuffer,ZT=Fg?Tn(Fg):qT,JT="[object Boolean]";function Zs(t){return t===!0||t===!1||Nt(t)&&rn(t)==JT}var QT="[object Date]";function eN(t){return Nt(t)&&rn(t)==QT}var $g=Fn&&Fn.isDate,tN=$g?Tn($g):eN;function nN(t){return Nt(t)&&t.nodeType===1&&!la(t)}var rN="[object Map]",iN="[object Set]",oN=Object.prototype,aN=oN.hasOwnProperty;function Ff(t){if(t==null)return!0;if(yn(t)&&(Le(t)||typeof t=="string"||typeof t.splice=="function"||ei(t)||co(t)||Ci(t)))return!t.length;var e=Zt(t);if(e==rN||e==iN)return!t.size;if(ia(t))return!ef(t).length;for(var n in t)if(aN.call(t,n))return!1;return!0}function $f(t,e){return fa(t,e)}function sN(t,e,n){n=typeof n=="function"?n:void 0;var r=n?n(t,e):void 0;return r===void 0?fa(t,e,void 0,n):!!r}var lN=kt.isFinite;function uN(t){return typeof t=="number"&&lN(t)}function Hg(t){return typeof t=="number"&&t==We(t)}function fN(t,e){return t===e||wf(t,e,Sf(e))}function cN(t,e,n){return n=typeof n=="function"?n:void 0,wf(t,e,Sf(e),n)}var dN="[object Number]";function Wg(t){return typeof t=="number"||Nt(t)&&rn(t)==dN}function hN(t){return Wg(t)&&t!=+t}var pN=Os?jr:Ju,vN="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function gN(t){if(pN(t))throw new Error(vN);return yp(t)}function Wn(t){return t==null}function yN(t){return t===null}var mN="[object RegExp]";function _N(t){return Nt(t)&&rn(t)==mN}var zg=Fn&&Fn.isRegExp,Hf=zg?Tn(zg):_N,bN=9007199254740991;function xN(t){return Hg(t)&&t>=-9007199254740991&&t<=bN}function Di(t){return t===void 0}var EN="[object WeakMap]";function wN(t){return Nt(t)&&Zt(t)==EN}var SN="[object WeakSet]";function ON(t){return Nt(t)&&rn(t)==SN}var AN=1;function CN(t){return Ie(typeof t=="function"?t:Hn(t,AN))}var TN=Array.prototype,NN=TN.join;function MN(t,e){return t==null?"":NN.call(t,e)}var PN=go(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),DN=Ws(function(t,e,n){Fr(t,n,e)});function RN(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}var LN=Math.max,IN=Math.min;function jN(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=r;return n!==void 0&&(i=We(n),i=i<0?LN(r+i,0):IN(i,r-1)),e===e?RN(t,e,i):Ms(t,Op,i,!0)}var kN=go(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),BN=uv("toLowerCase");function Wf(t,e){return t<e}var FN=Vs(Wf),$N=Vs(function(t,e){return t<=e});function Xg(t,e){var n={};return e=Ie(e),Sr(t,function(r,i,o){Fr(n,e(r,i,o),r)}),n}function HN(t,e){var n={};return e=Ie(e),Sr(t,function(r,i,o){Fr(n,i,e(r,i,o))}),n}var WN=1;function zN(t){return ug(Hn(t,WN))}var XN=1;function GN(t,e){return cg(t,Hn(e,XN))}function Js(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!On(a):n(a,s)))var s=a,l=o}return l}function UN(t){return t&&t.length?Js(t,vn,If):void 0}function YN(t,e){return t&&t.length?Js(t,Ie(e),If):void 0}function zf(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==void 0&&(n=n===void 0?o:n+o)}return n}var VN=NaN;function Gg(t,e){var n=t==null?0:t.length;return n?zf(t,e)/n:VN}function KN(t){return Gg(t,vn)}function qN(t,e){return Gg(t,Ie(e))}var _o=fo(function(t,e,n){Gs(t,e,n)}),ZN=Ue(function(t,e){return function(n){return da(n,t,e)}}),JN=Ue(function(t,e){return function(n){return da(t,n,e)}});function QN(t){return t&&t.length?Js(t,vn,Wf):void 0}function eM(t,e){return t&&t.length?Js(t,Ie(e),Wf):void 0}function tM(t,e,n){var r=Bt(e),i=Ys(e,r),o=!(At(n)&&"chain"in n)||!!n.chain,a=jr(t);return Bn(i,function(s){var l=e[s];t[s]=l,a&&(t.prototype[s]=function(){var u=this.__chain__;if(o||u){var f=t(this.__wrapped__),c=f.__actions__=gn(this.__actions__);return c.push({func:l,args:arguments,thisArg:t}),f.__chain__=u,f}return l.apply(t,ni([this.value()],arguments))})}),t}var nM=Ss(function(t,e){return t*e},1),rM="Expected a function";function Qs(t){if(typeof t!="function")throw new TypeError(rM);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function iM(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var oM="[object Map]",aM="[object Set]",Xf=qt?qt.iterator:void 0;function Ug(t){if(!t)return[];if(yn(t))return qs(t)?sr(t):gn(t);if(Xf&&t[Xf])return iM(t[Xf]());var e=Zt(t),n=e==oM?xf:e==aM?$s:mo;return n(t)}function sM(){this.__values__===void 0&&(this.__values__=Ug(this.value()));var t=this.__index__>=this.__values__.length,e=t?void 0:this.__values__[this.__index__++];return{done:t,value:e}}function Yg(t,e){var n=t.length;if(n)return e+=e<0?n:0,kr(e,n)?t[e]:void 0}function lM(t,e){return t&&t.length?Yg(t,We(e)):void 0}function uM(t){return t=We(t),Ue(function(e){return Yg(e,t)})}function Gf(t,e){return e=ti(e,t),t=Bg(t,e),t==null||delete t[wr(Nn(e))]}function fM(t){return la(t)?void 0:t}var cM=1,dM=2,hM=4,pM=Wr(function(t,e){var n={};if(t==null)return n;var r=!1;e=Ot(e,function(o){return o=ti(o,t),r||(r=o.length>1),o}),Er(t,gf(t),n),r&&(n=Hn(n,cM|dM|hM,fM));for(var i=e.length;i--;)Gf(n,e[i]);return n});function ha(t,e,n,r){if(!At(t))return t;e=ti(e,t);for(var i=-1,o=e.length,a=o-1,s=t;s!=null&&++i<o;){var l=wr(e[i]),u=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=a){var f=s[l];u=r?r(f,l,s):void 0,u===void 0&&(u=At(f)?f:kr(e[i+1])?[]:{})}ra(s,l,u),s=s[l]}return t}function Vg(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Ni(t,a);n(s,a)&&ha(o,ti(a,t),s)}return o}function Kg(t,e){if(t==null)return{};var n=Ot(gf(t),function(r){return[r]});return e=Ie(e),Vg(t,n,function(r,i){return e(r,i[0])})}function vM(t,e){return Kg(t,Qs(Ie(e)))}function gM(t){return nv(2,t)}function yM(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function qg(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=On(t),a=e!==void 0,s=e===null,l=e===e,u=On(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function mM(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=qg(i[r],o[r]);if(l){if(r>=s)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}function Zg(t,e,n){e.length?e=Ot(e,function(o){return Le(o)?function(a){return Ni(a,o.length===1?o[0]:o)}:o}):e=[vn];var r=-1;e=Ot(e,Tn(Ie));var i=Rg(t,function(o,a,s){var l=Ot(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return yM(i,function(o,a){return mM(o,a,n)})}function _M(t,e,n,r){return t==null?[]:(Le(e)||(e=e==null?[]:[e]),n=r?void 0:n,Le(n)||(n=n==null?[]:[n]),Zg(t,e,n))}function Uf(t){return Wr(function(e){return e=Ot(e,Tn(Ie)),Ue(function(n){var r=this;return t(e,function(i){return Cn(i,r,n)})})})}var bM=Uf(Ot),xM=Ue,EM=Math.min,wM=xM(function(t,e){e=e.length==1&&Le(e[0])?Ot(e[0],Tn(Ie)):Ot(zt(e,1),Tn(Ie));var n=e.length;return Ue(function(r){for(var i=-1,o=EM(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Cn(t,this,r)})}),SM=Uf(Cg),OM=Uf(bf),AM=9007199254740991,CM=Math.floor;function Yf(t,e){var n="";if(!t||e<1||e>AM)return n;do e%2&&(n+=t),e=CM(e/2),e&&(t+=t);while(e);return n}var TM=Af("length"),Jg="\\ud800-\\udfff",NM="\\u0300-\\u036f",MM="\\ufe20-\\ufe2f",PM="\\u20d0-\\u20ff",DM=NM+MM+PM,RM="\\ufe0e\\ufe0f",LM="["+Jg+"]",Vf="["+DM+"]",Kf="\\ud83c[\\udffb-\\udfff]",IM="(?:"+Vf+"|"+Kf+")",Qg="[^"+Jg+"]",ey="(?:\\ud83c[\\udde6-\\uddff]){2}",ty="[\\ud800-\\udbff][\\udc00-\\udfff]",jM="\\u200d",ny=IM+"?",ry="["+RM+"]?",kM="(?:"+jM+"(?:"+[Qg,ey,ty].join("|")+")"+ry+ny+")*",BM=ry+ny+kM,FM="(?:"+[Qg+Vf+"?",Vf,ey,ty,LM].join("|")+")",iy=RegExp(Kf+"(?="+Kf+")|"+FM+BM,"g");function $M(t){for(var e=iy.lastIndex=0;iy.test(t);)++e;return e}function bo(t){return po(t)?$M(t):TM(t)}var HM=Math.ceil;function el(t,e){e=e===void 0?" ":An(e);var n=e.length;if(n<2)return n?Yf(e,t):e;var r=Yf(e,HM(t/bo(e)));return po(e)?ri(sr(r),0,t).join(""):r.slice(0,t)}var WM=Math.ceil,zM=Math.floor;function XM(t,e,n){t=ct(t),e=We(e);var r=e?bo(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return el(zM(i),n)+t+el(WM(i),n)}function GM(t,e,n){t=ct(t),e=We(e);var r=e?bo(t):0;return e&&r<e?t+el(e-r,n):t}function UM(t,e,n){t=ct(t),e=We(e);var r=e?bo(t):0;return e&&r<e?el(e-r,n)+t:t}var YM=/^\s+/,VM=kt.parseInt;function KM(t,e,n){return n||e==null?e=0:e&&(e=+e),VM(ct(t).replace(YM,""),e||0)}var qM=32,tl=Ue(function(t,e){var n=Qr(e,uo(tl));return Br(t,qM,void 0,e,n)});tl.placeholder={};var ZM=64,qf=Ue(function(t,e){var n=Qr(e,uo(qf));return Br(t,ZM,void 0,e,n)});qf.placeholder={};var JM=Ws(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function QM(t,e){return Vg(t,e,function(n,r){return Of(t,r)})}var Ri=Wr(function(t,e){return t==null?{}:QM(t,e)});function eP(t){for(var e,n=this;n instanceof Cs;){var r=Ep(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e}function tP(t){return function(e){return t==null?void 0:Ni(t,e)}}function nP(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}var rP=Array.prototype,oy=rP.splice;function Zf(t,e,n,r){var i=r?nP:lo,o=-1,a=e.length,s=t;for(t===e&&(e=gn(e)),n&&(s=Ot(t,Tn(n)));++o<a;)for(var l=0,u=e[o],f=n?n(u):u;(l=i(s,f,l,r))>-1;)s!==t&&oy.call(s,l,1),oy.call(t,l,1);return t}function ay(t,e){return t&&t.length&&e&&e.length?Zf(t,e):t}var iP=Ue(ay);function oP(t,e,n){return t&&t.length&&e&&e.length?Zf(t,e,Ie(n)):t}function aP(t,e,n){return t&&t.length&&e&&e.length?Zf(t,e,void 0,n):t}var sP=Array.prototype,lP=sP.splice;function sy(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;kr(i)?lP.call(t,i,1):Gf(t,i)}}return t}var uP=Wr(function(t,e){var n=t==null?0:t.length,r=rf(t,e);return sy(t,Ot(e,function(i){return kr(i,n)?+i:i}).sort(qg)),r}),fP=Math.floor,cP=Math.random;function Jf(t,e){return t+fP(cP()*(e-t+1))}var dP=parseFloat,hP=Math.min,pP=Math.random;function vP(t,e,n){if(n&&typeof n!="boolean"&&on(t,e,n)&&(e=n=void 0),n===void 0&&(typeof e=="boolean"?(n=e,e=void 0):typeof t=="boolean"&&(n=t,t=void 0)),t===void 0&&e===void 0?(t=0,e=1):(t=Ir(t),e===void 0?(e=t,t=0):e=Ir(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=pP();return hP(t+i*(e-t+dP("1e-"+((i+"").length-1))),e)}return Jf(t,e)}var gP=Math.ceil,yP=Math.max;function mP(t,e,n,r){for(var i=-1,o=yP(gP((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}function ly(t){return function(e,n,r){return r&&typeof r!="number"&&on(e,n,r)&&(n=r=void 0),e=Ir(e),n===void 0?(n=e,e=0):n=Ir(n),r=r===void 0?e<n?1:-1:Ir(r),mP(e,n,r,t)}}var _P=ly(),bP=ly(!0),xP=256,EP=Wr(function(t,e){return Br(t,xP,void 0,void 0,void 0,e)});function uy(t,e,n,r,i){return i(t,function(o,a,s){n=r?(r=!1,o):e(n,o,a,s)}),n}function fy(t,e,n){var r=Le(t)?ff:uy,i=arguments.length<3;return r(t,Ie(e),n,i,oi)}function wP(t,e,n,r){var i=t==null?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function SP(t,e,n){var r=Le(t)?wP:uy,i=arguments.length<3;return r(t,Ie(e),n,i,Eg)}function OP(t,e){var n=Le(t)?ii:Ng;return n(t,Qs(Ie(e)))}function AP(t,e){var n=[];if(!(t&&t.length))return n;var r=-1,i=[],o=t.length;for(e=Ie(e);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return sy(t,i),n}function CP(t,e,n){return(n?on(t,e,n):e===void 0)?e=1:e=We(e),Yf(ct(t),e)}function TP(){var t=arguments,e=ct(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var NP="Expected a function";function MP(t,e){if(typeof t!="function")throw new TypeError(NP);return e=e===void 0?e:We(e),Ue(t,e)}function PP(t,e,n){e=ti(e,t);var r=-1,i=e.length;for(i||(i=1,t=void 0);++r<i;){var o=t==null?void 0:t[wr(e[r])];o===void 0&&(r=i,o=n),t=jr(o)?o.call(t):o}return t}var DP=Array.prototype,RP=DP.reverse;function Qf(t){return t==null?t:RP.call(t)}var LP=df("round");function cy(t){var e=t.length;return e?t[Jf(0,e-1)]:void 0}function IP(t){return cy(mo(t))}function jP(t){var e=Le(t)?cy:IP;return e(t)}function nl(t,e){var n=-1,r=t.length,i=r-1;for(e=e===void 0?r:e;++n<e;){var o=Jf(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function kP(t,e){return nl(gn(t),Mi(e,0,t.length))}function BP(t,e){var n=mo(t);return nl(n,Mi(e,0,n.length))}function FP(t,e,n){(n?on(t,e,n):e===void 0)?e=1:e=We(e);var r=Le(t)?kP:BP;return r(t,e)}function dy(t,e,n){return t==null?t:ha(t,e,n)}function $P(t,e,n,r){return r=typeof r=="function"?r:void 0,t==null?t:ha(t,e,n,r)}function HP(t){return nl(gn(t))}function WP(t){return nl(mo(t))}function zP(t){var e=Le(t)?HP:WP;return e(t)}var XP="[object Map]",GP="[object Set]";function UP(t){if(t==null)return 0;if(yn(t))return qs(t)?bo(t):t.length;var e=Zt(t);return e==XP||e==GP?t.size:ef(t).length}function YP(t,e,n){var r=t==null?0:t.length;return r?(n&&typeof n!="number"&&on(t,e,n)?(e=0,n=r):(e=e==null?0:We(e),n=n===void 0?r:We(n)),$n(t,e,n)):[]}var VP=go(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function KP(t,e){var n;return oi(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}function qP(t,e,n){var r=Le(t)?bf:KP;return n&&on(t,e,n)&&(e=void 0),r(t,Ie(e))}var ZP=Ue(function(t,e){if(t==null)return[];var n=e.length;return n>1&&on(t,e[0],e[1])?e=[]:n>2&&on(e[0],e[1],e[2])&&(e=[e[0]]),Zg(t,zt(e,1),[])}),JP=4294967295,QP=JP-1,eD=Math.floor,tD=Math.min;function ec(t,e,n,r){var i=0,o=t==null?0:t.length;if(o===0)return 0;e=n(e);for(var a=e!==e,s=e===null,l=On(e),u=e===void 0;i<o;){var f=eD((i+o)/2),c=n(t[f]),d=c!==void 0,h=c===null,v=c===c,p=On(c);if(a)var g=r||v;else u?g=v&&(r||d):s?g=v&&d&&(r||!h):l?g=v&&d&&!h&&(r||!p):h||p?g=!1:g=r?c<=e:c<e;g?i=f+1:o=f}return tD(o,QP)}var nD=4294967295,rD=nD>>>1;function rl(t,e,n){var r=0,i=t==null?r:t.length;if(typeof e=="number"&&e===e&&i<=rD){for(;r<i;){var o=r+i>>>1,a=t[o];a!==null&&!On(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ec(t,e,vn,n)}function iD(t,e){return rl(t,e)}function oD(t,e,n){return ec(t,e,Ie(n))}function aD(t,e){var n=t==null?0:t.length;if(n){var r=rl(t,e);if(r<n&&ar(t[r],e))return r}return-1}function sD(t,e){return rl(t,e,!0)}function lD(t,e,n){return ec(t,e,Ie(n),!0)}function uD(t,e){var n=t==null?0:t.length;if(n){var r=rl(t,e,!0)-1;if(ar(t[r],e))return r}return-1}function hy(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!ar(s,l)){var l=s;o[i++]=a===0?0:a}}return o}function fD(t){return t&&t.length?hy(t):[]}function cD(t,e){return t&&t.length?hy(t,Ie(e)):[]}var dD=4294967295;function hD(t,e,n){return n&&typeof n!="number"&&on(t,e,n)&&(e=n=void 0),n=n===void 0?dD:n>>>0,n?(t=ct(t),t&&(typeof e=="string"||e!=null&&!Hf(e))&&(e=An(e),!e&&po(t))?ri(sr(t),0,n):t.split(e,n)):[]}var pD="Expected a function",vD=Math.max;function gD(t,e){if(typeof t!="function")throw new TypeError(pD);return e=e==null?0:vD(We(e),0),Ue(function(n){var r=n[e],i=ri(n,0,e);return r&&ni(i,r),Cn(t,this,i)})}var yD=go(function(t,e,n){return t+(n?" ":"")+uf(e)});function mD(t,e,n){return t=ct(t),n=n==null?0:Mi(We(n),0,t.length),e=An(e),t.slice(n,n+e.length)==e}function _D(){return{}}function bD(){return""}function xD(){return!0}var ED=Ss(function(t,e){return t-e},0);function wD(t){return t&&t.length?zf(t,vn):0}function SD(t,e){return t&&t.length?zf(t,Ie(e)):0}function OD(t){var e=t==null?0:t.length;return e?$n(t,1,e):[]}function AD(t,e,n){return t&&t.length?(e=n||e===void 0?1:We(e),$n(t,0,e<0?0:e)):[]}function CD(t,e,n){var r=t==null?0:t.length;return r?(e=n||e===void 0?1:We(e),e=r-e,$n(t,e<0?0:e,r)):[]}function TD(t,e){return t&&t.length?Us(t,Ie(e),!1,!0):[]}function ND(t,e){return t&&t.length?Us(t,Ie(e)):[]}function MD(t,e){return e(t),t}var py=Object.prototype,PD=py.hasOwnProperty;function vy(t,e,n,r){return t===void 0||ar(t,py[n])&&!PD.call(r,n)?e:t}var DD={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function RD(t){return"\\"+DD[t]}var gy=/<%=([\s\S]+?)%>/g,LD=/<%-([\s\S]+?)%>/g,ID=/<%([\s\S]+?)%>/g,tc={escape:LD,evaluate:ID,interpolate:gy,variable:"",imports:{_:{escape:Og}}},jD="Invalid `variable` option passed into `_.template`",kD=/\b__p \+= '';/g,BD=/\b(__p \+=) '' \+/g,FD=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$D=/[()=,{}\[\]\/\s]/,HD=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,il=/($^)/,WD=/['\n\r\u2028\u2029\\]/g,zD=Object.prototype,yy=zD.hasOwnProperty;function XD(t,e,n){var r=tc.imports._.templateSettings||tc;n&&on(t,e,n)&&(e=void 0),t=ct(t),e=tf({},e,r,vy);var i=tf({},e.imports,r.imports,vy),o=Bt(i),a=jf(i,o),s,l,u=0,f=e.interpolate||il,c="__p += '",d=RegExp((e.escape||il).source+"|"+f.source+"|"+(f===gy?HD:il).source+"|"+(e.evaluate||il).source+"|$","g"),h=yy.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+`
`:"";t.replace(d,function(g,y,m,A,T,k){return m||(m=A),c+=t.slice(u,k).replace(WD,RD),y&&(s=!0,c+=`' +
__e(`+y+`) +
'`),T&&(l=!0,c+=`';
`+T+`;
__p += '`),m&&(c+=`' +
((__t = (`+m+`)) == null ? '' : __t) +
'`),u=k+g.length,g}),c+=`';
`;var v=yy.call(e,"variable")&&e.variable;if(!v)c=`with (obj) {
`+c+`
}
`;else if($D.test(v))throw new Error(jD);c=(l?c.replace(kD,""):c).replace(BD,"$1").replace(FD,"$1;"),c="function("+(v||"obj")+`) {
`+(v?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(l?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+c+`return __p
}`;var p=tv(function(){return Function(o,h+"return "+c).apply(void 0,a)});if(p.source=c,of(p))throw p;return p}var GD="Expected a function";function my(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(GD);return At(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Xs(t,e,{leading:r,maxWait:e,trailing:i})}function ol(t,e){return e(t)}var UD=9007199254740991,nc=4294967295,YD=Math.min;function VD(t,e){if(t=We(t),t<1||t>UD)return[];var n=nc,r=YD(t,nc);e=Or(e),t-=nc;for(var i=Zu(r,e);++n<t;)e(n);return i}function KD(){return this}function _y(t,e){var n=t;return n instanceof Ze&&(n=n.value()),ff(e,function(r,i){return i.func.apply(i.thisArg,ni([r],i.args))},n)}function qD(){return _y(this.__wrapped__,this.__actions__)}function ZD(t){return ct(t).toLowerCase()}function JD(t){return Le(t)?Ot(t,wr):On(t)?[t]:gn(Zp(ct(t)))}var QD=9007199254740991;function e2(t){return t?Mi(We(t),-9007199254740991,QD):t===0?t:0}function t2(t){return ct(t).toUpperCase()}function n2(t,e,n){var r=Le(t),i=r||ei(t)||co(t);if(e=Ie(e),n==null){var o=t&&t.constructor;i?n=r?new o:[]:At(t)?n=jr(o)?oo(ks(t)):{}:n={}}return(i?Bn:Sr)(t,function(a,s,l){return e(n,a,s,l)}),n}function by(t,e){for(var n=t.length;n--&&lo(e,t[n],0)>-1;);return n}function xy(t,e){for(var n=-1,r=t.length;++n<r&&lo(e,t[n],0)>-1;);return n}function r2(t,e,n){if(t=ct(t),t&&(n||e===void 0))return pp(t);if(!t||!(e=An(e)))return t;var r=sr(t),i=sr(e),o=xy(r,i),a=by(r,i)+1;return ri(r,o,a).join("")}function i2(t,e,n){if(t=ct(t),t&&(n||e===void 0))return t.slice(0,hp(t)+1);if(!t||!(e=An(e)))return t;var r=sr(t),i=by(r,sr(e))+1;return ri(r,0,i).join("")}var o2=/^\s+/;function a2(t,e,n){if(t=ct(t),t&&(n||e===void 0))return t.replace(o2,"");if(!t||!(e=An(e)))return t;var r=sr(t),i=xy(r,sr(e));return ri(r,i).join("")}var s2=30,l2="...",u2=/\w*$/;function f2(t,e){var n=s2,r=l2;if(At(e)){var i="separator"in e?e.separator:i;n="length"in e?We(e.length):n,r="omission"in e?An(e.omission):r}t=ct(t);var o=t.length;if(po(t)){var a=sr(t);o=a.length}if(n>=o)return t;var s=n-bo(r);if(s<1)return r;var l=a?ri(a,0,s).join(""):t.slice(0,s);if(i===void 0)return l+r;if(a&&(s+=l.length-s),Hf(i)){if(t.slice(s).search(i)){var u,f=l;for(i.global||(i=RegExp(i.source,ct(u2.exec(i))+"g")),i.lastIndex=0;u=i.exec(f);)var c=u.index;l=l.slice(0,c===void 0?s:c)}}else if(t.indexOf(An(i),s)!=s){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r}function c2(t){return Fp(t,1)}var d2={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},h2=cf(d2),Ey=/&(?:amp|lt|gt|quot|#39);/g,p2=RegExp(Ey.source);function v2(t){return t=ct(t),t&&p2.test(t)?t.replace(Ey,h2):t}var g2=1/0,y2=yo&&1/$s(new yo([,-0]))[1]==g2?function(t){return new yo(t)}:ao,m2=200;function si(t,e,n){var r=-1,i=Ps,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=Df;else if(o>=m2){var u=e?null:y2(t);if(u)return $s(u);a=!1,i=ua,l=new Pi}else l=e?[]:s;e:for(;++r<o;){var f=t[r],c=e?e(f):f;if(f=n||f!==0?f:0,a&&c===c){for(var d=l.length;d--;)if(l[d]===c)continue e;e&&l.push(c),s.push(f)}else i(l,c,n)||(l!==s&&l.push(c),s.push(f))}return s}var _2=Ue(function(t){return si(zt(t,1,Pt,!0))}),b2=Ue(function(t){var e=Nn(t);return Pt(e)&&(e=void 0),si(zt(t,1,Pt,!0),Ie(e))}),x2=Ue(function(t){var e=Nn(t);return e=typeof e=="function"?e:void 0,si(zt(t,1,Pt,!0),void 0,e)});function E2(t){return t&&t.length?si(t):[]}function w2(t,e){return t&&t.length?si(t,Ie(e)):[]}function S2(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?si(t,void 0,e):[]}var O2=0;function A2(t){var e=++O2;return ct(t)+e}function C2(t,e){return t==null?!0:Gf(t,e)}var T2=Math.max;function rc(t){if(!(t&&t.length))return[];var e=0;return t=ii(t,function(n){if(Pt(n))return e=T2(n.length,e),!0}),Zu(e,function(n){return Ot(t,Af(n))})}function wy(t,e){if(!(t&&t.length))return[];var n=rc(t);return e==null?n:Ot(n,function(r){return Cn(e,void 0,r)})}function Sy(t,e,n,r){return ha(t,e,n(Ni(t,e)),r)}function N2(t,e,n){return t==null?t:Sy(t,e,Or(n))}function M2(t,e,n,r){return r=typeof r=="function"?r:void 0,t==null?t:Sy(t,e,Or(n),r)}var P2=go(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()});function D2(t){return t==null?[]:jf(t,mn(t))}var R2=Ue(function(t,e){return Pt(t)?ca(t,e):[]});function L2(t,e){return tl(Or(e),t)}var I2=Wr(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(o){return rf(o,t)};return e>1||this.__actions__.length||!(r instanceof Ze)||!kr(n)?this.thru(i):(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:ol,args:[i],thisArg:void 0}),new kn(r,this.__chain__).thru(function(o){return e&&!o.length&&o.push(void 0),o}))});function j2(){return Mv(this)}function k2(){var t=this.__wrapped__;if(t instanceof Ze){var e=t;return this.__actions__.length&&(e=new Ze(this)),e=e.reverse(),e.__actions__.push({func:ol,args:[Qf],thisArg:void 0}),new kn(e,this.__chain__)}return this.thru(Qf)}function ic(t,e,n){var r=t.length;if(r<2)return r?si(t[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=ca(o[i]||a,t[s],e,n));return si(zt(o,1),e,n)}var B2=Ue(function(t){return ic(ii(t,Pt))}),F2=Ue(function(t){var e=Nn(t);return Pt(e)&&(e=void 0),ic(ii(t,Pt),Ie(e))}),$2=Ue(function(t){var e=Nn(t);return e=typeof e=="function"?e:void 0,ic(ii(t,Pt),void 0,e)}),H2=Ue(rc);function Oy(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}function W2(t,e){return Oy(t||[],e||[],ra)}function z2(t,e){return Oy(t||[],e||[],ha)}var X2=Ue(function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n=typeof n=="function"?(t.pop(),n):void 0,wy(t,n)});const fe={chunk:NS,compact:uA,concat:fA,difference:vC,differenceBy:gC,differenceWith:yC,drop:_C,dropRight:bC,dropRightWhile:xC,dropWhile:EC,fill:$C,findIndex:Lf,findLastIndex:Dg,flatten:Qp,flattenDeep:eT,flattenDepth:tT,fromPairs:gT,head:VC,indexOf:Ig,initial:IT,intersection:kT,intersectionBy:BT,intersectionWith:FT,join:MN,lastIndexOf:jN,nth:lM,pull:iP,pullAll:ay,pullAllBy:oP,pullAllWith:aP,pullAt:uP,remove:AP,reverse:Qf,slice:YP,sortedIndex:iD,sortedIndexBy:oD,sortedIndexOf:aD,sortedLastIndex:sD,sortedLastIndexBy:lD,sortedLastIndexOf:uD,sortedUniq:fD,sortedUniqBy:cD,tail:OD,take:AD,takeRight:CD,takeRightWhile:TD,takeWhile:ND,union:_2,unionBy:b2,unionWith:x2,uniq:E2,uniqBy:w2,uniqWith:S2,unzip:rc,unzipWith:wy,without:R2,xor:B2,xorBy:F2,xorWith:$2,zip:H2,zipObject:W2,zipObjectDeep:z2,zipWith:X2},mt={countBy:QA,every:kC,filter:HC,find:ai,findLast:UC,flatMap:KC,flatMapDeep:ZC,flatMapDepth:JC,forEach:at,forEachRight:SC,groupBy:xT,includes:RT,invokeMap:VT,keyBy:DN,map:Mn,orderBy:_M,partition:JM,reduce:fy,reduceRight:SP,reject:OP,sample:jP,sampleSize:FP,shuffle:zP,size:UP,some:qP,sortBy:ZP},G2={now:zs},Mt={after:hx,ary:Fp,before:nv,bind:Bs,bindKey:af,curry:Tf,curryRight:Nf,debounce:Xs,defer:dC,delay:hC,flip:rT,memoize:js,once:gM,overArgs:wM,partial:tl,partialRight:qf,rearg:EP,rest:MP,spread:gD,throttle:my,unary:c2,wrap:L2},we={castArray:wS,clone:eA,cloneDeep:Fe,cloneDeepWith:oA,cloneWith:sA,conformsTo:VA,eq:ar,gt:ET,gte:wT,isArguments:Ci,isArrayBuffer:ZT,isArrayLike:yn,isArrayLikeObject:Pt,isBoolean:Zs,isBuffer:ei,isDate:tN,isElement:nN,isEmpty:Ff,isEqual:$f,isEqualWith:sN,isError:of,isFinite:uN,isFunction:jr,isInteger:Hg,isLength:Rs,isMap:qv,isMatch:fN,isMatchWith:cN,isNaN:hN,isNative:gN,isNil:Wn,isNull:yN,isNumber:Wg,isObjectLike:Nt,isPlainObject:la,isRegExp:Hf,isSafeInteger:xN,isSet:Jv,isString:qs,isSymbol:On,isTypedArray:co,isUndefined:Di,isWeakMap:wN,isWeakSet:ON,lt:FN,lte:$N,toArray:Ug,toFinite:Ir,toLength:Tg,toNumber:jn,toPlainObject:yg,toSafeInteger:e2,toString:ct},an={add:rx,ceil:AS,divide:mC,floor:iT,max:UN,maxBy:YN,mean:KN,meanBy:qN,min:QN,minBy:eM,multiply:nM,round:LP,subtract:ED,sum:wD,sumBy:SD},oc={clamp:MS,inRange:MT,random:vP},Re={assign:lt,assignIn:xw,assignInWith:tf,assignWith:Ew,at:t1,create:eC,defaults:lC,defaultsDeep:fC,findKey:zC,findLastKey:YC,forIn:dT,forInRight:hT,forOwn:pT,forOwnRight:vT,functions:yT,functionsIn:mT,get:ho,has:Ks,hasIn:Of,invert:zT,invertBy:UT,invoke:YT,keysIn:mn,mapKeys:Xg,mapValues:HN,merge:_o,mergeWith:_g,omit:pM,omitBy:vM,pick:Ri,pickBy:Kg,result:PP,set:dy,setWith:$P,toPairs:zr,toPairsIn:MC,transform:n2,unset:C2,update:N2,updateWith:M2,values:mo,valuesIn:D2},Ar={at:I2,chain:Mv,commit:lA,next:sM,plant:eP,reverse:k2,tap:MD,toIterator:KD,value:qD,wrapperChain:j2},ut={camelCase:ES,capitalize:fv,deburr:cv,endsWith:OC,escape:Og,escapeRegExp:IC,kebabCase:PN,lowerCase:kN,lowerFirst:BN,pad:XM,padEnd:GM,padStart:UM,parseInt:KM,repeat:CP,replace:TP,snakeCase:VP,split:hD,startCase:yD,startsWith:mD,template:XD,templateSettings:tc,toLower:ZD,toUpper:t2,trim:r2,trimEnd:i2,trimStart:a2,truncate:f2,unescape:v2,upperCase:P2,upperFirst:uf,words:Nv},dt={attempt:tv,bindAll:d1,cond:XA,conforms:YA,constant:Vu,defaultTo:aC,flow:fT,flowRight:cT,iteratee:CN,matches:zN,matchesProperty:GN,method:ZN,methodOf:JN,noop:ao,nthArg:uM,over:bM,overEvery:SM,overSome:OM,property:dg,propertyOf:tP,range:_P,rangeRight:bP,stubArray:hf,stubFalse:Ju,stubObject:_D,stubString:bD,stubTrue:xD,times:VD,toPath:JD,uniqueId:A2};function U2(){var t=new Ze(this.__wrapped__);return t.__actions__=gn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=gn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=gn(this.__views__),t}function Y2(){if(this.__filtered__){var t=new Ze(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}var V2=Math.max,K2=Math.min;function q2(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=K2(e,t+a);break;case"takeRight":t=V2(t,e-a);break}}return{start:t,end:e}}var Z2=1,J2=2,Q2=Math.min;function eR(){var t=this.__wrapped__.value(),e=this.__dir__,n=Le(t),r=e<0,i=n?t.length:0,o=q2(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,f=this.__iteratees__,c=f.length,d=0,h=Q2(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return _y(t,this.__actions__);var v=[];e:for(;l--&&d<h;){u+=e;for(var p=-1,g=t[u];++p<c;){var y=f[p],m=y.iteratee,A=y.type,T=m(g);if(A==J2)g=T;else if(!T){if(A==Z2)continue e;break e}}v[d++]=g}return v}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var tR="4.17.21",nR=2,rR=1,iR=3,Ay=4294967295,oR=Array.prototype,aR=Object.prototype,Cy=aR.hasOwnProperty,Ty=qt?qt.iterator:void 0,sR=Math.max,Ny=Math.min,ac=function(t){return function(e,n,r){if(r==null){var i=At(n),o=i&&Bt(n),a=o&&o.length&&Ys(n,o);(a?a.length:i)||(r=n,n=e,e=this)}return t(e,n,r)}}(tM);_.after=Mt.after,_.ary=Mt.ary,_.assign=Re.assign,_.assignIn=Re.assignIn,_.assignInWith=Re.assignInWith,_.assignWith=Re.assignWith,_.at=Re.at,_.before=Mt.before,_.bind=Mt.bind,_.bindAll=dt.bindAll,_.bindKey=Mt.bindKey,_.castArray=we.castArray,_.chain=Ar.chain,_.chunk=fe.chunk,_.compact=fe.compact,_.concat=fe.concat,_.cond=dt.cond,_.conforms=dt.conforms,_.constant=dt.constant,_.countBy=mt.countBy,_.create=Re.create,_.curry=Mt.curry,_.curryRight=Mt.curryRight,_.debounce=Mt.debounce,_.defaults=Re.defaults,_.defaultsDeep=Re.defaultsDeep,_.defer=Mt.defer,_.delay=Mt.delay,_.difference=fe.difference,_.differenceBy=fe.differenceBy,_.differenceWith=fe.differenceWith,_.drop=fe.drop,_.dropRight=fe.dropRight,_.dropRightWhile=fe.dropRightWhile,_.dropWhile=fe.dropWhile,_.fill=fe.fill,_.filter=mt.filter,_.flatMap=mt.flatMap,_.flatMapDeep=mt.flatMapDeep,_.flatMapDepth=mt.flatMapDepth,_.flatten=fe.flatten,_.flattenDeep=fe.flattenDeep,_.flattenDepth=fe.flattenDepth,_.flip=Mt.flip,_.flow=dt.flow,_.flowRight=dt.flowRight,_.fromPairs=fe.fromPairs,_.functions=Re.functions,_.functionsIn=Re.functionsIn,_.groupBy=mt.groupBy,_.initial=fe.initial,_.intersection=fe.intersection,_.intersectionBy=fe.intersectionBy,_.intersectionWith=fe.intersectionWith,_.invert=Re.invert,_.invertBy=Re.invertBy,_.invokeMap=mt.invokeMap,_.iteratee=dt.iteratee,_.keyBy=mt.keyBy,_.keys=Bt,_.keysIn=Re.keysIn,_.map=mt.map,_.mapKeys=Re.mapKeys,_.mapValues=Re.mapValues,_.matches=dt.matches,_.matchesProperty=dt.matchesProperty,_.memoize=Mt.memoize,_.merge=Re.merge,_.mergeWith=Re.mergeWith,_.method=dt.method,_.methodOf=dt.methodOf,_.mixin=ac,_.negate=Qs,_.nthArg=dt.nthArg,_.omit=Re.omit,_.omitBy=Re.omitBy,_.once=Mt.once,_.orderBy=mt.orderBy,_.over=dt.over,_.overArgs=Mt.overArgs,_.overEvery=dt.overEvery,_.overSome=dt.overSome,_.partial=Mt.partial,_.partialRight=Mt.partialRight,_.partition=mt.partition,_.pick=Re.pick,_.pickBy=Re.pickBy,_.property=dt.property,_.propertyOf=dt.propertyOf,_.pull=fe.pull,_.pullAll=fe.pullAll,_.pullAllBy=fe.pullAllBy,_.pullAllWith=fe.pullAllWith,_.pullAt=fe.pullAt,_.range=dt.range,_.rangeRight=dt.rangeRight,_.rearg=Mt.rearg,_.reject=mt.reject,_.remove=fe.remove,_.rest=Mt.rest,_.reverse=fe.reverse,_.sampleSize=mt.sampleSize,_.set=Re.set,_.setWith=Re.setWith,_.shuffle=mt.shuffle,_.slice=fe.slice,_.sortBy=mt.sortBy,_.sortedUniq=fe.sortedUniq,_.sortedUniqBy=fe.sortedUniqBy,_.split=ut.split,_.spread=Mt.spread,_.tail=fe.tail,_.take=fe.take,_.takeRight=fe.takeRight,_.takeRightWhile=fe.takeRightWhile,_.takeWhile=fe.takeWhile,_.tap=Ar.tap,_.throttle=Mt.throttle,_.thru=ol,_.toArray=we.toArray,_.toPairs=Re.toPairs,_.toPairsIn=Re.toPairsIn,_.toPath=dt.toPath,_.toPlainObject=we.toPlainObject,_.transform=Re.transform,_.unary=Mt.unary,_.union=fe.union,_.unionBy=fe.unionBy,_.unionWith=fe.unionWith,_.uniq=fe.uniq,_.uniqBy=fe.uniqBy,_.uniqWith=fe.uniqWith,_.unset=Re.unset,_.unzip=fe.unzip,_.unzipWith=fe.unzipWith,_.update=Re.update,_.updateWith=Re.updateWith,_.values=Re.values,_.valuesIn=Re.valuesIn,_.without=fe.without,_.words=ut.words,_.wrap=Mt.wrap,_.xor=fe.xor,_.xorBy=fe.xorBy,_.xorWith=fe.xorWith,_.zip=fe.zip,_.zipObject=fe.zipObject,_.zipObjectDeep=fe.zipObjectDeep,_.zipWith=fe.zipWith,_.entries=Re.toPairs,_.entriesIn=Re.toPairsIn,_.extend=Re.assignIn,_.extendWith=Re.assignInWith,ac(_,_),_.add=an.add,_.attempt=dt.attempt,_.camelCase=ut.camelCase,_.capitalize=ut.capitalize,_.ceil=an.ceil,_.clamp=oc.clamp,_.clone=we.clone,_.cloneDeep=we.cloneDeep,_.cloneDeepWith=we.cloneDeepWith,_.cloneWith=we.cloneWith,_.conformsTo=we.conformsTo,_.deburr=ut.deburr,_.defaultTo=dt.defaultTo,_.divide=an.divide,_.endsWith=ut.endsWith,_.eq=we.eq,_.escape=ut.escape,_.escapeRegExp=ut.escapeRegExp,_.every=mt.every,_.find=mt.find,_.findIndex=fe.findIndex,_.findKey=Re.findKey,_.findLast=mt.findLast,_.findLastIndex=fe.findLastIndex,_.findLastKey=Re.findLastKey,_.floor=an.floor,_.forEach=mt.forEach,_.forEachRight=mt.forEachRight,_.forIn=Re.forIn,_.forInRight=Re.forInRight,_.forOwn=Re.forOwn,_.forOwnRight=Re.forOwnRight,_.get=Re.get,_.gt=we.gt,_.gte=we.gte,_.has=Re.has,_.hasIn=Re.hasIn,_.head=fe.head,_.identity=vn,_.includes=mt.includes,_.indexOf=fe.indexOf,_.inRange=oc.inRange,_.invoke=Re.invoke,_.isArguments=we.isArguments,_.isArray=Le,_.isArrayBuffer=we.isArrayBuffer,_.isArrayLike=we.isArrayLike,_.isArrayLikeObject=we.isArrayLikeObject,_.isBoolean=we.isBoolean,_.isBuffer=we.isBuffer,_.isDate=we.isDate,_.isElement=we.isElement,_.isEmpty=we.isEmpty,_.isEqual=we.isEqual,_.isEqualWith=we.isEqualWith,_.isError=we.isError,_.isFinite=we.isFinite,_.isFunction=we.isFunction,_.isInteger=we.isInteger,_.isLength=we.isLength,_.isMap=we.isMap,_.isMatch=we.isMatch,_.isMatchWith=we.isMatchWith,_.isNaN=we.isNaN,_.isNative=we.isNative,_.isNil=we.isNil,_.isNull=we.isNull,_.isNumber=we.isNumber,_.isObject=At,_.isObjectLike=we.isObjectLike,_.isPlainObject=we.isPlainObject,_.isRegExp=we.isRegExp,_.isSafeInteger=we.isSafeInteger,_.isSet=we.isSet,_.isString=we.isString,_.isSymbol=we.isSymbol,_.isTypedArray=we.isTypedArray,_.isUndefined=we.isUndefined,_.isWeakMap=we.isWeakMap,_.isWeakSet=we.isWeakSet,_.join=fe.join,_.kebabCase=ut.kebabCase,_.last=Nn,_.lastIndexOf=fe.lastIndexOf,_.lowerCase=ut.lowerCase,_.lowerFirst=ut.lowerFirst,_.lt=we.lt,_.lte=we.lte,_.max=an.max,_.maxBy=an.maxBy,_.mean=an.mean,_.meanBy=an.meanBy,_.min=an.min,_.minBy=an.minBy,_.stubArray=dt.stubArray,_.stubFalse=dt.stubFalse,_.stubObject=dt.stubObject,_.stubString=dt.stubString,_.stubTrue=dt.stubTrue,_.multiply=an.multiply,_.nth=fe.nth,_.noop=dt.noop,_.now=G2.now,_.pad=ut.pad,_.padEnd=ut.padEnd,_.padStart=ut.padStart,_.parseInt=ut.parseInt,_.random=oc.random,_.reduce=mt.reduce,_.reduceRight=mt.reduceRight,_.repeat=ut.repeat,_.replace=ut.replace,_.result=Re.result,_.round=an.round,_.sample=mt.sample,_.size=mt.size,_.snakeCase=ut.snakeCase,_.some=mt.some,_.sortedIndex=fe.sortedIndex,_.sortedIndexBy=fe.sortedIndexBy,_.sortedIndexOf=fe.sortedIndexOf,_.sortedLastIndex=fe.sortedLastIndex,_.sortedLastIndexBy=fe.sortedLastIndexBy,_.sortedLastIndexOf=fe.sortedLastIndexOf,_.startCase=ut.startCase,_.startsWith=ut.startsWith,_.subtract=an.subtract,_.sum=an.sum,_.sumBy=an.sumBy,_.template=ut.template,_.times=dt.times,_.toFinite=we.toFinite,_.toInteger=We,_.toLength=we.toLength,_.toLower=ut.toLower,_.toNumber=we.toNumber,_.toSafeInteger=we.toSafeInteger,_.toString=we.toString,_.toUpper=ut.toUpper,_.trim=ut.trim,_.trimEnd=ut.trimEnd,_.trimStart=ut.trimStart,_.truncate=ut.truncate,_.unescape=ut.unescape,_.uniqueId=dt.uniqueId,_.upperCase=ut.upperCase,_.upperFirst=ut.upperFirst,_.each=mt.forEach,_.eachRight=mt.forEachRight,_.first=fe.head,ac(_,function(){var t={};return Sr(_,function(e,n){Cy.call(_.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),_.VERSION=tR,(_.templateSettings=ut.templateSettings).imports._=_,Bn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){_[t].placeholder=_}),Bn(["drop","take"],function(t,e){Ze.prototype[t]=function(n){n=n===void 0?1:sR(We(n),0);var r=this.__filtered__&&!e?new Ze(this):this.clone();return r.__filtered__?r.__takeCount__=Ny(n,r.__takeCount__):r.__views__.push({size:Ny(n,Ay),type:t+(r.__dir__<0?"Right":"")}),r},Ze.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),Bn(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==rR||n==iR;Ze.prototype[t]=function(i){var o=this.clone();return o.__iteratees__.push({iteratee:Ie(i),type:n}),o.__filtered__=o.__filtered__||r,o}}),Bn(["head","last"],function(t,e){var n="take"+(e?"Right":"");Ze.prototype[t]=function(){return this[n](1).value()[0]}}),Bn(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Ze.prototype[t]=function(){return this.__filtered__?new Ze(this):this[n](1)}}),Ze.prototype.compact=function(){return this.filter(vn)},Ze.prototype.find=function(t){return this.filter(t).head()},Ze.prototype.findLast=function(t){return this.reverse().find(t)},Ze.prototype.invokeMap=Ue(function(t,e){return typeof t=="function"?new Ze(this):this.map(function(n){return da(n,t,e)})}),Ze.prototype.reject=function(t){return this.filter(Qs(Ie(t)))},Ze.prototype.slice=function(t,e){t=We(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Ze(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==void 0&&(e=We(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},Ze.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ze.prototype.toArray=function(){return this.take(Ay)},Sr(Ze.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=_[r?"take"+(e=="last"?"Right":""):e],o=r||/^find/.test(e);i&&(_.prototype[e]=function(){var a=this.__wrapped__,s=r?[1]:arguments,l=a instanceof Ze,u=s[0],f=l||Le(a),c=function(y){var m=i.apply(_,ni([y],s));return r&&d?m[0]:m};f&&n&&typeof u=="function"&&u.length!=1&&(l=f=!1);var d=this.__chain__,h=!!this.__actions__.length,v=o&&!d,p=l&&!h;if(!o&&f){a=p?a:new Ze(this);var g=t.apply(a,s);return g.__actions__.push({func:ol,args:[c],thisArg:void 0}),new kn(g,d)}return v&&p?t.apply(this,s):(g=this.thru(c),v?r?g.value()[0]:g.value():g)})}),Bn(["pop","push","shift","sort","splice","unshift"],function(t){var e=oR[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);_.prototype[t]=function(){var i=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(Le(o)?o:[],i)}return this[n](function(a){return e.apply(Le(a)?a:[],i)})}}),Sr(Ze.prototype,function(t,e){var n=_[e];if(n){var r=n.name+"";Cy.call(so,r)||(so[r]=[]),so[r].push({name:e,func:n})}}),so[Ds(void 0,nR).name]=[{name:"wrapper",func:void 0}],Ze.prototype.clone=U2,Ze.prototype.reverse=Y2,Ze.prototype.value=eR,_.prototype.at=Ar.at,_.prototype.chain=Ar.wrapperChain,_.prototype.commit=Ar.commit,_.prototype.next=Ar.next,_.prototype.plant=Ar.plant,_.prototype.reverse=Ar.reverse,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=Ar.value,_.prototype.first=_.prototype.head,Ty&&(_.prototype[Ty]=Ar.toIterator);var lR=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},pa;(function(t){function e(n){var r=lR(n,[]),i=n.container;if(!i)throw new Error("Ensure the container of LogicFlow is specified and valid.");return lt({},t.defaults,r)}t.get=e})(pa||(pa={})),function(t){t.defaults={background:!1,grid:!1,textEdit:!0,snapline:!0,outline:!1,disabledTools:[]}}(pa||(pa={}));var My={node:!1,edge:!1},uR={node:!0,edge:!0},fR=function(t){return!t||typeof t=="boolean"?Fe(t===!0?uR:My):_o(Fe(My),t)},cR=function(){return ho(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null};function Jt(t){try{return JSON.parse(JSON.stringify(t))}catch{return t}}var Py=200,dR=9999,hR=10,Qe;(function(t){t[t.DEFAULT=1]="DEFAULT",t[t.TEXT_EDIT=2]="TEXT_EDIT",t[t.SHOW_MENU=3]="SHOW_MENU",t[t.ALLOW_CONNECT=4]="ALLOW_CONNECT",t[t.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(Qe||(Qe={}));var Ct;(function(t){t.NODE="node",t.EDGE="edge",t.GRAPH="graph"})(Ct||(Ct={}));var $e;(function(t){t.NODE="node",t.CIRCLE_NODE="circle-node",t.POLYGON_NODE="polygon-node",t.RECT_NODE="rect-node",t.TEXT_NODE="text-node",t.ELLIPSE_NODE="ellipse-node",t.DIAMOND_NODE="diamond-node",t.HTML_NODE="html-node",t.CUSTOM_HTML_NODE="custom-html-node",t.EDGE="edge",t.LINE_EDGE="line-edge",t.POLYLINE_EDGE="polyline-edge",t.BEZIER_EDGE="bezier-edge",t.GRAPH="graph"})($e||($e={}));var de;(function(t){t.ELEMENT_CLICK="element:click",t.NODE_ADD="node:add",t.NODE_DELETE="node:delete",t.NODE_CLICK="node:click",t.NODE_DBCLICK="node:dbclick",t.NODE_GROUP_COPY="node:group-copy-add",t.NODE_DND_ADD="node:dnd-add",t.NODE_DND_DRAG="node:dnd-drag",t.NODE_MOUSEDOWN="node:mousedown",t.NODE_DRAGSTART="node:dragstart",t.NODE_DRAG="node:drag",t.NODE_DROP="node:drop",t.NODE_MOUSEUP="node:mouseup",t.NODE_MOUSEMOVE="node:mousemove",t.NODE_MOUSEENTER="node:mouseenter",t.NODE_MOUSELEAVE="node:mouseleave",t.NODE_CONTEXTMENU="node:contextmenu",t.NODE_ROTATE="node:rotate",t.NODE_RESIZE="node:resize",t.NODE_FOCUS="node:focus",t.NODE_BLUR="node:blur",t.NODE_PROPERTIES_CHANGE="node:properties-change",t.NODE_PROPERTIES_DELETE="node:properties-delete",t.EDGE_ADD="edge:add",t.EDGE_DELETE="edge:delete",t.EDGE_CLICK="edge:click",t.EDGE_DBCLICK="edge:dbclick",t.EDGE_FOCUS="edge:focus",t.EDGE_BLUR="edge:blur",t.EDGE_MOUSEENTER="edge:mouseenter",t.EDGE_MOUSELEAVE="edge:mouseleave",t.EDGE_CONTEXTMENU="edge:contextmenu",t.EDGE_ADJUST="edge:adjust",t.EDGE_EXCHANGE_NODE="edge:exchange-node",t.ANCHOR_DRAGSTART="anchor:dragstart",t.ANCHOR_DRAG="anchor:drag",t.ANCHOR_DROP="anchor:drop",t.ANCHOR_DRAGEND="anchor:dragend",t.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",t.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",t.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",t.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",t.ADJUST_POINT_DRAG="adjustPoint:drag",t.ADJUST_POINT_DROP="adjustPoint:drop",t.ADJUST_POINT_DRAGEND="adjustPoint:dragend",t.BLANK_MOUSEDOWN="blank:mousedown",t.BLANK_DRAGSTART="blank:dragstart",t.BLANK_DRAG="blank:drag",t.BLANK_DROP="blank:drop",t.BLANK_MOUSEMOVE="blank:mousemove",t.BLANK_MOUSEUP="blank:mouseup",t.BLANK_CLICK="blank:click",t.BLANK_CONTEXTMENU="blank:contextmenu",t.SELECTION_MOUSEDOWN="selection:mousedown",t.SELECTION_DRAGSTART="selection:dragstart",t.SELECTION_DRAG="selection:drag",t.SELECTION_DROP="selection:drop",t.SELECTION_MOUSEMOVE="selection:mousemove",t.SELECTION_MOUSEUP="selection:mouseup",t.SELECTION_CONTEXTMENU="selection:contextmenu",t.CONNECTION_NOT_ALLOWED="connection:not-allowed",t.TEXT_MOUSEDOWN="text:mousedown",t.TEXT_DRAGSTART="text:dragstart",t.TEXT_DRAG="text:drag",t.TEXT_DROP="text:drop",t.TEXT_CLICK="text:click",t.TEXT_DBCLICK="text:dbclick",t.TEXT_BLUR="text:blur",t.TEXT_MOUSEMOVE="text:mousemove",t.TEXT_MOUSEUP="text:mouseup",t.TEXT_FOCUS="text:focus",t.TEXT_ADD="text:add",t.TEXT_UPDATE="text:update",t.TEXT_CLEAR="text:clear",t.LABEL_MOUSEDOWN="label:mousedown",t.LABEL_DRAGSTART="label:dragstart",t.LABEL_DRAG="label:drag",t.LABEL_DROP="label:drop",t.LABEL_CLICK="label:click",t.LABEL_DBCLICK="label:dbclick",t.LABEL_BLUR="label:blur",t.LABEL_MOUSEMOVE="label:mousemove",t.LABEL_MOUSEUP="label:mouseup",t.LABEL_FOCUS="label:focus",t.LABEL_ADD="label:add",t.LABEL_UPDATE="label:update",t.LABEL_CLEAR="label:clear",t.LABEL_DELETE="label:delete",t.LABEL_SHOULD_ADD="label:should-add",t.LABEL_BATCH_ADD="label:batch-add",t.LABEL_SHOULD_UPDATE="label:should-update",t.LABEL_SHOULD_DELETE="label:should-delete",t.LABEL_BATCH_DELETE="label:batch-delete",t.LABEL_NOT_ALLOWED_ADD="label:not-allowed-add",t.HISTORY_CHANGE="history:change",t.GRAPH_TRANSFORM="graph:transform",t.GRAPH_RENDERED="graph:rendered",t.GRAPH_UPDATED="graph:updated"})(de||(de={}));var ur;(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.INCREASE=1]="INCREASE"})(ur||(ur={}));var xt;(function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"})(xt||(xt={}));var zn;(function(t){t.TEXT="text",t.LABEL="label"})(zn||(zn={}));var pR=0,Xn=function(){function t(e){var n=e.onDragStart,r=n===void 0?ao:n,i=e.onDragging,o=i===void 0?ao:i,a=e.onDragEnd,s=a===void 0?ao:a,l=e.eventType,u=l===void 0?"":l,f=e.eventCenter,c=e.step,d=c===void 0?1:c,h=e.isStopPropagation,v=h===void 0?!0:h,p=e.model,g=e.data,y=this;this.isDragging=!1,this.isStartDragging=!1,this.startX=0,this.startY=0,this.sumDeltaX=0,this.sumDeltaY=0,this.handleMouseDown=function(m){var A,T,k=window==null?void 0:window.document;if(m.button===pR){y.isStopPropagation&&m.stopPropagation(),y.isStartDragging=!0,y.startX=m.clientX,y.startY=m.clientY,k.addEventListener("mousemove",y.handleMouseMove,!1),k.addEventListener("mouseup",y.handleMouseUp,!1);var C=(A=y.model)===null||A===void 0?void 0:A.getData();(T=y.eventCenter)===null||T===void 0||T.emit(de["".concat(y.eventType,"_MOUSEDOWN")],{e:m,data:y.data||C}),y.startTime=new Date().getTime()}},this.handleMouseMove=function(m){var A,T;if(y.isStopPropagation&&m.stopPropagation(),!!y.isStartDragging&&(y.sumDeltaX+=m.clientX-y.startX,y.sumDeltaY+=m.clientY-y.startY,y.startX=m.clientX,y.startY=m.clientY,y.step<=1||Math.abs(y.sumDeltaX)>y.step||Math.abs(y.sumDeltaY)>y.step)){var k=y.sumDeltaX%y.step,C=y.sumDeltaY%y.step,S=y.sumDeltaX-k,I=y.sumDeltaY-C;y.sumDeltaX=k,y.sumDeltaY=C;var X=(A=y.model)===null||A===void 0?void 0:A.getData();y.isDragging||((T=y.eventCenter)===null||T===void 0||T.emit(de["".concat(y.eventType,"_DRAGSTART")],{e:m,data:y.data||X}),y.onDragStart({event:m})),y.isDragging=!0,Promise.resolve().then(function(){var Q,ue;y.onDragging({deltaX:S,deltaY:I,event:m}),(Q=y.eventCenter)===null||Q===void 0||Q.emit(de["".concat(y.eventType,"_MOUSEMOVE")],{deltaX:S,deltaY:I,e:m,data:y.data||X}),(ue=y.eventCenter)===null||ue===void 0||ue.emit(de["".concat(y.eventType,"_DRAG")],{e:m,data:y.data||X})})}},this.handleMouseUp=function(m){var A=window.document;y.isStartDragging=!1,y.isStopPropagation&&m.stopPropagation(),Promise.resolve().then(function(){var T,k,C;A.removeEventListener("mousemove",y.handleMouseMove,!1),A.removeEventListener("mouseup",y.handleMouseUp,!1);var S=(T=y.model)===null||T===void 0?void 0:T.getData();(k=y.eventCenter)===null||k===void 0||k.emit(de["".concat(y.eventType,"_MOUSEUP")],{e:m,data:y.data||S}),y.isDragging&&(y.isDragging=!1,y.onDragEnd({event:m}),(C=y.eventCenter)===null||C===void 0||C.emit(de["".concat(y.eventType,"_DROP")],{e:m,data:y.data||S}))})},this.cancelDrag=function(){var m=window==null?void 0:window.document;m.removeEventListener("mousemove",y.handleMouseMove,!1),m.removeEventListener("mouseup",y.handleMouseUp,!1),y.onDragEnd({event:void 0}),y.isDragging=!1},this.destroy=function(){y.isStartDragging&&y.cancelDrag()},this.onDragStart=r,this.onDragging=o,this.onDragEnd=s,this.step=d,this.isStopPropagation=v,this.eventType=u,this.eventCenter=f,this.model=p,this.data=g}return t.prototype.setStep=function(e){this.step=e},t.prototype.setModel=function(e){this.model=e},t}(),vR=function(t){var e=t.x,n=t.y,r=t.width,i=t.height;return{x:e-r/2,y:n-i/2,x1:e+r/2,y1:n+i/2}},gR=function(t){var e=t.startPoint,n=t.endPoint,r=(e.x+n.x)/2,i=(e.y+n.y)/2,o=Math.abs(e.x-n.x)+10,a=Math.abs(e.y-n.y)+10;return{x:r-o/2,y:i-a/2,x1:r+o/2,y1:i+a/2}},yR=function(t){var e=t.points,n=Li(e),r=ya(n,8),i=r.x,o=r.y,a=r.width,s=r.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},mR=function(t){var e=t.path,n=uc(e),r=ya(n,8),i=r.x,o=r.y,a=r.width,s=r.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},_R=function(t){if(t.modelType===$e.LINE_EDGE)return gR(t);if(t.modelType===$e.POLYLINE_EDGE)return yR(t);if(t.modelType===$e.BEZIER_EDGE)return mR(t)},bR=function(t,e,n,r){var i=(e.y-t.y)*(r.x-n.x)-(t.x-e.x)*(n.y-r.y);if(i===0)return!1;var o=((e.x-t.x)*(r.x-n.x)*(n.y-t.y)+(e.y-t.y)*(r.x-n.x)*t.x-(r.y-n.y)*(e.x-t.x)*n.x)/i,a=-((e.y-t.y)*(r.y-n.y)*(n.x-t.x)+(e.x-t.x)*(r.y-n.y)*t.y-(r.x-n.x)*(e.y-t.y)*n.y)/i;return(o-t.x)*(o-e.x)<=0&&(a-t.y)*(a-e.y)<=0&&(o-n.x)*(o-r.x)<=0&&(a-n.y)*(a-r.y)<=0?{x:o,y:a}:!1},va=function(t,e,n){var r=t.x,i=t.y,o=e.x,a=e.y,s=n.x,l=n.y,u=(l-a)/(s-o),f=a-u*o;return(r>=o&&r<=s||r<=o&&r>=s)&&(i>=a&&i<=l||i<=a&&i>=l)&&Math.abs(i-u*r-f)<Number.EPSILON},ga=function(t){var e=t.start,n=t.end,r=t.offset,i=t.verticalLength,o=t.type,a={leftX:0,leftY:0,rightX:0,rightY:0},s=Math.atan((n.y-e.y)/(n.x-e.x)),l=Math.atan(r/i),u=Math.sqrt(i*i+r*r);return o==="start"?n.x>=e.x?(a.leftX=e.x+u*Math.sin(s+l),a.leftY=e.y-u*Math.cos(s+l),a.rightX=e.x-u*Math.sin(s-l),a.rightY=e.y+u*Math.cos(s-l)):(a.leftX=e.x-u*Math.sin(s+l),a.leftY=e.y+u*Math.cos(s+l),a.rightX=e.x+u*Math.sin(s-l),a.rightY=e.y-u*Math.cos(s-l)):o==="end"&&(n.x>=e.x?(a.leftX=n.x+u*Math.sin(s-l),a.leftY=n.y-u*Math.cos(s-l),a.rightX=n.x-u*Math.sin(s+l),a.rightY=n.y+u*Math.cos(s+l)):(a.leftX=n.x-u*Math.sin(s-l),a.leftY=n.y+u*Math.cos(s-l),a.rightX=n.x+u*Math.sin(s+l),a.rightY=n.y-u*Math.cos(s+l))),a},xo=function(){return xo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xo.apply(this,arguments)},Gn=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},li=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},xR=function(t,e){return Math.abs(t.centerX-e.centerX)*2<t.width+e.width&&Math.abs(t.centerY-e.centerY)*2<t.height+e.height},sc=function(t){var e=[],n={};return t.forEach(function(r){var i="".concat(r.x,"-").concat(r.y);r.id=i,n[i]=r}),Object.keys(n).forEach(function(r){e.push(n[r])}),e},al=function(t,e){return t.width===0&&t.height===0?t:{x:t.x,y:t.y,centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}},ER=function(t,e){var n=Math.abs(t.x-e.centerX),r=Math.abs(t.y-e.centerY);return n/e.width>r/e.height?xt.HORIZONTAL:xt.VERTICAL},sl=function(t,e,n){var r=ER(n,e);return r===xt.HORIZONTAL?{x:n.x>t.centerX?t.maxX:t.minX,y:n.y}:{x:n.x,y:n.y>t.centerY?t.maxY:t.minY}},Dy=function(t,e){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY),i=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{x:(n+i)/2,y:(r+o)/2,centerX:(n+i)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:i,maxY:o,height:o-r,width:i-n}},ya=function(t,e){t===void 0&&(t=[]);var n=[],r=[];t.forEach(function(f){n.push(f.x),r.push(f.y)});var i=Math.min.apply(Math,li([],Gn(n),!1)),o=Math.max.apply(Math,li([],Gn(n),!1)),a=Math.min.apply(Math,li([],Gn(r),!1)),s=Math.max.apply(Math,li([],Gn(r),!1)),l=o-i,u=s-a;return e&&(l+=e,u+=e),{centerX:(i+o)/2,centerY:(a+s)/2,maxX:o,maxY:s,minX:i,minY:a,x:(i+o)/2,y:(a+s)/2,height:u,width:l}},ll=function(t){var e=t.minX,n=t.minY,r=t.maxX,i=t.maxY;return[{x:e,y:n},{x:r,y:n},{x:r,y:i},{x:e,y:i}]},ul=function(t,e){var n=t.x,r=t.y;return n<e.minX||n>e.maxX||r<e.minY||r>e.maxY},wR=function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]},SR=function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]},OR=function(t,e){return li(li([],Gn(wR(t,e.x)),!1),Gn(SR(t,e.y)),!1)},lc=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},AR=function(t,e){var n=-2,r=0;return e.forEach(function(i){i&&(t.x===i.x&&(r+=n),t.y===i.y&&(r+=n))}),r},Ry=function(t,e,n,r,i){return lc(t,e)+lc(t,n)+AR(t,[e,n,r,i])},Ly=function(t,e,n,r,i){i||(i=0),t.unshift(e[r]),n[r]&&n[r]!==r&&i<=100&&Ly(t,e,n,n[r],i+1)},CR=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},ma=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=r.x-n.x,s=r.y-n.y,l=(-o*(t.x-n.x)+i*(t.y-n.y))/(-a*o+i*s),u=(a*(t.y-n.y)-s*(t.x-n.x))/(-a*o+i*s);return l>=0&&l<=1&&u>=0&&u<=1},Iy=function(t,e,n){if(n.width===0&&n.height===0)return!1;var r=Gn(ll(n),4),i=r[0],o=r[1],a=r[2],s=r[3];return ma(t,e,i,o)||ma(t,e,i,s)||ma(t,e,o,a)||ma(t,e,a,s)},TR=function(t,e,n,r){var i=[];return t.forEach(function(o){o!==e&&(o.x===e.x||o.y===e.y)&&!Iy(o,e,n)&&!Iy(o,e,r)&&i.push(o)}),sc(i)},NR=function(t,e,n,r,i,o,a){var s=[],l=[e],u={},f={},c={};e.id&&(f[e.id]=0,c[e.id]=Ry(e,n,e));var d={};t.forEach(function(p){p.id&&(d[p.id]=p)});for(var h=function(){var p,g=1/0;if(l.forEach(function(m){m.id&&c[m.id]<g&&(g=c[m.id],p=m)}),p===n&&n.id){var y=[];return Ly(y,d,u,n.id),{value:y}}if(!p)return{value:[e,n]};CR(l,p),s.push(p),TR(t,p,r,i).forEach(function(m){if(s.indexOf(m)===-1&&(l.indexOf(m)===-1&&l.push(m),p!=null&&p.id&&(m!=null&&m.id))){var A=c[p.id]+lc(p,m);if(f[m.id]&&A>=f[m.id])return;u[m.id]=p.id,f[m.id]=A,c[m.id]=f[m.id]+Ry(m,n,e,o,a)}})};l.length;){var v=h();if(typeof v=="object")return v.value}return[e,n]},jy=function(t){return _n(t)},ky=function(t){for(var e=1;e<t.length-1;){var n=t[e-1],r=t[e],i=t[e+1];n.x===r.x&&r.x===i.x||n.y===r.y&&r.y===i.y?t.splice(e,1):e++}return t},By=function(t,e,n,r,i){var o=jy(n),a=jy(r),s=al(o,i),l=al(a,i),u=sl(s,o,t),f=sl(l,a,e);if(xR(s,l)){var c=PR(t,e,u,f);return li(li([t,u],Gn(c),!1),[f,e],!1)}var d=ya([u,f]),h=Dy(s,d),v=Dy(l,d),p=[];p=p.concat(ll(h)),p=p.concat(ll(v));var g={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[d,h,v].forEach(function(m){p=p.concat(OR(m,g).filter(function(A){return ul(A,s)&&ul(A,l)}))}),[{x:u.x,y:f.y},{x:f.x,y:u.y}].forEach(function(m){ul(m,s)&&ul(m,l)&&p.push(m)}),p.unshift(u),p.push(f),p=sc(p);var y=NR(p,u,f,o,a,t,e);return y.unshift(t),y.push(e),y.length>2&&(y=ky(y)),sc(y)},MR=function(t){if(t.length===1){var e=Gn(t,1),n=e[0];return[n,n]}else{for(var r=t[0],i=t[1],o=fr(r.x,r.y,i.x,i.y),a=1;a<t.length-1;a++){var s=t[a],l=t[a+1],u=fr(s.x,s.y,l.x,l.y);u>o&&(o=u,r=s,i=l)}return[r,i]}},Fy=function(t,e,n){var r=ui(t,n),i=ui(e,n);return r&&i},$y=function(t,e,n){var r=ui(t,n),i=ui(e,n),o=r&&i,a=r||i;return!o&&a},Hy=function(t,e,n){for(var r=void 0,i=_n(n),o=ll(i),a=0;a<o.length;a++){var s=ma(t,e,o[a],o[(a+1)%o.length]);s&&(r=[o[a],o[(a+1)%o.length]])}if(r)return bR(t,e,r[0],r[1])},fl=function(t,e){var n=void 0;return t.x===e.x?n=xt.VERTICAL:t.y===e.y&&(n=xt.HORIZONTAL),n},Li=function(t){var e=t.split(" "),n=[];return e&&e.forEach(function(r){var i=Gn(r.split(","),2),o=i[0],a=i[1];n.push({x:Number(o),y:Number(a)})}),n},PR=function(t,e,n,r){var i=[],o=fl(t,n),a=fl(e,r);if(o===a)t.y===n.y?(i.push({x:n.x,y:(n.y+r.y)/2}),i.push({x:r.x,y:(n.y+r.y)/2})):(i.push({x:(n.x+r.x)/2,y:n.y}),i.push({x:(n.x+r.x)/2,y:r.y}));else{var s={x:n.x,y:r.y},l=va(s,t,n),u=va(s,e,r);if(l||u)s={x:r.x,y:n.y};else{var f=Wy(s,t,n),c=Wy(s,e,r);f&&c&&(s={x:r.x,y:n.y})}i.push(s)}return i},Wy=function(t,e,n){return t.x===e.x&&t.x===n.x||t.y===e.y&&t.y===n.y},zy=function(t){if(!t)return 0;for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);t.match(/[A-Z]/)?e+=1.5:r>=1&&r<=126||r>=65376&&r<=65439?e+=1:e+=2}return e},DR=function(t){var e=t.start,n=t.end,r;if(e.x===n.x&&e.y===n.y)r="";else{var i={start:e,end:n,offset:10,verticalLength:5},o=ga(xo(xo({},i),{type:"start"})),a=ga(xo(xo({},i),{type:"end"}));r="M".concat(o.leftX," ").concat(o.leftY,`
    L`).concat(o.rightX," ").concat(o.rightY,`
    L`).concat(a.rightX," ").concat(a.rightY,`
    L`).concat(a.leftX," ").concat(a.leftY," z")}return{d:r,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},Xy=function(t){var e=t.start,n=t.end,r=t.sourceNode,i=t.targetNode,o=t.offset,a=_n(r),s=_n(i),l=al(a,o),u=al(s,o),f=sl(l,a,e),c=sl(u,s,n);return{sNext:f,ePre:c}},uc=function(t){var e=t.replace(/M/g,"").replace(/C/g,",").split(","),n=cl(e[0]),r=cl(e[1]),i=cl(e[2]),o=cl(e[3]);return[n,r,i,o]},cl=function(t){var e=Gn(t.replace(/(^\s*)/g,"").split(" "),2),n=e[0],r=e[1];return{x:+n,y:+r}},Gy=function(t,e){var n=Gn(t,4),r=n[0],i=n[1],o=n[2],a=n[3],s=_L(r,i,o,a,e);return[s,t[3]]},Uy=function(t,e){for(var n=t.x,r=t.y,i=Li(e),o=Number.MAX_SAFE_INTEGER,a,s=[],l=0;l<i.length;l++)s.push({start:i[l],end:i[(l+1)%i.length]});if(s.forEach(function(d){var h=d.start,v=d.end;if(h.x===v.x){var p={x:h.x,y:r},g=va(p,h,v);if(g){var y=Math.abs(h.x-n);y<o&&(o=y,a=p)}}else if(h.y===v.y){var p={x:n,y:h.y},g=va(p,h,v);if(g){var y=Math.abs(h.y-r);y<o&&(o=y,a=p)}}}),!a){var u=s[0],f=u.start,c=u.end;a={x:f.x+(c.x-f.x)/2,y:f.y+(c.y-f.y)/2}}return a},RR=function(t){return Ri(t,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},Yy=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function LR(t,e){return typeof e!="function"?function(n,r,i){return Object.assign({type:t.edgeType},i)}:function(n,r,i){var o=e(n,r,i);return o?typeof o=="string"?Object.assign({},i,{type:o}):Object.assign({type:o},i):{type:t.edgeType}}}var IR=function(t){var e=t.rows,n=t.rowsLength,r=t.fontSize,i=0;return at(e,function(o){var a=zy(o);i=a>i?a:i}),{width:Math.ceil(i/2)*r+r/4,height:n*(r+2)+r/4}},Eo=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},dl=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function wo(t,e,n){return n&&e*Math.round(t/e)||t}function jR(t,e,n){if(!t)return[];var r=Math.min.apply(Math,dl([],Eo(t.map(function(p){return p[0]})),!1)),i=Math.max.apply(Math,dl([],Eo(t.map(function(p){return p[0]})),!1)),o=Math.min.apply(Math,dl([],Eo(t.map(function(p){return p[1]})),!1)),a=Math.max.apply(Math,dl([],Eo(t.map(function(p){return p[1]})),!1)),s=-r,l=-o,u=t.map(function(p){var g=Eo(p,2),y=g[0],m=g[1];return[y+s,m+l]}),f=i-r,c=a-o,d=e?e/f:1,h=n?n/c:1,v=Math.min(d,h);return u.map(function(p){var g=Eo(p,2),y=g[0],m=g[1];return[y*v,m*v]})}var fc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},cc=function(t,e,n){var r=fc(t,2),i=r[0],o=r[1],a=fc(e,2),s=a[0],l=a[1],u=fc(n,2),f=u[0],c=u[1];return i>s&&i<f&&o>l&&o<c},Vy=function(t,e){var n=e.multipleSelectKey,r=!1;switch(n){case"meta":r=t.metaKey;break;case"alt":r=t.altKey;break;case"shift":r=t.shiftKey;break;case"ctrl":r=t.ctrlKey;break;default:r=!1;break}return r},dc=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ky(t,e){return t instanceof Xt&&e instanceof Xt}var qy=function(t){dc(e,t);function e(n,r,i){var o=t.call(this,3)||this;return o[0]=n,o[1]=r,o[2]=i,o.x=n,o.y=r,o.z=i,Object.setPrototypeOf(o,e.prototype),o}return e.prototype.add=function(n){if(Ky(this,n))return new Xt(this.x+n.x,this.y+n.y);var r=this.z+n.z;return new hc((this.x+n.x)/r,(this.y+n.y)/r)},e.prototype.subtract=function(n){if(Ky(this,n))return new Xt(this.x-n.x,this.y-n.y);var r=this.z-n.z;return r===0?new Xt(this.x-n.x,this.y-n.y):new hc((this.x-n.x)/r,(this.y-n.y)/r)},e}(Array),Xt=function(t){dc(e,t);function e(n,r,i){var o=t.call(this,n,r,i??0)||this;return Object.setPrototypeOf(o,e.prototype),o}return e.prototype.toString=function(){return"Vector"},e.prototype.dot=function(n){var r=this;return n.reduce(function(i,o,a){return i+o*r[a]})},e.prototype.cross=function(n){return new e(this.y*n.z-this.z*n.y,this.z*n.x-this.x*n.z,this.x*n.y-this.y*n.x)},e.prototype.getLength=function(){return Math.hypot(this.x,this.y)},e.prototype.normalize=function(){var n=this.getLength();return new e(this.x/n,this.y/n)},e.prototype.crossZ=function(n){return this.x*n.y-this.y*n.x},e.prototype.angle=function(n){var r=this.crossZ(n),i=Math.acos(this.normalize().dot(n.normalize()));return r>=0?i:-i},e}(qy),hc=function(t){dc(e,t);function e(n,r){var i=t.call(this,n,r,1)||this;return Object.setPrototypeOf(i,e.prototype),i}return e.prototype.toString=function(){return"Point"},e}(qy),hl=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),So=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},pc=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},pl=function(t){hl(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.call(this,n.length)||this;return i.fill(new Array(3)),n.forEach(function(o,a){i[a]=o}),i.columns=n[0].length,i.rows=n.length,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.getRow=function(n){return this[n]},e.prototype.getColumn=function(n){return pc([],So(this.map(function(r){return r[n]})),!1)},e.prototype.transpose=function(){for(var n=[],r=0;r<this.columns;r++)n.push(this.getColumn(r));return new(e.bind.apply(e,pc([void 0],So(n),!1)))},e.prototype.cross=function(n){var r=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===n.rows)for(var i=0;i<this.rows;i++)for(var o=this.getRow(i),a=function(l){var u=n.getColumn(l);r[i][l]=o.reduce(function(f,c,d){return f+c*u[d]},0)},s=0;s<n.columns;s++)a(s);return new(e.bind.apply(e,pc([void 0],So(r),!1)))},e.prototype.to2D=function(){return this.map(function(n){return[n[0],n[1]]})},e.prototype.toPoints=function(){return this.map(function(n){return new hc(n[0],n[1])})},e.prototype.toString=function(){var n=So(this[0],2),r=n[0],i=n[1],o=So(this[1],2),a=o[0],s=o[1],l=So(this[2],2),u=l[0],f=l[1];return"matrix(".concat(r," ").concat(i," ").concat(a," ").concat(s," ").concat(u," ").concat(f,")")},e.prototype.translate=function(n,r){return this.cross(new vl(n,r))},e.prototype.rotate=function(n){return this.cross(new kR(n))},e.prototype.scale=function(n,r){return this.cross(new BR(n,r))},e}(Array),kR=function(t){hl(e,t);function e(n){var r=t.call(this,new Xt(+Math.cos(n).toFixed(2),+Math.sin(n).toFixed(2),0),new Xt(-Math.sin(n).toFixed(2),+Math.cos(n).toFixed(2),0),new Xt(0,0,1))||this;return Object.setPrototypeOf(r,e.prototype),r}return e.prototype.inverse=function(){return this.transpose()},e}(pl),BR=function(t){hl(e,t);function e(n,r){var i=t.call(this,new Xt(n,0,0),new Xt(0,r,0),new Xt(0,0,1))||this;return i.sx=n,i.sy=r,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.inverse=function(){return new e(1/this.sx,1/this.sy)},e}(pl),vl=function(t){hl(e,t);function e(n,r){var i=t.call(this,new Xt(1,0,0),new Xt(0,1,0),new Xt(n,r,1))||this;return i.tx=n,i.ty=r,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.inverse=function(){return new e(-this.tx,-this.ty)},e}(pl);tb({});var gl=function(){return gl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gl.apply(this,arguments)},vc=function(t){var e=t.anchors;return e},yl=function(t,e){for(var n=e.nodes,r,i=n.length-1;i>=0;i--){var o=n[i],a=HR(t,o);if(a){var s=o.getTargetAnchor(t);if(s){var l={node:o,anchorIndex:s.index,anchor:s.anchor};(!r||FR(o,r.node,e))&&(r=l)}}}return r},FR=function(t,e,n){return t.zIndex>e.zIndex?!0:n.nodesMap[t.id].index>n.nodesMap[e.id].index},$R=function(t,e){for(var n=vc(e),r,i=Number.MAX_SAFE_INTEGER,o=0;o<n.length;o++){var a=fr(t.x,t.y,n[o].x,n[o].y);a<i&&(i=a,r={index:o,anchor:gl(gl({},n[o]),{x:n[o].x,y:n[o].y,id:n[o].id})})}return r},fr=function(t,e,n,r){return Math.hypot(t-n,e-r)},ui=function(t,e){var n=!1,r=0,i=_n(e);return t.x>=i.minX-r&&t.x<=i.maxX+r&&t.y>=i.minY-r&&t.y<=i.maxY+r&&(n=!0),n},HR=function(t,e){var n=!1,r=5,i=_n(e);return t.x>=i.minX-r&&t.x<=i.maxX+r&&t.y>=i.minY-r&&t.y<=i.maxY+r&&(n=!0),n},_n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height;return{minX:e-r/2,minY:n-i/2,maxX:e+r/2,maxY:n+i/2,x:e,y:n,width:r,height:i,centerX:e,centerY:n}},WR=function(t){var e=t,n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;return[{x:n-i/2+a,y:r-o/2+a,r:a},{x:n+i/2-a,y:r-o/2+a,r:a},{x:n-i/2+a,y:r+o/2-a,r:a},{x:n+i/2-a,y:r+o/2-a,r:a}]},Zy=function(t,e,n){var r=WR(n),i,o=Number.MAX_SAFE_INTEGER;return r.forEach(function(a){var s=fr(t.x,t.y,a.x,a.y);s<o&&(o=s,i=a)}),gc(t,e,i)},gc=function(t,e,n){var r,i=n.x,o=n.y,a=n.r;if(e===xt.HORIZONTAL){var s=i-Math.sqrt(a*a-(t.y-o)*(t.y-o)),l=i+Math.sqrt(a*a-(t.y-o)*(t.y-o)),u=Math.abs(s-t.x)<Math.abs(l-t.x)?s:l;r={x:u,y:t.y}}else if(e===xt.VERTICAL){var f=o-Math.sqrt(a*a-(t.x-i)*(t.x-i)),c=o+Math.sqrt(a*a-(t.x-i)*(t.x-i)),d=Math.abs(f-t.y)<Math.abs(c-t.y)?f:c;r={x:t.x,y:d}}return r},Jy=function(t,e){var n=e,r=!1,i=n.x,o=n.y,a=n.width,s=n.height,l=n.radius,u={minX:i-a/2+l,maxX:i+a/2-l,minY:o-s/2+l,maxY:o+s/2-l};return t.y===o+s/2||t.y===o-s/2?r=t.x>u.minX&&t.x<u.maxX:(t.x===i+a/2||t.x===i-a/2)&&(r=t.y>u.minY&&t.y<u.maxY),r},Qy=function(t,e,n){var r,i=n,o=i.x,a=i.y,s=i.rx,l=i.ry;if(e===xt.HORIZONTAL){var u=o-Math.sqrt(s*s-(t.y-a)*(t.y-a)*s*s/(l*l)),f=o+Math.sqrt(s*s-(t.y-a)*(t.y-a)*s*s/(l*l)),c=Math.abs(u-t.x)<Math.abs(f-t.x)?u:f;r={x:c,y:t.y}}else if(e===xt.VERTICAL){var d=a-Math.sqrt(l*l-(t.x-o)*(t.x-o)*l*l/(s*s)),h=a+Math.sqrt(l*l-(t.x-o)*(t.x-o)*l*l/(s*s)),v=Math.abs(d-t.y)<Math.abs(h-t.y)?d:h;r={x:t.x,y:v}}return r},ml=function(t,e,n){for(var r=n.pointsPosition,i=Number.MAX_SAFE_INTEGER,o,a=[],s=0;s<r.length;s++)a.push({start:r[s],end:r[(s+1)%r.length]});return a.forEach(function(l){var u=l.start,f=l.end,c=u,d=f;u.x>f.x&&(c=f,d=u);var h={x:t.x,y:t.y};if(c.x===d.x&&e===xt.HORIZONTAL&&(h={x:c.x,y:t.y}),c.y===d.y&&e===xt.VERTICAL&&(h={x:t.x,y:c.y}),c.x!==d.x&&c.y!==d.y){var v=(d.y-c.y)/(d.x-c.x),p=(c.x*d.y-d.x*c.y)/(c.x-d.x);e===xt.HORIZONTAL?h={x:(t.y-p)/v,y:t.y}:e===xt.VERTICAL&&(h={x:t.x,y:v*t.x+p})}var g=va(h,u,f);if(g){var y=fr(h.x,h.y,t.x,t.y);y<i&&(i=y,o=h)}}),o},zR=function(t){var e=Ri(t,["id","type","x","y","text","label","properties","virtual","rotate","resizable","rotatable"]);return e},em=function(t,e,n,r){var i=t.x,o=t.y;return e.x>t.x?i=t.x+n/2:e.x<t.x&&(i=t.x-n/2),e.y>t.y?o=t.y+r/2:e.y<t.y&&(o=t.y-r/2),{x:i,y:o}},tm=function(t){var e=t.rows,n=t.style,r=t.rowsLength,i=t.className,o=document.createElement("div");o.className=i,o.style.fontSize="".concat(n.fontSize),o.style.width="".concat(n.width),o.style.lineHeight="".concat(n.lineHeight),o.style.padding="".concat(n.padding),n.fontFamily&&(o.style.fontFamily="".concat(n.fontFamily)),r>1?e.forEach(function(s){var l=document.createElement("div");l.textContent=s,o.appendChild(l)}):o.textContent=e[0],document.body.appendChild(o);var a=o.clientHeight;return document.body.removeChild(o),a},nm=function(t){var e=t.rows,n=t.rowsLength,r=t.fontSize,i=0;return e&&e.forEach(function(o){var a=zy(o);i=a>i?a:i}),{width:Math.ceil(i/2)*r+r/4,height:n*(r+2)+r/4}},_l=function(t){return typeof t!="object"?{isAllPass:!!t,msg:t?"":""}:t};let bl;const XR=new Uint8Array(16);function GR(){if(!bl&&(bl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!bl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bl(XR)}const Gt=[];for(let t=0;t<256;++t)Gt.push((t+256).toString(16).slice(1));function UR(t,e=0){return Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]}const rm={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function YR(t,e,n){if(rm.randomUUID&&!t)return rm.randomUUID();t=t||{};const r=t.random||(t.rng||GR)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,UR(r)}var fi=function(){return YR()},_a=new Map,im=function(t){var e=fi();function n(){t();var i=_a.get(e);if(i){var o=window.requestAnimationFrame(n);_a.set(e,o)}}var r=window.requestAnimationFrame(n);return _a.set(e,r),e},xl=function(t){var e=_a.get(t);e&&(window.cancelAnimationFrame(e),_a.delete(t))},ba=function(){return ba=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ba.apply(this,arguments)},VR=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function om(t){var e=t.x,n=e===void 0?0:e,r=t.y,i=r===void 0?0:r,o=t.value,a=t.fontSize,s=a===void 0?12:a,l=t.fill,u=l===void 0?"currentColor":l,f=t.overflowMode,c=f===void 0?"default":f,d=t.textWidth,h=d===void 0?void 0:d,v=t.model,p={x:n,y:i,fill:u,fontSize:s,textAnchor:"middle",dominantBaseline:"central"};if(at(zr(t),function(k){var C=VR(k,2),S=C[0],I=C[1];typeof I!="object"&&(p[S]=I)}),o){var g=String(o).split(/[\r\n]/g),y=g.length;if(c!=="default"){var m=v.BaseType,A=v.modelType;if(m===Ct.NODE&&A!==$e.TEXT_NODE||m===Ct.EDGE&&h)return KR(t)}if(y>1){var T=g.map(function(k,C){var S=s+2,I=(C-(y-1)/2)*S;return B("tspan",{className:"lf-text-tspan",x:n,y:i+I,children:k})});return B("text",ba({},p,{children:T}))}return B("text",ba({},p,{children:o}))}return null}function KR(t){var e=t.x,n=t.y,r=t.value,i=t.model,o=t.textWidth,a=t.fontSize,s=a===void 0?12:a,l=t.lineHeight,u=t.fontFamily,f=u===void 0?"":u,c=t.wrapPadding,d=c===void 0?"0, 0":c,h=t.overflowMode,v=i.width,p=i.height,g=i.textHeight,y=o||v,m=String(r).split(/[\r\n]/g),A=m.length,T=tm({rows:m,style:{fontSize:"".concat(s,"px"),width:"".concat(y,"px"),fontFamily:f,lineHeight:l,padding:d},rowsLength:A,className:"lf-get-text-height"}),k=p>T?p:T;g&&(k=g);var C=h==="ellipsis";return C&&(k=s+2),B("g",{children:B("foreignObject",{width:y,height:k,x:e-y/2,y:n-k/2,style:{overflow:"visible",textAlign:"left"},children:B("div",{className:"lf-node-text-auto-wrap",style:{minHeight:k,width:y,padding:d},children:B("div",{className:C?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:C?m.join(""):"",style:ba({},t),children:m.map(function(S){return B("div",{className:"lf-node-text--auto-wrap-inner",children:S})})})})})})}var yc=function(){return yc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yc.apply(this,arguments)},qR=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Oo(t){var e={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return at(zr(t),function(n){var r=qR(n,2),i=r[0],o=r[1];(i==="style"||typeof o!="object")&&(e[i]=o)}),B("line",yc({},e))}var mc=function(){return mc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},mc.apply(this,arguments)},ZR=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Un(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.className,a=t.strokeWidth,s=t.radius,l=s===void 0?0:s,u=e-r/2,f=n-i/2,c={};return c["stroke-width"]=a,at(zr(t),function(d){var h=ZR(d,2),v=h[0],p=h[1];typeof p!="object"&&(c[v]=p)}),o?c.className="lf-basic-shape ".concat(o):c.className="lf-basic-shape",l&&(c.rx=l,c.ry=l),c.x=u,c.y=f,B("rect",mc({},c))}var _c=function(){return _c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},_c.apply(this,arguments)},JR=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function xa(t){var e={d:""};return at(zr(t),function(n){var r=JR(n,2),i=r[0],o=r[1];(i==="style"||typeof o!="object")&&(e[i]=o)}),B("path",_c({},e))}var bc=function(){return bc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},bc.apply(this,arguments)},QR=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Ao(t){var e=t.x,n=e===void 0?0:e,r=t.y,i=r===void 0?0:r,o=t.r,a=o===void 0?4:o,s=t.className,l={cx:n,cy:i,r:a,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return at(zr(t),function(u){var f=QR(u,2),c=f[0],d=f[1];typeof d!="object"&&(l[c]=d)}),s?l.className="lf-basic-shape ".concat(s):l.className="lf-basic-shape",B("circle",bc({},l))}var xc=function(){return xc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xc.apply(this,arguments)},eL=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function tL(t){var e=t.x,n=e===void 0?0:e,r=t.y,i=r===void 0?0:r,o=t.rx,a=o===void 0?4:o,s=t.ry,l=s===void 0?4:s,u=t.className,f={cx:n,cy:i,rx:a,ry:l,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return at(zr(t),function(c){var d=eL(c,2),h=d[0],v=d[1];typeof v!="object"&&(f[h]=v)}),u?f.className="lf-basic-shape ".concat(u):f.className="lf-basic-shape",B("ellipse",xc({},f))}var Ec=function(){return Ec=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ec.apply(this,arguments)},nL=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function wc(t){var e=t.points,n=e===void 0?[]:e,r=t.className,i={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return at(zr(t),function(o){var a=nL(o,2),s=a[0],l=a[1];typeof l!="object"&&(i[s]=l)}),r?i.classNmae="lf-basic-shape ".concat(r):i.className="lf-basic-shape",i.points=n.map(function(o){return o.join(",")}).join(" "),B("polygon",Ec({},i))}var Sc=function(){return Sc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Sc.apply(this,arguments)},rL=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function iL(t){var e=t.className,n={points:"",fill:"none"};return at(zr(t),function(r){var i=rL(r,2),o=i[0],a=i[1];(o==="style"||typeof a!="object")&&(n[o]=a)}),e&&(n.className="".concat(e)),B("polyline",Sc({},n))}var am=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ea=function(){return Ea=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ea.apply(this,arguments)},oL=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},aL=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},ht;(function(t){t[t.LEFT_TOP=0]="LEFT_TOP",t[t.RIGHT_TOP=1]="RIGHT_TOP",t[t.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",t[t.LEFT_BOTTOM=3]="LEFT_BOTTOM"})(ht||(ht={}));var sL=function(t){am(e,t);function e(n){var r=t.call(this)||this;r.updateEdgePointByAnchors=function(){var s=r.nodeModel,l=s.id,u=s.anchors,f=r.graphModel.getNodeEdges(l);at(f,function(c){if(c.sourceNodeId===l){var d=ai(u,function(h){return h.id===c.sourceAnchorId});d&&c.updateStartPoint({x:d.x,y:d.y})}else if(c.targetNodeId===l){var d=ai(u,function(v){return v.id===c.targetAnchorId});d&&c.updateEndPoint({x:d.x,y:d.y})}})},r.triggerResizeEvent=function(s,l,u,f,c,d){r.graphModel.eventCenter.emit(de.NODE_RESIZE,{preData:s,data:l,deltaX:u,deltaY:f,index:c,model:d})},r.recalcResizeInfo=function(s,l,u,f,c){u===void 0&&(u=1),f===void 0&&(f=!1),c===void 0&&(c=!1);var d=Fe(l),h=d.deltaX,v=d.deltaY,p=d.width,g=d.height,y=d.PCTResizeInfo;if(y){var m=4,A=0,T=0;switch(s){case ht.LEFT_TOP:T=(h*-1-v)/m;break;case ht.RIGHT_TOP:T=(h-v)/m;break;case ht.RIGHT_BOTTOM:T=(h+v)/m;break;case ht.LEFT_BOTTOM:T=(h*-1+v)/m;break}T!==0&&(A=Math.round(T/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+A,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.heightPCT=Math.max(Math.min(y.ResizePCT.heightPCT+A,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var k=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),C=Math.round(y.ResizePCT.heightPCT*y.ResizeBasis.basisHeight/100);switch(s){case ht.LEFT_TOP:h=p-k,v=g-C;break;case ht.RIGHT_TOP:h=k-p,v=g-C;break;case ht.RIGHT_BOTTOM:h=k-p,v=C-g;break;case ht.LEFT_BOTTOM:h=p-k,v=C-g;break}return d}switch(s){case ht.LEFT_TOP:d.width=f?p:p-h*u,d.height=c?g:g-v*u;break;case ht.RIGHT_TOP:d.width=f?p:p+h*u,d.height=c?g:g-v*u;break;case ht.RIGHT_BOTTOM:d.width=f?p:p+h*u,d.height=c?g:g+v*u;break;case ht.LEFT_BOTTOM:d.width=f?p:p-h*u,d.height=c?g:g+v*u;break}return d},r.resizeNode=function(s){var l=s.deltaX,u=s.deltaY,f=r.index,c=r.props,d=c.model,h=c.graphModel,v=c.x,p=c.y;sm({x:v,y:p,deltaX:l,deltaY:u,index:f,nodeModel:d,graphModel:h,cancelCallback:function(){r.dragHandler.cancelDrag()}})},r.onDragging=function(s){var l=s.deltaX,u=s.deltaY,f=r.graphModel.transformModel,c=aL(f.fixDeltaXY(l,u),2),d=c[0],h=c[1];r.resizeNode({deltaX:d,deltaY:h})},r.onDragEnd=function(){var s=r.nodeModel.x,l=r.nodeModel.y;r.nodeModel.moveTo(s,l),r.updateEdgePointByAnchors()};var i=n.index,o=n.model,a=n.graphModel;return r.index=i,r.nodeModel=o,r.graphModel=a,r.dragHandler=new Xn({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:a.gridSize}),r}return e.prototype.componentWillUnmount=function(){this.dragHandler.destroy()},e.prototype.render=function(){var n=this.props,r=n.x,i=n.y,o=n.direction,a=n.model,s=a.getResizeControlStyle(),l=s.width,u=s.height,f=oL(s,["width","height"]);return B("g",{className:"lf-resize-control lf-resize-control-".concat(o),children:[B(Un,Ea({className:"lf-resize-control-content",x:r,y:i,width:l??7,height:u??7},f)),B(Un,{className:"lf-resize-control-content",x:r,y:i,width:25,height:25,fill:"transparent",stroke:"transparent",onMouseDown:this.dragHandler.handleMouseDown})]})},e}(Ge),lL=function(t){am(e,t);function e(){return t.call(this)||this}return e.prototype.getResizeControl=function(){var n=this.props,r=n.model,i=n.graphModel,o=_n(r),a=o.minX,s=o.minY,l=o.maxX,u=o.maxY,f=[{index:ht.LEFT_TOP,direction:"nw",x:a,y:s},{index:ht.RIGHT_TOP,direction:"ne",x:l,y:s},{index:ht.RIGHT_BOTTOM,direction:"se",x:l,y:u},{index:ht.LEFT_BOTTOM,direction:"sw",x:a,y:u}];return Mn(f,function(c){return B(sL,Ea({},c,{model:r,graphModel:i}))})},e.prototype.getResizeOutline=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.getResizeOutlineStyle();return B(Un,Ea({},s,{x:r,y:i,width:o,height:a}))},e.prototype.render=function(){return B("g",{className:"lf-resize-control-group",children:[this.getResizeOutline(),this.getResizeControl()]})},e}(Ge);function uL(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,a={x:n+(i-n)/2,y:r+(o-r)/2};return a}function wa(t,e,n){var r=fL(n),i=t.x-e.x,o=t.y-e.y,a=i*Math.cos(r)-o*Math.sin(r)+e.x,s=i*Math.sin(r)+o*Math.cos(r)+e.y;return{x:a,y:s}}function fL(t){return t*Math.PI/180}function cL(t){return t/Math.PI*180}function dL(t,e,n,r,i,o,a,s,l){s===void 0&&(s=!1),l===void 0&&(l=!1);var u=e.deltaX,f=e.deltaY,c=e.width,d=e.height,h=cL(n),v={x:r,y:i},p={x:o,y:a},g=wa(v,p,h),y={x:g.x+u,y:g.y+f},m=gL(g,y,p,h,s,l,c,d),A=m.width,T=m.height,k=m.center;return e.width=A*t,e.height=T*t,e.deltaX=(k.x-p.x)*2,e.deltaY=(k.y-p.y)*2,e}var hL=function(t,e,n,r,i,o,a,s,l,u){n===void 0&&(n=1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=0);var f=Fe(e),c=f.deltaX,d=f.deltaY,h=f.width,v=f.height,p=f.PCTResizeInfo;if(p){var g=4,y=0,m=0;switch(t){case ht.LEFT_TOP:m=(c*-1-d)/g;break;case ht.RIGHT_TOP:m=(c-d)/g;break;case ht.RIGHT_BOTTOM:m=(c+d)/g;break;case ht.LEFT_BOTTOM:m=(c*-1+d)/g;break}m!==0&&(y=Math.round(m/p.ResizeBasis.basisHeight*1e5)/1e3),p.ResizePCT.widthPCT=Math.max(Math.min(p.ResizePCT.widthPCT+y,p.ScaleLimit.maxScaleLimit),p.ScaleLimit.minScaleLimit),p.ResizePCT.heightPCT=Math.max(Math.min(p.ResizePCT.heightPCT+y,p.ScaleLimit.maxScaleLimit),p.ScaleLimit.minScaleLimit);var A=Math.round(p.ResizePCT.widthPCT*p.ResizeBasis.basisWidth/100),T=Math.round(p.ResizePCT.heightPCT*p.ResizeBasis.basisHeight/100);switch(t){case ht.LEFT_TOP:c=h-A,d=v-T;break;case ht.RIGHT_TOP:c=A-h,d=v-T;break;case ht.RIGHT_BOTTOM:c=A-h,d=T-v;break;case ht.LEFT_BOTTOM:c=h-A,d=T-v;break}return f}if(o%(2*Math.PI)!==0&&a!==void 0&&s!==void 0)return dL(n,f,o,a,s,l,u,r,i);switch(t){case ht.LEFT_TOP:f.width=r?h:h-c*n,f.height=i?v:v-d*n;break;case ht.RIGHT_TOP:f.width=r?h:h+c*n,f.height=i?v:v-d*n;break;case ht.RIGHT_BOTTOM:f.width=r?h:h+c*n,f.height=i?v:v+d*n;break;case ht.LEFT_BOTTOM:f.width=r?h:h-c*n,f.height=i?v:v+d*n;break}return f},pL=function(t,e){var n=t.id,r=t.anchors,i=e.getNodeEdges(n);at(i,function(o){if(o.sourceNodeId===n){var a=ai(r,function(s){return s.id===o.sourceAnchorId});a&&o.updateStartPoint({x:a.x,y:a.y})}else if(o.targetNodeId===n){var a=ai(r,function(l){return l.id===o.targetAnchorId});a&&o.updateEndPoint({x:a.x,y:a.y})}})},vL=function(t,e,n,r,i,o,a){a.eventCenter.emit(de.NODE_RESIZE,{preData:t,data:e,deltaX:n,deltaY:r,index:i,model:o})},sm=function(t){var e=t.x,n=t.y,r=t.deltaX,i=t.deltaY,o=t.index,a=t.nodeModel,s=t.graphModel,l=t.cancelCallback,u=a.r,f=a.rx,c=a.ry,d=a.width,h=a.height,v=a.PCTResizeInfo,p=a.minWidth,g=a.minHeight,y=a.maxWidth,m=a.maxHeight,A=a.rotate,T=a.x,k=a.y,C=p===y,S=g===m,I={width:u||f||d,height:u||c||h,deltaX:r,deltaY:i,PCTResizeInfo:v},X=u||f&&c?1/2:1,Q=e,ue=n,he=hL(o,I,X,C,S,A,Q,ue,T,k);if(he.width<p||he.width>y||he.height<g||he.height>m){l==null||l();return}(A%(2*Math.PI)==0||v||Q===void 0||ue===void 0)&&(he.deltaX=C?0:he.deltaX,he.deltaY=S?0:he.deltaY);var w=a.getData(),D=a.resize(he);w.x===D.x&&w.y===D.y||(pL(a,s),vL(w,D,r,i,o,a,s))};function gL(t,e,n,r,i,o,a,s){i===void 0&&(i=!1),o===void 0&&(o=!1);var l={x:n.x-(t.x-n.x),y:n.y-(t.y-n.y)},u=uL(l,e),f=wa(e,u,-r),c=wa(l,u,-r);if(i){var d=Math.abs(f.x-c.x),h=d-a;u.x>f.x?u.x=u.x+h/2:u.x=u.x-h/2}if(o){var v=Math.abs(f.y-c.y),p=v-s;u.y>f.y?u.y=u.y+p/2:u.y=u.y-p/2}if(i||o){var g=wa(c,u,r),y=g.x-l.x,m=g.y-l.y;u.x=u.x-y,u.y=u.y-m,c=wa(l,u,-r),f={x:u.x-(c.x-u.x),y:u.y-(c.y-u.y)}}var A=Math.abs(f.x-c.x),T=Math.abs(f.y-c.y);return i&&(A=a),o&&(T=s),{width:A,height:T,center:u}}var yL=100,mL={x:1,y:0};function _L(t,e,n,r,i){for(var o=function(h){if(h<0||h>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:t.x*Math.pow(1-h,3)+3*e.x*h*Math.pow(1-h,2)+3*n.x*Math.pow(h,2)*(1-h)+r.x*Math.pow(h,3),y:t.y*Math.pow(1-h,3)+3*e.y*h*Math.pow(1-h,2)+3*n.y*Math.pow(h,2)*(1-h)+r.y*Math.pow(h,3)}},a=0,s=2,l=r.x,u=r.y,f=r;a<i&&s<50;){f=o(1-s/yL);var c=f.x,d=f.y;a=fr(l,u,c,d),s++}return f}function bL(t,e){return t.x*e.y-t.y*e.x}function xL(t,e){var n=[t.x,t.y,t.z],r=[e.x,e.y,e.z];return r.reduce(function(i,o,a){return i+o*n[a]})}function EL(t,e){var n=bL(t,e),r=Math.acos(xL(lm(t),lm(e)));return n>=0?r:-r}function lm(t){var e=Math.hypot(t.x,t.y);return{x:t.x/e,y:t.y/e,z:0}}function wL(t){return EL(mL,t)}function SL(t){return t*(180/Math.PI)}var OL={baseNode:{fill:"#fff",stroke:"#000",strokeWidth:2},baseEdge:{stroke:"#000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000",fill:"#fff",r:4,hover:{r:10,fill:"#949494",fillOpacity:.5,stroke:"#949494"}},anchorLine:{stroke:"#000",strokeWidth:2,strokeDasharray:"3,2"},nodeText:{color:"#000",overflowMode:"default",fontSize:12,lineHeight:1.2},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#fff"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",fillOpacity:1,stroke:"#949494"}},arrow:{offset:10,verticalLength:5},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#fff",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10,10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5},resizeControl:{width:7,height:7,fill:"#fff",stroke:"#000"},resizeOutline:{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},um=function(t){var e=Fe(OL);return t&&(e=_o(e,t)),e},AL=um,CL=1e3,TL=999,Oc=function(){return++CL},NL=function(){return--TL},Dt=function(){return Dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dt.apply(this,arguments)},xe=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},El=function(){function t(e,n){var r;this.BaseType=Ct.EDGE,this.id="",this.type="",this.sourceNodeId="",this.targetNodeId="",this.textMode=zn.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this.points="",this.pointsList=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.isAnimation=!1,this.isShowAdjustPoint=!1,this.zIndex=0,this.state=Qe.DEFAULT,this.modelType=$e.EDGE,this.customTextPosition=!1,this.style={},this.arrowConfig={markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")},this.graphModel=n,this.properties=(r=e.properties)!==null&&r!==void 0?r:{},this.initEdgeData(e),this.setAttributes()}return t.prototype.initEdgeData=function(e){if(e.properties||(e.properties={}),!e.id){var n=this.graphModel.idGenerator,r=n&&n(e.type),i=this.createId();e.id=i||r||fi()}this.arrowConfig.markerEnd="url(#marker-end-".concat(e.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(e.id,")");var o=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=o,lt(this,RR(e));var a=this.graphModel.overlapMode;a===ur.INCREASE&&(this.zIndex=e.zIndex||Oc()),this.setAnchors(),this.initPoints(),this.formatText(e)},t.prototype.setAttributes=function(){},t.prototype.createId=function(){return null},t.prototype.getEdgeStyle=function(){return Dt(Dt({},this.graphModel.theme.baseEdge),this.style)},t.prototype.getAdjustPointStyle=function(){return Dt({},this.graphModel.theme.edgeAdjust)},t.prototype.getTextStyle=function(){var e=this.graphModel.theme.edgeText;return Fe(e)},t.prototype.getEdgeAnimationStyle=function(){var e=this.graphModel.theme.edgeAnimation;return Fe(e)},t.prototype.getArrowStyle=function(){var e=this.getEdgeStyle(),n=this.getEdgeAnimationStyle(),r=this.graphModel.theme.arrow,i=this.isAnimation?n.stroke:e.stroke;return Dt(Dt(Dt({},e),{fill:i,stroke:i}),r)},t.prototype.getOutlineStyle=function(){var e=this.graphModel,n=e.theme.outline;return Fe(n)},t.prototype.getTextPosition=function(){return{x:0,y:0}},Object.defineProperty(t.prototype,"sourceNode",{get:function(){var e,n;return(n=(e=this.graphModel)===null||e===void 0?void 0:e.nodesMap[this.sourceNodeId])===null||n===void 0?void 0:n.model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetNode",{get:function(){var e,n;return(n=(e=this.graphModel)===null||e===void 0?void 0:e.nodesMap[this.targetNodeId])===null||n===void 0?void 0:n.model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textPosition",{get:function(){return this.getTextPosition()},enumerable:!1,configurable:!0}),t.prototype.getBeginAnchor=function(e,n,r){var i,o,a=vc(e);if(r){if(i=ai(a,function(s){return s.id===r}),i)return i;console.warn("".concat(r,""))}return a.forEach(function(s){var l=Yy(s,n);(o===void 0||l<o)&&(o=l,i=s)}),i},t.prototype.getEndAnchor=function(e,n){var r=this,i,o,a=vc(e);if(n){if(i=ai(a,function(s){return s.id===n}),i)return i;console.warn("".concat(n,""))}return a.forEach(function(s){if(r.startPoint){var l=Yy(s,r.startPoint);(o===void 0||l<o)&&(o=l,i=s)}}),i},t.prototype.getProperties=function(){return tr(this.properties)},t.prototype.getData=function(){var e=this.properties;qr(e)&&(e=tr(e));var n={id:this.id,type:this.type,properties:e,sourceNodeId:this.sourceNodeId,targetNodeId:this.targetNodeId,sourceAnchorId:this.sourceAnchorId,targetAnchorId:this.targetAnchorId,startPoint:lt({},this.startPoint),endPoint:lt({},this.endPoint)};this.graphModel.overlapMode===ur.INCREASE&&(n.zIndex=this.zIndex);var r=this.text,i=r.x,o=r.y,a=r.value;return a&&(n.text={x:i,y:o,value:a}),n},t.prototype.getHistoryData=function(){return this.getData()},t.prototype.setProperty=function(e,n){ku(this.properties,e,Jt(n)),this.setAttributes()},t.prototype.deleteProperty=function(e){delete this.properties[e],this.setAttributes()},t.prototype.setProperties=function(e){this.properties=Dt(Dt({},tr(this.properties)),Jt(e)),this.setAttributes()},t.prototype.changeEdgeId=function(e){var n=this.arrowConfig,r=n.markerEnd,i=n.markerStart;i&&i==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(e,")")),r&&r==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(e,")")),this.id=e},t.prototype.setStyle=function(e,n){var r;this.style=Dt(Dt({},this.style),(r={},r[e]=Jt(n),r))},t.prototype.setStyles=function(e){this.style=Dt(Dt({},this.style),Jt(e))},t.prototype.updateStyles=function(e){this.style=Dt({},Jt(e))},t.prototype.setTextMode=function(e){this.textMode=e},t.prototype.formatText=function(e){var n,r,i,o=this.graphModel.editConfigModel,a=o.edgeTextDraggable,s=o.edgeTextEdit,l=this.textPosition,u=l.x,f=l.y,c=e.text,d={value:"",x:u,y:f,draggable:a,editable:s};c&&(typeof c=="string"?d=Dt(Dt({},d),{value:c}):(d=Dt(Dt({},d),{x:(n=c.x)!==null&&n!==void 0?n:u,y:(r=c.y)!==null&&r!==void 0?r:f,value:(i=c.value)!==null&&i!==void 0?i:""}),Di(c.draggable)||(d.draggable=c.draggable),Di(c.editable)||(d.editable=c.editable))),this.text=d},t.prototype.resetTextPosition=function(){var e=this.textPosition,n=e.x,r=e.y;this.text.x=n,this.text.y=r},t.prototype.moveText=function(e,n){var r=this.text,i=r.x,o=r.y,a=r.value,s=r.draggable,l=r.editable;this.text={value:a,editable:l,draggable:s,x:i+e,y:o+n}},t.prototype.setText=function(e){e&&lt(this.text,e)},t.prototype.updateText=function(e){this.text=Dt(Dt({},tr(this.text)),{value:e})},t.prototype.setAnchors=function(){if(!this.sourceAnchorId||!this.startPoint){var e=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!e)throw new Error("beginAnchoranchorsanchors");this.startPoint||(this.startPoint={x:e.x,y:e.y}),this.sourceAnchorId||(this.sourceAnchorId=e.id)}if(!this.targetAnchorId||!this.endPoint){var e=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!e)throw new Error("endAnchoranchorsanchors");this.endPoint||(this.endPoint={x:e.x,y:e.y}),this.targetAnchorId||(this.targetAnchorId=e.id)}},t.prototype.setSelected=function(e){e===void 0&&(e=!0),this.isSelected=e},t.prototype.setHovered=function(e){e===void 0&&(e=!0),this.isHovered=e},t.prototype.setHitable=function(e){e===void 0&&(e=!0),this.isHitable=e},t.prototype.setHittable=function(e){e===void 0&&(e=!0),this.isHittable=e},t.prototype.openEdgeAnimation=function(){this.isAnimation=!0},t.prototype.closeEdgeAnimation=function(){this.isAnimation=!1},t.prototype.setElementState=function(e,n){this.state=e,this.additionStateData=n},t.prototype.updateStartPoint=function(e){this.startPoint=e},t.prototype.moveStartPoint=function(e,n){this.startPoint&&(this.startPoint.x+=e,this.startPoint.y+=n)},t.prototype.updateEndPoint=function(e){this.endPoint=e},t.prototype.moveEndPoint=function(e,n){this.endPoint&&(this.endPoint.x+=e,this.endPoint.y+=n)},t.prototype.setZIndex=function(e){e===void 0&&(e=0),this.zIndex=e},t.prototype.initPoints=function(){},t.prototype.updateAttributes=function(e){lt(this,e)},t.prototype.getAdjustStart=function(){return this.startPoint},t.prototype.getAdjustEnd=function(){return this.endPoint},t.prototype.updateAfterAdjustStartAndEnd=function(e){var n=e.startPoint,r=e.endPoint;this.updateStartPoint({x:n.x,y:n.y}),this.updateEndPoint({x:r.x,y:r.y})},t.BaseType=Ct.EDGE,xe([$],t.prototype,"type",void 0),xe([$],t.prototype,"sourceNodeId",void 0),xe([$],t.prototype,"targetNodeId",void 0),xe([$],t.prototype,"startPoint",void 0),xe([$],t.prototype,"endPoint",void 0),xe([$],t.prototype,"textMode",void 0),xe([$],t.prototype,"text",void 0),xe([$],t.prototype,"properties",void 0),xe([$],t.prototype,"points",void 0),xe([$],t.prototype,"pointsList",void 0),xe([$],t.prototype,"isSelected",void 0),xe([$],t.prototype,"isHovered",void 0),xe([$],t.prototype,"isHitable",void 0),xe([$],t.prototype,"isHittable",void 0),xe([$],t.prototype,"draggable",void 0),xe([$],t.prototype,"visible",void 0),xe([$],t.prototype,"isAnimation",void 0),xe([$],t.prototype,"isShowAdjustPoint",void 0),xe([$],t.prototype,"zIndex",void 0),xe([$],t.prototype,"state",void 0),xe([$],t.prototype,"style",void 0),xe([$],t.prototype,"arrowConfig",void 0),xe([gt],t.prototype,"sourceNode",null),xe([gt],t.prototype,"targetNode",null),xe([gt],t.prototype,"textPosition",null),xe([F],t.prototype,"setProperty",null),xe([F],t.prototype,"deleteProperty",null),xe([F],t.prototype,"setProperties",null),xe([F],t.prototype,"changeEdgeId",null),xe([F],t.prototype,"setStyle",null),xe([F],t.prototype,"setStyles",null),xe([F],t.prototype,"updateStyles",null),xe([F],t.prototype,"setTextMode",null),xe([F],t.prototype,"formatText",null),xe([F],t.prototype,"resetTextPosition",null),xe([F],t.prototype,"moveText",null),xe([F],t.prototype,"setText",null),xe([F],t.prototype,"updateText",null),xe([F],t.prototype,"setAnchors",null),xe([F],t.prototype,"setSelected",null),xe([F],t.prototype,"setHovered",null),xe([F],t.prototype,"setHitable",null),xe([F],t.prototype,"setHittable",null),xe([F],t.prototype,"openEdgeAnimation",null),xe([F],t.prototype,"closeEdgeAnimation",null),xe([F],t.prototype,"setElementState",null),xe([F],t.prototype,"updateStartPoint",null),xe([F],t.prototype,"moveStartPoint",null),xe([F],t.prototype,"updateEndPoint",null),xe([F],t.prototype,"moveEndPoint",null),xe([F],t.prototype,"setZIndex",null),xe([F],t.prototype,"initPoints",null),xe([F],t.prototype,"updateAttributes",null),xe([F],t.prototype,"getAdjustStart",null),xe([F],t.prototype,"getAdjustEnd",null),xe([F],t.prototype,"updateAfterAdjustStartAndEnd",null),t}(),ML=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ii=function(){return Ii=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ii.apply(this,arguments)},cr=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},Ac=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},fm=function(t){ML(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.modelType=$e.BEZIER_EDGE,i.path="",i.initEdgeData(n),i.setAttributes(),i}return e.prototype.initEdgeData=function(n){this.offset=100,t.prototype.initEdgeData.call(this,n)},e.prototype.getEdgeStyle=function(){var n=this.graphModel.theme.bezier,r=t.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return Ii(Ii(Ii({},r),Fe(n)),Fe(o))},e.prototype.getTextPosition=function(){if(this.pointsList&&this.pointsList.length>0){var n=0,r=0;return this.pointsList.forEach(function(i){var o=i.x,a=i.y;n+=o,r+=a}),{x:n/this.pointsList.length,y:r/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e.prototype.getData=function(){var n=t.prototype.getData.call(this),r=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return Ii(Ii({},n),{pointsList:r})},e.prototype.getControls=function(){var n=this.startPoint,r=this.endPoint,i=Xy({start:n,end:r,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return i},e.prototype.getPath=function(n){var r=Ac(n,4),i=r[0],o=r[1],a=r[2],s=r[3];return"M ".concat(i.x," ").concat(i.y,`
    C `).concat(o.x," ").concat(o.y,`,
    `).concat(a.x," ").concat(a.y,`,
    `).concat(s.x," ").concat(s.y)},e.prototype.initPoints=function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var n=this.getControls(),r=n.sNext,i=n.ePre;this.updatePath(r,i)},e.prototype.updatePath=function(n,r){n=Fe(n),r=Fe(r);var i={x:this.startPoint.x,y:this.startPoint.y},o={x:this.endPoint.x,y:this.endPoint.y};if(!n||!r){var a=this.getControls();n=a.sNext,r=a.ePre}this.pointsList=[i,n,r,o],this.path=this.getPath(this.pointsList)},e.prototype.updateStartPoint=function(n){this.startPoint=Object.assign({},n),this.updatePoints()},e.prototype.updateEndPoint=function(n){this.endPoint=Object.assign({},n),this.updatePoints()},e.prototype.moveStartPoint=function(n,r){this.startPoint.x+=n,this.startPoint.y+=r;var i=Ac(this.pointsList,3),o=i[1],a=i[2];o.x+=n,o.y+=r,this.updatePath(o,a)},e.prototype.moveEndPoint=function(n,r){this.endPoint.x+=n,this.endPoint.y+=r;var i=Ac(this.pointsList,3),o=i[1],a=i[2];a.x+=n,a.y+=r,this.updatePath(o,a)},e.prototype.updateAdjustAnchor=function(n,r){var i;r==="sNext"?this.pointsList[1]=n:r==="ePre"&&(this.pointsList[2]=n),this.path=this.getPath(this.pointsList),!((i=this.text)===null||i===void 0)&&i.value&&this.setText(lt({},this.text,this.textPosition))},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var n=this.pointsList;return n[n.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(n){var r=n.startPoint,i=n.endPoint,o=n.sourceNode,a=n.targetNode,s=Xy({start:r,end:i,sourceNode:o,targetNode:a,offset:this.offset}),l=s.sNext,u=s.ePre;this.pointsList=[r,l,u,i],this.initPoints()},cr([$],e.prototype,"path",void 0),cr([F],e.prototype,"initPoints",null),cr([F],e.prototype,"updatePoints",null),cr([F],e.prototype,"updateStartPoint",null),cr([F],e.prototype,"updateEndPoint",null),cr([F],e.prototype,"moveStartPoint",null),cr([F],e.prototype,"moveEndPoint",null),cr([F],e.prototype,"updateAdjustAnchor",null),cr([F],e.prototype,"getAdjustStart",null),cr([F],e.prototype,"getAdjustEnd",null),cr([F],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(El),PL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sa=function(){return Sa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Sa.apply(this,arguments)},cm=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},DL=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},dm=function(t){PL(e,t);function e(){var n=t.apply(this,DL([],cm(arguments),!1))||this;return n.modelType=$e.LINE_EDGE,n}return e.prototype.getEdgeStyle=function(){var n=this.graphModel.theme.line,r=t.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return Sa(Sa(Sa({},r),Fe(n)),Fe(o))},e.prototype.initEdgeData=function(n){t.prototype.initEdgeData.call(this,n),this.points=this.getPath([this.startPoint,this.endPoint])},e.prototype.getPath=function(n){var r=cm(n,2),i=r[0],o=r[1];return"".concat(i.x,",").concat(i.y," ").concat(o.x,",").concat(o.y)},e.prototype.getTextPosition=function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e}(El),RL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oa=function(){return Oa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Oa.apply(this,arguments)},Qt=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},hm=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},LL=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Co=function(t){RL(e,t);function e(){var n=t.apply(this,LL([],hm(arguments),!1))||this;return n.modelType=$e.POLYLINE_EDGE,n.draggingPointList=[],n}return e.prototype.initEdgeData=function(n){this.offset=30,n.pointsList&&(this.pointsList=n.pointsList),t.prototype.initEdgeData.call(this,n)},e.prototype.getEdgeStyle=function(){var n=this.graphModel.theme.polyline,r=t.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return Oa(Oa(Oa({},r),Fe(n)),Fe(o))},e.prototype.getTextPosition=function(){var n,r=(n=this.text)===null||n===void 0?void 0:n.value;if(this.dbClickPosition&&!r){var i=this.dbClickPosition,o=i.x,a=i.y;return{x:o,y:a}}var s=Li(this.points),l=hm(MR(s),2),u=l[0],f=l[1];return{x:(u.x+f.x)/2,y:(u.y+f.y)/2}},e.prototype.getAfterAnchor=function(n,r,i){var o,a;return i.forEach(function(s){var l;n===xt.HORIZONTAL?l=Math.abs(r.y-s.y):n===xt.VERTICAL&&(l=Math.abs(r.x-s.x)),(!a||a>l)&&(a=l,o=s)}),o},e.prototype.getCrossPoint=function(n,r,i){var o;return n===xt.HORIZONTAL?o={x:i.x,y:r.y}:n===xt.VERTICAL&&(o={x:r.x,y:i.y}),o},e.prototype.removeCrossPoints=function(n,r,i){var o=i.map(function(y){return y});if(n===1){var a=o[n],s=o[r],l=o[n-1],u=Fy(l,a,this.sourceNode);if(u){var f=$y(a,s,this.sourceNode);if(f){var c=Hy(a,s,this.sourceNode);c&&(o[n]=c,o.splice(n-1,1),n--,r--)}}else{var d=this.sourceNode.anchors;d.forEach(function(y){if(y.x===l.x&&y.x===a.x||y.y===l.y&&y.y===a.y){var m=fr(y.x,y.y,a.x,a.y),A=fr(l.x,l.y,a.x,a.y);m<A&&(o[n-1]=y)}})}}if(r===i.length-2){var h=o[n],v=o[r],p=o[r+1],g=Fy(v,p,this.targetNode);if(g){var f=$y(h,v,this.targetNode);if(f){var c=Hy(h,v,this.targetNode);c&&(o[r]=c,o.splice(r+1,1))}}else{var d=this.targetNode.anchors;d.forEach(function(m){if(m.x===p.x&&m.x===v.x||m.y===p.y&&m.y===v.y){var A=fr(m.x,m.y,v.x,v.y),T=fr(p.x,p.y,v.x,v.y);A<T&&(o[r+1]=m)}})}}return o},e.prototype.getDraggingPoints=function(n,r,i,o,a){var s=a.map(function(f){return f}),l=this.getAfterAnchor(n,i,o),u=this.getCrossPoint(n,i,l);return r==="start"?(s.unshift(u),s.unshift(l)):(s.push(u),s.push(l)),s},e.prototype.updateCrossPoints=function(n){var r=n.map(function(m){return m}),i=n[0],o=n[1],a=n[r.length-2],s=n[r.length-1],l=this,u=l.sourceNode,f=l.targetNode,c=u.modelType,d=f.modelType,h=fl(i,o),v=r[0];switch(c){case $e.RECT_NODE:if(u.radius!==0){var p=Jy(i,u);p||(v=Zy(i,h,u))}break;case $e.CIRCLE_NODE:v=gc(i,h,u);break;case $e.ELLIPSE_NODE:v=Qy(i,h,u);break;case $e.DIAMOND_NODE:v=ml(i,h,u);break;case $e.POLYGON_NODE:v=ml(i,h,u);break}v&&(r[0]=v);var g=fl(a,s),y=r[r.length-1];switch(d){case $e.RECT_NODE:if(f.radius!==0){var p=Jy(s,f);p||(y=Zy(s,g,f))}break;case $e.CIRCLE_NODE:y=gc(s,g,f);break;case $e.ELLIPSE_NODE:y=Qy(s,g,f);break;case $e.DIAMOND_NODE:y=ml(s,g,f);break;case $e.POLYGON_NODE:y=ml(s,g,f);break}return y&&(r[r.length-1]=y),r},e.prototype.updatePath=function(n){this.pointsList=n,this.points=this.getPath(this.pointsList)},e.prototype.getData=function(){var n=t.prototype.getData.call(this),r=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return Object.assign({},n,{pointsList:r})},e.prototype.getPath=function(n){return n.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" ")},e.prototype.initPoints=function(){this.pointsList.length>0?this.points=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var n=By({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=n,this.points=n.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" ")},e.prototype.updateStartPoint=function(n){this.startPoint=Object.assign({},n),this.updatePoints()},e.prototype.moveStartPoint=function(n,r){this.startPoint.x+=n,this.startPoint.y+=r,this.updatePoints()},e.prototype.updateEndPoint=function(n){this.endPoint=Object.assign({},n),this.updatePoints()},e.prototype.moveEndPoint=function(n,r){this.endPoint.x+=n,this.endPoint.y+=r,this.updatePoints()},e.prototype.updatePointsList=function(n,r){this.pointsList.forEach(function(a){a.x+=n,a.y+=r});var i=this.pointsList[0];this.startPoint=Object.assign({},i);var o=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},o),this.initPoints()},e.prototype.dragAppendStart=function(){this.draggingPointList=this.pointsList.map(function(n){return n})},e.prototype.dragAppendSimple=function(n,r){var i;this.isDragging=!0;var o=n.start,a=n.end,s=n.startIndex,l=n.endIndex,u=n.direction,f=this.pointsList,c=f;return u===xt.HORIZONTAL?(f[s]={x:o.x,y:o.y+r.y},f[l]={x:a.x,y:a.y+r.y},c=this.pointsList.map(function(d){return d})):u===xt.VERTICAL&&(f[s]={x:o.x+r.x,y:o.y},f[l]={x:a.x+r.x,y:a.y},c=this.pointsList.map(function(d){return d})),this.updatePointsAfterDrag(c),this.draggingPointList=c,!((i=this.text)===null||i===void 0)&&i.value&&this.setText(lt({},this.text,this.textPosition)),{start:lt({},f[s]),end:lt({},f[l]),startIndex:s,endIndex:l,direction:u}},e.prototype.dragAppend=function(n,r){var i;this.isDragging=!0;var o=n.start,a=n.end,s=n.startIndex,l=n.endIndex,u=n.direction,f=this.pointsList;if(u===xt.HORIZONTAL){f[s]={x:o.x,y:o.y+r.y},f[l]={x:a.x,y:a.y+r.y};var c=this.pointsList.map(function(g){return g});if(s!==0&&l!==this.pointsList.length-1&&(c=this.removeCrossPoints(s,l,c)),s===0){var d={x:o.x,y:o.y+r.y},h=ui(d,this.sourceNode);if(!h){var v=this.sourceNode.anchors;c=this.getDraggingPoints(u,"start",d,v,c)}}if(l===this.pointsList.length-1){var p={x:a.x,y:a.y+r.y},h=ui(p,this.targetNode);if(!h){var v=this.targetNode.anchors;c=this.getDraggingPoints(u,"end",p,v,c)}}this.updatePointsAfterDrag(c),this.draggingPointList=c}else if(u===xt.VERTICAL){f[s]={x:o.x+r.x,y:o.y},f[l]={x:a.x+r.x,y:a.y};var c=this.pointsList.map(function(y){return y});if(s!==0&&l!==this.pointsList.length-1&&(c=this.removeCrossPoints(s,l,c)),s===0){var d={x:o.x+r.x,y:o.y},h=ui(d,this.sourceNode);if(!h){var v=this.sourceNode.anchors;c=this.getDraggingPoints(u,"start",d,v,c)}}if(l===this.pointsList.length-1){var p={x:a.x+r.x,y:a.y},h=ui(p,this.targetNode);if(!h){var v=this.targetNode.anchors;c=this.getDraggingPoints(u,"end",p,v,c)}}this.updatePointsAfterDrag(c),this.draggingPointList=c}return!((i=this.text)===null||i===void 0)&&i.value&&this.setText(lt({},this.text,this.textPosition)),{start:lt({},f[s]),end:lt({},f[l]),startIndex:s,endIndex:l,direction:u}},e.prototype.dragAppendEnd=function(){if(this.draggingPointList){var n=ky(Li(this.points));this.pointsList=n.map(function(o){return o}),this.draggingPointList=[];var r=n[0];this.startPoint=lt({},r);var i=n[n.length-1];this.endPoint=lt({},i)}this.isDragging=!1},e.prototype.updatePointsAfterDrag=function(n){var r=this.updateCrossPoints(n);this.points=r.map(function(i){return"".concat(i.x,",").concat(i.y)}).join(" ")},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var n=this.pointsList;return n[n.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(n){var r=n.startPoint,i=n.endPoint,o=n.sourceNode,a=n.targetNode;this.pointsList=By({x:r.x,y:r.y},{x:i.x,y:i.y},o,a,this.offset||0),this.initPoints()},Qt([$],e.prototype,"dbClickPosition",void 0),Qt([F],e.prototype,"initPoints",null),Qt([F],e.prototype,"updatePoints",null),Qt([F],e.prototype,"updateStartPoint",null),Qt([F],e.prototype,"moveStartPoint",null),Qt([F],e.prototype,"updateEndPoint",null),Qt([F],e.prototype,"moveEndPoint",null),Qt([F],e.prototype,"updatePointsList",null),Qt([F],e.prototype,"dragAppendStart",null),Qt([F],e.prototype,"dragAppendSimple",null),Qt([F],e.prototype,"dragAppend",null),Qt([F],e.prototype,"dragAppendEnd",null),Qt([F],e.prototype,"updatePointsAfterDrag",null),Qt([F],e.prototype,"getAdjustStart",null),Qt([F],e.prototype,"getAdjustEnd",null),Qt([F],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(El),jt=function(){return jt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},jt.apply(this,arguments)},Te=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},pm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IL=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},ci=function(){function t(e,n){var r;this.BaseType=Ct.NODE,this.id="",this.type="",this.x=0,this.y=0,this.textMode=zn.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this._width=100,this._height=80,this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.anchorsOffset=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isShowAnchor=!1,this.isDragging=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.rotatable=!0,this.resizable=!0,this.zIndex=1,this.state=Qe.DEFAULT,this.autoToFront=!0,this.style={},this._rotate=0,this.modelType=$e.NODE,this.additionStateData={},this.targetRules=[],this.sourceRules=[],this.moveRules=[],this.resizeRules=[],this.hasSetTargetRules=!1,this.hasSetSourceRules=!1,this.graphModel=n,this.properties=(r=e.properties)!==null&&r!==void 0?r:{},this.initNodeData(e),this.setAttributes()}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e;var n=this,r=n.x,i=r===void 0?0:r,o=n.y,a=o===void 0?0:o;this.transform=new vl(-i,-a).rotate(e).translate(i,a).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"incoming",{get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outgoing",{get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}},enumerable:!1,configurable:!0}),t.prototype.initNodeData=function(e){if(e.properties||(e.properties={}),!e.id){var n=this.graphModel.idGenerator,r=n&&n(e.type),i=this.createId();e.id=i||r||fi()}this.formatText(e),lt(this,zR(e));var o=this.graphModel.overlapMode;o===ur.INCREASE&&(this.zIndex=e.zIndex||Oc())},t.prototype.setAttributes=function(){},t.prototype.createId=function(){return null},t.prototype.setTextMode=function(e){this.textMode=e},t.prototype.formatText=function(e){var n,r,i,o=this.graphModel.editConfigModel,a=o.nodeTextDraggable,s=o.nodeTextEdit,l=e.x,u=e.y,f=e.text,c={value:"",x:l,y:u,draggable:a,editable:s};f&&(typeof f=="string"?c.value=f:(c=jt(jt({},c),{x:(n=f.x)!==null&&n!==void 0?n:l,y:(r=f.y)!==null&&r!==void 0?r:u,value:(i=f.value)!==null&&i!==void 0?i:""}),Di(f.draggable)||(c.draggable=f.draggable),Di(f.editable)||(c.editable=f.editable))),e.text=c},t.prototype.resize=function(e){var n=e.width,r=e.height,i=e.deltaX,o=e.deltaY,a=this.isAllowResizeNode(i,o,n,r);return a?(this.move(i/2,o/2),this.width=n,this.height=r,this.setProperties({width:n,height:r}),this.getData()):this.getData()},t.prototype.proportionalResize=function(){},t.prototype.getData=function(){var e=this.text,n=e.x,r=e.y,i=e.value,o=this.properties;qr(o)&&(o=tr(o)),Wn(o.width)&&(o.width=this.width),Wn(o.height)&&(o.height=this.height);var a={id:this.id,type:this.type,x:this.x,y:this.y,properties:o};return this.rotate&&(a.rotate=this.rotate),this.graphModel.overlapMode===ur.INCREASE&&(a.zIndex=this.zIndex),i&&(a.text={x:n,y:r,value:i}),a},t.prototype.getHistoryData=function(){return this.getData()},t.prototype.getProperties=function(){return tr(this.properties)},t.prototype.getOuterGAttributes=function(){return{className:""}},t.prototype.getNodeStyle=function(){return jt(jt({},this.graphModel.theme.baseNode),this.style)},t.prototype.getTextStyle=function(){var e=this.graphModel.theme.nodeText,n=this.properties.textStyle,r=n===void 0?{}:n;return jt(jt({},Fe(e)),Fe(r))},t.prototype.getRotateControlStyle=function(){var e=this.graphModel.theme.rotateControl;return Fe(e)},t.prototype.getResizeControlStyle=function(){var e=this.graphModel.theme.resizeControl;return Fe(e)},t.prototype.getResizeOutlineStyle=function(){var e=this.graphModel.theme.resizeOutline;return Fe(e)},t.prototype.getAnchorStyle=function(e){var n=this.graphModel.theme.anchor;return Fe(n)},t.prototype.getAnchorLineStyle=function(e){var n=this.graphModel.theme.anchorLine;return Fe(n)},t.prototype.getOutlineStyle=function(){var e=this.graphModel.theme.outline;return Fe(e)},t.prototype.isAllowConnectedAsSource=function(e,n,r,i){var o=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,this,e,n,r,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},t.prototype.getConnectedSourceRules=function(){return this.sourceRules},t.prototype.isAllowConnectedAsTarget=function(e,n,r,i){var o=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,e,this,n,r,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},t.prototype.isAllowMoveNode=function(e,n){var r,i,o=!0,a=!0,s=this.moveRules.concat(this.graphModel.nodeMoveRules);try{for(var l=pm(s),u=l.next();!u.done;u=l.next()){var f=u.value,c=f(this,e,n);if(!c)return!1;if(typeof c=="object"){var d=c;if(!d.x&&!d.y)return!1;o=o&&d.x,a=a&&d.y}}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return{x:o,y:a}},t.prototype.getConnectedTargetRules=function(){return this.targetRules},t.prototype.getAnchorsByOffset=function(){var e=this,n=e.anchorsOffset,r=e.id,i=e.x,o=e.y;return n&&n.length>0?n.map(function(a,s){return a.length?(a=a,{id:"".concat(r,"_").concat(s),x:i+a[0],y:o+a[1]}):(a=a,jt(jt({},a),{x:i+a.x,y:o+a.y,id:a.id||"".concat(r,"_").concat(s)}))}):this.getDefaultAnchor()},t.prototype.getDefaultAnchor=function(){return[]},t.prototype.getTargetAnchor=function(e){return $R(e,this)},t.prototype.getBounds=function(){return{minX:this.x-this.width/2,minY:this.y-this.height/2,maxX:this.x+this.width/2,maxY:this.y+this.height/2}},Object.defineProperty(t.prototype,"anchors",{get:function(){var e=this.getAnchorsByOffset(),n=this,r=n.x,i=n.y,o=n.rotate;return e.forEach(function(a){var s=a.x,l=a.y,u=IL(new pl([s,l,1]).translate(-r,-i).rotate(o).translate(r,i)[0],2),f=u[0],c=u[1];a.x=f,a.y=c}),e},enumerable:!1,configurable:!0}),t.prototype.getAnchorInfo=function(e){if(!Wn(e))for(var n=0;n<this.anchors.length;n++){var r=this.anchors[n];if(r.id===e)return r}},t.prototype.addNodeMoveRules=function(e){this.moveRules.includes(e)||this.moveRules.push(e)},t.prototype.isAllowMoveByXORY=function(e,n,r){var i,o;if(r)i=!0,o=!0;else{var a=this.isAllowMoveNode(e,n);typeof a=="boolean"?(i=a,o=a):(i=a.x,o=a.y)}return{isAllowMoveX:i,isAllowMoveY:o}},t.prototype.move=function(e,n,r){r===void 0&&(r=!1);var i=this.isAllowMoveByXORY(e,n,r),o=i.isAllowMoveX,a=i.isAllowMoveY;return o&&(this.x=this.x+e,this.text&&this.moveText(e,0)),a&&(this.y=this.y+n,this.text&&this.moveText(0,n)),(o||a)&&(this.rotate=this._rotate),o||a},t.prototype.getMoveDistance=function(e,n,r){r===void 0&&(r=!1);var i=this.isAllowMoveByXORY(e,n,r),o=i.isAllowMoveX,a=i.isAllowMoveY,s=0,l=0;return o&&e&&(this.x=this.x+e,this.text&&this.moveText(e,0),s=e),a&&n&&(this.y=this.y+n,this.text&&this.moveText(0,n),l=n),[s,l]},t.prototype.moveTo=function(e,n,r){r===void 0&&(r=!1);var i=e-this.x,o=n-this.y;return!r&&!this.isAllowMoveNode(i,o)?!1:(this.text&&this.moveText(i,o),this.x=e,this.y=n,!0)},t.prototype.moveText=function(e,n){var r=this.text,i=r.x,o=r.y,a=r.value,s=r.draggable,l=r.editable;this.text={value:a,editable:l,draggable:s,x:i+e,y:o+n}},t.prototype.updateText=function(e){this.text=jt(jt({},tr(this.text)),{value:e})},t.prototype.addNodeResizeRules=function(e){this.resizeRules.includes(e)||this.resizeRules.push(e)},t.prototype.isAllowResizeNode=function(e,n,r,i){var o,a,s=this.resizeRules.concat(this.graphModel.nodeResizeRules);try{for(var l=pm(s),u=l.next();!u.done;u=l.next()){var f=u.value,c=f(this,e,n,r,i);if(!c)return!1}}catch(d){o={error:d}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0},t.prototype.setSelected=function(e){e===void 0&&(e=!0),this.isSelected=e},t.prototype.setHovered=function(e){e===void 0&&(e=!0),this.isHovered=e,this.setIsShowAnchor(e)},t.prototype.setIsShowAnchor=function(e){e===void 0&&(e=!0),this.isShowAnchor=e},t.prototype.setRotatable=function(e){e===void 0&&(e=!0),this.rotatable=e},t.prototype.setResizable=function(e){e===void 0&&(e=!0),this.resizable=e},t.prototype.setHitable=function(e){e===void 0&&(e=!0),this.isHitable=e},t.prototype.setHittable=function(e){e===void 0&&(e=!0),this.isHittable=e},t.prototype.setElementState=function(e,n){this.state=e,this.additionStateData=n},t.prototype.updateProperties=function(e,n){var r=tr(this.properties);this.properties=e,this.setAttributes(),this.graphModel.eventCenter.emit(de.NODE_PROPERTIES_CHANGE,{id:this.id,keys:n,preProperties:r,properties:e})},t.prototype.setProperty=function(e,n){var r=tr(this.properties),i=Fe(r);dy(i,e,Jt(n)),this.updateProperties(i,[e])},t.prototype.setProperties=function(e){var n=tr(this.properties),r=jt(jt({},n),Jt(e)),i=[];Xg(e,function(o,a){(Ks(n,a)&&n[a]!==o||!Ks(n,a))&&i.push(a)}),this.updateProperties(r,i)},t.prototype.deleteProperty=function(e){delete this.properties[e],this.setAttributes()},t.prototype.setStyle=function(e,n){var r;this.style=jt(jt({},this.style),(r={},r[e]=Jt(n),r))},t.prototype.setStyles=function(e){this.style=jt(jt({},this.style),Jt(e))},t.prototype.updateStyles=function(e){this.style=jt({},Jt(e))},t.prototype.setZIndex=function(e){e===void 0&&(e=1),this.zIndex=e},t.prototype.updateAttributes=function(e){lt(this,e)},t.BaseType=Ct.NODE,Te([$],t.prototype,"type",void 0),Te([$],t.prototype,"x",void 0),Te([$],t.prototype,"y",void 0),Te([$],t.prototype,"textMode",void 0),Te([$],t.prototype,"text",void 0),Te([$],t.prototype,"properties",void 0),Te([$],t.prototype,"_width",void 0),Te([$],t.prototype,"_height",void 0),Te([$],t.prototype,"anchorsOffset",void 0),Te([$],t.prototype,"isSelected",void 0),Te([$],t.prototype,"isHovered",void 0),Te([$],t.prototype,"isShowAnchor",void 0),Te([$],t.prototype,"isDragging",void 0),Te([$],t.prototype,"isHitable",void 0),Te([$],t.prototype,"isHittable",void 0),Te([$],t.prototype,"draggable",void 0),Te([$],t.prototype,"visible",void 0),Te([$],t.prototype,"rotatable",void 0),Te([$],t.prototype,"resizable",void 0),Te([$],t.prototype,"zIndex",void 0),Te([$],t.prototype,"state",void 0),Te([$],t.prototype,"autoToFront",void 0),Te([$],t.prototype,"style",void 0),Te([$],t.prototype,"transform",void 0),Te([$],t.prototype,"_rotate",void 0),Te([gt],t.prototype,"incoming",null),Te([gt],t.prototype,"outgoing",null),Te([F],t.prototype,"setTextMode",null),Te([F],t.prototype,"addNodeMoveRules",null),Te([F],t.prototype,"move",null),Te([F],t.prototype,"getMoveDistance",null),Te([F],t.prototype,"moveTo",null),Te([F],t.prototype,"moveText",null),Te([F],t.prototype,"updateText",null),Te([F],t.prototype,"addNodeResizeRules",null),Te([F],t.prototype,"setSelected",null),Te([F],t.prototype,"setHovered",null),Te([F],t.prototype,"setIsShowAnchor",null),Te([F],t.prototype,"setRotatable",null),Te([F],t.prototype,"setResizable",null),Te([F],t.prototype,"setHitable",null),Te([F],t.prototype,"setHittable",null),Te([F],t.prototype,"setElementState",null),Te([F],t.prototype,"setProperty",null),Te([F],t.prototype,"setProperties",null),Te([F],t.prototype,"deleteProperty",null),Te([F],t.prototype,"setStyle",null),Te([F],t.prototype,"setStyles",null),Te([F],t.prototype,"updateStyles",null),Te([F],t.prototype,"setZIndex",null),Te([F],t.prototype,"updateAttributes",null),t}(),jL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Aa=function(){return Aa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Aa.apply(this,arguments)},Cc=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},To=function(t){jL(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.modelType=$e.CIRCLE_NODE,i.r=50,i.initNodeData(n),i.setAttributes(),i}return Object.defineProperty(e.prototype,"width",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var n=this.properties.r;n&&(this.r=n)},e.prototype.getNodeStyle=function(){var n=t.prototype.getNodeStyle.call(this),r=this.graphModel.theme.circle,i=this.properties.style,o=i===void 0?{}:i;return Aa(Aa(Aa({},n),Fe(r)),Fe(o))},e.prototype.getDefaultAnchor=function(){var n=this,r=n.x,i=n.y,o=n.r;return[{x:r,y:i-o,id:"".concat(this.id,"_0")},{x:r+o,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+o,id:"".concat(this.id,"_2")},{x:r-o,y:i,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(n){var r=n.width,i=n.deltaX,o=n.deltaY;return this.move(i/2,o/2),this.r=r,this.setProperties({r}),this.getData()},Cc([$],e.prototype,"r",void 0),Cc([gt],e.prototype,"width",null),Cc([gt],e.prototype,"height",null),e}(ci),kL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ca=function(){return Ca=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ca.apply(this,arguments)},No=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},wl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Tc=function(t){kL(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.modelType=$e.DIAMOND_NODE,i.rx=30,i.ry=50,i.initNodeData(n),i.setAttributes(),i}return e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var n=this.properties,r=n.rx,i=n.ry;r&&(this.rx=r),i&&(this.ry=i)},e.prototype.getNodeStyle=function(){var n=t.prototype.getNodeStyle.call(this),r=this.graphModel.theme.diamond,i=this.properties.style,o=i===void 0?{}:i;return Ca(Ca(Ca({},n),Fe(r)),Fe(o))},Object.defineProperty(e.prototype,"points",{get:function(){var n=this,r=n.x,i=n.y,o=n.rx,a=n.ry;return[[r,i-a],[r+o,i],[r,i+a],[r-o,i]]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointsPosition",{get:function(){return Mn(this.points,function(n){var r=wl(n,2),i=r[0],o=r[1];return{x:i,y:o}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return at(this.points,function(i){var o=wl(i,1),a=o[0];a<n&&(n=a),a>r&&(r=a)}),r-n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return at(this.points,function(i){var o=wl(i,2),a=o[1];a<n&&(n=a),a>r&&(r=a)}),r-n},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var n=this;return Mn(this.points,function(r,i){var o=wl(r,2),a=o[0],s=o[1];return{x:a,y:s,id:"".concat(n.id,"_").concat(i)}})},e.prototype.resize=function(n){var r=n.width,i=n.height,o=n.deltaX,a=n.deltaY;return this.move(o/2,a/2),this.rx=r,this.ry=i,this.setProperties({rx:r,ry:i}),this.getData()},No([$],e.prototype,"rx",void 0),No([$],e.prototype,"ry",void 0),No([gt],e.prototype,"points",null),No([gt],e.prototype,"pointsPosition",null),No([gt],e.prototype,"width",null),No([gt],e.prototype,"height",null),e}(ci),BL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ta=function(){return Ta=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ta.apply(this,arguments)},Sl=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},Nc=function(t){BL(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.modelType=$e.ELLIPSE_NODE,i.rx=30,i.ry=45,i.initNodeData(n),i.setAttributes(),i}return e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var n=this.properties,r=n.rx,i=n.ry;r&&(this.rx=r),i&&(this.ry=i)},e.prototype.getNodeStyle=function(){var n=t.prototype.getNodeStyle.call(this),r=this.graphModel.theme.ellipse,i=this.properties.style,o=i===void 0?{}:i;return Ta(Ta(Ta({},n),Fe(r)),Fe(o))},Object.defineProperty(e.prototype,"width",{get:function(){return this.rx*2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.ry*2},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var n=this,r=n.x,i=n.y,o=n.rx,a=n.ry;return[{x:r,y:i-a,id:"".concat(this.id,"_0")},{x:r+o,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a,id:"".concat(this.id,"_2")},{x:r-o,y:i,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(n){var r=n.width,i=n.height,o=n.deltaX,a=n.deltaY;return this.move(o/2,a/2),this.rx=r,this.ry=i,this.setProperties({rx:r,ry:i}),this.getData()},Sl([$],e.prototype,"rx",void 0),Sl([$],e.prototype,"ry",void 0),Sl([gt],e.prototype,"width",null),Sl([gt],e.prototype,"height",null),e}(ci),FL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Na=function(){return Na=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Na.apply(this,arguments)},Ol=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},Al=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Cl=function(t){FL(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.modelType=$e.POLYGON_NODE,i.points=[[50,0],[100,50],[50,100],[0,50]],i.initNodeData(n),i.setAttributes(),i}return e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var n=this.properties,r=n.points,i=n.width,o=n.height,a=r||this.points;this.points=jR(a,i,o)},e.prototype.getNodeStyle=function(){var n=t.prototype.getNodeStyle.call(this),r=this.graphModel.theme.polygon,i=this.properties.style,o=i===void 0?{}:i;return Na(Na(Na({},n),Fe(r)),Fe(o))},Object.defineProperty(e.prototype,"pointsPosition",{get:function(){var n=this,r=n.x,i=n.y,o=n.width,a=n.height;return this.points.map(function(s){return{x:s[0]+r-o/2,y:s[1]+i-a/2}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=Al(i,1),a=o[0];a<n&&(n=a),a>r&&(r=a)}),r-n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=Al(i,2),a=o[1];a<n&&(n=a),a>r&&(r=a)}),r-n},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var n=this,r=this,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points;return l.map(function(u,f){var c=Al(u,2),d=c[0],h=c[1];return{x:i+d-a/2,y:o+h-s/2,id:"".concat(n.id,"_").concat(f)}})},e.prototype.resize=function(n){var r=this,i=n.width,o=n.height,a=n.deltaX,s=n.deltaY;this.move(a/2,s/2);var l=Mn(this.points,function(u){var f=Al(u,2),c=f[0],d=f[1];return[c*i/r.width,d*o/r.height]});return this.points=l,this.properties.points=l,this.getData()},Ol([$],e.prototype,"points",void 0),Ol([gt],e.prototype,"pointsPosition",null),Ol([gt],e.prototype,"width",null),Ol([gt],e.prototype,"height",null),e}(ci),$L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ma=function(){return Ma=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ma.apply(this,arguments)},HL=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},Cr=function(t){$L(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.modelType=$e.RECT_NODE,i.radius=0,i.initNodeData(n),i.setAttributes(),i}return e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var n=this.properties,r=n.width,i=n.height,o=n.radius;Wn(r)||(this.width=r),Wn(i)||(this.height=i),Wn(o)||(this.radius=o)},e.prototype.getDefaultAnchor=function(){var n=this,r=n.x,i=n.y,o=n.width,a=n.height;return[{x:r,y:i-a/2,id:"".concat(this.id,"_0")},{x:r+o/2,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a/2,id:"".concat(this.id,"_2")},{x:r-o/2,y:i,id:"".concat(this.id,"_3")}]},e.prototype.getNodeStyle=function(){var n=t.prototype.getNodeStyle.call(this),r=this.graphModel.theme.rect,i=this.properties.style,o=i===void 0?{}:i;return Ma(Ma(Ma({},n),Fe(r)),Fe(o))},HL([$],e.prototype,"radius",void 0),e}(ci),WL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pa=function(){return Pa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pa.apply(this,arguments)},vm=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},zL=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},XL=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},gm=function(t){WL(e,t);function e(){var n=t.apply(this,XL([],zL(arguments),!1))||this;return n.modelType=$e.TEXT_NODE,n}return e.prototype.getTextStyle=function(){var n=t.prototype.getTextStyle.call(this),r=this.graphModel.theme.text,i=this.properties.textStyle;return Pa(Pa(Pa({},n),Fe(r)),Fe(i))},Object.defineProperty(e.prototype,"width",{get:function(){var n=String(this.text.value).split(/[\r\n]/g),r=this.getTextStyle().fontSize,i=nm({rows:n,fontSize:r,rowsLength:n.length}).width;return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var n=String(this.text.value).split(/[\r\n]/g),r=this.getTextStyle().fontSize,i=nm({rows:n,fontSize:r,rowsLength:n.length}).height;return i},enumerable:!1,configurable:!0}),vm([gt],e.prototype,"width",null),vm([gt],e.prototype,"height",null),e}(ci),GL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mc=function(t){GL(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.modelType=$e.HTML_NODE,i.setAttributes(),i}return e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var n=this.properties,r=n.width,i=n.height;r&&(this.width=r),i&&(this.height=i)},e.prototype.getDefaultAnchor=function(){var n=this,r=n.x,i=n.y,o=n.width,a=n.height;return[{x:r,y:i-a/2,id:"".concat(this.id,"_0")},{x:r+o/2,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a/2,id:"".concat(this.id,"_2")},{x:r-o/2,y:i,id:"".concat(this.id,"_3")}]},e}(ci),nt=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},UL={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotate:!1,allowResize:!1,nodeSelectedOutline:!0,textEdit:!1,nodeTextEdit:!1,edgeTextEdit:!1,textDraggable:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Tl=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","snapGrid","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustEdgeStart","adjustEdgeEnd","adjustNodePosition","hideAnchors","allowRotate","allowResize","autoExpand","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","textEdit","nodeTextEdit","edgeTextEdit","textDraggable","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","textMode","nodeTextMode","edgeTextMode","nodeTextMultiple","edgeTextMultiple","nodeTextVertical","edgeTextVertical"],YL=function(){function t(e){this.isSilentMode=!1,this.stopZoomGraph=!1,this.stopMoveGraph=!1,this.stopScrollGraph=!1,this.snapGrid=!1,this.textMode=zn.TEXT,this.textEdit=!0,this.textDraggable=!1,this.nodeTextEdit=!0,this.nodeTextDraggable=!1,this.nodeTextMultiple=!1,this.nodeTextVertical=!1,this.nodeTextMode=zn.TEXT,this.edgeTextMode=zn.TEXT,this.edgeTextEdit=!0,this.edgeTextDraggable=!1,this.edgeTextMultiple=!1,this.edgeTextVertical=!1,this.hideAnchors=!1,this.allowRotate=!1,this.allowResize=!1,this.hoverOutline=!0,this.nodeSelectedOutline=!0,this.adjustNodePosition=!0,this.autoExpand=!1,this.adjustEdge=!0,this.adjustEdgeMiddle=!1,this.adjustEdgeStartAndEnd=!1,this.adjustEdgeStart=!1,this.adjustEdgeEnd=!1,this.edgeSelectedOutline=!0,this.multipleSelectKey="",lt(this,this.computeConfig(e))}return t.prototype.updateEditConfig=function(e){var n=this.computeConfig(e);lt(this,n)},t.prototype.computeConfig=function(e){var n=e.isSilentMode,r=e.textDraggable,i=e.textMode,o=e.textEdit,a=e.adjustEdgeStartAndEnd,s={};if(n===!1&&lt(s,this.stagedConfig),n===!0&&n!==this.isSilentMode){var l=Ri(UL,Tl);this.stagedConfig=Ri(this,Tl),lt(s,l)}Di(o)||lt(s,{nodeTextEdit:o,edgeTextEdit:o}),Di(r)||lt(s,{nodeTextDraggable:r,edgeTextDraggable:r}),i&&lt(s,{nodeTextMode:i,edgeTextMode:i}),Zs(a)&&lt(s,{adjustEdgeStart:a,adjustEdgeEnd:a});var u=Ri(e,Tl);return lt(s,u)},t.prototype.updateTextMode=function(e){this.textMode=e,this.edgeTextMode=e,this.nodeTextMode=e},t.prototype.getConfig=function(){return Ri(this,Tl)},nt([$],t.prototype,"isSilentMode",void 0),nt([$],t.prototype,"stopZoomGraph",void 0),nt([$],t.prototype,"stopMoveGraph",void 0),nt([$],t.prototype,"stopScrollGraph",void 0),nt([$],t.prototype,"snapGrid",void 0),nt([$],t.prototype,"textMode",void 0),nt([$],t.prototype,"textEdit",void 0),nt([$],t.prototype,"textDraggable",void 0),nt([$],t.prototype,"nodeTextEdit",void 0),nt([$],t.prototype,"nodeTextDraggable",void 0),nt([$],t.prototype,"nodeTextMultiple",void 0),nt([$],t.prototype,"nodeTextVertical",void 0),nt([$],t.prototype,"nodeTextMode",void 0),nt([$],t.prototype,"edgeTextMode",void 0),nt([$],t.prototype,"edgeTextEdit",void 0),nt([$],t.prototype,"edgeTextDraggable",void 0),nt([$],t.prototype,"edgeTextMultiple",void 0),nt([$],t.prototype,"edgeTextVertical",void 0),nt([$],t.prototype,"hideAnchors",void 0),nt([$],t.prototype,"allowRotate",void 0),nt([$],t.prototype,"allowResize",void 0),nt([$],t.prototype,"hoverOutline",void 0),nt([$],t.prototype,"nodeSelectedOutline",void 0),nt([$],t.prototype,"adjustNodePosition",void 0),nt([$],t.prototype,"autoExpand",void 0),nt([$],t.prototype,"adjustEdge",void 0),nt([$],t.prototype,"adjustEdgeMiddle",void 0),nt([$],t.prototype,"adjustEdgeStartAndEnd",void 0),nt([$],t.prototype,"adjustEdgeStart",void 0),nt([$],t.prototype,"adjustEdgeEnd",void 0),nt([$],t.prototype,"edgeSelectedOutline",void 0),nt([F],t.prototype,"updateEditConfig",null),nt([F],t.prototype,"updateTextMode",null),t}(),VL="*",KL=function(){function t(){this._events={}}return t.prototype.on=function(e,n,r){var i=this;e==null||e.split(",").forEach(function(o){o=o.trim(),i._events[o]||(i._events[o]=[]),i._events[o].push({callback:n,once:!!r})})},t.prototype.once=function(e,n){var r=this;e==null||e.split(",").forEach(function(i){i=i.trim(),r.on(i,n,!0)})},t.prototype.emit=function(e,n){var r=this;e==null||e.split(",").forEach(function(i){var o=r._events[i]||[],a=r._events[VL]||[],s=function(l){for(var u=l.length,f=0;f<u;f++)if(l[f]){var c=l[f],d=c.callback,h=c.once;h&&(l.splice(f,1),l.length===0&&delete r._events[i],u--,f--),d.apply(r,[n])}};s(o),s(a)})},t.prototype.off=function(e,n){var r=this;e||(this._events={}),e.split(",").forEach(function(i){if(!n)delete r._events[i];else{for(var o=r._events[i]||[],a=o.length,s=0;s<a;s++)o[s].callback===n&&(o.splice(s,1),a--,s--);o.length===0&&delete r._events[i]}})},t.prototype.getEvents=function(){return this._events},t.prototype.destroy=function(){this._events={}},t}(),qL=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pc=function(){return Pc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pc.apply(this,arguments)},ZL=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},JL=function(t){qL(e,t);function e(n){var r=t.call(this)||this;r.stepScrollX=0,r.stepScrollY=0,r.onDragging=function(s){var l=s.deltaX,u=s.deltaY;r.setState({isDragging:!0});var f=r.props.graphModel,c=f.transformModel,d=f.editConfigModel;d.stopMoveGraph!==!0&&c.translate(l,u)},r.onDragEnd=function(){r.setState({isDragging:!1})},r.zoomHandler=function(s){var l=r.props,u=l.graphModel,f=u.editConfigModel,c=u.transformModel,d=u.gridSize,h=l.graphModel,v=s.deltaX,p=s.deltaY,g=f.stopScrollGraph,y=f.stopZoomGraph;if(!g&&!s.ctrlKey&&!s.metaKey){if(s.preventDefault(),r.stepScrollX+=v,r.stepScrollY+=p,Math.abs(r.stepScrollX)>=d){var m=r.stepScrollX%d,A=r.stepScrollX-m;c.translate(-A*c.SCALE_X,0),r.stepScrollX=m}if(Math.abs(r.stepScrollY)>=d){var T=r.stepScrollY%d,k=r.stepScrollY-T;c.translate(0,-k*c.SCALE_Y),r.stepScrollY=T}return}if(!y){s.preventDefault();var C=h.getPointByClient({x:s.clientX,y:s.clientY}),S=C.canvasOverlayPosition,I=S.x,X=S.y;c.zoom(s.deltaY<0,[I,X])}},r.clickHandler=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){var u=r.props.graphModel,f=u.selectElements;f.size>0&&u.clearSelectElements(),u.eventCenter.emit(de.BLANK_CLICK,{e:s})}},r.handleContextMenu=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){s.preventDefault();var u=r.props.graphModel,f=u.getPointByClient({x:s.clientX,y:s.clientY});u.eventCenter.emit(de.BLANK_CONTEXTMENU,{e:s,position:f})}},r.mouseDownHandler=function(s){var l=r.props.graphModel,u=l.eventCenter,f=l.editConfigModel,c=l.transformModel.SCALE_X,d=l.gridSize,h=f.adjustEdge,v=f.adjustNodePosition,p=f.stopMoveGraph,g=s.target,y=!h&&!v;(g.getAttribute("name")==="canvas-overlay"||y)&&(p!==!0?(r.stepDrag.setStep(d*c),r.stepDrag.handleMouseDown(s)):u.emit(de.BLANK_MOUSEDOWN,{e:s}),r.clickHandler(s))};var i=n.graphModel,o=i.gridSize,a=i.eventCenter;return r.stepDrag=new Xn({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:o,eventType:"BLANK",isStopPropagation:!1,eventCenter:a,model:void 0}),r.state={isDragging:!1},r}return e.prototype.render=function(){var n=this.props.graphModel.transformModel,r=n.getTransformStyle().transform,i=this.props,o=i.children,a=i.dnd,s=this.state.isDragging;return B("svg",Pc({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:s?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},a.eventMap(),{children:B("g",{transform:r,children:o})}))},e=ZL([sn],e),e}(Ge),ym=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Da=function(){return Da=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Da.apply(this,arguments)},QL=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},eI=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},mm=function(t){ym(e,t);function e(){var n=t.call(this)||this;return n.onDragging=function(r){var i=r.event,o=n.props,a=o.graphModel,s=o.bezierModel,l=o.type,u=a.getPointByClient({x:i.clientX,y:i.clientY}).canvasOverlayPosition,f=u.x,c=u.y;s.updateAdjustAnchor({x:f,y:c},l),a.eventCenter.emit(de.EDGE_ADJUST,{data:s.getData()})},n.onDragEnd=function(){var r=n.props.bezierModel;r.isDragging=!1},n.dragHandler=new Xn({onDragging:n.onDragging,onDragEnd:n.onDragEnd}),n}return e.prototype.render=function(){var n=this,r=this.props.position,i=r.x,o=r.y,a=this.props.bezierModel,s=a.getEdgeStyle().adjustAnchor;return B(Ao,Da({className:"lf-bezier-adjust-anchor",x:i,y:o},s,{onMouseDown:function(l){n.dragHandler.handleMouseDown(l)}}))},e}(Ge),tI=function(t){ym(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBezierAdjust=function(n,r){var i=n.path,o=n.id,a=uc(i),s=eI(a,4),l=s[0],u=s[1],f=s[2],c=s[3],d=n.getEdgeStyle().adjustLine,h=[];return h.push(B(Oo,Da({x1:l.x,y1:l.y,x2:u.x,y2:u.y},d))),h.push(B(mm,{position:u,bezierModel:n,graphModel:r,type:"sNext"},"".concat(o,"_ePre"))),h.push(B(Oo,Da({x1:c.x,y1:c.y,x2:f.x,y2:f.y},d))),h.push(B(mm,{position:f,bezierModel:n,graphModel:r,type:"ePre"},"".concat(o,"_sNext"))),h},e.prototype.selectedBezierEdge=function(){for(var n=this.props.graphModel,r=n.edges,i=[],o=0;o<r.length;o++){var a=r[o];a.isSelected&&a.modelType===$e.BEZIER_EDGE&&a.draggable&&i.push(this.getBezierAdjust(a,n))}return i},e.prototype.render=function(){return B("g",{className:"lf-bezier-adjust",children:this.selectedBezierEdge()})},e=QL([sn],e),e}(Ge),nI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rI=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},iI=function(t){nI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props.background;return B("div",{className:"lf-background",children:B("div",{style:At(n)?n:{},className:"lf-background-area"})})},e=rI([sn],e),e}(Ge),oI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aI=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},Nl=function(t){oI(e,t);function e(n){var r=t.call(this,n)||this;return r.id=fi(),r.gridOptions=r.props.graphModel.grid,r}return e.prototype.renderDot=function(){var n=this.gridOptions,r=n.config,i=n.size,o=i===void 0?1:i,a=n.visible,s=r??{},l=s.color,u=s.thickness,f=u===void 0?2:u,c=Math.min(Math.max(2,f),o/4),d=a?1:0;return B("g",{fill:l,opacity:d,children:[B("circle",{cx:0,cy:0,r:c/2}),B("circle",{cx:0,cy:o,r:c/2}),B("circle",{cx:o,cy:0,r:c/2}),B("circle",{cx:o,cy:o,r:c/2})]})},e.prototype.renderMesh=function(){var n=this.gridOptions,r=n.config,i=n.size,o=i===void 0?1:i,a=n.visible,s=r??{},l=s.color,u=s.thickness,f=u===void 0?1:u,c=Math.min(Math.max(1,f),o/2),d="M 0 0 H ".concat(o," V ").concat(o," H 0 Z"),h=a?1:0;return B("path",{d,stroke:l,strokeWidth:c/2,opacity:h,fill:"transparent"})},e.prototype.render=function(){var n=this.props.graphModel.transformModel,r=this.gridOptions,i=r.type,o=r.size,a=o===void 0?1:o,s=n.SCALE_X,l=n.SKEW_Y,u=n.SKEW_X,f=n.SCALE_Y,c=n.TRANSLATE_X,d=n.TRANSLATE_Y,h=[s,l,u,f,c,d].join(","),v="matrix(".concat(h,")");return B("div",{className:"lf-grid",children:B("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",children:[B("defs",{children:B("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:v,x:"0",y:"0",width:a,height:a,children:[i==="dot"&&this.renderDot(),i==="mesh"&&this.renderMesh()]})}),B("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})]})})},e=aI([sn],e),e}(Ge);(function(t){t.defaultProps={size:hR,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}};function e(n){var r=Fe(t.defaultProps);return typeof n=="number"?lt(r,{size:n}):typeof n=="boolean"?lt(r,{visible:n}):lt(r,n)}t.getGridOptions=e})(Nl||(Nl={}));var sI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lI=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},uI=function(t){sI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props.graphModel.transformModel,r=n.getTransformStyle().transform,i=this.props.children;return B("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay",children:B("g",{transform:r,children:i})})},e=lI([sn],e),e}(Ge),fI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),di=function(){return di=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},di.apply(this,arguments)},cI=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},dI=function(t){fI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getNodesOutline=function(){var n=this.props.graphModel,r=n.nodes,i=n.editConfigModel,o=i.hoverOutline,a=i.nodeSelectedOutline,s=[];return r.forEach(function(l){if(l.isHovered||l.isSelected){var u=l.isHovered,f=l.isSelected,c=l.x,d=l.y,h=l.width,v=l.height;if(a&&f||o&&u){var p=l.getOutlineStyle(),g={};if(Object.keys(p).forEach(function(m){m!=="hover"&&(g[m]=p[m])}),u){var y=p.hover;g=di(di({},g),y)}s.push(B(Un,di({transform:l.transform,className:"lf-outline-node",x:c,y:d,width:h+10,height:v+10},g)))}}}),s},e.prototype.getEdgeOutline=function(){for(var n=this.props.graphModel,r=n.edges,i=n.editConfigModel,o=i.edgeSelectedOutline,a=i.hoverOutline,s=[],l=0;l<r.length;l++){var u=r[l];(o&&u.isSelected||a&&u.isHovered)&&(u.modelType===$e.LINE_EDGE?s.push(this.getLineOutline(u)):u.modelType===$e.POLYLINE_EDGE?s.push(this.getPolylineOutline(u)):u.modelType===$e.BEZIER_EDGE&&s.push(this.getBezierOutline(u)))}return s},e.prototype.getLineOutline=function(n){var r=n.startPoint,i=n.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2,s=Math.abs(r.x-i.x)+10,l=Math.abs(r.y-i.y)+10,u=n.getOutlineStyle();return B(Un,di({className:"lf-outline-edge",x:o,y:a,width:s,height:l},u))},e.prototype.getPolylineOutline=function(n){var r=n.points,i=Li(r),o=ya(i,8),a=o.x,s=o.y,l=o.width,u=o.height,f=n.getOutlineStyle();return B(Un,di({className:"lf-outline",x:a,y:s,width:l,height:u},f))},e.prototype.getBezierOutline=function(n){var r=n.path,i=uc(r),o=ya(i,8),a=o.x,s=o.y,l=o.width,u=o.height,f=n.getOutlineStyle();return B(Un,di({className:"lf-outline",x:a,y:s,width:l,height:u},f))},e.prototype.render=function(){return B("g",{className:"lf-outline",children:[this.getNodesOutline(),this.getEdgeOutline()]})},e=cI([sn],e),e}(Ge),hI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hi=function(){return hi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hi.apply(this,arguments)},pI=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},vI=function(t){hI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props.snaplineModel,r=n??{},i=r.position,o=r.isShowHorizontal,a=r.isShowVertical,s=n==null?void 0:n.getStyle(),l=i??{},u=l.x,f=u===void 0?0:u,c=l.y,d=c===void 0?0:c,h=hi(hi({x1:-1e5,y1:d,x2:1e5,y2:d},s),{stroke:o?s==null?void 0:s.stroke:"none"}),v=hi(hi({x1:f,y1:-1e5,x2:f,y2:1e5},s),{stroke:a?s==null?void 0:s.stroke:"none"});return B("g",{className:"lf-snapline",children:[B(Oo,hi({},h)),B(Oo,hi({},v))]})},e=pI([sn],e),e}(Ge),gI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yI=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},mI=function(t){gI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){this.triggerToolRender()},e.prototype.componentDidUpdate=function(){this.triggerToolRender()},e.prototype.getTools=function(){var n=this.props,r=n.tool,i=n.graphModel,o=i.textEditElement,a=r.getTools(),s=a.map(function(l){return ae(l,{textEditElement:o,graphModel:i,lf:r.instance})});return r.components=s,s},e.prototype.triggerToolRender=function(){var n=this.props,r=n.tool,i=n.graphModel,o=document.querySelector("#ToolOverlay_".concat(i.flowId)),a=r.getInstance();a.components.forEach(function(s){return s(a,o)}),a.components=[]},e.prototype.render=function(){var n=this.props.graphModel;return B("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(n.flowId),children:this.getTools()})},e=yI([sn],e),e}(Ge),pi=function(){return pi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pi.apply(this,arguments)},ce=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},_I=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ft=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Yn=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},bI=function(){function t(e){var n=this,r,i;this.modelMap=new Map,this.nodeModelMap=new Map,this.edgeModelMap=new Map,this.elementsModelMap=new Map,this.nodeMoveRules=[],this.nodeResizeRules=[],this.nodes=[],this.edges=[],this.overlapMode=ur.DEFAULT,this.gridSize=1,this.partial=!1,this.waitCleanEffects=[];var o=e.container,a=e.partial,s=e.background,l=s===void 0?{}:s,u=e.grid,f=e.idGenerator,c=e.edgeGenerator,d=e.animation,h=e.customTrajectory;this.rootEl=o,this.partial=!!a,this.background=l,typeof u=="object"&&e.snapGrid&&(this.gridSize=u.size||1),this.theme=um(e.style),this.grid=Nl.getGridOptions(u??!1),this.edgeType=e.edgeType||"polyline",this.animation=fR(d),this.overlapMode=e.overlapMode||ur.DEFAULT,this.width=(r=e.width)!==null&&r!==void 0?r:this.rootEl.getBoundingClientRect().width,this.isContainerWidth=Wn(e.width),this.height=(i=e.height)!==null&&i!==void 0?i:this.rootEl.getBoundingClientRect().height,this.isContainerHeight=Wn(e.height);var v=new ResizeObserver(Xs(function(p){var g,y;try{for(var m=_I(p),A=m.next();!A.done;A=m.next()){var T=A.value;T.target===n.rootEl&&(n.resize(),n.eventCenter.emit("graph:resize",{target:n.rootEl,contentRect:T.contentRect}))}}catch(k){g={error:k}}finally{try{A&&!A.done&&(y=m.return)&&y.call(m)}finally{if(g)throw g.error}}},16));v.observe(this.rootEl),this.waitCleanEffects.push(function(){v.disconnect()}),this.eventCenter=new KL,this.editConfigModel=new YL(e),this.transformModel=new wI(this.eventCenter,e),this.flowId=fi(),this.idGenerator=f,this.edgeGenerator=LR(this,c),this.customTrajectory=h}return Object.defineProperty(t.prototype,"nodesMap",{get:function(){return this.nodes.reduce(function(e,n,r){return e[n.id]={index:r,model:n},e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"edgesMap",{get:function(){return this.edges.reduce(function(e,n,r){return e[n.id]={index:r,model:n},e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelsMap",{get:function(){return Yn(Yn([],Ft(this.nodes),!1),Ft(this.edges),!1).reduce(function(e,n){return e[n.id]=n,e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sortElements",{get:function(){for(var e=Yn(Yn([],Ft(this.nodes),!1),Ft(this.edges),!1).sort(function(s,l){return s.zIndex-l.zIndex}),n=[],r=[-200,-200],i=[this.width+Py,this.height+Py],o=0;o<e.length;o++){var a=e[o];a.visible&&(!this.partial||a.isSelected||this.isElementInArea(a,r,i,!1,!1))&&n.push(a)}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textEditElement",{get:function(){var e=this.nodes.find(function(r){return r.state===Qe.TEXT_EDIT}),n=this.edges.find(function(r){return r.state===Qe.TEXT_EDIT});return e||n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectElements",{get:function(){var e=new Map;return this.nodes.forEach(function(n){n.isSelected&&e.set(n.id,n)}),this.edges.forEach(function(n){n.isSelected&&e.set(n.id,n)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectNodes",{get:function(){var e=[];return this.nodes.forEach(function(n){n.isSelected&&e.push(n)}),e},enumerable:!1,configurable:!0}),t.prototype.getAreaElement=function(e,n,r,i,o){var a=this;r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!1);var s=[];return at(Yn(Yn([],Ft(this.nodes),!1),Ft(this.edges),!1),function(l){var u=a.isElementInArea(l,e,n,r,i);(!o||l.visible)&&u&&s.push(l)}),s},t.prototype.getModel=function(e){return this.modelMap.get(e)},t.prototype.getNodeModelById=function(e){var n;return this.fakeNode&&e===this.fakeNode.id?this.fakeNode:(n=this.nodesMap[e])===null||n===void 0?void 0:n.model},t.prototype.getPointByClient=function(e){var n=e.x,r=e.y,i=this.rootEl.getBoundingClientRect(),o={x:n-i.left,y:r-i.top},a=Ft(this.transformModel.HtmlPointToCanvasPoint([o.x,o.y]),2),s=a[0],l=a[1],u={x:s,y:l};return{domOverlayPosition:o,canvasOverlayPosition:u}},t.prototype.isElementInArea=function(e,n,r,i,o){var a;if(i===void 0&&(i=!0),o===void 0&&(o=!0),e.BaseType===Ct.NODE){e=e;for(var s=_n(e),l=s.minX,u=s.minY,f=s.maxX,c=s.maxY,d=[{x:l,y:u},{x:f,y:u},{x:f,y:c},{x:l,y:c}],h=o,v=0;v<d.length;v++){var p=d[v],g=p.x,y=p.y;if(a=Ft(this.transformModel.CanvasPointToHtmlPoint([g,y]),2),g=a[0],y=a[1],cc([g,y],n,r)!==o){h=!o;break}}return h}if(e.BaseType===Ct.EDGE){e=e;var m=e.startPoint,A=e.endPoint,T=this.transformModel.CanvasPointToHtmlPoint([m.x,m.y]),k=this.transformModel.CanvasPointToHtmlPoint([A.x,A.y]),C=cc(T,n,r),S=cc(k,n,r);return i?C&&S:C||S}return!1},t.prototype.graphDataToModel=function(e){var n=this;if(!e){this.clearData();return}if(this.elementsModelMap.clear(),this.nodeModelMap.clear(),this.edgeModelMap.clear(),e.nodes?this.nodes=Mn(e.nodes,function(i){var o=n.getModelAfterSnapToGrid(i);return n.elementsModelMap.set(o.id,o),n.nodeModelMap.set(o.id,o),o}):this.nodes=[],e.edges){var r=this.edgeType;this.edges=Mn(e.edges,function(i){var o,a=n.getModel((o=i.type)!==null&&o!==void 0?o:r);if(!a)throw new Error("".concat(i.type,""));var s=new a(i,n);return n.edgeModelMap.set(s.id,s),n.elementsModelMap.set(s.id,s),s})}else this.edges=[]},t.prototype.modelToGraphData=function(){var e=[];this.edges.forEach(function(r){var i=r.getData();i&&!r.virtual&&e.push(i)});var n=[];return this.nodes.forEach(function(r){var i=r.getData();i&&!r.virtual&&n.push(i)}),{nodes:n,edges:e}},t.prototype.modelToHistoryData=function(){for(var e=!1,n=[],r=0;r<this.nodes.length;r++){var i=this.nodes[r];if(i.isDragging){e=!0;break}else n.push(i.getHistoryData())}if(e)return!1;for(var o=!1,a=[],s=0;s<this.edges.length;s++){var l=this.edges[s];if(l.isDragging){o=!0;break}else a.push(l.getHistoryData())}return o?!1:{nodes:n,edges:a}},t.prototype.getEdgeModelById=function(e){var n;return(n=this.edgesMap[e])===null||n===void 0?void 0:n.model},t.prototype.getElement=function(e){return this.modelsMap[e]},t.prototype.getNodeEdges=function(e){for(var n=[],r=0;r<this.edges.length;r++){var i=this.edges[r],o=i.sourceNodeId===e,a=i.targetNodeId===e;(o||a)&&n.push(i)}return n},t.prototype.getSelectElements=function(e){e===void 0&&(e=!0);var n=this.selectElements,r={nodes:[],edges:[]};return n.forEach(function(i){if(i.BaseType===Ct.NODE&&r.nodes.push(i.getData()),i.BaseType===Ct.EDGE){var o=i.getData(),a=n.get(o.sourceNodeId)&&n.get(o.targetNodeId);(e||a)&&r.edges.push(o)}}),r},t.prototype.updateAttributes=function(e,n){var r=this.getElement(e);r==null||r.updateAttributes(n)},t.prototype.changeNodeId=function(e,n){return n||(n=fi()),this.nodesMap[n]?(console.warn("".concat(n,", ")),""):this.nodesMap[e]?(this.edges.forEach(function(r){r.sourceNodeId===e&&(r.sourceNodeId=n),r.targetNodeId===e&&(r.targetNodeId=n)}),this.nodesMap[e].model.id=n,this.nodesMap[n]=this.nodesMap[e],n):(console.warn("".concat(e,", ")),"")},t.prototype.changeEdgeId=function(e,n){return n||(n=fi()),this.edgesMap[n]?(console.warn(": ".concat(n,", ")),""):this.edgesMap[e]?(this.edges.forEach(function(r){r.id===e&&r.changeEdgeId(n)}),n):(console.warn(": ".concat(n,", ")),"")},t.prototype.getTextModel=function(e){var n=this.editConfigModel,r=n.textMode,i=n.nodeTextMode,o=n.edgeTextMode;if(e.BaseType===Ct.NODE)return e.textMode||i||r||zn.TEXT;if(e.BaseType===Ct.EDGE)return e.textMode||o||r||zn.TEXT},t.prototype.setTextMode=function(e,n){this.editConfigModel.updateEditConfig({textMode:e})},t.prototype.setFakeNode=function(e){this.fakeNode=e},t.prototype.removeFakeNode=function(){this.fakeNode=null},t.prototype.setModel=function(e,n){return this.modelMap.set(e,n)},t.prototype.toFront=function(e){var n,r,i,o=((n=this.nodesMap[e])===null||n===void 0?void 0:n.model)||((r=this.edgesMap[e])===null||r===void 0?void 0:r.model);o&&(this.overlapMode===ur.DEFAULT&&((i=this.topElement)===null||i===void 0||i.setZIndex(),o.setZIndex(dR),this.topElement=o),this.overlapMode===ur.INCREASE&&this.setElementZIndex(e,"top"))},t.prototype.setElementZIndex=function(e,n){var r,i,o=((r=this.nodesMap[e])===null||r===void 0?void 0:r.model)||((i=this.edgesMap[e])===null||i===void 0?void 0:i.model);if(o){var a=void 0;typeof n=="number"?a=n:(n==="top"&&(a=Oc()),n==="bottom"&&(a=NL())),o.setZIndex(a)}},t.prototype.deleteNode=function(e){var n=this.nodesMap[e].model,r=n.getData();this.deleteEdgeBySource(e),this.deleteEdgeByTarget(e),this.nodes.splice(this.nodesMap[e].index,1),this.eventCenter.emit(de.NODE_DELETE,{data:r,model:n})},t.prototype.addNode=function(e,n,r){n===void 0&&(n=de.NODE_ADD);var i=Jt(e),o=i.id;o&&this.nodesMap[o]&&delete i.id;var a=this.getModelAfterSnapToGrid(i);this.nodes.push(a);var s=a.getData(),l={data:s};return r&&(l.e=r),this.eventCenter.emit(n,l),a},t.prototype.getModelAfterSnapToGrid=function(e){var n=this.getModel(e.type),r=this.editConfigModel.snapGrid;if(!n)throw new Error("".concat(e.type,""));var i=e.x,o=e.y;i&&o&&(e.x=wo(i,this.gridSize,r),e.y=wo(o,this.gridSize,r),typeof e.text=="object"&&e.text!==null&&(e.text.x+=e.x-i,e.text.y+=e.y-o));var a=new n(e,this);return this.nodeModelMap.set(a.id,a),this.elementsModelMap.set(a.id,a),a},t.prototype.cloneNode=function(e){var n=this.getNodeModelById(e),r=n==null?void 0:n.getData();if(r){r.x+=30,r.y+=30,r.id="",typeof r.text=="object"&&r.text!==null&&(r.text.x+=30,r.text.y+=30);var i=this.addNode(r);return i.setSelected(!0),n==null||n.setSelected(!1),i.getData()}},t.prototype.moveNode=function(e,n,r,i){var o;i===void 0&&(i=!1);var a=this.nodesMap[e];if(!a){console.warn("id".concat(e,""));return}var s=a.model;o=Ft(s.getMoveDistance(n,r,i),2),n=o[0],r=o[1],this.moveEdge(e,n,r)},t.prototype.moveNode2Coordinate=function(e,n,r,i){i===void 0&&(i=!1);var o=this.nodesMap[e];if(!o){console.warn("id".concat(e,""));return}var a=o.model,s=a.x,l=a.y,u=n-s,f=r-l;this.moveNode(e,u,f,i)},t.prototype.editText=function(e){this.setElementStateById(e,Qe.TEXT_EDIT)},t.prototype.addEdge=function(e){var n=Jt(e),r=n.type;r||(r=this.edgeType),n.id&&this.edgesMap[n.id]&&delete n.id;var i=this.getModel(r);if(!i)throw new Error("".concat(r,""));var o=new i(pi(pi({},n),{type:r}),this);this.edgeModelMap.set(o.id,o),this.elementsModelMap.set(o.id,o);var a=o.getData();return this.edges.push(o),this.eventCenter.emit(de.EDGE_ADD,{data:a}),o},t.prototype.moveEdge=function(e,n,r){for(var i=0;i<this.edges.length;i++){var o=this.edges[i],a=o.textPosition,s=a.x,l=a.y,u=this.edges[i].sourceNodeId===e,f=this.edges[i].targetNodeId===e;u&&o.moveStartPoint(n,r),f&&o.moveEndPoint(n,r),(u||f)&&this.handleEdgeTextMove(o,s,l)}},t.prototype.handleEdgeTextMove=function(e,n,r){var i;if(e.customTextPosition){e.resetTextPosition();return}if(e.modelType===$e.POLYLINE_EDGE&&(!((i=e.text)===null||i===void 0)&&i.value)){var o=e.text,a=Uy(o,e.points);e.moveText(a.x-o.x,a.y-o.y)}var s=e.textPosition,l=s.x,u=s.y;e.moveText(l-n,u-r)},t.prototype.deleteEdgeBySourceAndTarget=function(e,n){for(var r=0;r<this.edges.length;r++)if(this.edges[r].sourceNodeId===e&&this.edges[r].targetNodeId===n){var i=this.edges[r].getData();this.edges.splice(r,1),r--,this.eventCenter.emit(de.EDGE_DELETE,{data:i})}},t.prototype.deleteEdgeById=function(e){var n=this.edgesMap[e];if(n){var r=this.edgesMap[e].index,i=this.edgesMap[e].model.getData();this.edges.splice(r,1),this.eventCenter.emit(de.EDGE_DELETE,{data:i})}},t.prototype.deleteEdgeBySource=function(e){for(var n=0;n<this.edges.length;n++)if(this.edges[n].sourceNodeId===e){var r=this.edges[n].getData();this.edges.splice(n,1),n--,this.eventCenter.emit(de.EDGE_DELETE,{data:r})}},t.prototype.deleteEdgeByTarget=function(e){for(var n=0;n<this.edges.length;n++)if(this.edges[n].targetNodeId===e){var r=this.edges[n].getData();this.edges.splice(n,1),n--,this.eventCenter.emit(de.EDGE_DELETE,{data:r})}},t.prototype.setElementStateById=function(e,n,r){this.nodes.forEach(function(i){i.id===e?i.setElementState(n,r):i.setElementState(Qe.DEFAULT)}),this.edges.forEach(function(i){i.id===e?i.setElementState(n,r):i.setElementState(Qe.DEFAULT)})},t.prototype.updateText=function(e,n){var r=ai(Yn(Yn([],Ft(this.nodes),!1),Ft(this.edges),!1),function(i){return i.id===e});r==null||r.updateText(n)},t.prototype.selectNodeById=function(e,n){var r;n===void 0&&(n=!1),n||this.clearSelectElements();var i=(r=this.nodesMap[e])===null||r===void 0?void 0:r.model;i==null||i.setSelected(!0)},t.prototype.selectEdgeById=function(e,n){var r;n===void 0&&(n=!1),n||this.clearSelectElements();var i=(r=this.edgesMap[e])===null||r===void 0?void 0:r.model;i==null||i.setSelected(!0)},t.prototype.selectElementById=function(e,n){n===void 0&&(n=!1),n||this.clearSelectElements();var r=this.getElement(e);r==null||r.setSelected(!0)},t.prototype.clearSelectElements=function(){var e;this.selectElements.forEach(function(n){n==null||n.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===ur.DEFAULT&&((e=this.topElement)===null||e===void 0||e.setZIndex())},t.prototype.moveNodes=function(e,n,r,i){var o,a,s,l=this;i===void 0&&(i=!1);for(var u=e.reduce(function(A,T){var k,C=(k=l.nodesMap[T])===null||k===void 0?void 0:k.model;return C&&(A[T]=C.getMoveDistance(n,r,i)),A},{}),f=0;f<this.edges.length;f++){var c=this.edges[f],d=c.textPosition,h=d.x,v=d.y,p=u[c.sourceNodeId],g=u[c.targetNodeId],y=void 0,m=void 0;p&&g&&c.modelType===$e.POLYLINE_EDGE?(o=Ft(p,2),y=o[0],m=o[1],c.updatePointsList(y,m)):(p&&(a=Ft(p,2),y=a[0],m=a[1],c.moveStartPoint(y,m)),g&&(s=Ft(g,2),y=s[0],m=s[1],c.moveEndPoint(y,m))),(p||g)&&this.handleEdgeTextMove(c,h,v)}},t.prototype.addNodeMoveRules=function(e){this.nodeMoveRules.includes(e)||this.nodeMoveRules.push(e)},t.prototype.addNodeResizeRules=function(e){this.nodeResizeRules.includes(e)||this.nodeResizeRules.push(e)},t.prototype.setDefaultEdgeType=function(e){this.edgeType=e},t.prototype.changeNodeType=function(e,n){var r=this.getNodeModelById(e);if(!r){console.warn("id".concat(e,""));return}var i=r.getData();i.type=n;var o=this.getModel(n);if(!o)throw new Error("".concat(n,""));var a=new o(i,this);this.nodes.splice(this.nodesMap[e].index,1,a);var s=this.getNodeEdges(e);s.forEach(function(l){if(l.sourceNodeId===e){var u=em(a,l.startPoint,a.width,a.height);l.updateStartPoint(u)}if(l.targetNodeId===e){var u=em(a,l.endPoint,a.width,a.height);l.updateEndPoint(u)}})},t.prototype.changeEdgeType=function(e,n){var r=this.getEdgeModelById(e);if(!r){console.warn("id".concat(e,""));return}if(r.type!==n){var i=r.getData();i.type=n;var o=this.getModel(n);if(!o)throw new Error("".concat(n,""));delete i.pointsList;var a=new o(i,this);this.edges.splice(this.edgesMap[e].index,1,a)}},t.prototype.getNodeIncomingEdge=function(e){var n=[];return this.edges.forEach(function(r){r.targetNodeId===e&&n.push(r)}),n},t.prototype.getNodeOutgoingEdge=function(e){var n=[];return this.edges.forEach(function(r){r.sourceNodeId===e&&n.push(r)}),n},t.prototype.getAnchorIncomingEdge=function(e){var n=[];return this.edges.forEach(function(r){r.targetAnchorId===e&&n.push(r)}),n},t.prototype.getAnchorOutgoingEdge=function(e){var n=[];return this.edges.forEach(function(r){r.sourceAnchorId===e&&n.push(r)}),n},t.prototype.getNodeIncomingNode=function(e){var n=this,r=[];return this.edges.forEach(function(i){var o;i.targetNodeId===e&&r.push((o=n.nodesMap[i.sourceNodeId])===null||o===void 0?void 0:o.model)}),r},t.prototype.getNodeOutgoingNode=function(e){var n=this,r=[];return this.edges.forEach(function(i){i.sourceNodeId===e&&r.push(n.nodesMap[i.targetNodeId].model)}),r},t.prototype.setTheme=function(e){this.theme=AL(pi(pi({},this.theme),e))},t.prototype.updateGridOptions=function(e){_o(this.grid,e)},t.prototype.updateGridSize=function(e){this.gridSize=e},t.prototype.updateBackgroundOptions=function(e){Zs(e)||Zs(this.background)?this.background=e:this.background=pi(pi({},this.background),e)},t.prototype.resize=function(e,n){this.width=e??this.rootEl.getBoundingClientRect().width,this.isContainerWidth=Wn(e),this.height=n??this.rootEl.getBoundingClientRect().height,this.isContainerHeight=Wn(n),(!this.width||!this.height)&&console.warn("containerDOM@see https://github.com/didi/LogicFlow/issues/675")},t.prototype.clearData=function(){this.nodes=[],this.edges=[],this.edgeModelMap.clear(),this.nodeModelMap.clear(),this.elementsModelMap.clear()},t.prototype.getVirtualRectSize=function(){var e=this.nodes,n=[],r=[];e.forEach(function(d){var h=d.x,v=d.y,p=d.width,g=d.height,y=d.getNodeStyle().strokeWidth,m=y===void 0?0:y,A=h+p/2+m,T=h-p/2-m,k=v+g/2+m,C=v-g/2-m;n=n.concat([A,T].filter(function(S){return!Number.isNaN(S)})),r=r.concat([k,C].filter(function(S){return!Number.isNaN(S)}))});var i=Math.min.apply(Math,Yn([],Ft(n),!1)),o=Math.max.apply(Math,Yn([],Ft(n),!1)),a=Math.min.apply(Math,Yn([],Ft(r),!1)),s=Math.max.apply(Math,Yn([],Ft(r),!1)),l=o-i||0,u=s-a||0,f=i+l/2,c=a+u/2;return{width:l,height:u,x:f,y:c}},t.prototype.translateCenter=function(){var e=this,n=e.nodes,r=e.width,i=e.height,o=e.rootEl,a=e.transformModel;if(n.length){var s=r||o.clientWidth,l=i||o.clientHeight,u=this.getVirtualRectSize(),f=u.x,c=u.y;a.focusOn(f,c,s,l)}},t.prototype.fitView=function(e,n){e===void 0&&(e=20),n===void 0&&(n=20);var r=this,i=r.nodes,o=r.width,a=r.height,s=r.rootEl,l=r.transformModel;if(i.length){var u=o||s.clientWidth,f=a||s.clientHeight,c=this.getVirtualRectSize(),d=c.width,h=c.height,v=c.x,p=c.y,g=(d+n)/u,y=(h+e)/f,m=1/Math.max(g,y),A=[u/2,f/2];l.zoom(m,A),l.focusOn(v,p,u,f)}},t.prototype.openEdgeAnimation=function(e){var n=this.getEdgeModelById(e);n==null||n.openEdgeAnimation()},t.prototype.closeEdgeAnimation=function(e){var n=this.getEdgeModelById(e);n==null||n.closeEdgeAnimation()},t.prototype.getPartial=function(){return this.partial},t.prototype.setPartial=function(e){this.partial=e},t.prototype.destroy=function(){try{this.waitCleanEffects.forEach(function(e){e()})}catch(e){console.warn("error on destroy GraphModel",e)}this.waitCleanEffects.length=0,this.eventCenter.destroy()},ce([$],t.prototype,"width",void 0),ce([$],t.prototype,"height",void 0),ce([$],t.prototype,"grid",void 0),ce([$],t.prototype,"edgeType",void 0),ce([$],t.prototype,"nodes",void 0),ce([$],t.prototype,"edges",void 0),ce([$],t.prototype,"fakeNode",void 0),ce([$],t.prototype,"overlapMode",void 0),ce([$],t.prototype,"background",void 0),ce([$],t.prototype,"gridSize",void 0),ce([$],t.prototype,"transformModel",void 0),ce([$],t.prototype,"editConfigModel",void 0),ce([$],t.prototype,"partial",void 0),ce([gt],t.prototype,"nodesMap",null),ce([gt],t.prototype,"edgesMap",null),ce([gt],t.prototype,"modelsMap",null),ce([gt],t.prototype,"sortElements",null),ce([gt],t.prototype,"textEditElement",null),ce([gt],t.prototype,"selectElements",null),ce([gt],t.prototype,"selectNodes",null),ce([F],t.prototype,"setTextMode",null),ce([F],t.prototype,"setFakeNode",null),ce([F],t.prototype,"removeFakeNode",null),ce([F],t.prototype,"setModel",null),ce([F],t.prototype,"toFront",null),ce([F],t.prototype,"setElementZIndex",null),ce([F],t.prototype,"deleteNode",null),ce([F],t.prototype,"addNode",null),ce([F],t.prototype,"cloneNode",null),ce([F],t.prototype,"moveNode",null),ce([F],t.prototype,"moveNode2Coordinate",null),ce([F],t.prototype,"editText",null),ce([F],t.prototype,"addEdge",null),ce([F],t.prototype,"moveEdge",null),ce([F],t.prototype,"deleteEdgeBySourceAndTarget",null),ce([F],t.prototype,"deleteEdgeById",null),ce([F],t.prototype,"deleteEdgeBySource",null),ce([F],t.prototype,"deleteEdgeByTarget",null),ce([F],t.prototype,"setElementStateById",null),ce([F],t.prototype,"updateText",null),ce([F],t.prototype,"selectNodeById",null),ce([F],t.prototype,"selectEdgeById",null),ce([F],t.prototype,"selectElementById",null),ce([F],t.prototype,"clearSelectElements",null),ce([F],t.prototype,"moveNodes",null),ce([F],t.prototype,"setDefaultEdgeType",null),ce([F],t.prototype,"changeNodeType",null),ce([F],t.prototype,"changeEdgeType",null),ce([F],t.prototype,"getNodeIncomingEdge",null),ce([F],t.prototype,"getNodeOutgoingEdge",null),ce([F],t.prototype,"getAnchorIncomingEdge",null),ce([F],t.prototype,"getAnchorOutgoingEdge",null),ce([F],t.prototype,"getNodeIncomingNode",null),ce([F],t.prototype,"getNodeOutgoingNode",null),ce([F],t.prototype,"setTheme",null),ce([F],t.prototype,"resize",null),ce([F],t.prototype,"clearData",null),ce([F],t.prototype,"translateCenter",null),ce([F],t.prototype,"fitView",null),ce([F],t.prototype,"openEdgeAnimation",null),ce([F],t.prototype,"closeEdgeAnimation",null),ce([F],t.prototype,"setPartial",null),t}(),ji=function(){return ji=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ji.apply(this,arguments)},Ra=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},xI=function(){function t(e){this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=e}return t.prototype.getStyle=function(){return ji({},this.graphModel.theme.snapline)},t.prototype.getCenterSnapLine=function(e,n){for(var r=e.x,i=e.y,o=!1,a=!1,s=0;s<n.length;s++){var l=n[s];if(l.id!==e.id&&(r===l.x&&(o=!0),i===l.y&&(a=!0),o&&a))break}return{isShowVertical:o,isShowHorizontal:a,position:{x:r,y:i}}},t.prototype.getHorizontalSnapline=function(e,n){var r=!1,i=0,o=e.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=_n(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=_n(l))}}for(var u=0;u<n.length;u++){var f=n[u];if(f.id!==e.id){var c=_n(f);if(c.minY===(a==null?void 0:a.minY)||c.maxY===(a==null?void 0:a.minY)){r=!0,i=a.minY;break}if(c.minY===(a==null?void 0:a.maxY)||c.maxY===(a==null?void 0:a.maxY)){r=!0,i=a.maxY;break}}}return{isShowHorizontal:r,isShowVertical:this.isShowVertical,position:ji(ji({},this.position),{y:i})}},t.prototype.getVerticalSnapline=function(e,n){var r=!1,i=0,o=e.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=_n(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=_n(l))}}for(var u=0;u<n.length;u++){var f=n[u];if(f.id!==e.id){var c=_n(f);if(c.minX===(a==null?void 0:a.minX)||c.maxX===(a==null?void 0:a.minX)){r=!0,i=a.minX;break}if(c.minX===(a==null?void 0:a.maxX)||c.maxX===(a==null?void 0:a.maxX)){r=!0,i=a.maxX;break}}}return{isShowHorizontal:this.isShowHorizontal,isShowVertical:r,position:ji(ji({},this.position),{x:i})}},t.prototype.getSnapLinePosition=function(e,n){var r=this.getCenterSnapLine(e,n),i=r.isShowHorizontal,o=r.isShowVertical;if(!i){var a=this.getHorizontalSnapline(e,n);a.isShowHorizontal&&(r.isShowHorizontal=a.isShowHorizontal,r.position.y=a.position.y)}if(!o){var s=this.getVerticalSnapline(e,n);s.isShowVertical&&(r.isShowVertical=s.isShowVertical,r.position.x=s.position.x)}return r},t.prototype.setSnaplineInfo=function(e){var n=e.isShowHorizontal,r=e.isShowVertical,i=e.position;this.position=i,this.isShowHorizontal=n,this.isShowVertical=r},t.prototype.clearSnapline=function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1},t.prototype.setNodeSnapLine=function(e){var n=this.graphModel.nodes,r=this.getSnapLinePosition(e,n);this.setSnaplineInfo(r)},Ra([$],t.prototype,"isShowHorizontal",void 0),Ra([$],t.prototype,"isShowVertical",void 0),Ra([$],t.prototype,"position",void 0),Ra([F],t.prototype,"clearSnapline",null),Ra([F],t.prototype,"setNodeSnapLine",null),t}(),dr=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},Mo=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},EI={false:[-1/0,-1/0,1/0,1/0],true:[-1/0,-1/0,1/0,1/0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},wI=function(){function t(e,n){this.MINI_SCALE_SIZE=.2,this.MAX_SCALE_SIZE=16,this.SCALE_X=1,this.SKEW_Y=0,this.SKEW_X=0,this.SCALE_Y=1,this.TRANSLATE_X=0,this.TRANSLATE_Y=0,this.ZOOM_SIZE=.04,this.translateLimitMinX=-1/0,this.translateLimitMinY=-1/0,this.translateLimitMaxX=1/0,this.translateLimitMaxY=1/0,this.eventCenter=e;var r=n.stopMoveGraph,i=r===void 0?!1:r;this.updateTranslateLimits(i)}return t.prototype.setZoomMiniSize=function(e){this.MINI_SCALE_SIZE=e},t.prototype.setZoomMaxSize=function(e){this.MAX_SCALE_SIZE=e},t.prototype.HtmlPointToCanvasPoint=function(e){var n=Mo(e,2),r=n[0],i=n[1];return[(r-this.TRANSLATE_X)/this.SCALE_X,(i-this.TRANSLATE_Y)/this.SCALE_Y]},t.prototype.CanvasPointToHtmlPoint=function(e){var n=Mo(e,2),r=n[0],i=n[1];return[r*this.SCALE_X+this.TRANSLATE_X,i*this.SCALE_Y+this.TRANSLATE_Y]},t.prototype.moveCanvasPointByHtml=function(e,n,r){var i=Mo(e,2),o=i[0],a=i[1];return[o+n/this.SCALE_X,a+r/this.SCALE_Y]},t.prototype.fixDeltaXY=function(e,n){return[e/this.SCALE_X,n/this.SCALE_Y]},t.prototype.getTransformStyle=function(){var e=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(e,")")}},t.prototype.zoom=function(e,n){e===void 0&&(e=!1);var r=this.SCALE_X,i=this.SCALE_Y;return typeof e=="number"?(r=e,i=e):e?(r+=this.ZOOM_SIZE,i+=this.ZOOM_SIZE):(r-=this.ZOOM_SIZE,i-=this.ZOOM_SIZE),r<this.MINI_SCALE_SIZE||r>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(n&&(this.TRANSLATE_X-=(r-this.SCALE_X)*n[0],this.TRANSLATE_Y-=(i-this.SCALE_Y)*n[1]),this.SCALE_X=r,this.SCALE_Y=i,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))},t.prototype.emitGraphTransform=function(e){this.eventCenter.emit(de.GRAPH_TRANSFORM,{type:e,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})},t.prototype.resetZoom=function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")},t.prototype.translate=function(e,n){this.TRANSLATE_X+e<=this.translateLimitMaxX&&this.TRANSLATE_X+e>=this.translateLimitMinX&&(this.TRANSLATE_X+=e),this.TRANSLATE_Y+n<=this.translateLimitMaxY&&this.TRANSLATE_Y+n>=this.translateLimitMinY&&(this.TRANSLATE_Y+=n),this.emitGraphTransform("translate")},t.prototype.focusOn=function(e,n,r,i){var o=Mo(this.CanvasPointToHtmlPoint([e,n]),2),a=o[0],s=o[1],l=Mo([r/2-a,i/2-s],2),u=l[0],f=l[1];this.TRANSLATE_X+=u,this.TRANSLATE_Y+=f,this.emitGraphTransform("focusOn")},t.prototype.updateTranslateLimits=function(e){var n;n=Mo(Array.isArray(e)&&e.length===4?e:EI[e.toString()],4),this.translateLimitMinX=n[0],this.translateLimitMinY=n[1],this.translateLimitMaxX=n[2],this.translateLimitMaxY=n[3]},dr([$],t.prototype,"SCALE_X",void 0),dr([$],t.prototype,"SKEW_Y",void 0),dr([$],t.prototype,"SKEW_X",void 0),dr([$],t.prototype,"SCALE_Y",void 0),dr([$],t.prototype,"TRANSLATE_X",void 0),dr([$],t.prototype,"TRANSLATE_Y",void 0),dr([$],t.prototype,"ZOOM_SIZE",void 0),dr([F],t.prototype,"zoom",null),dr([F],t.prototype,"resetZoom",null),dr([F],t.prototype,"translate",null),dr([F],t.prototype,"focusOn",null),t}(),SI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),OI=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},AI=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},CI=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},TI=function(t){SI(e,t);function e(){var n=t.apply(this,CI([],AI(arguments),!1))||this;return n.handleResize=function(){var r=n.props,i=r.graphModel,o=r.options,a=i.width,s=i.height,l=i.isContainerWidth,u=i.isContainerHeight,f=a,c=s,d=!1;l&&(f=void 0,d=!0),u&&(c=void 0,d=!0),d&&i.resize(f,c),o.width=a,o.height=s},n.throttleResize=my(n.handleResize,200),n}return e.prototype.componentDidMount=function(){window.addEventListener("resize",this.throttleResize)},e.prototype.componentDidUpdate=function(){var n=this.props.graphModel.modelToGraphData();this.props.graphModel.eventCenter.emit(de.GRAPH_UPDATED,{data:n})},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttleResize)},e.prototype.getComponent=function(n,r,i){i===void 0&&(i="canvas-overlay");var o=this.props.getView,a=o(n.type);return a?B(a,{model:n,graphModel:r,overlay:i},n.id):null},e.prototype.render=function(){var n=this,r=this.props,i=r.graphModel,o=r.tool,a=r.options,s=r.dnd,l=r.snaplineModel,u={};a.width&&(u.width="".concat(i.width,"px")),a.height&&(u.height="".concat(i.height,"px"));var f=i.fakeNode,c=i.editConfigModel,d=i.background,h=c.adjustEdge;return B("div",{className:"lf-graph","flow-id":i.flowId,style:u,children:[B(JL,{graphModel:i,dnd:s,children:[B("g",{className:"lf-base",children:Mn(i.sortElements,function(v){return n.getComponent(v,i)})}),f?this.getComponent(f,i):""]}),B(uI,{graphModel:i,children:[B(dI,{graphModel:i}),h?B(tI,{graphModel:i}):"",a.snapline!==!1?B(vI,{snaplineModel:l}):""]}),B(mI,{graphModel:i,tool:o}),d&&B(iI,{background:d}),B(Nl,{graphModel:i})]})},e=OI([sn],e),e}(Ge),NI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tr=function(){return Tr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Tr.apply(this,arguments)},MI=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},PI=function(t){NI(e,t);function e(){var n=t.call(this)||this;return n.onDragStart=function(r){var i=r.event,o=n.props,a=o.anchorData,s=o.nodeModel,l=o.graphModel;l.selectNodeById(s.id),s.autoToFront&&l.toFront(s.id),l.eventCenter.emit(de.ANCHOR_DRAGSTART,{data:a,e:i,nodeModel:s}),n.setState({startX:a.x,startY:a.y,endX:a.x,endY:a.y})},n.onDragging=function(r){var i=r.event,o=n.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=a.transformModel,f=a.eventCenter,c=a.width,d=a.height,h=a.editConfigModel,v=h.autoExpand,p=h.stopMoveGraph;if(i){var g=i.clientX,y=i.clientY,m=a.getPointByClient({x:g,y}),A=m.domOverlayPosition,T=A.x,k=A.y,C=m.canvasOverlayPosition,S=C.x,I=C.y;n.t&&xl(n.t);var X=[],Q=10;T<10?X=[Q,0]:T+10>c?X=[-10,0]:k<10?X=[0,Q]:k+10>d&&(X=[0,-10]),n.setState({endX:S,endY:I,dragging:!0}),n.moveAnchorEnd(S,I),X.length>0&&!p&&v&&(n.t=im(function(){var ue=MI(X,2),he=ue[0],w=ue[1];u.translate(he,w);var D=n.state,R=D.endX,K=D.endY;n.setState({endX:R-he,endY:K-w}),n.moveAnchorEnd(R-he,K-w)})),f.emit(de.ANCHOR_DRAG,{data:l,e:i,nodeModel:s})}},n.onDragEnd=function(r){var i=r.event;n.t&&xl(n.t);var o=n.checkEnd(i);n.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),n.sourceRuleResults.clear(),n.targetRuleResults.clear();var a=n.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData;s.eventCenter.emit(de.ANCHOR_DRAGEND,{data:u,e:i,nodeModel:l,edgeModel:o??void 0})},n.checkEnd=function(r){var i,o=n.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=l.x,f=l.y,c=l.id,d=n.state,h=d.endX,v=d.endY,p=d.dragging,g=yl({x:h,y:v},a);if(n.preTargetNode&&n.preTargetNode.state!==Qe.DEFAULT&&n.preTargetNode.setElementState(Qe.DEFAULT),!!p&&g&&g.node){var y=g.node,m=g.anchor.id,A="".concat(s.id,"_").concat(y.id,"_").concat(m,"_").concat(c),T=n.sourceRuleResults.get(A)||{},k=T.isAllPass,C=T.msg,S=n.targetRuleResults.get(A)||{},I=S.isAllPass,X=S.msg;if(k&&I){y.setElementState(Qe.DEFAULT);var Q=a.getNodeModelById(g.node.id),ue=(i=a.edgeGenerator)===null||i===void 0?void 0:i.call(a,s.getData(),Q==null?void 0:Q.getData()),he=a.addEdge(Tr(Tr({},ue),{sourceNodeId:s.id,sourceAnchorId:c,startPoint:{x:u,y:f},targetNodeId:g.node.id,targetAnchorId:g.anchor.id,endPoint:{x:g.anchor.x,y:g.anchor.y}})),w=n.props.anchorData;return a.eventCenter.emit(de.ANCHOR_DROP,{data:w,e:r,nodeModel:s,edgeModel:he}),he}var D=y.getData();return a.eventCenter.emit(de.CONNECTION_NOT_ALLOWED,{data:D,msg:X||C||""}),null}},n.sourceRuleResults=new Map,n.targetRuleResults=new Map,n.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},n.dragHandler=new Xn({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd}),n}return e.prototype.getAnchorShape=function(){var n=this.props,r=n.anchorData,i=n.style,o=n.node,a=o.getAnchorShape(r);if(a)return a;var s=r.x,l=r.y,u=Tr(Tr({},i),i==null?void 0:i.hover);return B("g",{children:[B(Ao,Tr({className:"lf-node-anchor-hover"},u,{x:s,y:l})),B(Ao,Tr({className:"lf-node-anchor"},i,{x:s,y:l}))]})},Object.defineProperty(e.prototype,"customTrajectory",{get:function(){var n=this.props.graphModel.customTrajectory;return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relateEdges",{get:function(){var n=this.props,r=n.graphModel,i=r.getAnchorIncomingEdge,o=r.getAnchorOutgoingEdge,a=n.anchorData.id;return{incomingEdgeList:i(a),outgoingEdgeList:o(a)}},enumerable:!1,configurable:!0}),e.prototype.moveAnchorEnd=function(n,r){var i,o,a=this.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData,f=yl({x:n,y:r},s);if(f){var c=f.node,d=f.anchor.id;if(this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(Qe.DEFAULT),u.id===d)return;this.preTargetNode=c;var h="".concat(l.id,"_").concat(c.id,"_").concat(d,"_").concat(u.id);if(!this.targetRuleResults.has(h)){var v=f.anchor,p=l.isAllowConnectedAsSource(c,u,v),g=c.isAllowConnectedAsTarget(l,u,v);this.sourceRuleResults.set(h,_l(p)),this.targetRuleResults.set(h,_l(g))}var y=((i=this.sourceRuleResults.get(h))!==null&&i!==void 0?i:{}).isAllPass,m=((o=this.targetRuleResults.get(h))!==null&&o!==void 0?o:{}).isAllPass;y&&m?c.setElementState(Qe.ALLOW_CONNECT):c.setElementState(Qe.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Qe.DEFAULT&&this.preTargetNode.setElementState(Qe.DEFAULT)},e.prototype.isShowLine=function(){var n=this.state,r=n.startX,i=n.startY,o=n.endX,a=n.endY,s=fr(r,i,o,a);return s>10},e.prototype.render=function(){var n=this,r=this.state,i=r.startX,o=r.startY,a=r.endX,s=r.endY,l=this.props,u=l.anchorData.edgeAddable,f=l.edgeStyle;return B("g",{className:"lf-anchor",children:[B("g",{onMouseDown:function(c){u!==!1&&n.dragHandler.handleMouseDown(c)},children:this.getAnchorShape()}),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(Tr({sourcePoint:{x:i,y:o},targetPoint:{x:a,y:s}},f)):B(Oo,Tr({x1:i,y1:o,x2:a,y2:s},f,{"pointer-events":"none"})))]})},e}(Ge),DI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dc=function(){return Dc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dc.apply(this,arguments)},RI=function(t){DI(e,t);function e(n){var r=t.call(this,n)||this;return r.style={},r.onDragging=function(i){var o,a=i.event,s=r.props,l=s.graphModel,u=s.nodeModel,f=s.eventCenter,c=l.selectNodes,d=u.x,h=u.y,v=a.clientX,p=a.clientY,g=l.getPointByClient({x:v,y:p}).canvasOverlayPosition,y=g.x,m=g.y,A=new Xt(y-d,m-h),T=((o=r.normal)===null||o===void 0?void 0:o.angle(A))-r.defaultAngle,k=new vl(-d,-h).rotate(T).translate(d,h).toString();u.transform=k,u.rotate=T;var C=Mn(c,function(I){return I.id});C.indexOf(u.id)===-1&&(C=[u.id]);var S=fy(C,function(I,X){var Q=l.getNodeModelById(X);return I[X]=Q==null?void 0:Q.getMoveDistance(0,0,!1),I},{});C.forEach(function(I){var X=l.getNodeEdges(I);X.forEach(function(Q){if(S[Q.sourceNodeId]){var ue=l.getNodeModelById(Q.sourceNodeId),he=ue.anchors.find(function(w){return w.id===Q.sourceAnchorId});Q.updateStartPoint(he)}if(S[Q.targetNodeId]){var ue=l.getNodeModelById(Q.targetNodeId),he=ue.anchors.find(function(R){return R.id===Q.targetAnchorId});Q.updateEndPoint(he)}})}),f.emit(de.NODE_ROTATE,{e:a,model:u,data:u.getData()})},r.style=n.style,r.stepperDrag=new Xn({onDragging:r.onDragging}),r}return e.prototype.render=function(){var n=this,r=this.props.nodeModel,i=r.x,o=r.y,a=r.width,s=r.height,l=i+a/2+20,u=o-s/2-20;return this.normal=new Xt(1,0),this.defaultAngle=this.normal.angle(new Xt(l-i,u-o)),r.defaultAngle=this.defaultAngle,B("g",{className:"lf-rotate-control",children:B("g",{onMouseDown:function(f){n.stepperDrag.handleMouseDown(f)},children:B(Ao,Dc({},this.style,{cx:l,cy:u}))})})},e}(Ge);function Ml(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rc={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var _m;function LI(){return _m||(_m=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)e.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(Rc)),Rc.exports}var II=LI();const Lc=Ml(II);var jI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ic=function(){return Ic=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ic.apply(this,arguments)},kI=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},bm=function(t){jI(e,t);function e(n){var r=t.call(this)||this;r.mouseDownHandler=function(o){var a=r.props,s=a.draggable,l=a.model,u=a.graphModel,f=u.editConfigModel.nodeTextDraggable;(s??f)&&(o.stopPropagation(),r.stepperDrag.model=l,r.stepperDrag.handleMouseDown(o))},r.onDragging=function(o){var a=o.deltaX,s=o.deltaY,l=r.props,u=l.model,f=l.graphModel.transformModel;if(a||s){var c=kI(f.fixDeltaXY(a,s),2),d=c[0],h=c[1];u.moveText(d,h)}},r.dbClickHandler=function(){var o=r.props,a=o.editable,s=o.graphModel.eventCenter,l=o.model;a&&l.setElementState(Qe.TEXT_EDIT),s.emit(de.TEXT_DBCLICK,{data:l.text,model:l})};var i=n.draggable;return r.stepperDrag=new Xn({onDragging:r.onDragging,step:1,eventType:"TEXT",isStopPropagation:i}),r}return e.prototype.getShape=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=r.text,s=a.value,l=a.x,u=a.y,f=a.editable,c=a.draggable,d={x:l,y:u,className:"",value:s},h=r.getTextStyle(),v=o.nodeTextDraggable||c;return B(om,Ic({},d,h,{className:Lc({"lf-element-text":f,"lf-text-draggable":!f&&v,"lf-text-disabled":!f&&!v}),model:r}))},e.prototype.render=function(){var n=this.props.model.text;if(n)return B("g",{onMouseDown:this.mouseDownHandler,onDblClick:this.dbClickHandler,children:this.getShape()})},e}(Ge),BI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hr=function(){return hr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hr.apply(this,arguments)},Pl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},FI=function(t){BI(e,t);function e(n){var r=t.call(this,n)||this;return r.setHoverOn=function(){r.setState({isHovered:!0})},r.setHoverOff=function(){r.setState({isHovered:!1})},r.state={isHovered:!1},r}return e.prototype.getBackground=function(){var n=this.state.isHovered,r=this.props.model,i=r.text,o=r.getTextStyle(),a=o.background||{};if(n&&o.hover&&o.hover.background&&(a=hr(hr({},a),o.hover.background)),i!=null&&i.value&&(a==null?void 0:a.fill)!=="transparent"){var s=o.fontSize,l=o.textWidth,u=o.lineHeight,f=o.overflowMode,c=a.wrapPadding,d=i==null?void 0:i.value.split(/[\r\n]/g),h=d.length,v=i.x,p=i.y,g={};if(f==="autoWrap"&&l){var y=tm({rows:d,style:{fontSize:"".concat(s,"px"),width:"".concat(l,"px"),lineHeight:u,padding:c},rowsLength:h,className:"lf-get-text-height"});g=hr(hr({},a),{x:v,y:p,width:l,height:y})}else{var m=IR({rows:d,rowsLength:h,fontSize:s}),A=m.width,T=m.height;if(f==="ellipsis"&&(A=l,T=s+2),typeof a.wrapPadding=="string"){var k=a.wrapPadding.split(",").filter(function(rt){return rt.trim()}).map(function(rt){return parseFloat(rt.trim())});if(k.length>0&&k.length<=4){if(k.length===1){var C=Pl(k,1),S=C[0];k=[S,S,S,S]}else if(k.length===2){var I=Pl(k,2),X=I[0],Q=I[1];k=[X,Q,X,Q]}else if(k.length===3){var ue=Pl(k,3),he=ue[0],Q=ue[1],w=ue[2];k=[he,Q,w,Q]}var D=Pl(k,4),R=D[0],K=D[1],ye=D[2],Oe=D[3];A+=K+Oe,T+=R+ye,v=v+(K-Oe)/2,p=p+(ye-R)/2}}g=hr(hr({},a),{x:v-1,y:p-1,width:A,height:T})}return B(Un,hr({},g))}return null},e.prototype.getShape=function(){var n=this.props.model,r=n.text,i=r.x,o=r.y,a=r.value;if(!a)return null;var s=n.getTextStyle(),l=hr({x:i,y:o,value:a,model:n,className:"lf-element-text"},s);return B("g",{className:"lf-line-text",onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getBackground(),B(om,hr({},l))]})},e}(bm),$I=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dl=function(){return Dl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dl.apply(this,arguments)},HI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Rl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},vi=function(t){$I(e,t);function e(n){var r=t.call(this)||this;r.onDragStart=function(l){var u=l.event,f=r.props,c=f.model,d=f.graphModel;if(u){var h=d.getPointByClient({x:u.clientX,y:u.clientY}).canvasOverlayPosition,v=h.x,p=h.y;r.moveOffset={dx:c.x-v,dy:c.y-p}}},r.onDragging=function(l){var u,f,c,d,h=l.event,v=r.props,p=v.model,g=v.graphModel,y=g.editConfigModel,m=y.stopMoveGraph,A=y.autoExpand,T=y.snapGrid,k=g.transformModel,C=g.selectNodes,S=g.width,I=g.height,X=g.gridSize;p.isDragging=!0;var Q=h,ue=Q.clientX,he=Q.clientY,w=g.getPointByClient({x:ue,y:he}).canvasOverlayPosition,D=w.x,R=w.y,K=Rl(k.CanvasPointToHtmlPoint([D,R]),2),ye=K[0],Oe=K[1];if(D=D+((f=(u=r.moveOffset)===null||u===void 0?void 0:u.dx)!==null&&f!==void 0?f:0),R=R+((d=(c=r.moveOffset)===null||c===void 0?void 0:c.dy)!==null&&d!==void 0?d:0),D=wo(D,X,T),R=wo(R,X,T),!S||!I){g.moveNode2Coordinate(p.id,D,R);return}var rt=ye<0||Oe<0||ye>S||Oe>I;if(!(A&&!m&&rt)){var it=Rl(k.CanvasPointToHtmlPoint([D-p.width/2,R-p.height/2]),2),me=it[0],ke=it[1],ze=Rl(k.CanvasPointToHtmlPoint([D+p.width/2,R+p.height/2]),2),Ne=ze[0],Xe=ze[1],M=Math.max(X,20),W=[];me<0?W=[M,0]:Ne>g.width?W=[-M,0]:ke<0?W=[0,M]:Xe>g.height&&(W=[0,-M]),r.t&&xl(r.t),p.transform=new vl(-D,-R).rotate(p.rotate).translate(D,R).toString();var G=C.map(function(ee){return ee.id});G.indexOf(p.id)===-1&&(G=[p.id]),W.length>0&&!m&&A?r.t=im(function(){var ee=Rl(W,2),re=ee[0],ge=ee[1];k.translate(re??0,ge??0);var Se=-(re??0)/k.SCALE_X,pt=-(ge??0)/k.SCALE_X;g.moveNodes(G,Se,pt)}):g.moveNodes(G,D-p.x,R-p.y)}},r.onDragEnd=function(){r.t&&xl(r.t);var l=r.props.model;l.isDragging=!1},r.onMouseOut=function(l){cR()&&r.setHoverOff(l)},r.handleMouseUp=function(){var l=r.props.model;r.mouseUpDrag=l.isDragging},r.handleClick=function(l){var u=r.mouseUpDrag===!1;if(r.startTime){var f=r.props,c=f.model,d=f.graphModel;if(u){var h=c.getData(),v=d.getPointByClient({x:l.clientX,y:l.clientY}),p={data:h,e:l,position:v,isSelected:!1,isMultiple:!1},g=l.button===2,y=l.detail===2;if(!g){var m=d.editConfigModel,A=Vy(l,m);p.isMultiple=A,c.isSelected&&!y&&A?(p.isSelected=!1,c.setSelected(!1)):(d.selectNodeById(c.id,A),p.isSelected=!0,m.isSilentMode||r.toFront()),y?(m.nodeTextEdit&&c.text.editable&&m.textMode===zn.TEXT&&(c.setSelected(!1),d.setElementStateById(c.id,Qe.TEXT_EDIT)),d.eventCenter.emit(de.NODE_DBCLICK,p)):(d.eventCenter.emit(de.ELEMENT_CLICK,p),d.eventCenter.emit(de.NODE_CLICK,p))}}}},r.handleContextMenu=function(l){l.preventDefault();var u=r.props,f=u.model,c=u.graphModel,d=c.editConfigModel,h=f.getData(),v=c.getPointByClient({x:l.clientX,y:l.clientY});c.setElementStateById(f.id,Qe.SHOW_MENU,v.domOverlayPosition),f.isSelected||c.selectNodeById(f.id),c.eventCenter.emit(de.NODE_CONTEXTMENU,{data:h,e:l,position:v}),d.isSilentMode||r.toFront()},r.handleMouseDown=function(l){var u=r.props,f=u.model,c=u.graphModel;r.startTime=new Date().getTime();var d=c.editConfigModel;d.adjustNodePosition&&f.draggable&&r.stepDrag&&r.stepDrag.handleMouseDown(l)},r.handleFocus=function(){var l=r.props,u=l.model,f=l.graphModel;f.eventCenter.emit(de.NODE_FOCUS,{data:u.getData()})},r.handleBlur=function(){var l=r.props,u=l.model,f=l.graphModel;f.eventCenter.emit(de.NODE_BLUR,{data:u.getData()})},r.setHoverOn=function(l){var u=r.props,f=u.model,c=u.graphModel;if(!f.isHovered){var d=f.getData();f.setHovered(!0),c.eventCenter.emit(de.NODE_MOUSEENTER,{data:d,e:l})}},r.setHoverOff=function(l){var u=r.props,f=u.model,c=u.graphModel,d=f.getData();f.isHovered&&(f.setHovered(!1),c.eventCenter.emit(de.NODE_MOUSELEAVE,{data:d,e:l}))};var i=n.graphModel,o=i.gridSize,a=i.eventCenter,s=n.model;return r.stepDrag=new Xn({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:o,eventType:"NODE",isStopPropagation:!1,eventCenter:a,model:s}),r.modelDisposer=oh(function(){return r.props},function(l){l&&l.model&&r.stepDrag.setModel(l.model)}),r}return e.prototype.componentWillUnmount=function(){this.modelDisposer&&this.modelDisposer(),this.render.$mobx&&this.render.$mobx.dispose()},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getAnchorShape=function(n){return null},e.prototype.getAnchors=function(){var n=this,r=this.props,i=r.model,o=r.graphModel,a=i.isSelected,s=i.isHitable,l=i.isDragging,u=i.isShowAnchor;return s&&(a||u)&&!l?Mn(i.anchors,function(f,c){var d=i.getAnchorLineStyle(f),h=i.getAnchorStyle(f);return B(PI,{anchorData:f,node:n,style:h,edgeStyle:d,anchorIndex:c,nodeModel:i,graphModel:o,setHoverOff:n.setHoverOff})}):[]},e.prototype.getRotateControl=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowRotate,l=r.isSelected,u=r.isHitable,f=r.rotatable,c=r.isHovered,d=s&&f,h=r.getRotateControlStyle();if(!a&&u&&(l||c)&&d)return B(RI,{graphModel:i,nodeModel:r,eventCenter:i.eventCenter,style:h})},e.prototype.getResizeControl=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowResize,l=r.isSelected,u=r.isHitable,f=r.resizable,c=r.isHovered,d=s&&f,h=r.getResizeControlStyle();return!a&&u&&(l||c)&&d?B(lL,{style:h,model:r,graphModel:i}):null},e.prototype.getText=function(){var n,r=this.props,i=r.model,o=r.graphModel,a=o.editConfigModel;if(a.nodeTextMode!==zn.TEXT||i.state===Qe.TEXT_EDIT)return null;if(i.text){var s=!1;return a.nodeTextDraggable&&i.text.draggable&&(s=!0),B(bm,{editable:a.nodeTextEdit&&((n=i.text.editable)!==null&&n!==void 0?n:!0),model:i,graphModel:o,draggable:s})}return null},e.prototype.getStateClassName=function(){var n=this.props.model,r=n.state,i=n.isDragging,o=n.isSelected,a="lf-node";switch(r){case Qe.ALLOW_CONNECT:a+=" lf-node-allow";break;case Qe.NOT_ALLOW_CONNECT:a+=" lf-node-not-allow";break;default:a+=" lf-node-default";break}return i&&(a+=" lf-dragging"),o&&(a+=" lf-node-selected"),a},e.prototype.toFront=function(){var n=this.props,r=n.model,i=n.graphModel;r.autoToFront&&i.toFront(r.id)},e.prototype.render=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=o.hideAnchors,s=o.adjustNodePosition,l=o.allowRotate,u=o.allowResize,f=i.gridSize,c=i.transformModel.SCALE_X,d=r.isHitable,h=r.draggable,v=r.transform,p=r.getOuterGAttributes(),g=p.className,y=g===void 0?"":g,m=HI(p,["className"]),A=B("g",{className:"lf-node-content",children:[B("g",{transform:v,children:[this.getShape(),this.getText(),l&&this.getRotateControl(),u&&this.getResizeControl()]}),!a&&this.getAnchors()]}),T;return d?(s&&h&&this.stepDrag.setStep(f*c),T=B("g",Dl({className:"".concat(this.getStateClassName()," ").concat(y),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu,onFocus:this.handleFocus,onBlur:this.handleBlur},m,{children:A}))):T=B("g",Dl({className:"".concat(this.getStateClassName()," ").concat(y)},m,{children:A})),T},e.isObserved=!1,e}(Ge),WI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jc=function(){return jc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},jc.apply(this,arguments)},pr=function(t){WI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getShape=function(){var n=this.props.model,r=n.getNodeStyle();return B(Un,jc({},r,{x:n.x,y:n.y,width:n.width,height:n.height,radius:n.radius}))},e}(vi),zI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kc=function(){return kc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kc.apply(this,arguments)},Po=function(t){zI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.r,a=n.getNodeStyle();return B(Ao,kc({},a,{x:r,y:i,r:o}))},e}(vi),XI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ll=function(){return Ll=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ll.apply(this,arguments)},Il=function(t){XI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getShape=function(){var n=this.props.model,r=n,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points,u=n.getNodeStyle(),f={transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")};return B("g",Ll({},f,{children:B(wc,Ll({},u,{points:l,x:i,y:o}))}))},e}(vi),GI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bc=function(){return Bc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bc.apply(this,arguments)},Fc=function(t){GI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getShape=function(){var n=this.props.model,r=n.getNodeStyle();return B("g",{children:B(wc,Bc({},r,{points:n.points,x:n.x,y:n.y}))})},e}(vi),UI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$c=function(){return $c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$c.apply(this,arguments)},Hc=function(t){UI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getShape=function(){var n=this.props.model,r=n.getNodeStyle();return B(tL,$c({},r,{x:n.x,y:n.y,rx:n.rx,ry:n.ry}))},e}(vi),YI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),La=function(){return La=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},La.apply(this,arguments)},xm=function(t){YI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackground=function(){var n=this.props.model,r=n.getTextStyle(),i=n.width,o=n.height,a=n.x,s=n.y,l=La(La({},r.background),{x:a,y:s,width:i,height:o});return B(Un,La({},l))},e.prototype.getResizeControl=function(){return null},e.prototype.getShape=function(){return B("g",{children:this.getBackground()})},e}(vi),VI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wc=function(){return Wc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Wc.apply(this,arguments)},KI=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},qI=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},zc=function(t){VI(e,t);function e(){var n=t.apply(this,qI([],KI(arguments),!1))||this;return n.ref=Qa(),n}return Object.defineProperty(e.prototype,"rootEl",{get:function(){return this.ref.current},enumerable:!1,configurable:!0}),e.prototype.setHtml=function(n){n.appendChild(document.createElement("div"))},e.prototype.confirmUpdate=function(n){this.setHtml(n)},e.prototype.shouldUpdate=function(){return this.preProperties&&this.preProperties===this.currentProperties?!1:(this.preProperties=this.currentProperties,!0)},e.prototype.componentDidMount=function(){this.shouldUpdate()&&this.rootEl&&this.setHtml(this.rootEl)},e.prototype.componentDidUpdate=function(){this.shouldUpdate()&&this.rootEl&&this.confirmUpdate(this.rootEl)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.rootEl.innerHTML=""},e.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.height,a=n.width,s=n.getNodeStyle();return this.currentProperties=JSON.stringify(n.properties),B("foreignObject",Wc({},s,{x:r-a/2,y:i-o/2,width:a,height:o,ref:this.ref}))},e}(vi),ZI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vr=function(){return vr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vr.apply(this,arguments)},JI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},QI=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Nr;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Nr||(Nr={}));var Em=function(t){ZI(e,t);function e(n){var r=t.call(this)||this;r.handleMouseDown=function(l){r.stepDrag&&r.stepDrag.handleMouseDown(l)},r.onDragStart=function(){var l=r.props,u=l.x,f=l.y,c=l.edgeModel,d=c.startPoint,h=c.endPoint,v=c.pointsList;r.oldEdge={startPoint:d,endPoint:h,pointsList:v},r.setState({endX:u,endY:f,dragging:!0})},r.onDragging=function(l){var u=l.deltaX,f=l.deltaY,c=r.state,d=c.endX,h=c.endY,v=r.props,p=v.graphModel,g=v.type,y=p.transformModel,m=p.editConfigModel,A=QI(y.moveCanvasPointByHtml([d,h],u,f),2),T=A[0],k=A[1];r.setState({endX:T,endY:k,dragging:!0});var C=r.props.edgeModel,S=yl({x:d,y:h},p);if(S&&S.node&&r.isAllowAdjust(S).pass){var I=C.startPoint,X=C.endPoint,Q=C.sourceNode,ue=C.targetNode,he=g===Nr.SOURCE?{startPoint:{x:S.anchor.x,y:S.anchor.y},endPoint:{x:X.x,y:X.y},sourceNode:S.node,targetNode:ue}:{startPoint:{x:I.x,y:I.y},endPoint:{x:S.anchor.x,y:S.anchor.y},sourceNode:Q,targetNode:S.node};C.updateAfterAdjustStartAndEnd(he)}else g===Nr.SOURCE?C.updateStartPoint({x:T,y:k}):C.updateEndPoint({x:T,y:k});C.text.value&&m.adjustEdge&&C.setText(Object.assign({},C.text,C.textPosition))},r.onDragEnd=function(l){var u,f,c,d=l.event;try{r.setState({dragging:!1});var h=r.props,v=h.graphModel,p=h.edgeModel,g=h.type,y=r.state,m=y.endX,A=y.endY,T=y.dragging,k=yl({x:m,y:A},v);if(!T)return;var C=!1,S=void 0;if(k&&k.node){var I=r.isAllowAdjust(k),X=I.pass,Q=I.msg,ue=I.newTargetNode;if(X){var he=p.getData(),w=he.text,D=he.sourceAnchorId,R=D===void 0?"":D,K=he.targetAnchorId,ye=K===void 0?"":K,Oe=JI(he,["text","sourceAnchorId","targetAnchorId"]);if(S=vr(vr({sourceAnchorId:R,targetAnchorId:ye},Oe),{text:(w==null?void 0:w.value)||""}),g===Nr.SOURCE){var rt=v.getNodeModelById(k.node.id),it=v.getNodeModelById(p.targetNodeId),me=(u=v.edgeGenerator)===null||u===void 0?void 0:u.call(v,rt==null?void 0:rt.getData(),it==null?void 0:it.getData(),S);S=vr(vr({},me),{sourceNodeId:k.node.id,sourceAnchorId:k.anchor.id,startPoint:{x:k.anchor.x,y:k.anchor.y},targetNodeId:p.targetNodeId,endPoint:vr({},p.endPoint)}),p.sourceNodeId===k.node.id&&p.sourceAnchorId===k.anchor.id&&(C=!0)}else if(g===Nr.TARGET){var rt=v.getNodeModelById(p.sourceNodeId),it=v.getNodeModelById(k.node.id),me=(f=v.edgeGenerator)===null||f===void 0?void 0:f.call(v,rt==null?void 0:rt.getData(),it==null?void 0:it.getData(),S);S=vr(vr({},me),{sourceNodeId:p.sourceNodeId,startPoint:vr({},p.startPoint),targetNodeId:k.node.id,targetAnchorId:k.anchor.id,endPoint:{x:k.anchor.x,y:k.anchor.y}}),p.targetNodeId===k.node.id&&p.targetAnchorId===k.anchor.id&&(C=!0)}}else{C=!0;var ke=ue.getData();v.eventCenter.emit(de.CONNECTION_NOT_ALLOWED,{data:ke,msg:Q})}}else C=!0;if(C)r.recoveryEdge();else{var ze=p.getData();v.deleteEdgeById(p.id);var Ne=v.addEdge(vr({},S));v.eventCenter.emit(de.EDGE_EXCHANGE_NODE,{data:{newEdge:Ne.getData(),oldEdge:ze}})}(c=r.preTargetNode)===null||c===void 0||c.setElementState(Qe.DEFAULT)}finally{var v=r.props.graphModel;v.eventCenter.emit(de.ADJUST_POINT_DRAGEND,{e:d,data:r.stepDragData})}},r.recoveryEdge=function(){var l=r.props.edgeModel,u=r.oldEdge,f=u.startPoint,c=u.endPoint,d=u.pointsList;l.updateStartPoint(f),l.updateEndPoint(c),l.modelType!==$e.LINE_EDGE&&(l.pointsList=d??[],l.initPoints())},r.getAdjustPointStyle=function(){var l=r.props.graphModel.theme,u=l.edgeAdjust;return u},r.state={dragging:!1,endX:0,endY:0},r.targetRuleResults=new Map,r.sourceRuleResults=new Map;var i=n.type,o=n.edgeModel,a=n.graphModel,s=a.eventCenter;return r.stepDragData={type:i,edgeData:o.getData()},r.stepDrag=new Xn({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:s,data:r.stepDragData}),r}return e.prototype.isAllowAdjust=function(n){var r=this.props,i=r.edgeModel,o=i.id,a=i.sourceNode,s=i.targetNode,l=i.sourceAnchorId,u=i.targetAnchorId,f=r.type,c,d,h,v;if(f===Nr.SOURCE?(c=n.node,d=s,h=n.anchor,v=s.getAnchorInfo(u)):(c=a,d=n.node,v=n.anchor,h=a.getAnchorInfo(l)),this.preTargetNode&&this.preTargetNode!==n.node&&this.preTargetNode.setElementState(Qe.DEFAULT),this.preTargetNode=n.node,v.id===h.id)return{pass:!1,msg:"",newTargetNode:d};var p="".concat(c.id,"_").concat(d.id,"_").concat(h.id,"_").concat(v.id);if(!this.targetRuleResults.has(p)){var g=c.isAllowConnectedAsSource(d,h,v,o),y=d.isAllowConnectedAsTarget(c,h,v,o);this.sourceRuleResults.set(p,_l(g)),this.targetRuleResults.set(p,_l(y))}var m=this.sourceRuleResults.get(p),A=m.isAllPass,T=m.msg,k=this.targetRuleResults.get(p),C=k.isAllPass,S=k.msg,I=A&&C?Qe.ALLOW_CONNECT:Qe.NOT_ALLOW_CONNECT;return f===Nr.SOURCE?c.setElementState(I):d.setElementState(I),{pass:A&&C,msg:S||T,newTargetNode:d}},e.prototype.render=function(){var n=this.props,r=n.x,i=n.y,o=n.getAdjustPointShape,a=n.edgeModel,s=this.state.dragging;return B("g",{pointerEvents:s?"none":"",onMouseDown:this.handleMouseDown,children:s?"":o(r,i,a)})},e}(Ge),e3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xc=function(){return Xc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xc.apply(this,arguments)};(function(t){e3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getArrowAttributes=function(){var n=this.props,r=n.arrowInfo,i=n.style,o=r.start,a=r.end,s={start:o,end:a,offset:i.offset,verticalLength:i.verticalLength,type:"end"},l=ga(s),u=l.leftX,f=l.leftY,c=l.rightX,d=l.rightY;return Xc({d:"M".concat(u," ").concat(f," L").concat(a.x," ").concat(a.y," L").concat(c," ").concat(d," z")},i)},e.prototype.getShape=function(){var n=this.getArrowAttributes(),r=n.d,i=n.strokeWidth,o=n.stroke,a=n.fill;return B(xa,{d:r,fill:a,strokeWidth:i,stroke:o})},e.prototype.render=function(){return B("g",{className:"lf-arrow",children:this.getShape()})},e})(Ge);var t3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ia=function(){return Ia=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ia.apply(this,arguments)},n3=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},jl=function(t){t3(e,t);function e(){var n=t.call(this)||this;return n.textRef=Qa(),n.handleHover=function(r,i){var o=n.props,a=o.model,s=o.graphModel.eventCenter;a.setHovered(r);var l=r?de.EDGE_MOUSEENTER:de.EDGE_MOUSELEAVE,u=a.getData();s.emit(l,{data:u,e:i})},n.setHoverOn=function(r){var i=n.props.model.isHovered;i||(n.textRef&&n.textRef.current&&n.textRef.current.setHoverOn(),n.handleHover(!0,r))},n.setHoverOff=function(r){var i=n.props.model.isHovered;i&&(n.textRef&&n.textRef.current&&n.textRef.current.setHoverOff(),n.handleHover(!1,r))},n.handleContextMenu=function(r){r.preventDefault(),n.contextMenuTime=new Date().getTime(),n.clickTimer&&clearTimeout(n.clickTimer);var i=n.props,o=i.model,a=i.graphModel,s=a.editConfigModel,l=a.getPointByClient({x:r.clientX,y:r.clientY});a.setElementStateById(o.id,Qe.SHOW_MENU,l.domOverlayPosition),s.isSilentMode||n.toFront(),o.isSelected||a.selectEdgeById(o.id);var u=o==null?void 0:o.getData();a.eventCenter.emit(de.EDGE_CONTEXTMENU,{data:u,e:r,position:l})},n.handleMouseDown=function(r){r.stopPropagation(),n.startTime=new Date().getTime()},n.handleMouseUp=function(){var r=n.props.model;n.mouseUpDrag=r.isDragging},n.handleClick=function(r){if(n.startTime&&!n.mouseUpDrag){var i=r.button===2;if(!i){var o=r.detail===2,a=n.props,s=a.model,l=a.graphModel,u=s==null?void 0:s.getData(),f=l.getPointByClient({x:r.clientX,y:r.clientY});if(o){var c=l.editConfigModel,d=l.textEditElement,h=s.id,v=s.text,p=s.modelType;if(d&&d.id===h&&l.setElementStateById(h,Qe.DEFAULT),c.edgeTextEdit&&v.editable&&(s.setSelected(!1),l.setElementStateById(h,Qe.TEXT_EDIT)),p===$e.POLYLINE_EDGE){var g=s,y=l.getPointByClient({x:r.x,y:r.y}).canvasOverlayPosition,m=y.x,A=y.y;g.dbClickPosition=Uy({x:m,y:A},g.points)}l.eventCenter.emit(de.EDGE_DBCLICK,{data:u,e:r,position:f})}else l.eventCenter.emit(de.ELEMENT_CLICK,{data:u,e:r,position:f}),l.eventCenter.emit(de.EDGE_CLICK,{data:u,e:r,position:f});var T=l.editConfigModel;l.selectEdgeById(s.id,Vy(r,T)),T.isSilentMode||n.toFront()}}},n.handleFocus=function(){var r=n.props,i=r.model,o=r.graphModel;o.eventCenter.emit(de.EDGE_FOCUS,{data:i.getData()})},n.handleBlur=function(){var r=n.props,i=r.model,o=r.graphModel;o.eventCenter.emit(de.EDGE_BLUR,{data:i.getData()})},n}return e.prototype.getShape=function(){return B("g",{children:this.getEdge()})},e.prototype.getTextStyle=function(){},e.prototype.getText=function(){var n,r=this.props,i=r.model,o=r.graphModel,a=o.editConfigModel;if(a.edgeTextMode!==zn.TEXT||i.state===Qe.TEXT_EDIT)return null;if(i.text){var s=!1;return a.edgeTextDraggable&&i.text.draggable&&(s=!0),B(FI,{ref:this.textRef,editable:a.edgeTextEdit&&((n=i.text.editable)!==null&&n!==void 0?n:!0),model:i,graphModel:o,draggable:s})}return null},e.prototype.getArrowInfo=function(){var n=this.props.model,r=n.startPoint,i=n.endPoint,o=n.isSelected,a=this.state.hover;return{start:r,end:i,hover:a,isSelected:o}},e.prototype.getLastTwoPoints=function(){var n=this.props.model,r=n.startPoint,i=n.endPoint;return[r,i]},e.prototype.getArrowStyle=function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null},e.prototype.getArrow=function(){var n=this.props.model,r=n.id,i=n.getArrowStyle(),o=i.refY,a=o===void 0?0:o,s=i.refX,l=s===void 0?2:s,u=n3(this.getLastTwoPoints(),2),f=u[0],c=u[1],d="auto";return f!==null&&c!==null&&(d=SL(wL({x:c.x-f.x,y:c.y-f.y}))),B("g",{children:B("defs",{children:[B("marker",{id:"marker-start-".concat(r),refX:-l,refY:a,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse",children:this.getStartArrow()}),B("marker",{id:"marker-end-".concat(r),refX:l,refY:a,overflow:"visible",orient:d,markerUnits:"userSpaceOnUse",children:this.getEndArrow()})]})})},e.prototype.getStartArrow=function(){return B("path",{})},e.prototype.getEndArrow=function(){var n=this.props.model,r=n.getArrowStyle(),i=r.stroke,o=r.strokeWidth,a=r.offset,s=r.verticalLength;return B("path",{stroke:i,fill:i,strokeWidth:o,transform:"rotate(180)",d:"M 0 0 L ".concat(a," -").concat(s," L ").concat(a," ").concat(s," Z")})},e.prototype.getAdjustPointShape=function(n,r,i){var o=i.getAdjustPointStyle();return B(Ao,Ia({className:"lf-edge-adjust-point"},o,{x:n,y:r}))},e.prototype.getAdjustPoints=function(){var n=this.props,r=n.model,i=n.graphModel,o=i.editConfigModel,a=o.adjustEdgeStartAndEnd,s=o.adjustEdgeStart,l=o.adjustEdgeEnd,u=r.getAdjustStart(),f=r.getAdjustEnd();return B("g",{children:[a&&s&&B(Em,Ia({type:Nr.SOURCE},u,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:r,graphModel:i})),a&&l&&B(Em,Ia({type:Nr.TARGET},f,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:r,graphModel:i}))]})},e.prototype.getAnimation=function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")},e.prototype.getAppendWidth=function(){return B("g",{})},e.prototype.getAppend=function(){return B("g",{className:"lf-edge-append",children:this.getAppendWidth()})},e.prototype.getEdge=function(){return null},e.prototype.toFront=function(){var n=this.props,r=n.graphModel,i=n.model;r.toFront(i.id)},e.prototype.render=function(){var n=this.props.model,r=n.isSelected,i=n.isHitable,o=n.isShowAdjustPoint;return B("g",{children:[B("g",{className:["lf-edge",!i&&"pointer-none",r&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverOn,onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,onFocus:this.handleFocus,onBlur:this.handleBlur,children:[this.getShape(),this.getAppend(),this.getText(),this.getArrow()]}),o&&r?this.getAdjustPoints():""]})},e.isObserved=!1,e}(Ge),r3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gc=function(){return Gc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gc.apply(this,arguments)},i3=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},wm=function(t){r3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEdge=function(){var n=this.props.model,r=n.getEdgeStyle(),i=n,o=i.path,a=i.isAnimation,s=i.arrowConfig,l=n.getEdgeAnimationStyle(),u=l.strokeDasharray,f=l.stroke,c=l.strokeDashoffset,d=l.animationName,h=l.animationDuration,v=l.animationIterationCount,p=l.animationTimingFunction,g=l.animationDirection;return B(xa,Gc({d:o},r,s,a?{strokeDasharray:u,stroke:f,style:{strokeDashoffset:c,animationName:d,animationDuration:h,animationIterationCount:v,animationTimingFunction:p,animationDirection:g}}:{}))},e.prototype.getAppendWidth=function(){var n=this.props.model.path;return B(xa,{d:n,strokeWidth:10,stroke:"transparent",fill:"none"})},e.prototype.getArrowInfo=function(){var n=this.props.model,r=this.state.hover,i=n.isSelected,o=n.getArrowStyle().offset,a=n.pointsList.map(function(c){return{x:c.x,y:c.y}}),s=i3(Gy(a,o),2),l=s[0],u=s[1],f={start:l,end:u,hover:r,isSelected:i};return f},e.prototype.getLastTwoPoints=function(){var n=this.props.model,r=n.getArrowStyle().offset,i=n.pointsList.map(function(o){return{x:o.x,y:o.y}});return Gy(i,r)},e}(jl),o3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uc=function(){return Uc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Uc.apply(this,arguments)},Sm=function(t){o3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEdge=function(){var n=this.props.model,r=n.startPoint,i=n.endPoint,o=n.isAnimation,a=n.arrowConfig,s=n.getEdgeStyle(),l=n.getEdgeAnimationStyle(),u=l.strokeDasharray,f=l.stroke,c=l.strokeDashoffset,d=l.animationName,h=l.animationDuration,v=l.animationIterationCount,p=l.animationTimingFunction,g=l.animationDirection;return B(Oo,Uc({},s,{x1:r.x,y1:r.y,x2:i.x,y2:i.y},a,o?{strokeDasharray:u,stroke:f,style:{strokeDashoffset:c,animationName:d,animationDuration:h,animationIterationCount:v,animationTimingFunction:p,animationDirection:g}}:{}))},e.prototype.getAppendWidth=function(){var n=this.props.model,r=n.startPoint,i=n.endPoint,o={start:r,end:i},a=DR(o),s=a.d,l=a.strokeWidth,u=a.fill,f=a.strokeDasharray,c=a.stroke;return B(xa,{d:s,fill:u,strokeWidth:l,stroke:c,strokeDasharray:f})},e}(jl),a3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ki=function(){return ki=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ki.apply(this,arguments)},s3=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Do=function(t){a3(e,t);function e(){var n=t.call(this)||this;return n.onDragStart=function(){var r=n.props.model;r.dragAppendStart(),n.isShowAdjustPointTemp=r.isShowAdjustPoint,r.isShowAdjustPoint=!1},n.onDragging=function(r){var i=r.deltaX,o=r.deltaY,a=n.props,s=a.model,l=a.graphModel;n.isDragging=!0;var u=l.transformModel,f=l.editConfigModel,c=s3(u.fixDeltaXY(i,o),2),d=c[0],h=c[1],v=s,p=f.adjustEdgeMiddle;p?n.appendInfo=v.dragAppendSimple(n.appendInfo,{x:d,y:h}):n.appendInfo=v.dragAppend(n.appendInfo,{x:d,y:h})},n.onDragEnd=function(){var r,i=n.props,o=i.model,a=i.graphModel.eventCenter,s=o;s.dragAppendEnd(),n.isDragging=!1,s.isShowAdjustPoint=(r=n.isShowAdjustPointTemp)!==null&&r!==void 0?r:!1,n.appendInfo=void 0,a.emit(de.EDGE_ADJUST,{data:s.getData()})},n.beforeDragStart=function(r,i){i.draggable&&n.drag.handleMouseDown(r),n.appendInfo=i},n.drag=new Xn({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,isStopPropagation:!1}),n}return e.prototype.getEdge=function(){var n=this.props.model,r=n.points,i=n.isAnimation,o=n.arrowConfig,a=n.getEdgeStyle(),s=n.getEdgeAnimationStyle(),l=s.strokeDasharray,u=s.stroke,f=s.strokeDashoffset,c=s.animationName,d=s.animationDuration,h=s.animationIterationCount,v=s.animationTimingFunction,p=s.animationDirection;return B(iL,ki({points:r},a,o,i?{strokeDasharray:l,stroke:u,style:{strokeDashoffset:f,animationName:c,animationDuration:d,animationIterationCount:h,animationTimingFunction:v,animationDirection:p}}:{}))},e.prototype.getArrowInfo=function(){var n=this.props.model,r=n.points,i=n.isSelected,o=this.state.hover,a=Li(r),s=a[0],l=a[0];return a.length>=2&&(s=a[a.length-2],l=a[a.length-1]),{start:s,end:l,hover:o,isSelected:i}},e.prototype.getLastTwoPoints=function(){var n=this.props.model,r=n.points,i=Li(r),o=i[0],a=i[0];return i.length>=2&&(o=i[i.length-2],a=i[i.length-1]),[o,a]},e.prototype.getAppendAttributes=function(n){var r=n.start,i=n.end,o;if(r.x===i.x&&r.y===i.y)o="";else{var a={start:r,end:i,offset:10,verticalLength:5},s=ga(ki(ki({},a),{type:"start"})),l=ga(ki(ki({},a),{type:"end"}));o="M".concat(s.leftX," ").concat(s.leftY,`
      L`).concat(s.rightX," ").concat(s.rightY,`
      L`).concat(l.rightX," ").concat(l.rightY,`
      L`).concat(l.leftX," ").concat(l.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},e.prototype.getAppendShape=function(n){var r=this.getAppendAttributes(n),i=r.d,o=r.strokeWidth,a=r.fill,s=r.strokeDasharray,l=r.stroke;return B(xa,{d:i,fill:a,strokeWidth:o,stroke:l,strokeDasharray:s})},e.prototype.getAppendWidth=function(){for(var n=this,r=this.props,i=r.model,o=r.graphModel,a=i.pointsList,s=i.draggable,l=[],u=a.length,f=function(h){var v="lf-polyline-append",p={start:{x:a[h].x,y:a[h].y},end:{x:a[h+1].x,y:a[h+1].y},startIndex:h,endIndex:h+1,direction:xt.HORIZONTAL,draggable:!0},g=B("g",{className:v,children:c.getAppendShape(p)}),y=o.editConfigModel,m=y.adjustEdge,A=y.adjustEdgeMiddle;if(m&&s){var T=p.startIndex,k=p.endIndex,C=A&&(T===0||k===u-1);p.draggable=!C,p.start.x===p.end.x?(p.draggable&&(v+="-ew-resize"),p.direction=xt.VERTICAL):p.start.y===p.end.y&&(p.draggable&&(v+="-ns-resize"),p.direction=xt.HORIZONTAL),g=B("g",{className:c.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(S){return n.beforeDragStart(S,p)},children:B("g",{className:v,children:c.getAppendShape(p)})})}l.push(g)},c=this,d=0;d<u-1;d++)f(d);return B("g",{children:l})},e}(jl),Ro=function(){return Ro=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ro.apply(this,arguments)},l3=function(){function t(e){var n=this;this.nodeConfig=null,this.fakeNode=null,this.stopDrag=function(){n.nodeConfig=null,window.document.removeEventListener("mouseup",n.stopDrag)},this.dragEnter=function(i){!n.nodeConfig||n.fakeNode||(n.fakeNode=n.lf.createFakeNode(Ro(Ro({},n.nodeConfig),n.clientToLocalPoint({x:i.clientX,y:i.clientY}))))},this.onDragOver=function(i){if(i.preventDefault(),n.fakeNode){var o=n.clientToLocalPoint({x:i.clientX,y:i.clientY}),a=o.x,s=o.y;n.fakeNode.moveTo(a,s);var l=n.fakeNode.getData();n.lf.setNodeSnapLine(l),n.lf.graphModel.eventCenter.emit(de.NODE_DND_DRAG,{data:l,e:i})}return!1},this.onDragLeave=function(){n.fakeNode&&(n.lf.removeNodeSnapLine(),n.lf.graphModel.removeFakeNode(),n.fakeNode=null)},this.onDrop=function(i){!n.lf.graphModel||!i||!n.nodeConfig||(n.lf.addNode(Ro(Ro({},n.nodeConfig),n.clientToLocalPoint({x:i.clientX,y:i.clientY})),de.NODE_DND_ADD,i),i.preventDefault(),i.stopPropagation(),n.nodeConfig=null,n.lf.removeNodeSnapLine(),n.lf.graphModel.removeFakeNode(),n.fakeNode=null)};var r=e.lf;this.lf=r}return t.prototype.clientToLocalPoint=function(e){var n=e.x,r=e.y,i=ho(this.lf.options,["grid","size"]),o=this.lf.graphModel.getPointByClient({x:n,y:r}),a=o.canvasOverlayPosition,s=a.x,l=a.y,u=this.lf.graphModel.editConfigModel.snapGrid;return{x:wo(s,i,u),y:wo(l,i,u)}},t.prototype.startDrag=function(e){var n=this.lf.graphModel.editConfigModel;n!=null&&n.isSilentMode||(this.nodeConfig=e,window.document.addEventListener("mouseup",this.stopDrag))},t.prototype.eventMap=function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}},t}();function u3(t,e){t.on("node:mousemove",function(n){var r=n.data;e.setNodeSnapLine(r)}),t.on("node:mouseup",function(){e.clearSnapline()})}var f3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xr=function(){return Xr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xr.apply(this,arguments)},c3=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},d3=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},h3=function(t){f3(e,t);function e(n){var r=t.call(this,n)||this;return r.ref=Qa(),r.__prevText={type:"",text:"",id:""},r.keyupHandler=function(i){var o=r.props.graphModel.textEditElement;i.key==="Enter"&&i.altKey&&(o==null||o.setElementState(Qe.DEFAULT))},r.inputHandler=function(i){var o=i.target.innerText,a=r.props.graphModel.textEditElement;a&&(r.__prevText={type:a.type,text:o.replace(/(\r\n)+$|(\n)+$/,""),id:a.id})},r.keydownHandler=function(i){i.stopPropagation()},r.state={style:{left:0,top:0}},r}return e.getDerivedStateFromProps=function(n){var r,i=n.textEditElement,o=n.graphModel,a=o.transformModel,s=o.theme,l=s.inputText,u;if(i){if(!(!((r=i.text)===null||r===void 0)&&r.value)&&i.BaseType===Ct.EDGE){var f=i.text,c=i.textPosition,d=c.x,h=c.y;f.x=d,f.y=h,i.setText(f)}var v={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(i.BaseType===Ct.EDGE){var p=s.edgeText,g=p.overflowMode,y=p.lineHeight,m=p.wrapPadding,A=p.textWidth;A&&g==="autoWrap"&&(u=Xr(Xr({},v),{width:A,minWidth:A,lineHeight:y,padding:m}))}else if(i.BaseType===Ct.NODE){var T=s.nodeText,g=T.overflowMode,y=T.lineHeight,m=T.wrapPadding,A=T.textWidth,k=i.width,C=i.modelType,S=i.textWidth,I=S||A||k;(C!==$e.TEXT_NODE&&g==="autoWrap"||C===$e.TEXT_NODE&&A)&&(u=Xr(Xr({},v),{width:I,minWidth:I,lineHeight:y,padding:m}))}var X=i.text,Q=X.x,ue=X.y,he=d3(a.CanvasPointToHtmlPoint([Q,ue]),2),w=he[0],D=he[1];return{style:Xr(Xr({left:w,top:D},u),l)}}return null},e.prototype.componentDidUpdate=function(){var n=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var r=this.__prevText,i=r.text,o=r.id;n.updateText(o,i),n.eventCenter.emit(de.TEXT_UPDATE,{data:Xr({},this.__prevText)}),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}},e.prototype.placeCaretAtEnd=function(n){if(window.getSelection!==void 0&&document.createRange!==void 0){var r=document.createRange();r.selectNodeContents(n),r.collapse(!1);var i=window.getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(r)}},e.prototype.render=function(){var n,r=this.props.graphModel.textEditElement,i=this.state.style;return r?B("div",{contentEditable:!0,className:"lf-text-input",style:i,ref:this.ref,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler,children:(n=r.text)===null||n===void 0?void 0:n.value},r.id):null},e.toolName="text-edit-tool",e=c3([sn],e),e}(Ge),p3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v3=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},Yc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},g3=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},y3=function(t){p3(e,t);function e(n){var r=t.call(this,n)||this;r.handleMouseDown=function(s){r.stepDrag.handleMouseDown(s)},r.handleWheelEvent=function(s){var l,u;s.preventDefault();var f=s.deltaX,c=s.deltaY,d=s.clientX,h=s.clientY,v=s.ctrlKey,p=new WheelEvent("wheel",{deltaX:f,deltaY:c,clientX:d,clientY:h,ctrlKey:v});(u=(l=r.props.lf.container)===null||l===void 0?void 0:l.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||u===void 0||u.dispatchEvent(p)},r.onDragging=function(s){var l=s.deltaX,u=s.deltaY,f=r.props,c=f.graphModel,d=f.lf,h=d.getTransform(),v=h.SCALE_X,p=h.SCALE_Y,g=c.getSelectElements(!0);c.moveNodes(g.nodes.map(function(y){return y.id}),l/v,u/p)},r.handleContextMenu=function(s){s.preventDefault();var l=r.props,u=l.graphModel,f=l.graphModel,c=f.eventCenter,d=f.selectElements,h=u.getPointByClient({x:s.clientX,y:s.clientY}),v={nodes:[],edges:[]},p=g3([],Yc(d.values()),!1);p.forEach(function(g){g.BaseType===Ct.NODE&&v.nodes.push(g.getData()),g.BaseType===Ct.EDGE&&v.edges.push(g.getData())}),c.emit(de.SELECTION_CONTEXTMENU,{data:v,e:s,position:h})};var i=n.graphModel,o=i.gridSize,a=i.eventCenter;return r.stepDrag=new Xn({onDragging:r.onDragging,step:o,eventType:"SELECTION",eventCenter:a}),r}return e.prototype.render=function(){var n,r,i=this.props.graphModel,o=i.selectElements,a=i.transformModel,s=this.props.lf.getTransform(),l=s.SCALE_X,u=s.SCALE_Y;if(!(o.size<=1)){var f=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;o.forEach(function(p){var g;p.BaseType===Ct.NODE&&(g=vR(p)),p.BaseType===Ct.EDGE&&(g=_R(p)),g!==void 0&&(f=Math.min(f,g.x),c=Math.min(c,g.y),d=Math.max(d,g.x1),h=Math.max(h,g.y1))}),n=Yc(a.CanvasPointToHtmlPoint([f,c]),2),f=n[0],c=n[1],r=Yc(a.CanvasPointToHtmlPoint([d,h]),2),d=r[0],h=r[1];var v={left:"".concat(f-20*l/2,"px"),top:"".concat(c-20*u/2,"px"),width:"".concat(d-f+20*l,"px"),height:"".concat(h-c+20*u,"px"),"border-width":"".concat(2*l,"px")};return B("div",{className:"lf-multiple-select",style:v,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}},e.toolName="multiple-select-tool",e=v3([sn],e),e}(Ge),Vc=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},m3=[h3,y3],_3=function(){function t(e){var n=this;this.toolMap=new Map,this.disabledToolMap=new Map,this.instance=e,at(m3,function(o){n.isDisabled(o.toolName)||n.registerTool(o.toolName,o)});var r=e.graphModel,i=r.eventCenter;i.on("".concat(de.GRAPH_TRANSFORM,",").concat(de.NODE_CLICK,",").concat(de.BLANK_CLICK," "),function(){var o,a=r.textEditElement,s=r.editConfigModel,l=s.edgeTextEdit,u=s.nodeTextEdit;(l||u)&&a&&((o=r.textEditElement)===null||o===void 0||o.setElementState(Qe.DEFAULT))})}return t.prototype.isDisabled=function(e){var n;return((n=this.instance.options.disabledTools)===null||n===void 0?void 0:n.indexOf(e))!==-1},t.prototype.registerTool=function(e,n){this.toolMap.set(e,n)},t.prototype.disableTool=function(e){var n=this.toolMap.get(e);if(n)return this.disabledToolMap.set(e,n),this.toolMap.delete(e),!0;throw new Error(" ${tool} ")},t.prototype.enableTool=function(e){var n=this.disabledToolMap.get(e);if(n)return this.toolMap.set(e,n),this.disabledToolMap.delete(e),!0;throw new Error(" ${tool} ")},t.prototype.getTools=function(){return Array.from(this.toolMap.values())},t.prototype.getInstance=function(){return this.instance},t.prototype.destroy=function(){this.toolMap.clear(),this.disabledToolMap.clear()},Vc([$],t.prototype,"toolMap",void 0),Vc([F],t.prototype,"disableTool",null),Vc([F],t.prototype,"enableTool",null),t}();function b3(t){throw new Error("[mobx-utils] "+t)}function kl(t,e){e===void 0&&(e="Illegal state"),t||b3(e)}var Om=function(t){return t&&t!==Object.prototype&&Object.getOwnPropertyNames(t).concat(Om(Object.getPrototypeOf(t))||[])},x3=function(t){var e=Om(t),n=e.filter(function(r,i){return e.indexOf(r)===i});return n},E3=function(t){return x3(t).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},Am="pending",Bl="fulfilled",Kc="rejected";function w3(t){switch(this.state){case Am:return t.pending&&t.pending(this.value);case Kc:return t.rejected&&t.rejected(this.value);case Bl:return t.fulfilled?t.fulfilled(this.value):this.value}}function Cm(t,e){if(kl(arguments.length<=2,"fromPromise expects up to two arguments"),kl(typeof t=="function"||typeof t=="object"&&t&&typeof t.then=="function","Please pass a promise or function to fromPromise"),t.isPromiseBasedObservable===!0)return t;typeof t=="function"&&(t=new Promise(t));var n=t;t.then(F("observableFromPromise-resolve",function(i){n.value=i,n.state=Bl}),F("observableFromPromise-reject",function(i){n.value=i,n.state=Kc})),n.isPromiseBasedObservable=!0,n.case=w3;var r=e&&e.state===Bl?e.value:void 0;return ju(n,{value:r,state:Am},{},{deep:!1}),n}(function(t){t.reject=F("fromPromise.reject",function(n){var r=t(Promise.reject(n));return r.state=Kc,r.value=n,r});function e(n){n===void 0&&(n=void 0);var r=t(Promise.resolve(n));return r.state=Bl,r.value=n,r}t.resolve=F("fromPromise.resolve",e)})(Cm||(Cm={}));var Fl=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o};(function(){function t(e,n){var r=this;K0(function(){r.current=n,r.subscription=e.subscribe(r)})}return t.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.next=function(e){this.current=e},t.prototype.complete=function(){this.dispose()},t.prototype.error=function(e){this.current=e,this.dispose()},Fl([$.ref],t.prototype,"current",void 0),Fl([F.bound],t.prototype,"next",null),Fl([F.bound],t.prototype,"complete",null),Fl([F.bound],t.prototype,"error",null),t})();var $l=function(){return $l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$l.apply(this,arguments)},ja=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},S3=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function t(e){var n=this;this.model=e,this.localValues=$.map({}),this.localComputedValues=$.map({}),this.isPropertyDirty=function(r){return n.localValues.has(r)},kl(or(e),"createViewModel expects an observable object"),E3(e).forEach(function(r){if(!(r===Me||r==="__mobxDidRunLazyInitializers")){if(kl(S3.indexOf(r)===-1,"The propertyname "+r+" is reserved and cannot be used with viewModels"),hh(e,r)){var i=bs(e,r).derivation;n.localComputedValues.set(r,gt(i.bind(n)))}var o=Object.getOwnPropertyDescriptor(e,r),a=o?{enumerable:o.enumerable}:{};Object.defineProperty(n,r,$l($l({},a),{configurable:!0,get:function(){return hh(e,r)?n.localComputedValues.get(r).get():n.isPropertyDirty(r)?n.localValues.get(r):n.model[r]},set:F(function(s){s!==n.model[r]?n.localValues.set(r,s):n.localValues.delete(r)})}))}})}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),t.prototype.submit=function(){var e=this;ro(this.localValues).forEach(function(n){var r=e.localValues.get(n),i=e.model[n];br(i)?i.replace(r):nn(i)?(i.clear(),i.merge(r)):dh(r)||(e.model[n]=r)}),this.localValues.clear()},t.prototype.reset=function(){this.localValues.clear()},t.prototype.resetProperty=function(e){this.localValues.delete(e)},ja([gt],t.prototype,"isDirty",null),ja([gt],t.prototype,"changedValues",null),ja([F.bound],t.prototype,"submit",null),ja([F.bound],t.prototype,"reset",null),ja([F.bound],t.prototype,"resetProperty",null),t})();function qc(t){if(!t)return"ROOT";for(var e=[];t.parent;)e.push(t.path),t=t.parent;return e.reverse().join("/")}function Zc(t){return or(t)||br(t)||nn(t)}function O3(t,e){var n=new WeakMap;function r(s){var l=n.get(s.object);i(s,l),e(s,qc(l),t)}function i(s,l){switch(s.type){case"add":o(s.newValue,l,s.name);break;case"update":a(s.oldValue),o(s.newValue,l,s.name||""+s.index);break;case"remove":case"delete":a(s.oldValue);break;case"splice":s.removed.map(a),s.added.forEach(function(c,d){return o(c,l,""+(s.index+d))});for(var u=s.index+s.addedCount;u<s.object.length;u++)if(Zc(s.object[u])){var f=n.get(s.object[u]);f&&(f.path=""+u)}break}}function o(s,l,u){if(Zc(s)){var f=n.get(s);if(f){if(f.parent!==l||f.path!==u)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+qc(l)+"/"+u+"',")+(" but it already exists at '"+qc(f.parent)+"/"+f.path+"'"))}else{var c={parent:l,path:u,dispose:ph(s,r)};n.set(s,c),ob(s).forEach(function(d){var h=d[0],v=d[1];return o(v,c,h)})}}}function a(s){if(Zc(s)){var l=n.get(s);if(!l)return;n.delete(s),l.dispose(),ib(s).forEach(a)}}return o(t,void 0,""),function(){a(t)}}var A3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){A3(e,t);function e(n,r,i){var o=i===void 0?{}:i,a=o.name,s=a===void 0?"ogm"+(Math.random()*1e3|0):a,l=o.keyToName,u=l===void 0?function(d){return""+d}:l,f=t.call(this)||this;f._keyToName=u,f._groupBy=r,f._ogmInfoKey=Symbol("ogmInfo"+s),f._base=n;for(var c=0;c<n.length;c++)f._addItem(n[c]);return f._disposeBaseObserver=ph(f._base,function(d){if(d.type==="splice")nr(function(){for(var h=0,v=d.removed;h<v.length;h++){var p=v[h];f._removeItem(p)}for(var g=0,y=d.added;g<y.length;g++){var m=y[g];f._addItem(m)}});else if(d.type==="update")nr(function(){f._removeItem(d.oldValue),f._addItem(d.newValue)});else throw new Error("illegal state")}),f}return e.prototype.clear=function(){throw new Error("not supported")},e.prototype.delete=function(n){throw new Error("not supported")},e.prototype.set=function(n,r){throw new Error("not supported")},e.prototype.dispose=function(){this._disposeBaseObserver();for(var n=0;n<this._base.length;n++){var r=this._base[n],i=r[this._ogmInfoKey];i.reaction(),delete r[this._ogmInfoKey]}},e.prototype._getGroupArr=function(n){var r=t.prototype.get.call(this,n);return r===void 0&&(r=$([],{name:"GroupArray["+this._keyToName(n)+"]",deep:!1}),t.prototype.set.call(this,n,r)),r},e.prototype._removeFromGroupArr=function(n,r){var i=t.prototype.get.call(this,n);i.length===1?t.prototype.delete.call(this,n):(r===i.length-1||(i[r]=i[i.length-1],i[r][this._ogmInfoKey].groupArrIndex=r),i.length--)},e.prototype._addItem=function(n){var r=this,i=this._groupBy(n),o=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:o.length,reaction:oh(function(){return r._groupBy(n)},function(s,l){var u=n[r._ogmInfoKey];r._removeFromGroupArr(u.groupByValue,u.groupArrIndex);var f=r._getGroupArr(s),c=f.length;f.push(n),u.groupByValue=s,u.groupArrIndex=c})};Object.defineProperty(n,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),o.push(n)},e.prototype._removeItem=function(n){var r=n[this._ogmInfoKey];this._removeFromGroupArr(r.groupByValue,r.groupArrIndex),r.reaction(),delete n[this._ogmInfoKey]},e})(Bu),Promise.resolve(),typeof queueMicrotask<"u"||typeof process<"u"&&process.nextTick;var Jc=function(){return Jc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jc.apply(this,arguments)},C3=function(){function t(e){this.undos=[],this.redos=[],this.callbacks=[],this.stopWatch=null,this.curData=null,this.maxSize=50,this.waitTime=100,this.eventCenter=e}return t.prototype.add=function(e){$f(Nn(this.undos),e)||(this.undos.push(e),$f(this.curData,e)||(this.redos=[]),this.eventCenter.emit(de.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undoAble(),redoAble:this.redoAble()}}),this.undos.length>this.maxSize&&this.undos.shift())},t.prototype.undoAble=function(){return this.undos.length>1},t.prototype.undo=function(){if(this.undoAble()){var e=this.undos.pop();this.redos.push(e);var n=this.undos.pop();return this.curData=Fe(n),n}},t.prototype.redoAble=function(){return this.redos.length>0},t.prototype.redo=function(){if(this.redoAble()){var e=this.redos.pop();return this.curData=Fe(e),e}},t.prototype.watch=function(e){var n=this;this.stopWatch&&this.stopWatch(),this.undos.push(e.modelToGraphData()),this.stopWatch=O3(e,Xs(function(){var r=e.modelToHistoryData();r&&n.add(Jc({},r))},this.waitTime))},t.prototype.destroy=function(){this.undos=[],this.redos=[],this.curData=null,this.stopWatch&&this.stopWatch()},t}(),Qc={exports:{}},Tm;function T3(){return Tm||(Tm=1,function(t){(function(e,n,r){if(!e)return;for(var i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l,u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();function f(S,I,X){if(S.addEventListener){S.addEventListener(I,X,!1);return}S.attachEvent("on"+I,X)}function c(S){if(S.type=="keypress"){var I=String.fromCharCode(S.which);return S.shiftKey||(I=I.toLowerCase()),I}return i[S.which]?i[S.which]:o[S.which]?o[S.which]:String.fromCharCode(S.which).toLowerCase()}function d(S,I){return S.sort().join(",")===I.sort().join(",")}function h(S){var I=[];return S.shiftKey&&I.push("shift"),S.altKey&&I.push("alt"),S.ctrlKey&&I.push("ctrl"),S.metaKey&&I.push("meta"),I}function v(S){if(S.preventDefault){S.preventDefault();return}S.returnValue=!1}function p(S){if(S.stopPropagation){S.stopPropagation();return}S.cancelBubble=!0}function g(S){return S=="shift"||S=="ctrl"||S=="alt"||S=="meta"}function y(){if(!l){l={};for(var S in i)S>95&&S<112||i.hasOwnProperty(S)&&(l[i[S]]=S)}return l}function m(S,I,X){return X||(X=y()[S]?"keydown":"keypress"),X=="keypress"&&I.length&&(X="keydown"),X}function A(S){return S==="+"?["+"]:(S=S.replace(/\+{2}/g,"+plus"),S.split("+"))}function T(S,I){var X,Q,ue,he=[];for(X=A(S),ue=0;ue<X.length;++ue)Q=X[ue],s[Q]&&(Q=s[Q]),I&&I!="keypress"&&a[Q]&&(Q=a[Q],he.push("shift")),g(Q)&&he.push(Q);return I=m(Q,he,I),{key:Q,modifiers:he,action:I}}function k(S,I){return S===null||S===n?!1:S===I?!0:k(S.parentNode,I)}function C(S){var I=this;if(S=S||n,!(I instanceof C))return new C(S);I.target=S,I._callbacks={},I._directMap={};var X={},Q,ue=!1,he=!1,w=!1;function D(me){me=me||{};var ke=!1,ze;for(ze in X){if(me[ze]){ke=!0;continue}X[ze]=0}ke||(w=!1)}function R(me,ke,ze,Ne,Xe,M){var W,G,ee=[],re=ze.type;if(!I._callbacks[me])return[];for(re=="keyup"&&g(me)&&(ke=[me]),W=0;W<I._callbacks[me].length;++W)if(G=I._callbacks[me][W],!(!Ne&&G.seq&&X[G.seq]!=G.level)&&re==G.action&&(re=="keypress"&&!ze.metaKey&&!ze.ctrlKey||d(ke,G.modifiers))){var ge=!Ne&&G.combo==Xe,Se=Ne&&G.seq==Ne&&G.level==M;(ge||Se)&&I._callbacks[me].splice(W,1),ee.push(G)}return ee}function K(me,ke,ze,Ne){I.stopCallback(ke,ke.target||ke.srcElement,ze,Ne)||me(ke,ze)===!1&&(v(ke),p(ke))}I._handleKey=function(me,ke,ze){var Ne=R(me,ke,ze),Xe,M={},W=0,G=!1;for(Xe=0;Xe<Ne.length;++Xe)Ne[Xe].seq&&(W=Math.max(W,Ne[Xe].level));for(Xe=0;Xe<Ne.length;++Xe){if(Ne[Xe].seq){if(Ne[Xe].level!=W)continue;G=!0,M[Ne[Xe].seq]=1,K(Ne[Xe].callback,ze,Ne[Xe].combo,Ne[Xe].seq);continue}G||K(Ne[Xe].callback,ze,Ne[Xe].combo)}var ee=ze.type=="keypress"&&he;ze.type==w&&!g(me)&&!ee&&D(M),he=G&&ze.type=="keydown"};function ye(me){typeof me.which!="number"&&(me.which=me.keyCode);var ke=c(me);if(ke){if(me.type=="keyup"&&ue===ke){ue=!1;return}I.handleKey(ke,h(me),me)}}function Oe(){clearTimeout(Q),Q=setTimeout(D,1e3)}function rt(me,ke,ze,Ne){X[me]=0;function Xe(re){return function(){w=re,++X[me],Oe()}}function M(re){K(ze,re,me),Ne!=="keyup"&&(ue=c(re)),setTimeout(D,10)}for(var W=0;W<ke.length;++W){var G=W+1===ke.length,ee=G?M:Xe(Ne||T(ke[W+1]).action);it(ke[W],ee,Ne,me,W)}}function it(me,ke,ze,Ne,Xe){I._directMap[me+":"+ze]=ke,me=me.replace(/\s+/g," ");var M=me.split(" "),W;if(M.length>1){rt(me,M,ke,ze);return}W=T(me,ze),I._callbacks[W.key]=I._callbacks[W.key]||[],R(W.key,W.modifiers,{type:W.action},Ne,me,Xe),I._callbacks[W.key][Ne?"unshift":"push"]({callback:ke,modifiers:W.modifiers,action:W.action,seq:Ne,level:Xe,combo:me})}I._bindMultiple=function(me,ke,ze){for(var Ne=0;Ne<me.length;++Ne)it(me[Ne],ke,ze)},f(S,"keypress",ye),f(S,"keydown",ye),f(S,"keyup",ye)}C.prototype.bind=function(S,I,X){var Q=this;return S=S instanceof Array?S:[S],Q._bindMultiple.call(Q,S,I,X),Q},C.prototype.unbind=function(S,I){var X=this;return X.bind.call(X,S,function(){},I)},C.prototype.trigger=function(S,I){var X=this;return X._directMap[S+":"+I]&&X._directMap[S+":"+I]({},S),X},C.prototype.reset=function(){var S=this;return S._callbacks={},S._directMap={},S},C.prototype.stopCallback=function(S,I){var X=this;if((" "+I.className+" ").indexOf(" mousetrap ")>-1||k(I,X.target))return!1;if("composedPath"in S&&typeof S.composedPath=="function"){var Q=S.composedPath()[0];Q!==S.target&&(I=Q)}return I.tagName=="INPUT"||I.tagName=="SELECT"||I.tagName=="TEXTAREA"||I.isContentEditable},C.prototype.handleKey=function(){var S=this;return S._handleKey.apply(S,arguments)},C.addKeycodes=function(S){for(var I in S)S.hasOwnProperty(I)&&(i[I]=S[I]);l=null},C.init=function(){var S=C(n);for(var I in S)I.charAt(0)!=="_"&&(C[I]=function(X){return function(){return S[X].apply(S,arguments)}}(I))},C.init(),e.Mousetrap=C,t.exports&&(t.exports=C)})(typeof window<"u"?window:null,typeof window<"u"?document:null)}(Qc)),Qc.exports}var N3=T3();const M3=Ml(N3);var Nm=function(){return Nm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Nm.apply(this,arguments)},Mr=null;function Mm(t,e){return t.x+=e,t.y+=e,Ff(t.text)||(t.text.x+=e,t.text.y+=e),t}function Pm(t,e){return t.startPoint&&(t.startPoint.x+=e,t.startPoint.y+=e),t.endPoint&&(t.endPoint.x+=e,t.endPoint.y+=e),t.pointsList&&t.pointsList.length>0&&t.pointsList.forEach(function(n){n.x+=e,n.y+=e}),Ff(t.text)||(t.text.x+=e,t.text.y+=e),t}var Lo=40,Hl=40;function P3(t,e){var n=t.keyboard,r=n.options.keyboard;n.on(["cmd + c","ctrl + c"],function(){if(Hl=Lo,!(r!=null&&r.enabled)||e.textEditElement)return!0;var i=t.options.guards,o=e.getSelectElements(!1),a=i&&i.beforeClone?i.beforeClone(o):!0;return!a||o.nodes.length===0&&o.edges.length===0?(Mr=null,!0):(Mr=o,Mr.nodes.forEach(function(s){return Mm(s,Lo)}),Mr.edges.forEach(function(s){return Pm(s,Lo)}),!1)}),n.on(["cmd + v","ctrl + v"],function(){if(!(r!=null&&r.enabled)||e.textEditElement)return!0;if(Mr&&(Mr.nodes||Mr.edges)){t.clearSelectElements();var i=t.addElements(Mr,Hl);if(!i)return!0;i.nodes.forEach(function(o){return t.selectElementById(o.id,!0)}),i.edges.forEach(function(o){return t.selectElementById(o.id,!0)}),Mr.nodes.forEach(function(o){return Mm(o,Lo)}),Mr.edges.forEach(function(o){return Pm(o,Lo)}),Hl=Hl+Lo}return!1}),n.on(["cmd + z","ctrl + z"],function(){return!(r!=null&&r.enabled)||e.textEditElement?!0:(t.undo(),!1)}),n.on(["cmd + y","ctrl + y"],function(){return!(r!=null&&r.enabled)||e.textEditElement?!0:(t.redo(),!1)}),n.on(["backspace"],function(){if(!(r!=null&&r.enabled)||e.textEditElement)return!0;var i=e.getSelectElements(!0);return t.clearSelectElements(),i.edges.forEach(function(o){return o.id&&t.deleteEdge(o.id)}),i.nodes.forEach(function(o){return o.id&&t.deleteNode(o.id)}),!1})}var D3=function(){function t(e){e.keyboard||(e.keyboard={enabled:!1}),this.options=e;var n=e.lf;this.target=n.container,this.mousetrap=new M3(this.target),e.keyboard.enabled&&!n.options.isSilentMode&&this.enable(!0)}return t.prototype.initShortcuts=function(){var e=this,n,r=((n=this.options.keyboard)!==null&&n!==void 0?n:{}).shortcuts;if(r)if(Le(r))r.forEach(function(s){var l=s.keys,u=s.callback,f=s.action;return e.on(l,u,f)});else{var i=r.keys,o=r.callback,a=r.action;this.on(i,o,a)}},t.prototype.on=function(e,n,r){this.mousetrap.bind(this.getKeys(e),n,r)},Object.defineProperty(t.prototype,"disabled",{get:function(){var e,n;return((n=(e=this.options)===null||e===void 0?void 0:e.keyboard)===null||n===void 0?void 0:n.enabled)!==!0},enumerable:!1,configurable:!0}),t.prototype.off=function(e,n){this.mousetrap.unbind(this.getKeys(e),n)},t.prototype.enable=function(e){(this.disabled||e)&&(this.options.keyboard&&(this.options.keyboard.enabled=!0),this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))},t.prototype.disable=function(){this.disabled||(this.options.keyboard&&(this.options.keyboard.enabled=!1),this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},t.prototype.destroy=function(){this.mousetrap.reset()},t.prototype.getKeys=function(e){var n=this;return(Array.isArray(e)?e:[e]).map(function(r){return n.formatKey(r)})},t.prototype.formatKey=function(e){return e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")},t}(),gi=function(){return gi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gi.apply(this,arguments)},Wl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},ed=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},td=Symbol("plugin registered by Logicflow.use"),nd=function(){function t(e){var n=this,r;this.viewMap=new Map,this.components=[],this.extension={},this.setView=function(u,f){return n.viewMap.set(u,f)},this.getView=function(u){return n.viewMap.get(u)};var i=pa.get(e),o=i.container,a=i.width,s=i.height;this.options=i,this.container=this.initContainer(o,a,s),this.graphModel=new bI(gi(gi({},i),{container:this.container})),this.plugins=(r=i.plugins)!==null&&r!==void 0?r:[];var l=this.graphModel.eventCenter;this.tool=new _3(this),this.dnd=new l3({lf:this}),this.history=new C3(l),this.keyboard=new D3({lf:this,keyboard:i.keyboard}),i.snapline!==!1&&(this.snaplineModel=new xI(this.graphModel),u3(l,this.snaplineModel)),i.isSilentMode||(P3(this,this.graphModel),this.keyboard.initShortcuts()),this.defaultRegister(),this.installPlugins(i.disabledPlugins)}return t.prototype.initContainer=function(e,n,r){var i=document.createElement("div");return i.style.position="relative",i.style.width=n?"".concat(n,"px"):"100%",i.style.height=r?"".concat(r,"px"):"100%",e.innerHTML="",e.appendChild(i),i},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return t.toStringTag},enumerable:!1,configurable:!0}),t.prototype.register=function(e,n,r){if(r===void 0&&(r=!0),typeof e!="string"){this.registerElement(e);return}var i={BaseEdge:jl,BaseEdgeModel:El,BaseNode:vi,BaseNodeModel:ci,RectNode:pr,RectNodeModel:Cr,CircleNode:Po,CircleNodeModel:To,PolygonNode:Il,PolygonNodeModel:Cl,TextNode:xm,TextNodeModel:gm,LineEdge:Sm,LineEdgeModel:dm,DiamondNode:Fc,DiamondNodeModel:Tc,PolylineEdge:Do,PolylineEdgeModel:Co,BezierEdge:wm,BezierEdgeModel:fm,EllipseNode:Hc,EllipseNodeModel:Nc,HtmlNode:zc,HtmlNodeModel:Mc,h:ae,type:e};if(this.viewMap.forEach(function(u){var f=u.extendKey;f&&(i[f]=u)}),this.graphModel.modelMap.forEach(function(u){var f=u.extendKey;f&&(i[f]=u)}),n){var o=n(i),a=o.view,s=o.model,l=a;r&&!l.isObserved&&(l.isObserved=!0,l=sn(l)),this.setView(e,l),this.graphModel.setModel(e,s)}},t.prototype.registerElement=function(e){var n=e.view;e.isObserverView!==!1&&!n.isObserved&&(n.isObserved=!0,n=sn(n)),this.setView(e.type,n),this.graphModel.setModel(e.type,e.model)},t.prototype.batchRegister=function(e){var n=this;e===void 0&&(e=[]),at(e,function(r){n.registerElement(r)})},t.prototype.defaultRegister=function(){var e=[{type:"rect",view:pr,model:Cr},{type:"circle",view:Po,model:To},{type:"polygon",view:Il,model:Cl},{type:"text",view:xm,model:gm},{type:"ellipse",view:Hc,model:Nc},{type:"diamond",view:Fc,model:Tc},{type:"html",view:zc,model:Mc},{type:"line",view:Sm,model:dm},{type:"polyline",view:Do,model:Co},{type:"bezier",view:wm,model:fm}];this.batchRegister(e)},t.prototype.addNode=function(e,n,r){return n===void 0&&(n=de.NODE_ADD),this.graphModel.addNode(e,n,r)},t.prototype.deleteNode=function(e){var n=this.graphModel.getNodeModelById(e);if(!n)return!1;var r=n.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(r):!0;return o&&this.graphModel.deleteNode(e),o},t.prototype.cloneNode=function(e){var n=this.graphModel.getNodeModelById(e),r=n==null?void 0:n.getData();if(r){var i=this.options.guards,o=i!=null&&i.beforeClone?i.beforeClone(r):!0;if(o)return this.graphModel.cloneNode(e)}},t.prototype.changeNodeId=function(e,n){return this.graphModel.changeNodeId(e,n)},t.prototype.changeNodeType=function(e,n){this.graphModel.changeNodeType(e,n)},t.prototype.getNodeModelById=function(e){return this.graphModel.getNodeModelById(e)},t.prototype.getNodeDataById=function(e){var n=this.getNodeModelById(e);return n==null?void 0:n.getData()},t.prototype.getNodeIncomingEdge=function(e){return this.graphModel.getNodeIncomingEdge(e)},t.prototype.getNodeOutgoingEdge=function(e){return this.graphModel.getNodeOutgoingEdge(e)},t.prototype.getNodeIncomingNode=function(e){return this.graphModel.getNodeIncomingNode(e)},t.prototype.getNodeOutgoingNode=function(e){return this.graphModel.getNodeOutgoingNode(e)},t.prototype.createFakeNode=function(e){var n=this.graphModel.modelMap.get(e.type);if(!n)return console.warn("".concat(e.type,"")),null;var r=new n(gi(gi({},e),{virtual:!0}),this.graphModel);return this.graphModel.setFakeNode(r),r},t.prototype.removeFakeNode=function(){this.graphModel.removeFakeNode()},t.prototype.setNodeSnapLine=function(e){var n;(n=this.snaplineModel)===null||n===void 0||n.setNodeSnapLine(e)},t.prototype.removeNodeSnapLine=function(){var e;(e=this.snaplineModel)===null||e===void 0||e.clearSnapline()},t.prototype.setDefaultEdgeType=function(e){this.graphModel.setDefaultEdgeType(e)},t.prototype.addEdge=function(e){return this.graphModel.addEdge(e)},t.prototype.getEdgeDataById=function(e){var n=this.getEdgeModelById(e);return n==null?void 0:n.getData()},t.prototype.getEdgeModelById=function(e){return this.graphModel.getEdgeModelById(e)},t.prototype.getEdgeModels=function(e){var n=e.sourceNodeId,r=e.targetNodeId,i=[],o=this.graphModel.edges;return n&&r?at(o,function(a){a.sourceNodeId===n&&a.targetNodeId===r&&i.push(a)}):n?at(o,function(a){a.sourceNodeId===n&&i.push(a)}):r&&at(o,function(a){a.targetNodeId===r&&i.push(a)}),i},t.prototype.changeEdgeId=function(e,n){return this.graphModel.changeEdgeId(e,n)},t.prototype.changeEdgeType=function(e,n){this.graphModel.changeEdgeType(e,n)},t.prototype.deleteEdge=function(e){var n=this.graphModel.getEdgeModelById(e);if(!n)return!1;var r=n.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(r):!0;return o&&this.graphModel.deleteEdgeById(e),o},t.prototype.deleteEdgeByNodeId=function(e){var n=e.sourceNodeId,r=e.targetNodeId;n&&r?this.graphModel.deleteEdgeBySourceAndTarget(n,r):n?this.graphModel.deleteEdgeBySource(n):r&&this.graphModel.deleteEdgeByTarget(r)},t.prototype.getNodeEdges=function(e){return this.graphModel.getNodeEdges(e)},t.prototype.addElements=function(e,n){var r=this,i=e.nodes,o=e.edges;n===void 0&&(n=40),console.log("distance",n);var a={},s={nodes:[],edges:[]};return at(i,function(l){var u=l.id,f=r.addNode(l);u&&(a[u]=f.id),s.nodes.push(f)}),at(o,function(l){var u=l.sourceNodeId,f=l.targetNodeId;a[u]&&(u=a[u]),a[f]&&(f=a[f]);var c=r.graphModel.addEdge(gi(gi({},l),{sourceNodeId:u,targetNodeId:f}));s.edges.push(c)}),s},t.prototype.selectElementById=function(e,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),this.graphModel.selectElementById(e,n),!n&&r&&this.graphModel.toFront(e)},t.prototype.getSelectElements=function(e){return e===void 0&&(e=!0),this.graphModel.getSelectElements(e)},t.prototype.clearSelectElements=function(){this.graphModel.clearSelectElements()},t.prototype.getModelById=function(e){return this.graphModel.getElement(e)},t.prototype.getDataById=function(e){var n;return(n=this.graphModel.getElement(e))===null||n===void 0?void 0:n.getData()},t.prototype.deleteElement=function(e){var n,r,i,o=this.getModelById(e);if(!o)return!1;var a=(n={},n[Ct.NODE]=this.deleteNode,n[Ct.EDGE]=this.deleteEdge,n);return(i=(r=a[o.BaseType])===null||r===void 0?void 0:r.call(this,e))!==null&&i!==void 0?i:!1},t.prototype.setElementZIndex=function(e,n){return this.graphModel.setElementZIndex(e,n)},t.prototype.getAreaElement=function(e,n,r,i,o){return r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!1),this.graphModel.getAreaElement(e,n,r,i,o).map(function(a){return a.getData()})},t.prototype.setProperties=function(e,n){var r;(r=this.graphModel.getElement(e))===null||r===void 0||r.setProperties(Jt(n))},t.prototype.getProperties=function(e){var n;return(n=this.graphModel.getElement(e))===null||n===void 0?void 0:n.getProperties()},t.prototype.deleteProperty=function(e,n){var r;(r=this.graphModel.getElement(e))===null||r===void 0||r.deleteProperty(n)},t.prototype.updateAttributes=function(e,n){this.graphModel.updateAttributes(e,n)},t.prototype.editText=function(e){this.graphModel.editText(e)},t.prototype.updateText=function(e,n){this.graphModel.updateText(e,n)},t.prototype.updateEditConfig=function(e){var n=this.graphModel,r=n.editConfigModel,i=n.transformModel,o=r.snapGrid;if(r.updateEditConfig(e),(e==null?void 0:e.stopMoveGraph)!==void 0&&i.updateTranslateLimits(e.stopMoveGraph),e!=null&&e.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0),!Wn(e==null?void 0:e.snapGrid)&&e.snapGrid!==o){var a=this.graphModel.grid.size,s=a===void 0?1:a;this.graphModel.updateGridSize(e.snapGrid?s:1)}},t.prototype.getEditConfig=function(){return this.graphModel.editConfigModel.getConfig()},t.prototype.setTheme=function(e){this.graphModel.setTheme(e)},t.prototype.focusByElement=function(e){var n=void 0,r=this.getNodeModelById(e);if(r){var i=r.getData(),o=i.x,a=i.y;n={x:o,y:a}}var s=this.getEdgeModelById(e);if(s){var l=s.textPosition,o=l.x,a=l.y;n={x:o,y:a}}n&&this.focusByCoordinate(n)},t.prototype.focusByCoordinate=function(e){var n=this.graphModel,r=n.transformModel,i=n.width,o=n.height,a=e.x,s=e.y;r.focusOn(a,s,i,o)},t.prototype.focusOn=function(e){if(typeof e=="string")this.focusByElement(e);else if("x"in e&&"y"in e)this.focusByCoordinate(e);else{var n=e.id,r=e.coordinate;n&&this.focusByElement(n),r&&this.focusByCoordinate(r)}},t.prototype.resize=function(e,n){this.graphModel.resize(e,n),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height},t.prototype.toFront=function(e){this.graphModel.toFront(e)},t.prototype.getPointByClient=function(e,n){if(typeof e=="object")return this.graphModel.getPointByClient(e);if(typeof n=="number")return this.graphModel.getPointByClient({x:e,y:n})},t.prototype.getGraphData=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.getGraphRawData();return this.adapterOut?this.adapterOut.apply(this,ed([r],Wl(e),!1)):r},t.prototype.getGraphRawData=function(){return this.graphModel.modelToGraphData()},t.prototype.clearData=function(){this.graphModel.clearData(),this.render({})},t.prototype.renderRawData=function(e){this.graphModel.graphDataToModel(Jt(e)),this.options.history!==!1&&this.history.watch(this.graphModel),np(B(TI,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(de.GRAPH_RENDERED,{data:this.graphModel.modelToGraphData(),graphModel:this.graphModel})},t.prototype.render=function(e){var n=Fe(e);this.adapterIn&&(n=this.adapterIn(n)),this.renderRawData(n)},t.prototype.undo=function(){if(this.history.undoAble()){var e=Jt(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(e)}},t.prototype.redo=function(){if(this.history.redoAble()){var e=Jt(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(e)}},t.prototype.zoom=function(e,n){var r=this.graphModel.transformModel;return r.zoom(e,n)},t.prototype.resetZoom=function(){var e=this.graphModel.transformModel;e.resetZoom()},t.prototype.setZoomMiniSize=function(e){var n=this.graphModel.transformModel;n.setZoomMiniSize(e)},t.prototype.setZoomMaxSize=function(e){var n=this.graphModel.transformModel;n.setZoomMaxSize(e)},t.prototype.getTransform=function(){var e=this.graphModel.transformModel,n=e.SCALE_X,r=e.SCALE_Y,i=e.TRANSLATE_X,o=e.TRANSLATE_Y;return{SCALE_X:n,SCALE_Y:r,TRANSLATE_X:i,TRANSLATE_Y:o}},t.prototype.translate=function(e,n){var r=this.graphModel.transformModel;r.translate(e,n)},t.prototype.resetTranslate=function(){var e=this.graphModel.transformModel,n=e.TRANSLATE_X,r=e.TRANSLATE_Y;this.translate(-n,-r)},t.prototype.translateCenter=function(){this.graphModel.translateCenter()},t.prototype.fitView=function(e,n){n===void 0&&(n=e),this.graphModel.fitView(e,n)},t.prototype.openEdgeAnimation=function(e){this.graphModel.openEdgeAnimation(e)},t.prototype.closeEdgeAnimation=function(e){this.graphModel.closeEdgeAnimation(e)},t.prototype.on=function(e,n){this.graphModel.eventCenter.on(e,n)},t.prototype.off=function(e,n){this.graphModel.eventCenter.off(e,n)},t.prototype.once=function(e,n){this.graphModel.eventCenter.once(e,n)},t.prototype.emit=function(e,n){this.graphModel.eventCenter.emit(e,n)},t.use=function(e,n){var r,i=e.pluginName;if(!i)throw new Error(" pluginName!");this.extensions.set(i,(r={},r[td]=td,r.extension=e,r.props=n,r))},t.prototype.installPlugins=function(e){var n=this;e===void 0&&(e=[]);var r=Array.from(t.extensions,function(o){var a=Wl(o,2),s=a[1];return s}),i=ed(ed([],Wl(this.plugins),!1),Wl(r),!1);at(i,function(o){var a,s;td in o?(a=o.extension,s=o.props):a=o;var l=a==null?void 0:a.pluginName;Ig(e,l)===-1&&n.installPlugin(a,s)})},t.prototype.installPlugin=function(e,n){var r,i;if("pluginName"in e&&"install"in e){var o=e.pluginName,a=e.install,s=e.render;o&&(a&&a.call(e,this,t),s&&this.components.push(s.bind(e)),this.extension[o]=e);return}var l=e,u=l.pluginName,f=new l({lf:this,LogicFlow:t,props:n,options:(i=(r=this.options.pluginsOptions)===null||r===void 0?void 0:r[u])!==null&&i!==void 0?i:{}});f.render&&this.components.push(f.render.bind(f)),this.extension[u]=f},t.prototype.destroy=function(){this.clearData(),np(null,this.container),this.keyboard.destroy(),this.graphModel.destroy(),this.tool.destroy(),this.history.destroy()},t.extensions=new Map,t}();(function(t){t.toStringTag="LF.".concat(t.name)})(nd||(nd={}));const ka=nd;function sn(t){return Wu(t)}const R3={type:"custom-rect",view:class extends pr{},model:class extends Cr{},label:"",text:"",icon:"/bpmn-icon/start-event.svg"},L3={type:"bpmn:dataImportTask",view:class extends pr{getLabelShape(){const{model:e}=this.props,{x:n,y:r,width:i,height:o}=e,a=e.getNodeStyle();return ae("svg",{x:n-i/2+5,y:r-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},ae("path",{fill:a.stroke,d:"M975.657143 96.914286l-48.457143-48.457143c-1.828571-1.828571-4.114286-2.628571-6.514286-2.628572s-4.685714 0.914286-6.514285 2.628572l-86.971429 86.971428a227.737143 227.737143 0 0 0-128.114286-39.2c-58.514286 0-117.028571 22.285714-161.714285 66.971429L420.914286 279.657143a9.177143 9.177143 0 0 0 0 12.914286L731.428571 603.085714c1.828571 1.828571 4.114286 2.628571 6.514286 2.628572 2.285714 0 4.685714-0.914286 6.514286-2.628572l116.457143-116.457143c78.742857-78.857143 88-200.8 27.771428-289.714285l86.971429-86.971429c3.542857-3.657143 3.542857-9.485714 0-13.028571zM805.828571 431.657143l-67.885714 67.885714-213.485714-213.485714 67.885714-67.885714c28.457143-28.457143 66.4-44.228571 106.742857-44.228572 40.342857 0 78.171429 15.657143 106.742857 44.228572 28.457143 28.457143 44.228571 66.4 44.228572 106.742857 0 40.342857-15.771429 78.171429-44.228572 106.742857z m-217.371428 120a9.177143 9.177143 0 0 0-12.914286 0L499.428571 627.771429 396.228571 524.571429l76.228572-76.228572c3.542857-3.542857 3.542857-9.371429 0-12.914286L430.857143 393.828571a9.177143 9.177143 0 0 0-12.914286 0L341.714286 470.057143l-49.142857-49.142857a8.971429 8.971429 0 0 0-6.514286-2.628572c-2.285714 0-4.685714 0.914286-6.514286 2.628572L163.2 537.371429c-78.742857 78.857143-88 200.8-27.771429 289.714285l-86.971428 86.971429a9.177143 9.177143 0 0 0 0 12.914286l48.457143 48.457142c1.828571 1.828571 4.114286 2.628571 6.514285 2.628572s4.685714-0.914286 6.514286-2.628572l86.971429-86.971428c38.514286 26.171429 83.314286 39.2 128.114285 39.2 58.514286 0 117.028571-22.285714 161.714286-66.971429l116.457143-116.457143c3.542857-3.542857 3.542857-9.371429 0-12.914285l-49.142857-49.142857 76.228571-76.228572c3.542857-3.542857 3.542857-9.371429 0-12.914286l-41.828571-41.371428zM431.657143 805.828571a150.08 150.08 0 0 1-106.742857 44.228572c-40.342857 0-78.171429-15.657143-106.742857-44.228572a150.08 150.08 0 0 1-44.228572-106.742857c0-40.342857 15.657143-78.171429 44.228572-106.742857l67.885714-67.885714 213.485714 213.485714-67.885714 67.885714z"}))}getShape(){const{model:e}=this.props,{x:n,y:r,width:i,height:o,radius:a}=e,s=e.getNodeStyle();return ae("g",{},[ae("rect",{...s,x:n-i/2,y:r-o/2,width:i,height:o,rx:a,ry:a}),this.getLabelShape()])}},model:class extends Cr{getNodeStyle(){return super.getNodeStyle()}},label:"",text:"",icon:"/node-icon/importer.svg"},I3={type:"bpmn:dataSoruceTask",view:class extends pr{getLabelShape(){const{model:e}=this.props,{x:n,y:r,width:i,height:o}=e,a=e.getNodeStyle();return ae("svg",{x:n-i/2+5,y:r-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},ae("path",{fill:a.stroke,d:"M519.68 1016.32a26.88 26.88 0 0 1-15.36-4.48l-407.68-235.52a30.08 30.08 0 0 1-16-26.88V278.4a30.08 30.08 0 0 1 16-26.88L504.32 16a30.72 30.72 0 0 1 31.36 0l407.68 235.52a30.72 30.72 0 0 1 15.36 26.88v471.04a30.72 30.72 0 0 1-15.36 26.88l-407.68 235.52a28.8 28.8 0 0 1-16 4.48z m-375.68-285.44l375.68 217.6 376.32-217.6V296.96L519.68 80 144 296.96z M519.68 540.8a28.16 28.16 0 0 1-15.36-4.48l-407.68-230.4a31.36 31.36 0 0 1-12.16-42.88 32.64 32.64 0 0 1 43.52-12.16l407.04 231.04a31.36 31.36 0 0 1-15.36 58.88z M512 545.28a31.36 31.36 0 0 1-15.36-58.88L901.12 256a31.36 31.36 0 0 1 42.88 12.16 32 32 0 0 1-12.16 42.88l-407.68 230.4a32 32 0 0 1-12.16 3.84z M519.68 1000.96a31.36 31.36 0 0 1-31.36-31.36V501.12a31.36 31.36 0 1 1 64 0v468.48a31.36 31.36 0 0 1-32.64 31.36z"}))}getShape(){const{model:e}=this.props,{x:n,y:r,width:i,height:o,radius:a}=e,s=e.getNodeStyle();return ae("g",{},[ae("rect",{...s,x:n-i/2,y:r-o/2,width:i,height:o,rx:a,ry:a}),this.getLabelShape()])}},model:class extends Cr{getNodeStyle(){return super.getNodeStyle()}},label:"",text:"",icon:"/node-icon/generator.svg"};class j3 extends Cr{getNodeStyle(){return super.getNodeStyle()}}class k3 extends pr{getLabelShape(){const{model:e}=this.props,{x:n,y:r,width:i,height:o}=e,a=e.getNodeStyle();return ae("svg",{x:n-i/2+5,y:r-o/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},ae("path",{fill:a.stroke,d:"M 851.412 806.16 l -90.696 90.32 l -67.696 -67.696 l 90.508 -90.508 c 87.48 -87.48 87.48 -229.308 0 -316.784 c -87.48 -87.48 -229.304 -87.48 -316.784 0 l -90.528 90.528 l -67.88 -67.88 l 90.528 -90.532 c 124.968 -124.968 327.58 -124.968 452.548 0 c 124.968 124.968 124.968 327.58 0 452.548 ZM 172.588 217.84 l 90.696 -90.32 l 67.696 67.696 l -90.508 90.508 c -87.48 87.48 -87.48 229.308 0 316.784 c 87.48 87.48 229.304 87.48 316.784 0 l 90.528 -90.528 l 67.88 67.88 l -90.528 90.532 c -124.968 124.968 -327.58 124.968 -452.548 0 c -124.968 -124.968 -124.968 -327.58 0 -452.548 Z"}))}getShape(){const{model:e}=this.props,{x:n,y:r,width:i,height:o,radius:a}=e,s=e.getNodeStyle();return ae("g",{},[ae("rect",{...s,x:n-i/2,y:r-o/2,width:i,height:o,rx:a,ry:a}),this.getLabelShape()])}}const B3={type:"bpmn:processorTask",view:k3,model:j3,label:"",text:"",icon:"/node-icon/matcher.svg"};class F3 extends To{initNodeData(e){super.initNodeData(e),this.r=40}getNodeStyle(){const e=super.getNodeStyle();return e.stroke="#4CAF50",e.fill="#C8E6C9",e}}class $3 extends Po{getShape(){const{model:e}=this.props,{x:n,y:r,r:i}=e,o=e.getNodeStyle();return ae("g",{},[ae("circle",{...o,cx:n,cy:r,r:i})])}}const H3={type:"bpmn:startEvent",view:$3,model:F3,label:"",text:"",icon:"/bpmn-icon/start-event.svg"};class W3 extends To{initNodeData(e){super.initNodeData(e),this.r=40}getNodeStyle(){const e=super.getNodeStyle();return e.stroke="#F44336",e.fill="#FFCDD2",e}}class z3 extends Po{getShape(){const{model:e}=this.props,{x:n,y:r,r:i}=e,o=e.getNodeStyle();return ae("g",{},[ae("circle",{...o,cx:n,cy:r,r:i})])}}const Io=[H3,{type:"bpmn:endEvent",view:z3,model:W3,label:"",text:"",icon:"/bpmn-icon/end-event.svg"},R3,L3,I3,B3];class X3 extends Co{getEdgeStyle(){const e=super.getEdgeStyle();return e.strokeWidth=1.5,e}}const zl=[{type:"bpmn:sequenceFlow",model:X3,view:class extends Do{}}];var Dm={width:40,height:40},Rm={width:40,height:40},Lm={width:40,height:40},Im={width:100,height:80},jm={width:100,height:80},G3=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(e){var n=Math.random()*16|0,r=e==="x"?n:n&3|8;return r.toString(16)})},t.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},t}(),U3=(globalThis==null?void 0:globalThis._ids)||new G3;function jo(){return U3.next()}var km=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){km(e,t);function e(n,r){return n.id||(n.id="Event_".concat(jo())),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),t.call(this,n,r)||this}return e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var n=t.prototype.getConnectedTargetRules.call(this),r={message:"",validate:function(){return!1}};return n.push(r),n},e.extendKey="StartEventModel",e})(To),function(t){km(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.extendKey="StartEventNode",e}(Po);var Bm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xl=function(){return Xl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xl.apply(this,arguments)};(function(t){Bm(e,t);function e(n,r){return n.id||(n.id="Event_".concat(jo())),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),t.call(this,n,r)||this}return e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var n=t.prototype.getConnectedSourceRules.call(this),r={message:"",validate:function(){return!1}};return n.push(r),n},e.extendKey="EndEventModel",e})(To),function(t){Bm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var n=this.props.model,r=n.getNodeStyle(),i=n,o=i.x,a=i.y,s=i.r,l=t.prototype.getShape.call(this);return ae("g",{},l,ae("circle",Xl(Xl({},r),{cx:o,cy:a,r:s-5})))},e.extendKey="EndEventView",e}(Po);var Fm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Fm(e,t);function e(n,r){return n.id||(n.id="Flow_".concat(jo())),t.call(this,n,r)||this}return e.extendKey="SequenceFlowModel",e})(Co),function(t){Fm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.extendKey="SequenceFlowEdge",e}(Do);var $m=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ba=function(){return Ba=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ba.apply(this,arguments)};(function(t){$m(e,t);function e(n,r){var i=this;return n.id||(n.id="Gateway_".concat(jo())),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),i=t.call(this,n,r)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return e.extendKey="ExclusiveGatewayModel",e})(Cl),function(t){$m(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getShape=function(){var n=this.props.model,r=n,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points,u=n.getNodeStyle();return ae("g",{transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")},ae("polygon",Ba(Ba({},u),{x:i,y:o,points:l})),ae("path",Ba({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},u)))},e.extendKey="ExclusiveGatewayNode",e}(Il);var Hm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rd=function(){return rd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rd.apply(this,arguments)};(function(t){Hm(e,t);function e(n,r){return n.id||(n.id="Activity_".concat(jo())),t.call(this,n,r)||this}return e.extendKey="ServiceTaskModel",e})(Cr),function(t){Hm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.getNodeStyle();return ae("svg",{x:r-o/2+5,y:i-a/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},ae("path",{fill:s.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},e.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.radius,l=n.getNodeStyle();return ae("g",{},[ae("rect",rd({x:r-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a},l)),this.getLabelShape()])},e.extendKey="ServiceTaskNode",e}(pr);var Wm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gl=function(){return Gl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gl.apply(this,arguments)};(function(t){Wm(e,t);function e(n,r){return n.id||(n.id="Activity_".concat(jo())),t.call(this,n,r)||this}return e.extendKey="UserTaskModel",e})(Cr),function(t){Wm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.getNodeStyle();return ae("svg",{x:r-o/2+5,y:i-a/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},ae("path",{fill:s.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},e.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.radius,l=n.getNodeStyle();return ae("g",{},[ae("rect",Gl(Gl({},l),{x:r-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a})),this.getLabelShape()])},e.extendKey="UserTaskNode",e}(pr);var Y3=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(e){var n=Math.random()*16|0,r=e==="x"?n:n&3|8;return r.toString(16)})},t.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},t}(),V3=(globalThis==null?void 0:globalThis._ids)||new Y3;function zm(){return V3.next()}function Xm(t){return Object.prototype.toString.call(t)}function K3(t){return"  ".repeat(t)}function Ul(t){var e=t;return Xm(t)==="[object Object]"?(e={},Object.keys(t).forEach(function(n){var r=n;n.charAt(0)==="-"&&(r=n.substring(1)),e[r]=Ul(t[n])})):Array.isArray(t)&&(e=[],t.forEach(function(n,r){e[r]=Ul(n)})),e}function q3(t){var e=t;try{typeof e!="string"&&(e=JSON.parse(t))}catch{e=JSON.stringify(Ul(t)).replace(/"/g,"'")}return e}var Bi=`	
`;function Yl(t,e,n){var r=K3(n);if(t!==0&&t!==!1&&!t)return Bi+r+"<".concat(e," />");var i="";if(e==="#text")return Bi+r+t;if(e==="#cdata-section")return Bi+r+"<![CDATA["+t+"]]>";if(e==="#comment")return Bi+r+"<!--"+t+"-->";if("".concat(e).charAt(0)==="-")return" "+e.substring(1)+'="'+q3(t)+'"';if(Array.isArray(t))t.forEach(function(l){i+=Yl(l,e,n+1)});else if(Xm(t)==="[object Object]"){var o=Object.keys(t),a="",s="";i+=(n===0?"":Bi+r)+"<"+e,o.forEach(function(l){l.charAt(0)==="-"?a+=Yl(t[l],l,n+1):s+=Yl(t[l],l,n+1)}),i+=a+(s!==""?">".concat(s).concat(Bi+r,"</").concat(e,">"):" />")}else i+=Bi+r+"<".concat(e,">").concat(t.toString(),"</").concat(e,">");return i}function Z3(t){var e="";for(var n in t)e+=Yl(t[n],n,0);return e}var ln=function(){};ln.ObjTree=function(){return this},ln.ObjTree.VERSION="0.23",ln.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`,ln.ObjTree.prototype.attr_prefix="-",ln.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,r=n.parseFromString(t,"application/xml");if(!r)return;e=r.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t),e=n.documentElement);if(e)return this.parseDOM(e)},ln.ObjTree.prototype.parseHTTP=function(t,e,n){var r={};for(var i in e)r[i]=e[i];if(r.method||(typeof r.postBody>"u"&&typeof r.postbody>"u"&&typeof r.parameters>"u"?r.method="get":r.method="post"),n){r.asynchronous=!0;var o=this,a=n,s=r.onComplete;r.onComplete=function(f){var c;f&&f.responseXML&&f.responseXML.documentElement&&(c=o.parseDOM(f.responseXML.documentElement)),a(c,f),s&&s(f)}}else r.asynchronous=!1;var l;if(typeof HTTP<"u"&&HTTP.Request){r.uri=t;var u=new HTTP.Request(r);u&&(l=u.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var u=new Ajax.Request(t,r);u&&(l=u.transport)}if(n)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)},ln.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),t.nodeType!=11){var r={};r[t.nodeName]=n,n=r}return n}},ln.ObjTree.prototype.parseElement=function(t){if(t.nodeType!=7){if(t.nodeType==3||t.nodeType==4||t.nodeType==8){var e=t.nodeValue.match(/[^\x00-\x20]/);return e==null?void 0:t.nodeValue}var n=null,r={};if(t.attributes&&t.attributes.length){n={};for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i].nodeName;if(typeof o=="string"){var a=t.attributes[i].nodeValue;try{a=JSON.parse(t.attributes[i].nodeValue.replace(/'/g,'"'))}catch{a=t.attributes[i].nodeValue}a&&(o=this.attr_prefix+o,typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(n,o,r[o],a))}}}if(t.childNodes&&t.childNodes.length){var s=!0;n&&(s=!1);for(var i=0;i<t.childNodes.length&&s;i++){var l=t.childNodes[i].nodeType;l==3||l==4||l==8||(s=!1)}if(s){n||(n="");for(var i=0;i<t.childNodes.length;i++)n+=t.childNodes[i].nodeValue}else{n||(n={});for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(t.childNodes[i]);a&&(typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(n,o,r[o],a))}}}}else n===null&&(n={});return n}},ln.ObjTree.prototype.addNode=function(t,e,n,r){this.__force_array[e]?(n==1&&(t[e]=[]),t[e][t[e].length]=r):n==1?t[e]=r:n==2?t[e]=[t[e],r]:t[e][t[e].length]=r},ln.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},ln.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],r=[];for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];i.charAt(0)!=this.attr_prefix?typeof o>"u"||o==null?n[n.length]="<"+i+" />":typeof o=="object"&&o.constructor==Array?n[n.length]=this.array_to_xml(i,o):typeof o=="object"?n[n.length]=this.hash_to_xml(i,o):n[n.length]=this.scalar_to_xml(i,o):r[r.length]=" "+i.substring(1)+'="'+this.xml_escape(o)+'"'}var a=r.join(""),s=n.join("");return typeof t>"u"||t==null||(n.length>0?s.match(/\n/)?s="<"+t+a+`>
`+s+"</"+t+`>
`:s="<"+t+a+">"+s+"</"+t+`>
`:s="<"+t+a+` />
`),s},ln.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r];typeof i>"u"||i==null?n[n.length]="<"+t+" />":typeof i=="object"&&i.constructor==Array?n[n.length]=this.array_to_xml(t,i):typeof i=="object"?n[n.length]=this.hash_to_xml(t,i):n[n.length]=this.scalar_to_xml(t,i)}return n.join("")},ln.ObjTree.prototype.scalar_to_xml=function(t,e){return t=="#text"?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+`>
`},ln.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var J3=function(t){return new ln.ObjTree().parseXML(t)},Q3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),id=function(){return id=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},id.apply(this,arguments)},Vl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Pr;(function(t){t.START="bpmn:startEvent",t.END="bpmn:endEvent",t.GATEWAY="bpmn:exclusiveGateway",t.USER="bpmn:userTask",t.SYSTEM="bpmn:serviceTask",t.FLOW="bpmn:sequenceFlow"})(Pr||(Pr={}));var Gm=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Um=["properties","startPoint","endPoint","pointsList"];function Ym(t){var e=t?Um.concat(t):Um;return function(n){function r(i){var o={};return typeof i=="string"?i:Array.isArray(i)?i.map(function(a){return r(a)}):(Object.entries(i).forEach(function(a){var s=Vl(a,2),l=s[0],u=s[1];typeof u!="object"?l.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(l)?o[l]=u:o["-".concat(l)]=u:e.includes(l)?o["-".concat(l)]=r(u):o[l]=r(u)}),o)}return r(n)}}function Kl(t){var e={};return Object.entries(t).forEach(function(n){var r=Vl(n,2),i=r[0],o=r[1];i.indexOf("-")===0?e[i.substring(1)]=Ul(o):typeof o=="string"?e[i]=o:Object.prototype.toString.call(o)==="[object Object]"?e[i]=Kl(o):Array.isArray(o)?e[i]=o.map(function(a){return Kl(a)}):e[i]=o}),e}function e4(t,e,n){var r=new Map;e.nodes.forEach(function(o){var a,s={"-id":o.id};if(!((a=o.text)===null||a===void 0)&&a.value&&(s["-name"]=o.text.value),o.properties){var l=Ym(n)(o.properties);Object.assign(s,l)}r.set(o.id,s),t[o.type]?Array.isArray(t[o.type])?t[o.type].push(s):t[o.type]=[t[o.type],s]:t[o.type]=s});var i=e.edges.map(function(o){var a,s,l=r.get(o.targetNodeId);l["bpmn:incoming"]?Array.isArray(l["bpmn:incoming"])?l["bpmn:incoming"].push(o.id):l["bpmn:incoming"]=[l["bpmn:incoming"],o.id]:l["bpmn:incoming"]=o.id;var u={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((a=o.text)===null||a===void 0)&&a.value&&(u["-name"]=(s=o.text)===null||s===void 0?void 0:s.value),o.properties){var f=Ym(n)(o.properties);Object.assign(u,f)}return u});e.edges.forEach(function(o){var a=r.get(o.sourceNodeId);a["bpmn:outgoing"]?Array.isArray(a["bpmn:outgoing"])?a["bpmn:outgoing"].push(o.id):a["bpmn:outgoing"]=[a["bpmn:outgoing"],o.id]:a["bpmn:outgoing"]=o.id}),t[Pr.FLOW]=i}function t4(t,e){t["bpmndi:BPMNEdge"]=e.edges.map(function(n){var r,i=n.id,o=n.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((r=n.text)===null||r===void 0)&&r.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),a}),t["bpmndi:BPMNShape"]=e.nodes.map(function(n){var r,i=n.id,o=100,a=80,s=n.x,l=n.y,u=yi.shapeConfigMap.get(n.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var f={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((r=n.text)===null||r===void 0)&&r.value&&(f["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),f})}function n4(t){var e=[],n=[],r=t["bpmn:definitions"];if(r){var i=r["bpmn:process"];Object.keys(i).forEach(function(o){if(o.indexOf("bpmn:")===0){var a=i[o];if(o===Pr.FLOW){var s=r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=i4(a,s)}else{var l=r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];e=e.concat(r4(a,l,o))}}})}return{nodes:e,edges:n}}function r4(t,e,n){var r=[];if(Array.isArray(t))t.forEach(function(a){var s;Array.isArray(e)?s=e.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=e;var l=Vm(s,n,a);r.push(l)});else{var i=void 0;Array.isArray(e)?i=e.find(function(a){return a["-bpmnElement"]===t["-id"]}):i=e;var o=Vm(i,n,t);r.push(o)}return r}function Vm(t,e,n){var r=Number(t["dc:Bounds"]["-x"]),i=Number(t["dc:Bounds"]["-y"]),o=n["-name"],a=yi.shapeConfigMap.get(e);a&&(r+=a.width/2,i+=a.height/2);var s;Object.entries(n).forEach(function(c){var d=Vl(c,2),h=d[0],v=d[1];Gm.indexOf(h)===-1&&(s||(s={}),s[h]=v)}),s&&(s=Kl(s));var l;if(o&&(l={x:r,y:i,value:o},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var u=t["bpmndi:BPMNLabel"]["dc:Bounds"];l.x=Number(u["-x"])+Number(u["-width"])/2,l.y=Number(u["-y"])+Number(u["-height"])/2}var f={id:t["-bpmnElement"],type:e,x:r,y:i,properties:s};return l&&(f.text=l),f}function i4(t,e){var n=[];if(Array.isArray(t))t.forEach(function(i){var o;Array.isArray(e)?o=e.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=e,n.push(Km(o,i))});else{var r=void 0;Array.isArray(e)?r=e.find(function(i){return i["-bpmnElement"]===t["-id"]}):r=e,n.push(Km(r,t))}return n}function Km(t,e){var n,r=e["-name"]?"".concat(e["-name"]):"";if(r){var i=t["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;r.split(`
`).forEach(function(l){o<l.length&&(o=l.length)}),n={value:r,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a;Object.entries(e).forEach(function(l){var u=Vl(l,2),f=u[0],c=u[1];Gm.indexOf(f)===-1&&(a||(a={}),a[f]=c)}),a&&(a=Kl(a));var s={id:e["-id"],type:Pr.FLOW,pointsList:t["di:waypoint"].map(function(l){return{x:Number(l["-x"]),y:Number(l["-y"])}}),sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return n&&(s.text=n),s}var yi=function(){function t(e){var n=e.lf,r=this;this.adapterOut=function(i,o){var a=id({},r.processAttributes);e4(a,i,o);var s={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};t4(s,i);var l=r.definitionAttributes;l["bpmn:process"]=a,l["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":s};var u={"bpmn:definitions":l};return u},this.adapterIn=function(i){if(i)return n4(i)},n.adapterIn=function(i){return r.adapterIn(i)},n.adapterOut=function(i,o){return r.adapterOut(i,o)},this.processAttributes={"-isExecutable":"true","-id":"Process_".concat(zm())},this.definitionAttributes={"-id":"Definitions_".concat(zm()),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return t.prototype.setCustomShape=function(e,n){t.shapeConfigMap.set(e,n)},t.pluginName="bpmn-adapter",t.shapeConfigMap=new Map,t}();yi.shapeConfigMap.set(Pr.START,{width:Dm.width,height:Dm.height}),yi.shapeConfigMap.set(Pr.END,{width:Rm.width,height:Rm.height}),yi.shapeConfigMap.set(Pr.GATEWAY,{width:Lm.width,height:Lm.height}),yi.shapeConfigMap.set(Pr.SYSTEM,{width:Im.width,height:Im.height}),yi.shapeConfigMap.set(Pr.USER,{width:jm.width,height:jm.height}),function(t){Q3(e,t);function e(n){var r=t.call(this,n)||this;r.adapterXmlIn=function(o){var a=J3(o);return r.adapterIn(a)},r.adapterXmlOut=function(o,a){var s=r.adapterOut(o,a);return Z3(s)};var i=n.lf;return i.adapterIn=r.adapterXmlIn,i.adapterOut=r.adapterXmlOut,r}return e.pluginName="bpmnXmlAdapter",e}(yi);var o4=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){var e="xxxxxxx".replace(/[x]/g,function(n){var r=Math.random()*16|0,i=n==="x"?r:r&3|8;return i.toString(16)});return e},t.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},t}(),a4=(globalThis==null?void 0:globalThis._ids)||new o4;function s4(){return a4.next()}var qm=function(){return qm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qm.apply(this,arguments)},Zm=function(){return Zm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zm.apply(this,arguments)},Jm=function(){return Jm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jm.apply(this,arguments)},Qm=function(){return Qm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Qm.apply(this,arguments)},e_=function(){return e_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},e_.apply(this,arguments)};ae("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),ae("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),ae("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"}),ae("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var t_=function(){return t_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},t_.apply(this,arguments)},n_=function(){return n_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},n_.apply(this,arguments)},l4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fi=function(){return Fi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fi.apply(this,arguments)},u4=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},f4=Xn,c4=function(t){l4(e,t);function e(n){var r=t.call(this)||this;return r.updatePosition=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.x,u=s.y;r.nodeModel.x=l+o/2,r.nodeModel.y=u+a/2,r.nodeModel.moveText(o/2,a/2)},r.getResize=function(i){var o=i.index,a=i.deltaX,s=i.deltaY,l=i.width,u=i.height,f=i.PCTResizeInfo,c=i.pct,d=c===void 0?1:c,h=i.freezeWidth,v=h===void 0?!1:h,p=i.freezeHeight,g=p===void 0?!1:p,y={width:l,height:u,deltaX:a,deltaY:s};if(f){var m=4,A=0,T=0;switch(o){case 0:T=(a*-1-s)/m;break;case 1:T=(a-s)/m;break;case 2:T=(a+s)/m;break;case 3:T=(a*-1+s)/m;break}T!==0&&(A=Math.round(T/f.ResizeBasis.basisHeight*1e5)/1e3),f.ResizePCT.widthPCT=Math.max(Math.min(f.ResizePCT.widthPCT+A,f.ScaleLimit.maxScaleLimit),f.ScaleLimit.minScaleLimit),f.ResizePCT.heightPCT=Math.max(Math.min(f.ResizePCT.heightPCT+A,f.ScaleLimit.maxScaleLimit),f.ScaleLimit.minScaleLimit);var k=Math.round(f.ResizePCT.widthPCT*f.ResizeBasis.basisWidth/100),C=Math.round(f.ResizePCT.heightPCT*f.ResizeBasis.basisHeight/100);switch(o){case 0:a=l-k,s=u-C;break;case 1:a=k-l,s=u-C;break;case 2:a=k-l,s=C-u;break;case 3:a=l-k,s=C-u;break}return y.width=k,y.height=C,y.deltaX=a/d,y.deltaY=s/d,y}switch(o){case 0:y.width=v?l:l-a*d,y.height=g?u:u-s*d;break;case 1:y.width=v?l:l+a*d,y.height=g?u:u-s*d;break;case 2:y.width=v?l:l+a*d,y.height=g?u:u+s*d;break;case 3:y.width=v?l:l-a*d,y.height=g?u:u+s*d;break}return y},r.updateEdgePointByAnchors=function(){var i=r.nodeModel,o=i.id,a=i.anchors,s=r.getNodeEdges(o);s.sourceEdges.forEach(function(l){var u=a.find(function(f){return f.id===l.sourceAnchorId});u&&l.updateStartPoint({x:u.x,y:u.y})}),s.targetEdges.forEach(function(l){var u=a.find(function(f){return f.id===l.targetAnchorId});u&&l.updateEndPoint({x:u.x,y:u.y})})},r.updateRect=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.x,u=s.y,f=s.width,c=s.height,d=s.radius,h=s.PCTResizeInfo,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,m=v.maxHeight,A=r.index,T=p===y,k=g===m,C=r.getResize({index:A,deltaX:o,deltaY:a,width:f,height:c,PCTResizeInfo:h,pct:1,freezeWidth:T,freezeHeight:k});if(C.width<p||C.width>y||C.height<g||C.height>m){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:T?0:C.deltaX,deltaY:k?0:C.deltaY}),r.nodeModel.width=C.width,r.nodeModel.height=C.height,r.nodeModel.setProperties({nodeSize:{width:C.width,height:C.height}});var S={x:l,y:u,width:f,height:c,radius:d},I={x:r.nodeModel.x,y:r.nodeModel.y,width:r.nodeModel.width,height:r.nodeModel.height,radius:d};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:S,afterNode:I})},r.updateEllipse=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.rx,u=s.ry,f=s.x,c=s.y,d=s.PCTResizeInfo,h=r.index,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,m=v.maxHeight,A=p===y,T=g===m,k=l,C=u,S=r.getResize({index:h,deltaX:o,deltaY:a,width:k,height:C,PCTResizeInfo:d,pct:1/2,freezeWidth:A,freezeHeight:T});if(S.width<p/2||S.width>y/2||S.height<g/2||S.height>m/2){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:A?0:S.deltaX,deltaY:T?0:S.deltaY}),r.nodeModel.rx=S.width,r.nodeModel.ry=S.height,r.nodeModel.setProperties({nodeSize:{rx:S.width,ry:S.height}});var I={x:f,y:c},X={rx:S.width,ry:S.height,x:r.nodeModel.x,y:r.nodeModel.y};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:Fi(Fi({},I),{rx:l,ry:u}),afterNode:X})},r.updateDiamond=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.rx,u=s.ry,f=s.x,c=s.y,d=s.PCTResizeInfo,h=r.index,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,m=v.maxHeight,A=p===y,T=g===m,k=l,C=u,S=r.getResize({index:h,deltaX:o,deltaY:a,width:k,height:C,PCTResizeInfo:d,pct:1/2,freezeWidth:A,freezeHeight:T});if(S.width<p/2||S.width>y/2||S.height<g/2||S.height>m/2){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:A?0:S.deltaX,deltaY:T?0:S.deltaY}),r.nodeModel.rx=S.width,r.nodeModel.ry=S.height,r.nodeModel.setProperties({nodeSize:{rx:S.width,ry:S.height}});var I={x:f,y:c,rx:l,ry:u},X={rx:S.width,ry:S.height,x:r.nodeModel.x,y:r.nodeModel.y};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:I,afterNode:X})},r.eventEmit=function(i){var o=i.deltaX,a=i.deltaY,s=i.beforeNode,l=i.afterNode,u=r.nodeModel,f=u.id,c=u.modelType,d=u.type,h=Fi({id:f,modelType:c,type:d},s),v=Fi({id:f,modelType:c,type:d},l);r.graphModel.eventCenter.emit("node:resize",{preData:h,data:v,deltaX:o,deltaY:a,index:r.index,model:r.nodeModel})},r.onDragging=function(i){var o,a=i.deltaX,s=i.deltaY,l=r.graphModel.transformModel,u=r.nodeModel.modelType;o=u4(l.fixDeltaXY(a,s),2),a=o[0],s=o[1],u===$e.RECT_NODE||u===$e.HTML_NODE?r.updateRect({deltaX:a,deltaY:s}):u===$e.ELLIPSE_NODE?r.updateEllipse({deltaX:a,deltaY:s}):u===$e.DIAMOND_NODE&&r.updateDiamond({deltaX:a,deltaY:s})},r.onDragEnd=function(){var i=r.graphModel.gridSize,o=i===void 0?1:i,a=o*Math.round(r.nodeModel.x/o),s=o*Math.round(r.nodeModel.y/o);r.nodeModel.moveTo(a,s),r.updateEdgePointByAnchors()},r.index=n.index,r.nodeModel=n.model,r.graphModel=n.graphModel,r.dragHandler=new f4({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:1}),r}return e.prototype.getNodeEdges=function(n){for(var r=this.graphModel,i=r.edges,o=[],a=[],s=0;s<i.length;s++){var l=i[s];l.sourceNodeId===n?o.push(l):i[s].targetNodeId===n&&a.push(l)}return{sourceEdges:o,targetEdges:a}},e.prototype.render=function(){var n=this.props,r=n.x,i=n.y,o=n.index,a=n.model,s=a.getControlPointStyle();return B("g",{className:"lf-resize-control-".concat(o),children:B(Un,Fi({className:"lf-node-control",x:r,y:i},s,{onMouseDown:this.dragHandler.handleMouseDown}))})},e}(Ge),d4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ql=function(){return ql=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ql.apply(this,arguments)},Zl=function(t){d4(e,t);function e(){var n=t.call(this)||this;return n.state={},n}return e.prototype.getResizeControl=function(){var n=this.props,r=n.model,i=n.graphModel,o=r.x,a=r.y,s=r.width,l=r.height,u={minX:o-s/2,minY:a-l/2,maxX:o+s/2,maxY:a+l/2},f=u.minX,c=u.minY,d=u.maxX,h=u.maxY,v=[{x:f,y:c},{x:d,y:c},{x:d,y:h},{x:f,y:h}];return v.map(function(p,g){return B(c4,ql({index:g},p,{model:r,graphModel:i}))})},e.prototype.getGroupSolid=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.getResizeOutlineStyle();return B(Un,ql({},s,{x:r,y:i,width:o,height:a}))},e.prototype.render=function(){return B("g",{className:"lf-resize-control",children:[this.getGroupSolid(),this.getResizeControl()]})},e}(Ge),r_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){r_(e,t);function e(n,r){var i=t.call(this,n,r)||this,o=n.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return e.prototype.initNodeData=function(n){t.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var n=t.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(Nc),function(t){r_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var n=this.props,r=n.model,i=n.graphModel;return B(Zl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var n=this.props,r=n.model,i=n.graphModel.editConfigModel.isSilentMode;return B("g",{children:[this.getResizeShape(),r.isSelected&&!i?this.getControlGroup():""]})},e}(Hc);var i_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),od=function(){return od=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},od.apply(this,arguments)};(function(t){i_(e,t);function e(n,r){var i=t.call(this,n,r)||this,o=n.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return e.prototype.initNodeData=function(n){t.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},e.prototype.getOutlineStyle=function(){var n=t.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(Tc),function(t){i_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var n=this.props,r=n.model,i=n.graphModel;return B(Zl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){var n=this.props.model,r=n.points,i=n.getNodeStyle();return B("g",{children:B(wc,od({},i,{points:r}))})},e.prototype.getShape=function(){var n=this.props,r=n.model.isSelected,i=n.graphModel.editConfigModel.isSilentMode;return B("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e}(Fc);var o_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){o_(e,t);function e(n,r){var i=t.call(this,n,r)||this,o=n.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return e.prototype.initNodeData=function(n){t.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var n=t.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(Mc),function(t){o_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var n=this.props,r=n.model,i=n.graphModel;return B(Zl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var n=this.props,r=n.model.isSelected,i=n.graphModel.editConfigModel.isSilentMode;return B("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e}(zc);var a_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),h4=function(t){a_(e,t);function e(n,r){var i=t.call(this,n,r)||this,o=n.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return e.prototype.initNodeData=function(n){t.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var n=t.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e}(Cr),p4=function(t){a_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var n=this.props,r=n.model,i=n.graphModel;return B(Zl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var n=this.props,r=n.model.isSelected,i=n.graphModel.editConfigModel.isSilentMode;return B("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e}(pr),s_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jl=function(){return Jl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jl.apply(this,arguments)},$i=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Hi=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},l_=500,u_=300,v4=-1e4;(function(t){s_(e,t);function e(){var n=t.apply(this,Hi([],$i(arguments),!1))||this;return n.isGroup=!0,n.isFolded=!1,n.unfoldedWidth=l_,n.unfoldedHeight=u_,n.childrenLastFoldStatus={},n}return e.prototype.initNodeData=function(n){var r=this;t.prototype.initNodeData.call(this,n);var i=[];Le(n.children)&&(i=n.children),this.children=new Set(i),this.width=l_,this.height=u_,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=v4,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=!!this.properties.isFolded,setTimeout(function(){r.isFolded&&r.foldGroup(r.isFolded)})},e.prototype.getResizeOutlineStyle=function(){var n=t.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},e.prototype.foldGroup=function(n){var r=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHeight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHeight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var i=Hi(Hi([],$i(this.incoming.edges),!1),$i(this.outgoing.edges),!1);this.children.forEach(function(o){var a=r.graphModel.getElement(o);if(a){var s=a.isFolded;if(a.isGroup&&!a.isFolded&&a.foldGroup(n),a.isGroup&&!n){var l=r.childrenLastFoldStatus[o];l!==void 0&&l!==a.isFolded&&a.foldGroup(l)}r.childrenLastFoldStatus[o]=!!s,a.visible=!n;var u=a.incoming.edges,f=a.outgoing.edges;i=Hi(Hi(Hi([],$i(i),!1),$i(u),!1),$i(f),!1)}}),this.foldEdge(n,i)}},e.prototype.getAnchorStyle=function(n){var r=t.prototype.getAnchorStyle.call(this,n);return r.stroke="transparent",r.fill="transparent",r.hover.fill="transparent",r.hover.stroke="transparent",r},e.prototype.foldEdge=function(n,r){var i=this;r.forEach(function(o,a){var s=o.id,l=o.sourceNodeId,u=o.targetNodeId,f=o.startPoint,c=o.endPoint,d=o.type,h=o.text,v=o.getProperties(),p={id:"".concat(s,"__").concat(a),sourceNodeId:l,targetNodeId:u,startPoint:f,endPoint:c,type:d,properties:v,text:h==null?void 0:h.value};o.virtual&&i.graphModel.deleteEdgeById(o.id);var g=i.graphModel.group.getNodeGroup(u);g||(g=i.graphModel.getNodeModelById(u));var y=i.graphModel.group.getNodeGroup(l);y||(y=i.graphModel.getNodeModelById(l)),n&&o.visible!==!1&&(i.children.has(l)||i.id===l?(p.startPoint=void 0,p.sourceNodeId=i.id):(p.endPoint=void 0,p.targetNodeId=i.id),(g.id!==i.id||y.id!==i.id)&&i.createVirtualEdge(p),o.visible=!1),!n&&o.visible===!1&&(g&&g.isGroup&&g.isFolded?(p.targetNodeId=g.id,p.endPoint=void 0,i.createVirtualEdge(p)):y&&y.isGroup&&y.isFolded?(p.sourceNodeId=y.id,p.startPoint=void 0,i.createVirtualEdge(p)):o.visible=!0)})},e.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var r=this.graphModel.addEdge(n);r.virtual=!0,r.text.editable=!1,r.isFoldedEdge=!0},e.prototype.isInRange=function(n){var r=n.minX,i=n.minY,o=n.maxX,a=n.maxY;return r>=this.x-this.width/2&&o<=this.x+this.width/2&&i>=this.y-this.height/2&&a<=this.y+this.height/2},e.prototype.isAllowMoveTo=function(n){var r=n.minX,i=n.minY,o=n.maxX,a=n.maxY;return{x:r>=this.x-this.width/2&&o<=this.x+this.width/2,y:i>=this.y-this.height/2&&a<=this.y+this.height/2}},e.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},e.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},e.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},e.prototype.getData=function(){var n=this,r=t.prototype.getData.call(this);r.children=[],console.log("this.children",this.children),this.children.forEach(function(o){var a=n.graphModel.getNodeModelById(o);a&&!a.virtual&&r.children.push(o)});var i=r.properties;return i==null||delete i.groupAddable,i==null||delete i.isFolded,r},e.prototype.getHistoryData=function(){var n=t.prototype.getData.call(this);n.children=Hi([],$i(this.children),!1),n.isGroup=!0;var r=n.properties;return r==null||delete r.groupAddable,r!=null&&r.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHeight/2-this.foldedHeight/2),n},e.prototype.isAllowAppendIn=function(n){return console.info("_nodeData",n),!0},e.prototype.toBack=function(){this.zIndex--},e})(h4),function(t){s_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var n=this.props.model,r=n.resizable,i=n.properties;return r&&!i.isFolded?t.prototype.getControlGroup.call(this):null},e.prototype.getAddableShape=function(){var n=this.props.model,r=n.width,i=n.height,o=n.x,a=n.y,s=n.radius,l=n.properties,u=n.getAddableOutlineStyle;if(!l.groupAddable)return null;var f=this.props.model.getNodeStyle().strokeWidth,c=f===void 0?0:f,d=u(),h=r+c+8,v=i+c+8;return ae("rect",Jl(Jl({},d),{width:h,height:v,x:o-h/2,y:a-v/2,rx:s,ry:s}))},e.prototype.getFoldIcon=function(){var n=this.props.model,r=n.x-n.width/2+5,i=n.y-n.height/2+5;if(!n.foldable)return null;var o=ae("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M ".concat(r+3,",").concat(i+6," ").concat(r+11,",").concat(i+6," M").concat(r+7,",").concat(i+2," ").concat(r+7,",").concat(i+10):"M ".concat(r+3,",").concat(i+6," ").concat(r+11,",").concat(i+6," ")});return ae("g",{},[ae("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),o])},e.prototype.getResizeShape=function(){return ae("g",{},[this.getAddableShape(),t.prototype.getResizeShape.call(this),this.getFoldIcon()])},e}(p4);var f_=function(){return f_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},f_.apply(this,arguments)},c_=function(){return c_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},c_.apply(this,arguments)},d_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fa=function(){return Fa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fa.apply(this,arguments)};function g4(t){var e=function(r){d_(i,r);function i(o,a){o.id||(o.id="Flow_".concat(s4()));var s=Fa(Fa(Fa({},{}),o.properties),{isDefaultFlow:!1});return o.properties=s,r.call(this,o,a)||this}return i.extendKey="SequenceFlowModel",i}(Co),n=function(r){d_(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getStartArrow=function(){var o=this.props.model,a=o.properties.isDefaultFlow;return a?ae("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):ae("path",{d:""})},i.extendKey="SequenceFlowEdge",i}(Do);return{type:"bpmn:sequenceFlow",view:n,model:e}}g4();var h_={width:40,height:40},p_={width:40,height:40},v_={width:100,height:80},Ql={width:100,height:80},g_={width:100,height:80},y_={width:100,height:80},m_={width:100,height:80},__={width:100,height:80},b_={width:100,height:80},x_={width:100,height:80},un=function(){};un.ObjTree=function(){return this},un.ObjTree.VERSION="0.23",un.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`,un.ObjTree.prototype.attr_prefix="-",un.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,r=n.parseFromString(t,"application/xml");if(!r)return;e=r.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t),e=n.documentElement);if(e){var i=this.parseDOM(e);return i}},un.ObjTree.prototype.parseHTTP=function(t,e,n){var r={};for(var i in e)r[i]=e[i];if(r.method||(typeof r.postBody>"u"&&typeof r.postbody>"u"&&typeof r.parameters>"u"?r.method="get":r.method="post"),n){r.asynchronous=!0;var o=this,a=n,s=r.onComplete;r.onComplete=function(f){var c;f&&f.responseXML&&f.responseXML.documentElement&&(c=o.parseDOM(f.responseXML.documentElement)),a(c,f),s&&s(f)}}else r.asynchronous=!1;var l;if(typeof HTTP<"u"&&HTTP.Request){r.uri=t;var u=new HTTP.Request(r);u&&(l=u.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var u=new Ajax.Request(t,r);u&&(l=u.transport)}if(n)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)},un.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),t.nodeType!==11){var r={};r[t.nodeName]=n,n=r}return n}},un.ObjTree.prototype.parseElement=function(t){if(t.nodeType!==7){if(t.nodeType===3||t.nodeType===4||t.nodeType===8){var e=t.nodeValue.match(/[^\x00-\x20]/);return e==null?void 0:t.nodeValue}var n=null,r={};if(t.attributes&&t.attributes.length){n={};for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i].nodeName;if(typeof o=="string"){var a=t.attributes[i].nodeValue;try{a=JSON.parse(t.attributes[i].nodeValue.replace(/'/g,'"'))}catch{a=t.attributes[i].nodeValue}a!=null&&(o=this.attr_prefix+o,typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(n,o,r[o],a))}}}if(t.childNodes&&t.childNodes.length){var s=!0;n&&(s=!1);for(var i=0;i<t.childNodes.length&&s;i++){var l=t.childNodes[i].nodeType;l===3||l===4||l===8||(s=!1)}if(s){n||(n="");for(var i=0;i<t.childNodes.length;i++)n+=t.childNodes[i].nodeValue}else{n||(n={});for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(t.childNodes[i]);a&&(typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(n,o,r[o],a))}}}}else n===null&&(n={});return n}},un.ObjTree.prototype.addNode=function(t,e,n,r){this.__force_array[e]?(n===1&&(t[e]=[]),t[e][t[e].length]=r):n===1?t[e]=r:n===2?t[e]=[t[e],r]:t[e][t[e].length]=r},un.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},un.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],r=[];for(var i in e)if(Ks(e,i)){var o=e[i];i.charAt(0)!==this.attr_prefix?typeof o>"u"||o==null?n[n.length]="<".concat(i," />"):typeof o=="object"&&o.constructor===Array?n[n.length]=this.array_to_xml(i,o):typeof o=="object"?n[n.length]=this.hash_to_xml(i,o):n[n.length]=this.scalar_to_xml(i,o):r[r.length]=" ".concat(i.substring(1),'="').concat(this.xml_escape(o),'"')}var a=r.join(""),s=n.join("");return typeof t>"u"||t==null||(n.length>0?s.match(/\n/)?s="<".concat(t).concat(a,`>
`).concat(s,"</").concat(t,`>
`):s="<".concat(t).concat(a,">").concat(s,"</").concat(t,`>
`):s="<".concat(t).concat(a,` />
`)),s},un.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r];typeof i>"u"||i==null?n[n.length]="<".concat(t," />"):typeof i=="object"&&i.constructor===Array?n[n.length]=this.array_to_xml(t,i):typeof i=="object"?n[n.length]=this.hash_to_xml(t,i):n[n.length]=this.scalar_to_xml(t,i)}return n.join("")},un.ObjTree.prototype.scalar_to_xml=function(t,e){return t==="#text"?this.xml_escape(e):"<".concat(t,">").concat(this.xml_escape(e),"</").concat(t,`>
`)},un.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var y4=function(t){return new un.ObjTree().parseXML(t)};function E_(t){return Object.prototype.toString.call(t)}function w_(t){return"  ".repeat(t)}function eu(t){return E_(t)==="[object Object]"?Object.keys(t).reduce(function(e,n){var r=n;return n.charAt(0)==="-"&&(r=n.substring(1)),e[r]=eu(t[n]),e},{}):Array.isArray(t)?t.map(function(e){return eu(e)}):t}function m4(t){var e=t;try{typeof e!="string"&&(e=JSON.parse(t))}catch{e=JSON.stringify(eu(t)).replace(/"/g,"'")}return e}var S_=`	
`;function tu(t,e,n){var r=w_(n),i="",o=S_+r;if(e==="-json")return"";if(e==="#text")return o+t;if(e==="#cdata-section")return"".concat(o,"<![CDATA[").concat(t,"]]>");if(e==="#comment")return"".concat(o,"<!--").concat(t,"-->");if("".concat(e).charAt(0)==="-")return" ".concat(e.substring(1),'="').concat(m4(t),'"');if(Array.isArray(t))i+=t.map(function(u){return tu(u,e,n+1)}).join("");else if(E_(t)==="[object Object]"){var a=Object.keys(t),s="",l=t["-json"]?S_+w_(n+1)+t["-json"]:"";i+="".concat(n===0?"":o,"<").concat(e),a.forEach(function(u){u.charAt(0)==="-"?s+=tu(t[u],u,n+1):l+=tu(t[u],u,n+1)}),i+=s+(l!==""?">".concat(l).concat(o,"</").concat(e,">"):" />")}else i+="".concat(o,"<").concat(e,">").concat(t.toString(),"</").concat(e,">");return i}function _4(t){var e="";for(var n in t)e+=tu(t[n],n,0);return e}var b4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ad=function(){return ad=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ad.apply(this,arguments)},O_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},sd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},en=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},gr=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},fn;(function(t){t.START="bpmn:startEvent",t.END="bpmn:endEvent",t.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",t.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",t.BOUNDARY="bpmn:boundaryEvent",t.PARALLEL_GATEWAY="bpmn:parallelGateway",t.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",t.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",t.USER="bpmn:userTask",t.SYSTEM="bpmn:serviceTask",t.FLOW="bpmn:sequenceFlow",t.SUBPROCESS="bpmn:subProcess"})(fn||(fn={}));var A_=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],x4=["properties","startPoint","endPoint","pointsList"],nu={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},C_=function(t,e){var n=Object.keys(e||{});return n.forEach(function(r){if(t[r]){var i=e[r],o=i.in,a=i.out;o&&(t[r].in=o),a&&(t[r].out=a)}else t[r]=e[r]}),t},Vn={"bpmn:startEvent":{out:function(t){var e,n,r=t.properties;return((n=(e=Vn[r.definitionType])===null||e===void 0?void 0:e.out)===null||n===void 0?void 0:n.call(e,t))||{}}},"bpmn:intermediateCatchEvent":{out:function(t){var e,n,r=t.properties;return((n=(e=Vn[r.definitionType])===null||e===void 0?void 0:e.out)===null||n===void 0?void 0:n.call(e,t))||{}}},"bpmn:intermediateThrowEvent":{out:function(t){var e,n,r=t.properties;return((n=(e=Vn[r.definitionType])===null||e===void 0?void 0:e.out)===null||n===void 0?void 0:n.call(e,t))||{}}},"bpmn:boundaryEvent":{out:function(t){var e,n,r=t.properties;return((n=(e=Vn[r.definitionType])===null||e===void 0?void 0:e.out)===null||n===void 0?void 0:n.call(e,t))||{}}},"bpmn:sequenceFlow":{out:function(t){var e=t.properties,n=e.expressionType,r=e.condition;return r?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(r,"}]]></bpmn:conditionExpression>")}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(r,"</bpmn:conditionExpression>")}:{json:""}}},"bpmn:timerEventDefinition":{out:function(t){var e=t.properties,n=e.timerType,r=e.timerValue,i=e.definitionId,o=function(){return"<bpmn:".concat(n,' xsi:type="bpmn:tFormalExpression">').concat(r,"</bpmn:").concat(n,">")};return{json:'<bpmn:timerEventDefinition id="'.concat(i,'"').concat(n&&r?">".concat(o(),"</bpmn:timerEventDefinition>"):"/>")}},in:function(t,e){var n,r,i,o,a=t,s=e["-id"],l="",u="";try{for(var f=sd(Object.keys(e)),c=f.next();!c.done;c=f.next()){var d=c.value;d.includes("bpmn:")&&(i=en(d.split(":"),2),l=i[1],u=(o=e[d])===null||o===void 0?void 0:o["#text"])}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return{"-definitionId":s,"-definitionType":a,"-timerType":l,"-timerValue":u}}},"bpmn:conditionExpression":{in:function(t,e){var n,r="",i="";return e["#cdata-section"]?(i="cdata",r=((n=/^\$\{(.*)\}$/g.exec(e["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):e["#text"]&&(i="normal",r=e["#text"]),{"-condition":r,"-expressionType":i}}}};function E4(t){var e=t??{},n=e.retainedAttrsFields,r=e.excludeFields,i=e.transformer,o=new Set(gr(gr([],en(x4),!1),en(n||[]),!1)),a={in:new Set(gr(gr([],en(nu.in),!1),en((r==null?void 0:r.in)||[]),!1)),out:new Set(gr(gr([],en(nu.out),!1),en((r==null?void 0:r.out)||[]),!1))};return Vn=C_(Vn,i),function(s){var l=s.nodes,u=s.edges;function f(c,d){var h,v;if((c==null?void 0:c.flag)!==1){var p;if((p=Vn[c.type])&&p.out){var g=p.out(c),y=Object.keys(g);y.length>0&&y.forEach(function(X){c[X]=g[X]})}c!=null&&c.children&&(c.children=c.children.map(function(X){var Q=l.find(function(ue){return ue.id===X})||u.find(function(ue){return ue.id===X});return Q||{}}));var m={};if(typeof c=="string")return c;if(Array.isArray(c))return c.map(function(X){return f(X,"")}).filter(function(X){return X!=null});try{for(var A=sd(Object.entries(c)),T=A.next();!T.done;T=A.next()){var k=en(T.value,2),C=k[0],S=k[1];if((S==null?void 0:S.flag)===1)return;var I=[d,C].filter(function(X){return X}).join(".");a.out.has(I)||(typeof S!="object"?C.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(C)?m[C]=S:m["-".concat(C)]=S:o.has(I)?m["-".concat(C)]=f(S,I):m[C]=f(S,I))}}catch(X){h={error:X}}finally{try{T&&!T.done&&(v=A.return)&&v.call(A)}finally{if(h)throw h.error}}return m}}return f(s,"")}}function ru(t){var e,n,r={};try{for(var i=sd(Object.entries(t)),o=i.next();!o.done;o=i.next()){var a=en(o.value,2),s=a[0],l=a[1];s.indexOf("-")===0?r[s.substring(1)]=eu(l):typeof l=="string"?r[s]=l:Object.prototype.toString.call(l)==="[object Object]"?r[s]=ru(l):Array.isArray(l)?r[s]=l.map(function(u){return ru(u)}):r[s]=l}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function w4(t,e,n){var r,i=new Map,o=E4(n)(e);o.nodes.forEach(function(s){var l=s["-id"],u=s["-type"],f=s.text,c=s.children,d=O_(s,["-id","-type","text","children"]),h={"-id":l};f!=null&&f["-value"]&&(h["-name"]=f["-value"]),d["-json"]&&(h["-json"]=d["-json"]),d["-properties"]&&Object.assign(h,d["-properties"]),c&&(h.children=c),t[u]||(t[u]=[]),t[u].push(h),i.set(l,h)});var a=o.edges.map(function(s){var l=s["-id"],u=s["-sourceNodeId"],f=s["-targetNodeId"],c=s.text,d=O_(s,["-id","-sourceNodeId","-targetNodeId","text"]),h=i.get(f);h["bpmn:incoming"]||(h["bpmn:incoming"]=[]),h["bpmn:incoming"].push(l);var v={"-id":l,"-sourceRef":u,"-targetRef":f};return c!=null&&c["-value"]&&(v["-name"]=c["-value"]),d["-json"]&&(v["-json"]=d["-json"]),d["-properties"]&&Object.assign(v,d["-properties"]),v});return e.edges.forEach(function(s){var l=s.sourceNodeId,u=s.id,f=i.get(l);f["bpmn:outgoing"]||(f["bpmn:outgoing"]=[]),f["bpmn:outgoing"].push(u)}),(r=t["bpmn:subProcess"])===null||r===void 0||r.forEach(function(s){var l={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},u=[];s.children.forEach(function(p){var g,y=i.get(p["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(A){y[A]&&y[A].forEach(function(T){l[A].add(T)})});var m=(g=t[p["-type"]])===null||g===void 0?void 0:g.findIndex(function(A){return A["-id"]===p["-id"]});m>=0&&t[p["-type"]].splice(m,1),i.delete(p["-id"]),s[p["-type"]]||(s[p["-type"]]=[]),s[p["-type"]].push(y)});var f=l["bpmn:incoming"],c=l["bpmn:outgoing"];c.forEach(function(p){f.has(p)&&u.push(p)});for(var d=function(p){var g=a.findIndex(function(y){return y["-id"]===u[p]});g>=0?(s["bpmn:sequenceFlow"]||(s["bpmn:sequenceFlow"]=[]),s["bpmn:sequenceFlow"].push(a[g]),a.splice(g,1)):p++,h=p},h,v=0;v<u.length;)d(v),v=h;delete s.children}),t[fn.FLOW]=a,t}function S4(t,e){t["bpmndi:BPMNEdge"]=e.edges.map(function(n){var r,i=n.id,o=n.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((r=n.text)===null||r===void 0)&&r.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),a}),t["bpmndi:BPMNShape"]=e.nodes.map(function(n){var r,i=n.id,o=100,a=80,s=n.x,l=n.y,u=bn.shapeConfigMap.get(n.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var f={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((r=n.text)===null||r===void 0)&&r.value&&(f["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),f})}var O4=["bpmn:incoming","bpmn:outgoing"];function A4(t,e){var n=[],r=[],i=new Map,o=e??{},a=o.transformer,s=o.excludeFields,l={in:new Set(gr(gr([],en(nu.in),!1),en((s==null?void 0:s.in)||[]),!1)),out:new Set(gr(gr([],en(nu.out),!1),en((s==null?void 0:s.out)||[]),!1))};Vn=C_(Vn,a);var u=t["bpmn:definitions"];if(u){var f=u["bpmn:process"];(function(d,h){h.forEach(function(v){try{Object.keys(d).forEach(function(p){try{v(p)}catch(g){console.error(g)}})}catch(p){console.error(p)}})})(f,[function(d){function h(p){p["-children"]||(p["-children"]=[]),Object.keys(p).forEach(function(g){var y;g.indexOf("bpmn:")===0&&!O4.includes(g)&&(f[g]||(f[g]=[]),!Array.isArray(f[g])&&(f[g]=[f[g]]),Array.isArray(p[g])?(y=f[g]).push.apply(y,gr([],en(p[g]),!1)):f[g].push(p[g]),Array.isArray(p[g])?p[g].forEach(function(m){!g.includes("Flow")&&p["-children"].push(m["-id"])}):!g.includes("Flow")&&p["-children"].push(p[g]["-id"]),delete p[g])})}if(d==="bpmn:subProcess"){var v=f[d];Array.isArray(v)?v.forEach(function(p){d==="bpmn:subProcess"&&h(p)}):h(v)}},function(d){var h=function(p){Object.keys(p).forEach(function(g){var y,m;if(g.includes("bpmn:")){var A={};Vn[g]&&Vn[g].in?(A=(m=(y=Vn[g]).in)===null||m===void 0?void 0:m.call(y,g,_.cloneDeep(p[g])),delete p[g]):v(p[g]);var T=void 0;(T=Reflect.ownKeys(A)).length>0&&T.forEach(function(k){Reflect.set(p,k,A[k])})}})};function v(p){i.set(p["-id"],p),Array.isArray(p)?p.forEach(function(g){v(g)}):typeof p=="object"&&h(p)}v(f[d])},function(d){if(d.indexOf("bpmn:")===0){var h=f[d];if(d==="bpmn:sequenceFlow"){var v=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];r=T4(h,v)}else{var p=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(d==="bpmn:boundaryEvent"){var g=f[d],y=function(m){var A=m["-attachedToRef"],T=i.get(A);T["-boundaryEvents"]||(T["-boundaryEvents"]=[]),T["-boundaryEvents"].push(m["-id"])};Array.isArray(g)?g.forEach(function(m){y(m)}):y(g)}n=n.concat(C4(h,p,d))}}}])}var c=function(d,h,v){Object.keys(d).forEach(function(p){var g=v?"".concat(v,".").concat(p):p;h.has(g)?delete d[p]:typeof d[p]=="object"&&c(d[p],h,g)})};return n.forEach(function(d){var h,v;if(!((h=e==null?void 0:e.mapping)===null||h===void 0)&&h.in){var p=(v=e==null?void 0:e.mapping)===null||v===void 0?void 0:v.in,g=d.type;p[g]&&(d.type=p[g])}c(d,l.in,"")}),r.forEach(function(d){var h,v;if(!((h=e==null?void 0:e.mapping)===null||h===void 0)&&h.in){var p=(v=e==null?void 0:e.mapping)===null||v===void 0?void 0:v.in,g=d.type;p[g]&&(d.type=p[g])}c(d,l.in,"")}),{nodes:n,edges:r}}function C4(t,e,n){var r=[];if(Array.isArray(t))t.forEach(function(a){var s;Array.isArray(e)?s=e.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=e;var l=T_(s,n,a);r.push(l)});else{var i=void 0;Array.isArray(e)?i=e.find(function(a){return a["-bpmnElement"]===t["-id"]}):i=e;var o=T_(i,n,t);r.push(o)}return r}function T_(t,e,n){var r=Number(t["dc:Bounds"]["-x"]),i=Number(t["dc:Bounds"]["-y"]),o=n["-children"],a=n["-name"],s=bn.shapeConfigMap.get(e);s&&(r+=s.width/2,i+=s.height/2);var l={};Object.entries(n).forEach(function(d){var h=en(d,2),v=h[0],p=h[1];A_.includes(v)||(l[v]=p)}),l=ru(l);var u;if(a&&(u={x:r,y:i,value:a},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var f=t["bpmndi:BPMNLabel"]["dc:Bounds"];u.x=Number(f["-x"])+Number(f["-width"])/2,u.y=Number(f["-y"])+Number(f["-height"])/2}var c={id:t["-bpmnElement"],type:e,x:r,y:i,properties:l};return o&&(c.children=o),u&&(c.text=u),c}function T4(t,e){var n=[];if(Array.isArray(t))t.forEach(function(i){var o;Array.isArray(e)?o=e.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=e,n.push(N_(o,i))});else{var r=void 0;Array.isArray(e)?r=e.find(function(i){return i["-bpmnElement"]===t["-id"]}):r=e,n.push(N_(r,t))}return n}function N_(t,e){var n,r=e["-name"]?"".concat(e["-name"]):"";if(r){var i=t["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;r.split(`
`).forEach(function(u){o<u.length&&(o=u.length)}),n={value:r,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a={};Object.entries(e).forEach(function(u){var f=en(u,2),c=f[0],d=f[1];A_.includes(c)||(a[c]=d)}),a=ru(a);var s=t["di:waypoint"].map(function(u){return{x:Number(u["-x"]),y:Number(u["-y"])}}),l={id:e["-id"],type:fn.FLOW,pointsList:s,sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return n&&(l.text=n),l}var bn=function(){function t(e){var n=e.lf,r=this;this.adapterOut=function(i,o){var a,s,l=ad({},r.processAttributes);w4(l,i,o);var u={"-id":"BPMNPlane_1","-bpmnElement":l["-id"]};S4(u,i);var f=r.definitionAttributes;f["bpmn:process"]=l,f["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":u};var c={"bpmn:definitions":f};if(!((a=o==null?void 0:o.mapping)===null||a===void 0)&&a.out){var d=(s=o==null?void 0:o.mapping)===null||s===void 0?void 0:s.out,h=function(v){Array.isArray(v)&&v.forEach(function(p){return h(p)}),typeof v=="object"&&Object.keys(v).forEach(function(p){var g;(g=d[p])?(v[g]=_.cloneDeep(v[p]),delete v[p],h(v[g])):h(v[p])})};h(c)}return c},this.adapterIn=function(i,o){if(i)return A4(i,o)},n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return t.prototype.setCustomShape=function(e,n){t.shapeConfigMap.set(e,n)},t.pluginName="bpmn-adapter",t.shapeConfigMap=new Map,t}();bn.shapeConfigMap.set(fn.START,{width:h_.width,height:h_.height}),bn.shapeConfigMap.set(fn.END,{width:p_.width,height:p_.height}),bn.shapeConfigMap.set(fn.INTERMEDIATE_CATCH,{width:Ql.width,height:Ql.height}),bn.shapeConfigMap.set(fn.INTERMEDIATE_THROW,{width:Ql.width,height:Ql.height}),bn.shapeConfigMap.set(fn.BOUNDARY,{width:v_.width,height:v_.height}),bn.shapeConfigMap.set(fn.PARALLEL_GATEWAY,{width:g_.width,height:g_.height}),bn.shapeConfigMap.set(fn.INCLUSIVE_GATEWAY,{width:y_.width,height:y_.height}),bn.shapeConfigMap.set(fn.EXCLUSIVE_GATEWAY,{width:m_.width,height:m_.height}),bn.shapeConfigMap.set(fn.SYSTEM,{width:__.width,height:__.height}),bn.shapeConfigMap.set(fn.USER,{width:b_.width,height:b_.height}),bn.shapeConfigMap.set(fn.SUBPROCESS,{width:x_.width,height:x_.height});var N4=function(t){b4(e,t);function e(n){var r=t.call(this,n)||this;r.adapterXmlIn=function(a){var s=y4(a);return r.adapterIn(s,r.props)},r.adapterXmlOut=function(a){var s=r.adapterOut(a,r.props);return _4(s)};var i=n.lf,o=n.props;return i.adapterIn=r.adapterXmlIn,i.adapterOut=r.adapterXmlOut,r.props=o,r}return e.pluginName="BPMNAdapter",e}(bn),M_=function(){return M_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},M_.apply(this,arguments)};function M4(t,e,n){var r=e.x,i=e.y,o=t.x,a=t.y,s=o-r,l=a-i,u=s*Math.cos(n)-l*Math.sin(n),f=s*Math.sin(n)+l*Math.cos(n),c=u+r,d=f+i;return{x:c,y:d}}var P4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iu=function(){return iu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},iu.apply(this,arguments)},D4=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},R4=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};(function(t){P4(e,t);function e(){var n=t.apply(this,R4([],D4(arguments),!1))||this;return n.childrenPositionMap=new Map,n.onNodeRotate=function(r){var i=r.model,o=n.props,a=o.model,s=o.graphModel,l=a.transformWithContainer,u=a.isRestrict,f=n.childrenPositionMap;if(!(!l||u)&&i.id===a.id){var c={x:a.x,y:a.y};at(Array.from(a.children),function(d){var h=s.getNodeModelById(d);if(h){var v={x:h.x,y:h.y};f.has(h.id)?v=f.get(h.id):f.set(h.id,v);var p=i.rotate*(180/Math.PI);p<0&&(p+=360);var g=p*(Math.PI/180),y=M4(v,c,g);h.moveTo(y.x,y.y),h.rotate=i.rotate}})}},n.onNodeResize=function(r){var i=r.deltaX,o=r.deltaY,a=r.index,s=r.model,l=r.preData,u=n.props,f=u.model,c=u.graphModel,d=f.transformWithContainer,h=f.isRestrict;if(!(!d||h)&&s.id===f.id){var v=l.properties,p=v||{},g=p.width,y=p.height;at(Array.from(f.children),function(m){var A=c.getNodeModelById(m);if(A){var T=A.width/g*i,k=A.height/y*o;sm({deltaX:T,deltaY:k,index:a,nodeModel:A,graphModel:c,cancelCallback:function(){}})}})}},n.onNodeMouseMove=function(){},n.graphRendered=function(){var r=n.props.model;r.isCollapsed&&r.toggleCollapse(!0)},n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var n=this.props.graphModel.eventCenter;n.on("node:rotate",this.onNodeRotate),n.on("node:resize",this.onNodeResize),n.on("node:mousemove",this.onNodeMouseMove),n.on("graph:rendered",this.graphRendered)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this);var n=this.props.graphModel.eventCenter;n.off("node:rotate",this.onNodeRotate),n.off("node:resize",this.onNodeResize),n.off("node:mousemove",this.onNodeMouseMove),n.off("graph:rendered",this.graphRendered)},e.prototype.getNodesInGroup=function(n,r){var i=this,o=[];return n.isGroup&&at(Array.from(n.children),function(a){o.push(a);var s=r.getNodeModelById(a);s!=null&&s.isGroup&&(o=o.concat(i.getNodesInGroup(s,r)))}),o},e.prototype.getResizeControl=function(){var n=this.props.model,r=n.resizable,i=n.isCollapsed,o=r&&!i;return o?t.prototype.getResizeControl.call(this):null},e.prototype.getAppendAreaShape=function(){var n=this.props.model,r=n.width,i=n.height,o=n.x,a=n.y,s=n.radius,l=n.groupAddable;if(!l)return null;var u=n.getNodeStyle().strokeWidth,f=u===void 0?0:u,c=n.getAddableOutlineStyle(),d=r+f+8,h=i+f+8;return ae("rect",iu(iu({},c),{width:d,height:h,x:o-d/2,y:a-h/2,rx:s,ry:s}))},e.prototype.getCollapseIcon=function(n,r){return"M ".concat(n+3,",").concat(r+6," ").concat(n+11,",").concat(r+6," M").concat(n+7,",").concat(r+2," ").concat(n+7,",").concat(r+10)},e.prototype.getExpandIcon=function(n,r){return"M ".concat(n+3,",").concat(r+6," ").concat(n+11,",").concat(r+6," ")},e.prototype.getOperateIcon=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=r-o/2+10,l=i-a/2+10;if(!n.collapsible)return null;var u=n!=null&&n.isCollapsed?this.getCollapseIcon(s,l):this.getExpandIcon(s,l),f=ae("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:u});return ae("g",{},[ae("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#f4f5f6",stroke:"#cecece",cursor:"pointer",x:s,y:l,onClick:function(){n.toggleCollapse(!n.isCollapsed)}}),f])},e.prototype.getShape=function(){return ae("g",{},[this.getAppendAreaShape(),t.prototype.getShape.call(this),this.getOperateIcon()])},e})(pr);var L4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ou=function(){return ou=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ou.apply(this,arguments)},ld=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},ko=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},$a=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},I4=400,j4=230,k4=80,B4=60,F4=-1e4;(function(t){L4(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.isGroup=!0,i.isRestrict=!1,i.autoResize=!1,i.collapsible=!0,i.isCollapsed=!1,i.groupAddable=!1,i.transformWithContainer=!1,i.childrenLastCollapseStateDict=new Map,i.childrenLastCollapseStateDict=new Map,i.initNodeData(n),i.setAttributes(),i}return e.prototype.initNodeData=function(n){var r;t.prototype.initNodeData.call(this,n);var i=(r=n.properties)!==null&&r!==void 0?r:{},o=i.children,a=i.width,s=i.height,l=i.collapsedWidth,u=i.collapsedHeight,f=i.collapsible,c=i.isCollapsed,d=i.zIndex,h=i.isRestrict,v=i.autoResize,p=i.autoToFront,g=i.transformWithContainer;this.children=o?new Set(o):new Set,this.zIndex=d??F4,this.isCollapsed=c??!1;var y=a??I4,m=s??j4;this.width=y,this.height=m,this.expandWidth=y,this.expandHeight=m,this.collapsedWidth=l??k4,this.collapsedHeight=u??B4,this.isRestrict=h??!1,this.transformWithContainer=g??!1,this.autoResize=v??!1,this.collapsible=f??!0,this.autoToFront=p??!1,this.text.editable=!1,this.text.draggable=!1},e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this)},e.prototype.getData=function(){var n=this,r=t.prototype.getData.call(this),i=[];return at(Array.from(this.children),function(o){var a=n.graphModel.getNodeModelById(o);a&&!a.virtual&&i.push(o)}),r.children=i,r.properties&&(r.properties.children=i,r.properties.isCollapsed=this.isCollapsed),r},e.prototype.getNodesInGroup=function(n){var r=[];return n.isGroup&&at(Array.from(n.children),function(i){r.push(i)}),r},e.prototype.getMoveDistance=function(n,r,i){i===void 0&&(i=!1);var o=ko(t.prototype.getMoveDistance.call(this,n,r,i),2),a=o[0],s=o[1],l=this.getNodesInGroup(this);return this.graphModel.moveNodes(l,n,r,i),[a,s]},e.prototype.getHistoryData=function(){var n=t.prototype.getHistoryData.call(this);n.children=Array.from(this.children),n.isGroup=!0;var r=this,i=r.x,o=r.y,a=r.collapsedWidth,s=r.collapsedHeight,l=r.expandWidth,u=r.expandHeight,f=r.isCollapsed;return f&&(n.x=i+l/2-a/2,n.y=o+u/2-s/2,n.text&&(n.text.x=n.text.x+l/2-a/2,n.text.y=n.text.y+u/2-s/2)),n},e.prototype.toggleCollapse=function(n){var r=this,i=!!n;this.isCollapsed=i,i?this.collapse():this.expand();var o=$a($a([],ko(this.incoming.edges),!1),ko(this.outgoing.edges),!1),a=Array.from(this.children);at(a,function(s){var l,u,f=r.graphModel.elementsModelMap.get(s);if(f){var c=f.isCollapsed;if(f.isGroup){var d=f;if(d.isCollapsed||d.toggleCollapse(n),!n){var h=(l=r.childrenLastCollapseStateDict)===null||l===void 0?void 0:l.get(s);h!==void 0&&h!==f.isCollapsed&&d.toggleCollapse(h)}}if((u=r.childrenLastCollapseStateDict)===null||u===void 0||u.set(s,!!c),f.visible=!n,f.BaseType===Ct.NODE){var v=f.incoming.edges,p=f.outgoing.edges;o=$a($a($a([],ko(o),!1),ko(v),!1),ko(p),!1)}}}),this.collapseEdge(i,o)},e.prototype.collapse=function(){var n=this,r=n.x,i=n.y,o=n.text,a=n.width,s=n.height,l=n.collapsedWidth,u=n.collapsedHeight;this.x=r-a/2+l/2,this.y=i-s/2+u/2,this.text.x=o.x-a/2+l/2,this.text.y=o.y-s/2+u/2,this.expandWidth=a,this.expandHeight=s,this.width=l,this.height=u},e.prototype.expand=function(){var n=this,r=n.x,i=n.y,o=n.text,a=n.expandWidth,s=n.expandHeight,l=n.collapsedWidth,u=n.collapsedHeight;this.width=a,this.height=s,this.x=r+this.width/2-l/2,this.y=i+this.height/2-u/2,this.text.x=o.x+this.width/2-l/2,this.text.y=o.y+this.height/2-u/2},e.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var r=this.graphModel.addEdge(n);r.virtual=!0,r.text.editable=!1,r.isCollapsedEdge=!0},e.prototype.collapseEdge=function(n,r){var i=this,o=this.graphModel;at(r,function(a,s){var l,u=a.getData(),f=u.targetNodeId,c=u.sourceNodeId,d=ou(ou({},u),{id:"".concat(u.id,"__").concat(s),text:(l=u.text)===null||l===void 0?void 0:l.value});a.virtual&&o.deleteEdgeById(a.id);var h=o.dynamicGroup.getGroupByNodeId(f);h||(h=o.getNodeModelById(f));var v=o.dynamicGroup.getGroupByNodeId(c);v||(v=o.getNodeModelById(c)),n&&a.visible&&(i.children.has(c)||i.id===c?(d.startPoint=void 0,d.sourceNodeId=i.id):(d.endPoint=void 0,d.targetNodeId=i.id),(h.id!==i.id||v.id!==i.id)&&i.createVirtualEdge(d),a.visible=!1),!n&&!a.visible&&(h&&h.isGroup&&h.isCollapsed?(d.targetNodeId=h.id,d.endPoint=void 0,i.createVirtualEdge(d)):v&&v.isGroup&&v.isCollapsed?(d.sourceNodeId=v.id,d.startPoint=void 0,i.createVirtualEdge(d)):a.visible=!0)})},e.prototype.isAllowAppendIn=function(n){return!0},e.prototype.setAllowAppendChild=function(n){this.groupAddable=n},e.prototype.addChild=function(n){this.children.add(n);var r=this.getData();this.graphModel.eventCenter.emit("group:add-node",{data:r})},e.prototype.removeChild=function(n){this.children.delete(n);var r=this.getData();this.graphModel.eventCenter.emit("group:remove-node",{data:r})},e.prototype.toBack=function(){this.zIndex--},e.prototype.getResizeOutlineStyle=function(){var n=t.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},e.prototype.getAnchorStyle=function(){var n=t.prototype.getAnchorStyle.call(this);return n.stroke="transparent",n.fill="transparent",n.hover&&(n.hover.fill="transparent",n.hover.stroke="transparent"),n},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#feb663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},ld([$],e.prototype,"isCollapsed",void 0),ld([$],e.prototype,"groupAddable",void 0),ld([$],e.prototype,"transformWithContainer",void 0),e})(Cr);var P_=function(){return P_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},P_.apply(this,arguments)},D_;(function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"})(D_||(D_={}));var $4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ha=function(){return Ha=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ha.apply(this,arguments)},H4=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},W4=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},z4=function(t){$4(e,t);function e(n){var r=t.call(this,n)||this;r.textRef=Qa(),r.setHoverOn=function(){var l=r.props.element;l.isDragging||r.state.isHovered||(r.setState({isHovered:!0}),l.setHovered(!0))},r.setHoverOff=function(){var l=r.props.element;r.state.isHovered&&(r.setState({isHovered:!1}),l.setHovered(!1))},r.handleMouseDown=function(l){var u,f=r.props,c=f.label,d=f.graphModel,h=d.editConfigModel.nodeTextDraggable;((u=c.draggable)!==null&&u!==void 0?u:h)&&!r.state.isDragging&&!r.state.isEditing&&r.stepDrag.handleMouseDown(l)},r.handleMouseUp=function(l){r.state.isDragging&&r.stepDrag.handleMouseUp(l)},r.handleDragging=function(l){var u=l.deltaX,f=l.deltaY;r.state.isDragging||r.setState({isDragging:!0});var c=r.props,d=c.label,h=c.graphModel,v=h.transformModel,p=W4(v.fixDeltaXY(u,f),2),g=p[0],y=p[1];r.setElementModelLabelInfo({x:d.x+g,y:d.y+y}),h.eventCenter.emit("label:drag",{data:d.getData(),model:d})},r.handleDragEnd=function(){r.setState({isDragging:!1})},r.handleClick=function(l){var u=r.props,f=u.label,c=u.element,d=u.graphModel;c.setSelected(!r.state.isSelected),r.setState({isSelected:!r.state.isSelected}),r.setElementModelLabelInfo({isSelected:!0}),d.eventCenter.emit("label:click",{data:f.getData(),e:l,model:c})},r.handleDbClick=function(l){var u=r.props,f=u.label,c=u.element,d=u.graphModel;if(d.eventCenter.emit("label:dblclick",{data:f.getData(),e:l,model:c}),!f.editable){c.setSelected(!0);return}if(c.setSelected(),c.setElementState(Qe.TEXT_EDIT),r.setState({isEditing:!0}),r.textRef.current){r.textRef.current.contentEditable="true",r.textRef.current.focus();var h=document.createRange(),v=window.getSelection();h.selectNodeContents(r.textRef.current),h.collapse(!1),v==null||v.removeAllRanges(),v==null||v.addRange(h)}},r.handleBlur=function(l){var u=r.props,f=u.label,c=u.element,d=u.graphModel.eventCenter;d.emit("label:blur",{e:l,model:c,data:f.getData(),element:r.textRef.current}),r.setState({isDragging:!1,isHovered:!1,isSelected:!1})},r.handleInput=function(l){var u=r.props,f=u.label,c=u.graphModel;c.eventCenter.emit("label:input",{e:l,data:f.getData()})},r.reCalcLabelSize=function(){};var i=n.label,o=n.graphModel,a=o.gridSize,s=o.eventCenter;return r.stepDrag=new Xn({onDragging:r.handleDragging,onDragEnd:r.handleDragEnd,step:a,eventType:"LABEL",model:i,eventCenter:s}),r.state={isEditing:!1,isHovered:!1,isDragging:!1,isSelected:!1},r}return e.prototype.setElementModelLabelInfo=function(n){var r=this.props,i=r.label,o=r.element,a=r.graphModel,s=o.properties._label,l=s,u=Lf(l,function(d){return d.id===i.id}),f=l[u];l[u]=Ha(Ha({},f),n);var c=a.getElement(o.id);c==null||c.setProperty("_label",l)},e.prototype.componentDidMount=function(){var n=this,r=this.props,i=r.label,o=r.element,a=r.graphModel;a.eventCenter.on("blank:click,node:click,edge:click,label:click",function(s){var l,u,f,c,d=s.data;if(((d==null?void 0:d.type)!=="label"||d.type==="label"&&d.id!==i.id||n.state.isSelected)&&n.setState({isSelected:!1}),((d==null?void 0:d.type)!=="label"||d.type=="label"&&d.id!==i.id)&&n.state.isEditing){n.setState({isEditing:!1});var h=(u=(l=n.textRef.current)===null||l===void 0?void 0:l.innerText)!==null&&u!==void 0?u:"",v=(c=(f=n.textRef.current)===null||f===void 0?void 0:f.innerHTML)!==null&&c!==void 0?c:"";n.setElementModelLabelInfo({value:h,content:v,isSelected:!1}),o.setElementState(Qe.DEFAULT)}((d==null?void 0:d.type)!=="label"||d.type=="label"&&d.id!==i.id)&&n.textRef.current&&(n.textRef.current.contentEditable="false")})},e.prototype.componentDidUpdate=function(){},e.prototype.componentWillUnmount=function(){var n=this.props.graphModel;n.eventCenter.off("blank:click,node:click,edge:click")},e.prototype.render=function(){var n,r=this.props,i=r.label,o=r.element,a=r.graphModel,s=this.state,l=s.isDragging,u=s.isHovered,f=s.isSelected,c=s.isEditing,d=a.transformModel,h=d.getTransformStyle().transform,v=i.id,p=i.x,g=i.y,y=i.zIndex,m=i.vertical,A=i.style,T=i.rotate,k=i.content,C=i.labelWidth,S=i.textOverflowMode,I=C??(o.BaseType==="node"?o.width-20:80),X={left:"".concat(p-I/2,"px"),top:"".concat(g-10,"px"),width:"".concat(I,"px"),height:"20px",zIndex:y??1,transform:T?"".concat(h," rotate(").concat(T,"deg)"):"".concat(h," rotate(").concat(m?-.25:0,"turn)")};return B("div",{id:"element-container-".concat(v),className:Lc("lf-label-editor-container"),style:X,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onDblClick:this.handleDbClick,onBlur:this.handleBlur,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,children:B("div",{ref:this.textRef,id:"editor-container-".concat(v),className:Lc("lf-label-editor",(n={"lf-label-editor-dragging":l,"lf-label-editor-editing":c,"lf-label-editor-hover":!c&&(u||f)},n["lf-label-editor-".concat(S)]=!c,n)),onInput:this.handleInput,style:Ha({maxWidth:"".concat(I,"px"),boxSizing:"border-box",display:"inline-block",background:c||o.BaseType==="edge"?"#fff":"transparent"},A),dangerouslySetInnerHTML:{__html:k}})})},e=H4([sn],e),e}(Ge),Kn=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},X4=fi,G4=function(){function t(e,n,r){var i;this.type="label",this.content="",this.value="",this.style={},this.vertical=!1,this.editable=!0,this.draggable=!0,this.textOverflowMode="default",this.element=n,this.graphModel=r,this.id=(i=e.id)!==null&&i!==void 0?i:X4(),this.initLabelData(e)}return t.prototype.initLabelData=function(e){lt(this,e)},t.prototype.getData=function(){return{id:this.id,x:this.x,y:this.y,type:"label",content:this.content,value:this.value,rotate:this.rotate,style:tr(this.style),draggable:this.draggable,editable:this.editable,labelWidth:this.labelWidth,textOverflowMode:this.textOverflowMode,vertical:this.vertical}},Kn([$],t.prototype,"x",void 0),Kn([$],t.prototype,"y",void 0),Kn([$],t.prototype,"content",void 0),Kn([$],t.prototype,"value",void 0),Kn([$],t.prototype,"rotate",void 0),Kn([$],t.prototype,"style",void 0),Kn([$],t.prototype,"zIndex",void 0),Kn([$],t.prototype,"vertical",void 0),Kn([$],t.prototype,"editable",void 0),Kn([$],t.prototype,"draggable",void 0),Kn([$],t.prototype,"labelWidth",void 0),Kn([$],t.prototype,"textOverflowMode",void 0),t}(),au={exports:{}},ud=au.exports,R_;function U4(){return R_||(R_=1,function(t){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"classList"in document.createElement("_")||function(e){if("Element"in e){var n="classList",r="prototype",i=e.Element[r],o=Object,a=String[r].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[r].indexOf||function(v){for(var p=0,g=this.length;p<g;p++)if(p in this&&this[p]===v)return p;return-1},l=function(v,p){this.name=v,this.code=DOMException[v],this.message=p},u=function(v,p){if(p==="")throw new l("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(p))throw new l("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(v,p)},f=function(v){for(var p=a.call(v.getAttribute("class")||""),g=p?p.split(/\s+/):[],y=0,m=g.length;y<m;y++)this.push(g[y]);this._updateClassName=function(){v.setAttribute("class",this.toString())}},c=f[r]=[],d=function(){return new f(this)};if(l[r]=Error[r],c.item=function(v){return this[v]||null},c.contains=function(v){return v+="",u(this,v)!==-1},c.add=function(){var v=arguments,p=0,g=v.length,y,m=!1;do y=v[p]+"",u(this,y)===-1&&(this.push(y),m=!0);while(++p<g);m&&this._updateClassName()},c.remove=function(){var v=arguments,p=0,g=v.length,y,m=!1,A;do for(y=v[p]+"",A=u(this,y);A!==-1;)this.splice(A,1),m=!0,A=u(this,y);while(++p<g);m&&this._updateClassName()},c.toggle=function(v,p){v+="";var g=this.contains(v),y=g?p!==!0&&"remove":p!==!1&&"add";return y&&this[y](v),p===!0||p===!1?p:!g},c.toString=function(){return this.join(" ")},o.defineProperty){var h={get:d,enumerable:!0,configurable:!0};try{o.defineProperty(i,n,h)}catch(v){v.number===-2146823252&&(h.enumerable=!1,o.defineProperty(i,n,h))}}else o[r].__defineGetter__&&i.__defineGetter__(n,d)}}(self);/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{new Blob;return}catch{}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(i){var o=function(S){return Object.prototype.toString.call(S).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},s=function(I,X,Q){this.data=I,this.size=I.length,this.type=X,this.encoding=Q},l=a.prototype,u=s.prototype,f=i.FileReaderSync,c=function(S){this.code=this[this.name=S]},d="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=d.length,v=i.URL||i.webkitURL||i,p=v.createObjectURL,g=v.revokeObjectURL,y=v,m=i.btoa,A=i.atob,T=i.ArrayBuffer,k=i.Uint8Array,C=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(s.fake=u.fake=!0;h--;)c.prototype[d[h]]=h+1;return v.createObjectURL||(y=i.URL=function(S){var I=document.createElementNS("http://www.w3.org/1999/xhtml","a"),X;return I.href=S,"origin"in I||(I.protocol.toLowerCase()==="data:"?I.origin=null:(X=S.match(C),I.origin=X&&X[1])),I}),y.createObjectURL=function(S){var I=S.type,X;if(I===null&&(I="application/octet-stream"),S instanceof s)return X="data:"+I,S.encoding==="base64"?X+";base64,"+S.data:S.encoding==="URI"?X+","+decodeURIComponent(S.data):m?X+";base64,"+m(S.data):X+","+encodeURIComponent(S.data);if(p)return p.call(v,S)},y.revokeObjectURL=function(S){S.substring(0,5)!=="data:"&&g&&g.call(v,S)},l.append=function(S){var I=this.data;if(k&&(S instanceof T||S instanceof k)){for(var X="",Q=new k(S),ue=0,he=Q.length;ue<he;ue++)X+=String.fromCharCode(Q[ue]);I.push(X)}else if(o(S)==="Blob"||o(S)==="File")if(f){var w=new f;I.push(w.readAsBinaryString(S))}else throw new c("NOT_READABLE_ERR");else S instanceof s?S.encoding==="base64"&&A?I.push(A(S.data)):S.encoding==="URI"?I.push(decodeURIComponent(S.data)):S.encoding==="raw"&&I.push(S.data):(typeof S!="string"&&(S+=""),I.push(unescape(encodeURIComponent(S))))},l.getBlob=function(S){return arguments.length||(S=null),new s(this.data.join(""),S,"raw")},l.toString=function(){return"[object BlobBuilder]"},u.slice=function(S,I,X){var Q=arguments.length;return Q<3&&(X=null),new s(this.data.slice(S,Q>1?I:this.data.length),X,this.encoding)},u.toString=function(){return"[object Blob]"},u.close=function(){this.size=0,delete this.data},a}(e);e.Blob=function(i,o){var a=o&&o.type||"",s=new n;if(i)for(var l=0,u=i.length;l<u;l++)Uint8Array&&i[l]instanceof Uint8Array?s.append(i[l].buffer):s.append(i[l]);var f=s.getBlob(a);return!f.slice&&f.webkitSlice&&(f.slice=f.webkitSlice),f};var r=Object.getPrototypeOf||function(i){return i.__proto__};e.Blob.prototype=r(new e.Blob)})(typeof self<"u"&&self||typeof window<"u"&&window||ud.content||ud),function(e,n){var r=typeof process<"u"&&process&&process.versions&&process.versions.electron;r?e.MediumEditor=n:t.exports=n}(ud,function(){function e(n,r){return this.init(n,r)}return e.extensions={},function(n){function r(l,u){var f,c=Array.prototype.slice.call(arguments,2);u=u||{};for(var d=0;d<c.length;d++){var h=c[d];if(h)for(f in h)h.hasOwnProperty(f)&&typeof h[f]<"u"&&(l||u.hasOwnProperty(f)===!1)&&(u[f]=h[f])}return u}var i=!1;try{var o=document.createElement("div"),a=document.createTextNode(" ");o.appendChild(a),i=o.contains(a)}catch{}var s={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:n.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(l){return!!(s.isMac&&l.metaKey||!s.isMac&&l.ctrlKey)},isKey:function(l,u){var f=s.getKeyCode(l);return Array.isArray(u)===!1?f===u:u.indexOf(f)!==-1},getKeyCode:function(l){var u=l.which;return u===null&&(u=l.charCode!==null?l.charCode:l.keyCode),u},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var u=[!0].concat(Array.prototype.slice.call(arguments));return r.apply(this,u)},defaults:function(){var u=[!1].concat(Array.prototype.slice.call(arguments));return r.apply(this,u)},createLink:function(l,u,f,c){var d=l.createElement("a");return s.moveTextRangeIntoElement(u[0],u[u.length-1],d),d.setAttribute("href",f),c&&(c==="_blank"&&d.setAttribute("rel","noopener noreferrer"),d.setAttribute("target",c)),d},findOrCreateMatchingTextNodes:function(l,u,f){for(var c=l.createTreeWalker(u,NodeFilter.SHOW_ALL,null,!1),d=[],h=0,v=!1,p=null,g=null;(p=c.nextNode())!==null;)if(!(p.nodeType>3))if(p.nodeType===3){if(!v&&f.start<h+p.nodeValue.length&&(v=!0,g=s.splitStartNodeIfNeeded(p,f.start,h)),v&&s.splitEndNodeIfNeeded(p,g,f.end,h),v&&h===f.end)break;if(v&&h>f.end+1)throw new Error("PerformLinking overshot the target!");v&&d.push(g||p),h+=p.nodeValue.length,g!==null&&(h+=g.nodeValue.length,c.nextNode()),g=null}else p.tagName.toLowerCase()==="img"&&(!v&&f.start<=h&&(v=!0),v&&d.push(p));return d},splitStartNodeIfNeeded:function(l,u,f){return u!==f?l.splitText(u-f):null},splitEndNodeIfNeeded:function(l,u,f,c){var d,h;d=c+l.nodeValue.length+(u?u.nodeValue.length:0)-1,h=f-c-(u?l.nodeValue.length:0),d>=f&&c!==d&&h!==0&&(u||l).splitText(h)},splitByBlockElements:function(l){if(l.nodeType!==3&&l.nodeType!==1)return[];var u=[],f=e.util.blockContainerElementNames.join(",");if(l.nodeType===3||l.querySelectorAll(f).length===0)return[l];for(var c=0;c<l.childNodes.length;c++){var d=l.childNodes[c];if(d.nodeType===3)u.push(d);else if(d.nodeType===1){var h=d.querySelectorAll(f);h.length===0?u.push(d):u=u.concat(e.util.splitByBlockElements(d))}}return u},findAdjacentTextNodeWithContent:function(u,f,c){var d=!1,h,v=c.createNodeIterator(u,NodeFilter.SHOW_TEXT,null,!1);for(h=v.nextNode();h;){if(h===f)d=!0;else if(d&&h.nodeType===3&&h.nodeValue&&h.nodeValue.trim().length>0)break;h=v.nextNode()}return h},findPreviousSibling:function(l){if(!l||s.isMediumEditorElement(l))return!1;for(var u=l.previousSibling;!u&&!s.isMediumEditorElement(l.parentNode);)l=l.parentNode,u=l.previousSibling;return u},isDescendant:function(u,f,c){if(!u||!f)return!1;if(u===f)return!!c;if(u.nodeType!==1)return!1;if(i||f.nodeType!==3)return u.contains(f);for(var d=f.parentNode;d!==null;){if(d===u)return!0;d=d.parentNode}return!1},isElement:function(u){return!!(u&&u.nodeType===1)},throttle:function(l,u){var f=50,c,d,h,v=null,p=0,g=function(){p=Date.now(),v=null,h=l.apply(c,d),v||(c=d=null)};return!u&&u!==0&&(u=f),function(){var y=Date.now(),m=u-(y-p);return c=this,d=arguments,m<=0||m>u?(v&&(clearTimeout(v),v=null),p=y,h=l.apply(c,d),v||(c=d=null)):v||(v=setTimeout(g,m)),h}},traverseUp:function(l,u){if(!l)return!1;do{if(l.nodeType===1){if(u(l))return l;if(s.isMediumEditorElement(l))return!1}l=l.parentNode}while(l);return!1},htmlEntities:function(l){return String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(l,u){var f,c,d,h,v,p,g,y=!1,m=["insertHTML",!1,u];if(!e.util.isEdge&&l.queryCommandSupported("insertHTML"))try{return l.execCommand.apply(l,m)}catch{}if(f=l.getSelection(),f.rangeCount){if(c=f.getRangeAt(0),g=c.commonAncestorContainer,s.isMediumEditorElement(g)&&!g.firstChild)c.selectNode(g.appendChild(l.createTextNode("")));else if(g.nodeType===3&&c.startOffset===0&&c.endOffset===g.nodeValue.length||g.nodeType!==3&&g.innerHTML===c.toString()){for(;!s.isMediumEditorElement(g)&&g.parentNode&&g.parentNode.childNodes.length===1&&!s.isMediumEditorElement(g.parentNode);)g=g.parentNode;c.selectNode(g)}for(c.deleteContents(),d=l.createElement("div"),d.innerHTML=u,h=l.createDocumentFragment();d.firstChild;)v=d.firstChild,p=h.appendChild(v);c.insertNode(h),p&&(c=c.cloneRange(),c.setStartAfter(p),c.collapse(!0),e.selection.selectRange(l,c)),y=!0}return l.execCommand.callListeners&&l.execCommand.callListeners(m,y),y},execFormatBlock:function(l,u){var f=s.getTopBlockContainer(e.selection.getSelectionStart(l)),c;if(u==="blockquote"){if(f&&(c=Array.prototype.slice.call(f.childNodes),c.some(function(d){return s.isBlockContainer(d)})))return l.execCommand("outdent",!1,null);if(s.isIE)return l.execCommand("indent",!1,u)}if(f&&u===f.nodeName.toLowerCase()&&(u="p"),s.isIE&&(u="<"+u+">"),f&&f.nodeName.toLowerCase()==="blockquote"){if(s.isIE&&u==="<p>")return l.execCommand("outdent",!1,u);if((s.isFF||s.isEdge)&&u==="p")return c=Array.prototype.slice.call(f.childNodes),c.some(function(d){return!s.isBlockContainer(d)})&&l.execCommand("formatBlock",!1,u),l.execCommand("outdent",!1,u)}return l.execCommand("formatBlock",!1,u)},setTargetBlank:function(l,u){var f,c=u||!1;if(l.nodeName.toLowerCase()==="a")l.target="_blank",l.rel="noopener noreferrer";else for(l=l.getElementsByTagName("a"),f=0;f<l.length;f+=1)(c===!1||c===l[f].attributes.href.value)&&(l[f].target="_blank",l[f].rel="noopener noreferrer")},removeTargetBlank:function(l,u){var f;if(l.nodeName.toLowerCase()==="a")l.removeAttribute("target"),l.removeAttribute("rel");else for(l=l.getElementsByTagName("a"),f=0;f<l.length;f+=1)u===l[f].attributes.href.value&&(l[f].removeAttribute("target"),l[f].removeAttribute("rel"))},addClassToAnchors:function(l,u){var f=u.split(" "),c,d;if(l.nodeName.toLowerCase()==="a")for(d=0;d<f.length;d+=1)l.classList.add(f[d]);else{var h=l.getElementsByTagName("a");if(h.length===0){var v=s.getClosestTag(l,"a");l=v?[v]:[]}else l=h;for(c=0;c<l.length;c+=1)for(d=0;d<f.length;d+=1)l[c].classList.add(f[d])}},isListItem:function(l){if(!l)return!1;if(l.nodeName.toLowerCase()==="li")return!0;for(var u=l.parentNode,f=u.nodeName.toLowerCase();f==="li"||!s.isBlockContainer(u)&&f!=="div";){if(f==="li")return!0;if(u=u.parentNode,u)f=u.nodeName.toLowerCase();else return!1}return!1},cleanListDOM:function(l,u){if(u.nodeName.toLowerCase()==="li"){var f=u.parentElement;f.parentElement.nodeName.toLowerCase()==="p"&&(s.unwrap(f.parentElement,l),e.selection.moveCursor(l,u.firstChild,u.firstChild.textContent.length))}},splitOffDOMTree:function(l,u,f){for(var c=u,d=null,h=!f;c!==l;){var v=c.parentNode,p=v.cloneNode(!1),g=h?c:v.firstChild,y;for(d&&(h?p.appendChild(d):y=d),d=p;g;){var m=g.nextSibling;g===c?(g.hasChildNodes()?g=g.cloneNode(!1):g.parentNode.removeChild(g),g.textContent&&d.appendChild(g),g=h?m:null):(g.parentNode.removeChild(g),(g.hasChildNodes()||g.textContent)&&d.appendChild(g),g=m)}y&&d.appendChild(y),c=v}return d},moveTextRangeIntoElement:function(l,u,f){if(!l||!u)return!1;var c=s.findCommonRoot(l,u);if(!c)return!1;if(u===l){var d=l.parentNode,h=l.nextSibling;return d.removeChild(l),f.appendChild(l),h?d.insertBefore(f,h):d.appendChild(f),f.hasChildNodes()}for(var v=[],p,g,y,m=0;m<c.childNodes.length;m++)if(y=c.childNodes[m],!p)s.isDescendant(y,l,!0)&&(p=y);else if(s.isDescendant(y,u,!0)){g=y;break}else v.push(y);var A=g.nextSibling,T=c.ownerDocument.createDocumentFragment();return p===l?(p.parentNode.removeChild(p),T.appendChild(p)):T.appendChild(s.splitOffDOMTree(p,l)),v.forEach(function(k){k.parentNode.removeChild(k),T.appendChild(k)}),g===u?(g.parentNode.removeChild(g),T.appendChild(g)):T.appendChild(s.splitOffDOMTree(g,u,!0)),f.appendChild(T),g.parentNode===c?c.insertBefore(f,g):A?c.insertBefore(f,A):c.appendChild(f),f.hasChildNodes()},depthOfNode:function(l){for(var u=0,f=l;f.parentNode!==null;)f=f.parentNode,u++;return u},findCommonRoot:function(l,u){for(var f=s.depthOfNode(l),c=s.depthOfNode(u),d=l,h=u;f!==c;)f>c?(d=d.parentNode,f-=1):(h=h.parentNode,c-=1);for(;d!==h;)d=d.parentNode,h=h.parentNode;return d},isElementAtBeginningOfBlock:function(l){for(var u,f;!s.isBlockContainer(l)&&!s.isMediumEditorElement(l);){for(f=l;f=f.previousSibling;)if(u=f.nodeType===3?f.nodeValue:f.textContent,u.length>0)return!1;l=l.parentNode}return!0},isMediumEditorElement:function(l){return l&&l.getAttribute&&!!l.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(l){return s.traverseUp(l,function(u){return s.isMediumEditorElement(u)})},isBlockContainer:function(l){return l&&l.nodeType!==3&&s.blockContainerElementNames.indexOf(l.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(l){return s.traverseUp(l,function(u){return s.isBlockContainer(u)||s.isMediumEditorElement(u)})},getTopBlockContainer:function(l){var u=s.isBlockContainer(l)?l:!1;return s.traverseUp(l,function(f){return s.isBlockContainer(f)&&(u=f),!u&&s.isMediumEditorElement(f)?(u=f,!0):!1}),u},getFirstSelectableLeafNode:function(l){for(;l&&l.firstChild;)l=l.firstChild;if(l=s.traverseUp(l,function(f){return s.emptyElementNames.indexOf(f.nodeName.toLowerCase())===-1}),l.nodeName.toLowerCase()==="table"){var u=l.querySelector("th, td");u&&(l=u)}return l},getFirstTextNode:function(l){return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),s._getFirstTextNode(l)},_getFirstTextNode:function(l){if(l.nodeType===3)return l;for(var u=0;u<l.childNodes.length;u++){var f=s._getFirstTextNode(l.childNodes[u]);if(f!==null)return f}return null},ensureUrlHasProtocol:function(l){return l.indexOf("://")===-1?"http://"+l:l},warn:function(){n.console!==void 0&&typeof n.console.warn=="function"&&n.console.warn.apply(n.console,arguments)},deprecated:function(l,u,f){var c=l+" is deprecated, please use "+u+" instead.";f&&(c+=" Will be removed in "+f),s.warn(c)},deprecatedMethod:function(l,u,f,c){s.deprecated(l,u,c),typeof this[u]=="function"&&this[u].apply(this,f)},cleanupAttrs:function(l,u){u.forEach(function(f){l.removeAttribute(f)})},cleanupTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&l.parentNode.removeChild(l)},unwrapTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&e.util.unwrap(l,document)},getClosestTag:function(l,u){return s.traverseUp(l,function(f){return f.nodeName.toLowerCase()===u.toLowerCase()})},unwrap:function(l,u){for(var f=u.createDocumentFragment(),c=Array.prototype.slice.call(l.childNodes),d=0;d<c.length;d++)f.appendChild(c[d]);f.childNodes.length?l.parentNode.replaceChild(f,l):l.parentNode.removeChild(l)},guid:function(){function l(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()}};e.util=s}(window),function(){var n=function(r){e.util.extend(this,r)};n.extend=function(r){var i=this,o;r&&r.hasOwnProperty("constructor")?o=r.constructor:o=function(){return i.apply(this,arguments)},e.util.extend(o,i);var a=function(){this.constructor=o};return a.prototype=i.prototype,o.prototype=new a,r&&e.util.extend(o.prototype,r),o},n.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(r){return this.base.options[r]}},["execAction","on","off","subscribe","trigger"].forEach(function(r){n.prototype[r]=function(){return this.base[r].apply(this.base,arguments)}}),e.Extension=n}(),function(){function n(i){return e.util.isBlockContainer(i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var r={findMatchingSelectionParent:function(i,o){var a=o.getSelection(),s,l;return a.rangeCount===0?!1:(s=a.getRangeAt(0),l=s.commonAncestorContainer,e.util.traverseUp(l,i))},getSelectionElement:function(i){return this.findMatchingSelectionParent(function(o){return e.util.isMediumEditorElement(o)},i)},exportSelection:function(i,o){if(!i)return null;var a=null,s=o.getSelection();if(s.rangeCount>0){var l=s.getRangeAt(0),u=l.cloneRange(),f;u.selectNodeContents(i),u.setEnd(l.startContainer,l.startOffset),f=u.toString().length,a={start:f,end:f+l.toString().length},this.doesRangeStartWithImages(l,o)&&(a.startsWithImage=!0);var c=this.getTrailingImageCount(i,a,l.endContainer,l.endOffset);if(c&&(a.trailingImageCount=c),f!==0){var d=this.getIndexRelativeToAdjacentEmptyBlocks(o,i,l.startContainer,l.startOffset);d!==-1&&(a.emptyBlocksIndex=d)}}return a},importSelection:function(i,o,a,s){if(!(!i||!o)){var l=a.createRange();l.setStart(o,0),l.collapse(!0);var u=o,f=[],c=0,d=!1,h=!1,v=0,p=!1,g,y=!1,m=null;for((s||i.startsWithImage||typeof i.emptyBlocksIndex<"u")&&(y=!0);!p&&u;){if(u.nodeType>3){u=f.pop();continue}if(u.nodeType===3&&!h)g=c+u.length,!d&&i.start>=c&&i.start<=g&&(y||i.start<g?(l.setStart(u,i.start-c),d=!0):m=u),d&&i.end>=c&&i.end<=g&&(i.trailingImageCount?h=!0:(l.setEnd(u,i.end-c),p=!0)),c=g;else{if(i.trailingImageCount&&h&&(u.nodeName.toLowerCase()==="img"&&v++,v===i.trailingImageCount)){for(var A=0;u.parentNode.childNodes[A]!==u;)A++;l.setEnd(u.parentNode,A+1),p=!0}if(!p&&u.nodeType===1)for(var T=u.childNodes.length-1;T>=0;)f.push(u.childNodes[T]),T-=1}p||(u=f.pop())}!d&&m&&(l.setStart(m,m.length),l.setEnd(m,m.length)),typeof i.emptyBlocksIndex<"u"&&(l=this.importSelectionMoveCursorPastBlocks(a,o,i.emptyBlocksIndex,l)),s&&(l=this.importSelectionMoveCursorPastAnchor(i,l)),this.selectRange(a,l)}},importSelectionMoveCursorPastAnchor:function(i,o){var a=function(c){return c.nodeName.toLowerCase()==="a"};if(i.start===i.end&&o.startContainer.nodeType===3&&o.startOffset===o.startContainer.nodeValue.length&&e.util.traverseUp(o.startContainer,a)){for(var s=o.startContainer,l=o.startContainer.parentNode;l!==null&&l.nodeName.toLowerCase()!=="a";)l.childNodes[l.childNodes.length-1]!==s?l=null:(s=l,l=l.parentNode);if(l!==null&&l.nodeName.toLowerCase()==="a"){for(var u=null,f=0;u===null&&f<l.parentNode.childNodes.length;f++)l.parentNode.childNodes[f]===l&&(u=f);o.setStart(l.parentNode,u+1),o.collapse(!0)}}return o},importSelectionMoveCursorPastBlocks:function(i,o,a,s){var l=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,n,!1),u=s.startContainer,f,c,d=0;for(a=a||1,u.nodeType===3&&e.util.isBlockContainer(u.previousSibling)?f=u.previousSibling:f=e.util.getClosestBlockContainer(u);l.nextNode();)if(!c)f===l.currentNode&&(c=l.currentNode);else if(c=l.currentNode,d++,d===a||c.textContent.length>0)break;return c||(c=f),s.setStart(e.util.getFirstSelectableLeafNode(c),0),s},getIndexRelativeToAdjacentEmptyBlocks:function(i,o,a,s){if(a.textContent.length>0&&s>0)return-1;var l=a;if(l.nodeType!==3&&(l=a.childNodes[s]),l){if(!e.util.isElementAtBeginningOfBlock(l))return-1;var u=e.util.findPreviousSibling(l);if(u){if(u.nodeValue)return-1}else return-1}for(var f=e.util.getClosestBlockContainer(a),c=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,n,!1),d=0;c.nextNode();){var h=c.currentNode.textContent==="";if((h||d>0)&&(d+=1),c.currentNode===f)return d;h||(d=0)}return d},doesRangeStartWithImages:function(i,o){if(i.startOffset!==0||i.startContainer.nodeType!==1)return!1;if(i.startContainer.nodeName.toLowerCase()==="img")return!0;var a=i.startContainer.querySelector("img");if(!a)return!1;for(var s=o.createTreeWalker(i.startContainer,NodeFilter.SHOW_ALL,null,!1);s.nextNode();){var l=s.currentNode;if(l===a)break;if(l.nodeValue)return!1}return!0},getTrailingImageCount:function(i,o,a,s){if(s===0||a.nodeType!==1||a.nodeName.toLowerCase()!=="img"&&!a.querySelector("img"))return 0;for(var l=a.childNodes[s-1];l.hasChildNodes();)l=l.lastChild;for(var u=i,f=[],c=0,d=!1,h=!1,v=!1,p,g=0;!v&&u;){if(u.nodeType>3){u=f.pop();continue}if(u.nodeType===3&&!h)g=0,p=c+u.length,!d&&o.start>=c&&o.start<=p&&(d=!0),d&&o.end>=c&&o.end<=p&&(h=!0),c=p;else if(u.nodeName.toLowerCase()==="img"&&g++,u===l)v=!0;else if(u.nodeType===1)for(var y=u.childNodes.length-1;y>=0;)f.push(u.childNodes[y]),y-=1;v||(u=f.pop())}return g},selectionContainsContent:function(i){var o=i.getSelection();if(!o||o.isCollapsed||!o.rangeCount)return!1;if(o.toString().trim()!=="")return!0;var a=this.getSelectedParentElement(o.getRangeAt(0));return!!(a&&(a.nodeName.toLowerCase()==="img"||a.nodeType===1&&a.querySelector("img")))},selectionInContentEditableFalse:function(i){var o,a=this.findMatchingSelectionParent(function(s){var l=s&&s.getAttribute("contenteditable");return l==="true"&&(o=!0),s.nodeName!=="#text"&&l==="false"},i);return!o&&a},getSelectionHtml:function(o){var a,s="",l=o.getSelection(),u,f;if(l.rangeCount){for(f=o.createElement("div"),a=0,u=l.rangeCount;a<u;a+=1)f.appendChild(l.getRangeAt(a).cloneContents());s=f.innerHTML}return s},getCaretOffsets:function(o,a){var s,l;return a||(a=window.getSelection().getRangeAt(0)),s=a.cloneRange(),l=a.cloneRange(),s.selectNodeContents(o),s.setEnd(a.endContainer,a.endOffset),l.selectNodeContents(o),l.setStart(a.endContainer,a.endOffset),{left:s.toString().length,right:l.toString().length}},rangeSelectsSingleNode:function(i){var o=i.startContainer;return o===i.endContainer&&o.hasChildNodes()&&i.endOffset===i.startOffset+1},getSelectedParentElement:function(i){return i?this.rangeSelectsSingleNode(i)&&i.startContainer.childNodes[i.startOffset].nodeType!==3?i.startContainer.childNodes[i.startOffset]:i.startContainer.nodeType===3?i.startContainer.parentNode:i.startContainer:null},getSelectedElements:function(i){var o=i.getSelection(),a,s,l;if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(a=o.getRangeAt(0),a.commonAncestorContainer.nodeType===3){for(s=[],l=a.commonAncestorContainer;l.parentNode&&l.parentNode.childNodes.length===1;)s.push(l.parentNode),l=l.parentNode;return s}return[].filter.call(a.commonAncestorContainer.getElementsByTagName("*"),function(u){return typeof o.containsNode=="function"?o.containsNode(u,!0):!0})},selectNode:function(i,o){var a=o.createRange();a.selectNodeContents(i),this.selectRange(o,a)},select:function(i,o,a,s,l){var u=i.createRange();return u.setStart(o,a),s?u.setEnd(s,l):u.collapse(!0),this.selectRange(i,u),u},clearSelection:function(i,o){o?i.getSelection().collapseToStart():i.getSelection().collapseToEnd()},moveCursor:function(i,o,a){this.select(i,o,a)},getSelectionRange:function(i){var o=i.getSelection();return o.rangeCount===0?null:o.getRangeAt(0)},selectRange:function(i,o){var a=i.getSelection();a.removeAllRanges(),a.addRange(o)},getSelectionStart:function(i){var o=i.getSelection().anchorNode,a=o&&o.nodeType===3?o.parentNode:o;return a}};e.selection=r}(),function(){function n(i,o){return i?i.some(function(a){if(typeof a.getInteractionElements!="function")return!1;var s=a.getInteractionElements();return s?(Array.isArray(s)||(s=[s]),s.some(function(l){return e.util.isDescendant(l,o,!0)})):!1}):!1}var r=function(i){this.base=i,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};r.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(i,o,a,s){var l=this.base.options.contentWindow,u=this.base.options.ownerDocument;i=e.util.isElement(i)||[l,u].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,(function(f){f.addEventListener(o,a,s),this.events.push([f,o,a,s])}).bind(this))},detachDOMEvent:function(i,o,a,s){var l,u,f=this.base.options.contentWindow,c=this.base.options.ownerDocument;i&&(i=e.util.isElement(i)||[f,c].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,(function(d){l=this.indexOfListener(d,o,a,s),l!==-1&&(u=this.events.splice(l,1)[0],u[0].removeEventListener(u[1],u[2],u[3]))}).bind(this)))},indexOfListener:function(i,o,a,s){var l,u,f;for(l=0,u=this.events.length;l<u;l=l+1)if(f=this.events[l],f[0]===i&&f[1]===o&&f[2]===a&&f[3]===s)return l;return-1},detachAllDOMEvents:function(){for(var i=this.events.pop();i;)i[0].removeEventListener(i[1],i[2],i[3]),i=this.events.pop()},detachAllEventsFromElement:function(i){for(var o=this.events.filter(function(u){return u&&u[0].getAttribute&&u[0].getAttribute("medium-editor-index")===i.getAttribute("medium-editor-index")}),a=0,s=o.length;a<s;a++){var l=o[a];this.detachDOMEvent(l[0],l[1],l[2],l[3])}},attachAllEventsToElement:function(i){this.listeners.editableInput&&(this.contentCache[i.getAttribute("medium-editor-index")]=i.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(o){this.attachDOMEvent(i,o.name,o.handler.bind(this))},this)},enableCustomEvent:function(i){this.disabledEvents[i]!==void 0&&delete this.disabledEvents[i]},disableCustomEvent:function(i){this.disabledEvents[i]=!0},attachCustomEvent:function(i,o){this.setupListener(i),this.customEvents[i]||(this.customEvents[i]=[]),this.customEvents[i].push(o)},detachCustomEvent:function(i,o){var a=this.indexOfCustomListener(i,o);a!==-1&&this.customEvents[i].splice(a,1)},indexOfCustomListener:function(i,o){return!this.customEvents[i]||!this.customEvents[i].length?-1:this.customEvents[i].indexOf(o)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(i,o,a){this.customEvents[i]&&!this.disabledEvents[i]&&this.customEvents[i].forEach(function(s){s(o,a)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(i){i.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=(function(i){this.handleDocumentExecCommand(i)}).bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var i=this.options.ownerDocument;if(!(!this.execCommandListener||!i.execCommand.listeners)){var o=i.execCommand.listeners.indexOf(this.execCommandListener);o!==-1&&i.execCommand.listeners.splice(o,1),i.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var i=this.options.ownerDocument;if(!i.execCommand.listeners){var o=function(s,l){i.execCommand.listeners&&i.execCommand.listeners.forEach(function(u){u({command:s[0],value:s[2],args:s,result:l})})},a=function(){var s=i.execCommand.orig.apply(this,arguments);if(!i.execCommand.listeners)return s;var l=Array.prototype.slice.call(arguments);return o(l,s),s};a.orig=i.execCommand,a.listeners=[],a.callListeners=o,i.execCommand=a}},unwrapExecCommand:function(){var i=this.options.ownerDocument;i.execCommand.orig&&(i.execCommand=i.execCommand.orig)},setupListener:function(i){if(!this.listeners[i]){switch(i){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(o){this.contentCache[o.getAttribute("medium-editor-index")]=o.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[i]=!0}},attachToEachElement:function(i,o){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(a){this.attachDOMEvent(a,i,o.bind(this))},this),this.eventsCache.push({name:i,handler:o})},cleanupElement:function(i){var o=i.getAttribute("medium-editor-index");o&&(this.detachAllEventsFromElement(i),this.contentCache&&delete this.contentCache[o])},focusElement:function(i){i.focus(),this.updateFocus(i,{target:i,type:"focus"})},updateFocus:function(i,o){var a=this.base.getFocusedElement(),s;a&&o.type==="click"&&this.lastMousedownTarget&&(e.util.isDescendant(a,this.lastMousedownTarget,!0)||n(this.base.extensions,this.lastMousedownTarget))&&(s=a),s||this.base.elements.some(function(u){return!s&&e.util.isDescendant(u,i,!0)&&(s=u),!!s},this);var l=!e.util.isDescendant(a,i,!0)&&!n(this.base.extensions,i);s!==a&&(a&&l&&(a.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",o,a)),s&&(s.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",o,s))),l&&this.triggerCustomEvent("externalInteraction",o)},updateInput:function(i,o){if(this.contentCache){var a=i.getAttribute("medium-editor-index"),s=i.innerHTML;s!==this.contentCache[a]&&this.triggerCustomEvent("editableInput",o,i),this.contentCache[a]=s}},handleDocumentSelectionChange:function(i){if(i.currentTarget&&i.currentTarget.activeElement){var o=i.currentTarget.activeElement,a;this.base.elements.some(function(s){return e.util.isDescendant(s,o,!0)?(a=s,!0):!1},this),a&&this.updateInput(a,{target:o,currentTarget:a})}},handleDocumentExecCommand:function(){var i=this.base.getFocusedElement();i&&this.updateInput(i,{target:i,currentTarget:i})},handleBodyClick:function(i){this.updateFocus(i.target,i)},handleBodyFocus:function(i){this.updateFocus(i.target,i)},handleBodyMousedown:function(i){this.lastMousedownTarget=i.target},handleInput:function(i){this.updateInput(i.currentTarget,i)},handleClick:function(i){this.triggerCustomEvent("editableClick",i,i.currentTarget)},handleBlur:function(i){this.triggerCustomEvent("editableBlur",i,i.currentTarget)},handleKeypress:function(i){if(this.triggerCustomEvent("editableKeypress",i,i.currentTarget),this.keypressUpdateInput){var o={target:i.target,currentTarget:i.currentTarget};setTimeout((function(){this.updateInput(o.currentTarget,o)}).bind(this),0)}},handleKeyup:function(i){this.triggerCustomEvent("editableKeyup",i,i.currentTarget)},handleMouseover:function(i){this.triggerCustomEvent("editableMouseover",i,i.currentTarget)},handleDragging:function(i){this.triggerCustomEvent("editableDrag",i,i.currentTarget)},handleDrop:function(i){this.triggerCustomEvent("editableDrop",i,i.currentTarget)},handlePaste:function(i){this.triggerCustomEvent("editablePaste",i,i.currentTarget)},handleKeydown:function(i){if(this.triggerCustomEvent("editableKeydown",i,i.currentTarget),e.util.isKey(i,e.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.ENTER)||i.ctrlKey&&e.util.isKey(i,e.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",i,i.currentTarget);if(e.util.isKey(i,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",i,i.currentTarget)}},e.Events=r}(),function(){var n=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(r){n.isBuiltInButton(r)?e.Extension.call(this,this.defaults[r]):e.Extension.call(this,r)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action=="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria=="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames=="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var r=this.document.createElement("button"),i=this.contentDefault,o=this.getAria(),a=this.getEditorOption("buttonLabels");return r.classList.add("medium-editor-action"),r.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(s){r.classList.add(s)}),r.setAttribute("data-action",this.getAction()),o&&(r.setAttribute("title",o),r.setAttribute("aria-label",o)),this.attrs&&Object.keys(this.attrs).forEach(function(s){r.setAttribute(s,this.attrs[s])},this),a==="fontawesome"&&this.contentFA&&(i=this.contentFA),r.innerHTML=i,r},handleClick:function(r){r.preventDefault(),r.stopPropagation();var i=this.getAction();i&&this.execAction(i)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var r=null;return this.useQueryState&&(r=this.base.queryCommandState(this.getAction())),r},isAlreadyApplied:function(r){var i=!1,o=this.getTagNames(),a,s;return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&(i=o.indexOf(r.nodeName.toLowerCase())!==-1),!i&&this.style&&(a=this.style.value.split("|"),s=this.window.getComputedStyle(r,null).getPropertyValue(this.style.prop),a.forEach(function(l){this.knownState||(i=s.indexOf(l)!==-1,(i||this.style.prop!=="text-decoration")&&(this.knownState=i))},this)),i)}});n.isBuiltInButton=function(r){return typeof r=="string"&&e.extensions.button.prototype.defaults.hasOwnProperty(r)},e.extensions.button=n}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var n=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var r=this.base.getExtensionByName("toolbar");r&&r.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var r=this.base.getExtensionByName("toolbar");r&&r.hideToolbarDefaultActions()},setToolbarPosition:function(){var r=this.base.getExtensionByName("toolbar");r&&r.setToolbarPosition()}});e.extensions.form=n}(),function(){var n=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(r){r.preventDefault(),r.stopPropagation();var i=e.selection.getSelectionRange(this.document);return i.startContainer.nodeName.toLowerCase()==="a"||i.endContainer.nodeName.toLowerCase()==="a"||e.util.getClosestTag(e.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(r){e.util.isKey(r,e.util.keyCode.K)&&e.util.isMetaCtrlKey(r)&&!r.shiftKey&&this.handleClick(r)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var r=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return r.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),r.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&r.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&r.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),r.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(r){var i=this.getInput(),o=this.getAnchorTargetCheckbox(),a=this.getAnchorButtonCheckbox();if(r=r||{value:""},typeof r=="string"&&(r={value:r}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),i.value=r.value,i.focus(),o&&(o.checked=r.target==="_blank"),a){var s=r.buttonClass?r.buttonClass.split(" "):[];a.checked=s.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var r=this.getAnchorTargetCheckbox(),i=this.getAnchorButtonCheckbox(),o={value:this.getInput().value.trim()};return this.linkValidation&&(o.value=this.checkLinkFormat(o.value)),o.target="_self",r&&r.checked&&(o.target="_blank"),i&&i.checked&&(o.buttonClass=this.customClassOption),o},doFormSave:function(){var r=this.getFormOpts();this.completeFormSave(r)},completeFormSave:function(r){this.base.restoreSelection(),this.execAction(this.action,r),this.base.checkSelection()},ensureEncodedUri:function(r){return r===decodeURI(r)?encodeURI(r):r},ensureEncodedUriComponent:function(r){return r===decodeURIComponent(r)?encodeURIComponent(r):r},ensureEncodedParam:function(r){var i=r.split("="),o=i[0],a=i[1];return o+(a===void 0?"":"="+this.ensureEncodedUriComponent(a))},ensureEncodedQuery:function(r){return r.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(r){var i=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,o=i.test(r),a="",s=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,l=r.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),u=l[1],f=l[2],c=l[3];if(s.test(r))return"tel:"+r;if(!o){var d=u.split("/")[0];(d.match(/.+(\.|:).+/)||d==="localhost")&&(a="http://")}return a+this.ensureEncodedUri(u)+(f===void 0?"":"?"+this.ensureEncodedQuery(f))+(c===void 0?"":"#"+c)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(r){var i=r.querySelector(".medium-editor-toolbar-close"),o=r.querySelector(".medium-editor-toolbar-save"),a=r.querySelector(".medium-editor-toolbar-input");this.on(r,"click",this.handleFormClick.bind(this)),this.on(a,"keyup",this.handleTextboxKeyup.bind(this)),this.on(i,"click",this.handleCloseClick.bind(this)),this.on(o,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var r=this.document,i=r.createElement("div");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),i.innerHTML=this.getTemplate(),this.attachFormEvents(i),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(r){if(r.keyCode===e.util.keyCode.ENTER){r.preventDefault(),this.doFormSave();return}r.keyCode===e.util.keyCode.ESCAPE&&(r.preventDefault(),this.doFormCancel())},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.anchor=n}(),function(){var n=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var r=this.document.createElement("div");return r.id="medium-editor-anchor-preview-"+this.getEditorId(),r.className="medium-editor-anchor-preview",r.innerHTML=this.getTemplate(),this.on(r,"click",this.handleClick.bind(this)),r},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(r){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||r.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=r.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=r.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=r,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(r){r=r||this.activeAnchor;var i=this.window.innerWidth,o=this.anchorPreview.offsetHeight,a=r.getBoundingClientRect(),s=this.diffLeft,l=this.diffTop,u=this.getEditorOption("elementsContainer"),f=["absolute","fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position"))>-1,c={},d,h,v,p,g;d=this.anchorPreview.offsetWidth/2;var y=this.base.getExtensionByName("toolbar");y&&(s=y.diffLeft,l=y.diffTop),h=s-d,f?(p=u.getBoundingClientRect(),["top","left"].forEach(function(m){c[m]=a[m]-p[m]}),c.width=a.width,c.height=a.height,a=c,i=p.width,g=u.scrollTop):g=this.window.pageYOffset,v=a.left+a.width/2,g+=o+a.top+a.height-l-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(g)+"px",this.anchorPreview.style.right="initial",v<d?(this.anchorPreview.style.left=h+d+"px",this.anchorPreview.style.right="initial"):i-v<d?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=h+v+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(r){var i=this.base.getExtensionByName("anchor"),o=this.activeAnchor;i&&o&&(r.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay((function(){if(o){var a={value:o.attributes.href.value,target:o.getAttribute("target"),buttonClass:o.getAttribute("class")};i.showForm(a),o=null}}).bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(r){var i=e.util.getClosestTag(r.target,"a");if(i!==!1){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML)))return!0;var o=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&o&&o.isDisplayed&&o.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay((function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}).bind(this))}},handlePreviewMouseover:function(){this.lastOver=new Date().getTime(),this.hovering=!0},handlePreviewMouseout:function(r){(!r.relatedTarget||!/anchor-preview/.test(r.relatedTarget.className))&&(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var r=new Date().getTime()-this.lastOver;r>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=new Date().getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=n}(),function(){var n,r,i,o,a;n=[" ","	",`
`,"\r","","","","","","\u2028","\u2029"],r="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",i="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+r+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+r+"))",o=new RegExp("^("+r+")$","i"),a=new RegExp(i,"gi");function s(u){return!e.util.getClosestTag(u,"a")}var l=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var u=0,f=0;f<this.window._mediumEditors.length;f++){var c=this.window._mediumEditors[f];c!==null&&c.getExtensionByName("autoLink")!==void 0&&u++}return u===1},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(u,f){this.performLinking(f)},onKeypress:function(u){this.disableEventHandling||e.util.isKey(u,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout((function(){try{var f=this.base.exportSelection();this.performLinking(u.target)&&this.base.importSelection(f,!0)}catch(c){window.console&&window.console.error("Failed to perform linking",c),this.disableEventHandling=!0}}).bind(this),0))},performLinking:function(u){var f=e.util.splitByBlockElements(u),c=!1;f.length===0&&(f=[u]);for(var d=0;d<f.length;d++)c=this.removeObsoleteAutoLinkSpans(f[d])||c,c=this.performLinkingWithinElement(f[d])||c;return this.base.events.updateInput(u,{target:u,currentTarget:u}),c},removeObsoleteAutoLinkSpans:function(u){if(!u||u.nodeType===3)return!1;for(var f=u.querySelectorAll('span[data-auto-link="true"]'),c=!1,d=0;d<f.length;d++){var h=f[d].textContent;if(h.indexOf("://")===-1&&(h=e.util.ensureUrlHasProtocol(h)),f[d].getAttribute("data-href")!==h&&s(f[d])){c=!0;var v=h.replace(/\s+$/,"");if(f[d].getAttribute("data-href")===v){var p=h.length-v.length,g=e.util.splitOffDOMTree(f[d],this.splitTextBeforeEnd(f[d],p));f[d].parentNode.insertBefore(g,f[d].nextSibling)}else e.util.unwrap(f[d],this.document)}}return c},splitTextBeforeEnd:function(u,f){for(var c=this.document.createTreeWalker(u,NodeFilter.SHOW_TEXT,null,!1),d=!0;d;)d=c.lastChild()!==null;for(var h,v,p;f>0&&p!==null;)h=c.currentNode,v=h.nodeValue,v.length>f?(p=h.splitText(v.length-f),f=0):(p=c.previousNode(),f-=v.length);return p},performLinkingWithinElement:function(u){for(var f=this.findLinkableText(u),c=!1,d=0;d<f.length;d++){var h=e.util.findOrCreateMatchingTextNodes(this.document,u,f[d]);this.shouldNotLink(h)||this.createAutoLink(h,f[d].href)}return c},shouldNotLink:function(u){for(var f=!1,c=0;c<u.length&&f===!1;c++)f=!!e.util.traverseUp(u[c],function(d){return d.nodeName.toLowerCase()==="a"||d.getAttribute&&d.getAttribute("data-auto-link")==="true"});return f},findLinkableText:function(u){for(var f=u.textContent,c=null,d=[];(c=a.exec(f))!==null;){var h=!0,v=c.index+c[0].length;h=(c.index===0||n.indexOf(f[c.index-1])!==-1)&&(v===f.length||n.indexOf(f[v])!==-1),h=h&&(c[0].indexOf("/")!==-1||o.test(c[0].split(".").pop().split("?").shift())),h&&d.push({href:c[0],start:c.index,end:v})}return d},createAutoLink:function(u,f){f=e.util.ensureUrlHasProtocol(f);var c=e.util.createLink(this.document,u,f,this.getEditorOption("targetBlank")?"_blank":null),d=this.document.createElement("span");for(d.setAttribute("data-auto-link","true"),d.setAttribute("data-href",f),c.insertBefore(d,c.firstChild);c.childNodes.length>1;)d.appendChild(c.childNodes[1])}});e.extensions.autoLink=l}(),function(){var n="medium-editor-dragover";function r(o){var a=e.util.getContainerEditorElement(o),s=Array.prototype.slice.call(a.parentElement.querySelectorAll("."+n));s.forEach(function(l){l.classList.remove(n)})}var i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(o){o.preventDefault(),o.dataTransfer.dropEffect="copy";var a=o.target.classList?o.target:o.target.parentElement;r(a),o.type==="dragover"&&a.classList.add(n)},handleDrop:function(o){o.preventDefault(),o.stopPropagation(),this.base.selectElement(o.target);var a=this.base.exportSelection();a.start=a.end,this.base.importSelection(a),o.dataTransfer.files&&Array.prototype.slice.call(o.dataTransfer.files).forEach(function(s){this.isAllowedFile(s)&&s.type.match("image")&&this.insertImageFile(s)},this),r(o.target)},isAllowedFile:function(o){return this.allowedTypes.some(function(a){return!!o.type.match(a)})},insertImageFile:function(o){if(typeof FileReader=="function"){var a=new FileReader;a.readAsDataURL(o),a.addEventListener("load",(function(s){var l=this.document.createElement("img");l.src=s.target.result,e.util.insertHTMLCommand(this.document,l.outerHTML)}).bind(this))}}});e.extensions.fileDragging=i}(),function(){var n=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(r){var i=r.key.charCodeAt(0);this.keys[i]||(this.keys[i]=[]),this.keys[i].push(r)},this)},handleKeydown:function(r){var i=e.util.getKeyCode(r);if(this.keys[i]){var o=e.util.isMetaCtrlKey(r),a=!!r.shiftKey,s=!!r.altKey;this.keys[i].forEach(function(l){l.meta===o&&l.shift===a&&(l.alt===s||l.alt===void 0)&&(r.preventDefault(),r.stopPropagation(),typeof l.command=="function"?l.command.apply(this):l.command!==!1&&this.execAction(l.command))},this)}}});e.extensions.keyboardCommands=n}(),function(){var n=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(r){if(r.preventDefault(),r.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontName")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(r){var i=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=r||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var r=this.document,i=r.createElement("div"),o=r.createElement("select"),a=r.createElement("a"),s=r.createElement("a"),l;i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this));for(var u=0;u<this.fonts.length;u++)l=r.createElement("option"),l.innerHTML=this.fonts[u],l.value=this.fonts[u],o.appendChild(l);return o.className="medium-editor-toolbar-select",i.appendChild(o),this.on(o,"change",this.handleFontChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(r){r.nodeName.toLowerCase()==="font"&&r.hasAttribute("face")&&r.removeAttribute("face")})},handleFontChange:function(){var r=this.getSelect().value;r===""?this.clearFontName():this.execAction("fontName",{value:r})},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.fontName=n}(),function(){var n=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(r){if(r.preventDefault(),r.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontSize")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(r){var i=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=r||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var r=this.document,i=r.createElement("div"),o=r.createElement("input"),a=r.createElement("a"),s=r.createElement("a");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this)),o.setAttribute("type","range"),o.setAttribute("min","1"),o.setAttribute("max","7"),o.className="medium-editor-toolbar-input",i.appendChild(o),this.on(o,"change",this.handleSliderChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(r){r.nodeName.toLowerCase()==="font"&&r.hasAttribute("size")&&r.removeAttribute("size")})},handleSliderChange:function(){var r=this.getInput().value;r==="4"?this.clearFontSize():this.execAction("fontSize",{value:r})},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=n}(),function(){var n="%ME_PASTEBIN%",r=null,i=null,o=function(u){u.stopPropagation()};function a(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function s(u,f,c){var d=u.clipboardData||f.clipboardData||c.dataTransfer,h={};if(!d)return h;if(d.getData){var v=d.getData("Text");v&&v.length>0&&(h["text/plain"]=v)}if(d.types)for(var p=0;p<d.types.length;p++){var g=d.types[p];h[g]=d.getData(g)}return h}var l=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(u){this.on(u,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(u,f){this.on(f,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(u,f){if(!u.defaultPrevented){var c=s(u,this.window,this.document),d=c["text/html"],h=c["text/plain"];this.window.clipboardData&&u.clipboardData===void 0&&!d&&(d=h),(d||h)&&(u.preventDefault(),this.doPaste(d,h,f))}},doPaste:function(u,f,c){var d,h="",v;if(this.cleanPastedHTML&&u)return this.cleanPaste(u);if(f){if(this.getEditorOption("disableReturn")||c&&c.getAttribute("data-disable-return"))h=e.util.htmlEntities(f);else if(d=f.split(/[\r\n]+/g),d.length>1)for(v=0;v<d.length;v+=1)d[v]!==""&&(h+="<p>"+e.util.htmlEntities(d[v])+"</p>");else h=e.util.htmlEntities(d[0]);e.util.insertHTMLCommand(this.document,h)}},handlePasteBinPaste:function(u){if(u.defaultPrevented){this.removePasteBin();return}var f=s(u,this.window,this.document),c=f["text/html"],d=f["text/plain"],h=i;if(!this.cleanPastedHTML||c){u.preventDefault(),this.removePasteBin(),this.doPaste(c,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h);return}setTimeout((function(){this.cleanPastedHTML&&(c=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(c,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h)}).bind(this),0)},handleKeydown:function(u,f){e.util.isKey(u,e.util.keyCode.V)&&e.util.isMetaCtrlKey(u)&&(u.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(f))},createPasteBin:function(u){var f,c=e.selection.getSelectionRange(this.document),d=this.window.pageYOffset;i=u,c&&(f=c.getClientRects(),f.length?d+=f[0].top:c.startContainer.getBoundingClientRect!==void 0?d+=c.startContainer.getBoundingClientRect().top:d+=c.getBoundingClientRect().top),r=c;var h=this.document.createElement("div");h.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),h.setAttribute("style","border: 1px red solid; position: absolute; top: "+d+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),h.setAttribute("contentEditable",!0),h.innerHTML=n,this.document.body.appendChild(h),this.on(h,"focus",o),this.on(h,"focusin",o),this.on(h,"focusout",o),h.focus(),e.selection.selectNode(h,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(h,"paste",this.boundHandlePaste)},removePasteBin:function(){r!==null&&(e.selection.selectRange(this.document,r),r=null),i!==null&&(i=null);var u=this.getPasteBin();u&&u&&(this.off(u,"focus",o),this.off(u,"focusin",o),this.off(u,"focusout",o),this.off(u,"paste",this.boundHandlePaste),u.parentElement.removeChild(u))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var u=this.getPasteBin();if(!u||u.firstChild&&u.firstChild.id==="mcepastebin")return!1;var f=u.innerHTML;return!f||f===n?!1:f},cleanPaste:function(u){var f,c,d,h,v=/<p|<br|<div/.test(u),p=[].concat(this.preCleanReplacements||[],a(),this.cleanReplacements||[]);for(f=0;f<p.length;f+=1)u=u.replace(p[f][0],p[f][1]);if(!v)return this.pasteHTML(u);for(d=this.document.createElement("div"),d.innerHTML="<p>"+u.split("<br><br>").join("</p><p>")+"</p>",c=d.querySelectorAll("a,p,div,br"),f=0;f<c.length;f+=1)switch(h=c[f],h.innerHTML=h.innerHTML.replace(/\n/gi," "),h.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(h);break;case"br":this.filterLineBreak(h);break}this.pasteHTML(d.innerHTML)},pasteHTML:function(u,f){f=e.util.defaults({},f,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var c,d,h,v,p=this.document.createDocumentFragment();for(p.appendChild(this.document.createElement("body")),v=p.querySelector("body"),v.innerHTML=u,this.cleanupSpans(v),c=v.querySelectorAll("*"),h=0;h<c.length;h+=1)d=c[h],d.nodeName.toLowerCase()==="a"&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(d),e.util.cleanupAttrs(d,f.cleanAttrs),e.util.cleanupTags(d,f.cleanTags),e.util.unwrapTags(d,f.unwrapTags);e.util.insertHTMLCommand(this.document,v.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(u){return u&&(u.nodeName.toLowerCase()==="p"||u.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(u){/^\s*$/.test(u.textContent)&&u.parentNode&&u.parentNode.removeChild(u)},filterLineBreak:function(u){this.isCommonBlock(u.previousElementSibling)?this.removeWithParent(u):this.isCommonBlock(u.parentNode)&&(u.parentNode.firstChild===u||u.parentNode.lastChild===u)?this.removeWithParent(u):u.parentNode&&u.parentNode.childElementCount===1&&u.parentNode.textContent===""&&this.removeWithParent(u)},removeWithParent:function(u){u&&u.parentNode&&(u.parentNode.parentNode&&u.parentNode.childElementCount===1?u.parentNode.parentNode.removeChild(u.parentNode):u.parentNode.removeChild(u))},cleanupSpans:function(u){var f,c,d,h=u.querySelectorAll(".replace-with"),v=function(p){return p&&p.nodeName!=="#text"&&p.getAttribute("contenteditable")==="false"};for(f=0;f<h.length;f+=1)c=h[f],d=this.document.createElement(c.classList.contains("bold")?"b":"i"),c.classList.contains("bold")&&c.classList.contains("italic")?d.innerHTML="<i>"+c.innerHTML+"</i>":d.innerHTML=c.innerHTML,c.parentNode.replaceChild(d,c);for(h=u.querySelectorAll("span"),f=0;f<h.length;f+=1){if(c=h[f],e.util.traverseUp(c,v))return!1;e.util.unwrap(c,this.document)}}});e.extensions.paste=l}(),function(){var n=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(r,i){this.initElement(i)},initElement:function(r){r.getAttribute("data-placeholder")||r.setAttribute("data-placeholder",this.text),this.updatePlaceholder(r)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(r,i){this.cleanupElement(i)},cleanupElement:function(r){r.getAttribute("data-placeholder")===this.text&&r.removeAttribute("data-placeholder")},showPlaceholder:function(r){r&&(e.util.isFF&&r.childNodes.length===0?(r.classList.add("medium-editor-placeholder-relative"),r.classList.remove("medium-editor-placeholder")):(r.classList.add("medium-editor-placeholder"),r.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(r){r&&(r.classList.remove("medium-editor-placeholder"),r.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(r,i){if(r.querySelector("img, blockquote, ul, ol, table")||r.textContent.replace(/^\s+|\s+$/g,"")!=="")return this.hidePlaceholder(r);i||this.showPlaceholder(r)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(r,i){var o=this.hideOnClick&&i===this.base.getFocusedElement();this.updatePlaceholder(i,o)},handleFocus:function(r,i){this.hidePlaceholder(i)},handleBlur:function(r,i){this.updatePlaceholder(i)}});e.extensions.placeholder=n}(),function(){var n=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(r,i){return this.base.extensions.forEach(function(o){if(o!==this)return r.apply(i||this,arguments)},this)},createToolbar:function(){var r=this.document.createElement("div");return r.id="medium-editor-toolbar-"+this.getEditorId(),r.className="medium-editor-toolbar",this.static?r.className+=" static-toolbar":this.relativeContainer?r.className+=" medium-editor-relative-toolbar":r.className+=" medium-editor-stalker-toolbar",r.appendChild(this.createToolbarButtons()),this.forEachExtension(function(i){i.hasForm&&r.appendChild(i.getForm())}),this.attachEventHandlers(),r},createToolbarButtons:function(){var r=this.document.createElement("ul"),i,o,a,s,l,u;return r.id="medium-editor-toolbar-actions"+this.getEditorId(),r.className="medium-editor-toolbar-actions",r.style.display="block",this.buttons.forEach(function(f){typeof f=="string"?(l=f,u=null):(l=f.name,u=f),s=this.base.addBuiltInExtension(l,u),s&&typeof s.getButton=="function"&&(o=s.getButton(this.base),i=this.document.createElement("li"),e.util.isElement(o)?i.appendChild(o):i.innerHTML=o,r.appendChild(i))},this),a=r.querySelectorAll("button"),a.length>0&&(a[0].classList.add(this.firstButtonClass),a[a.length-1].classList.add(this.lastButtonClass)),r},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle((function(){this.base.isActive&&this.positionToolbarIfShown()}).bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(r){if(r&&r.target&&e.util.isDescendant(this.getToolbarElement(),r.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout((function(){this.checkState()}).bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout((function(){this.hideToolbar()}).bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay((function(){this.showToolbar()}).bind(this))},hideExtensionForms:function(){this.forEachExtension(function(r){r.hasForm&&r.isDisplayed()&&r.hideForm()})},multipleBlockElementsSelected:function(){var r=/<[^\/>][^>]*><\/[^>]+>/gim,i=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),o=e.selection.getSelectionHtml(this.document).replace(r,""),a=o.match(i);return!!a&&a.length>1},modifySelection:function(){var r=this.window.getSelection(),i=r.getRangeAt(0);if(this.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var o=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),i.startContainer,this.document);if(o){for(var a=0;o.nodeValue.substr(a,1).trim().length===0;)a=a+1;i=e.selection.select(this.document,o,a,i.endContainer,i.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var r=e.selection.getSelectionElement(this.window);if(!r||this.getEditorElements().indexOf(r)===-1||r.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(r){typeof r.isActive=="function"&&typeof r.setInactive=="function"&&r.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var r=[],i=null,o=e.selection.getSelectionRange(this.document),a,s=function(l){typeof l.checkState=="function"?l.checkState(a):typeof l.isActive=="function"&&typeof l.isAlreadyApplied=="function"&&typeof l.setActive=="function"&&!l.isActive()&&l.isAlreadyApplied(a)&&l.setActive()};if(o&&(this.forEachExtension(function(l){if(typeof l.queryCommandState=="function"&&(i=l.queryCommandState(),i!==null)){i&&typeof l.setActive=="function"&&l.setActive();return}r.push(l)}),a=e.selection.getSelectedParentElement(o),!!this.getEditorElements().some(function(l){return e.util.isDescendant(l,a,!0)})))for(;a&&(r.forEach(s),!e.util.isMediumEditorElement(a));)a=a.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var r=this.base.getFocusedElement(),i=this.window.getSelection();if(!r)return this;(this.static||!i.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(r):this.positionToolbar(i)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(r){this.getToolbarElement().style.left="0";var i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,o=this.window.innerWidth,a=this.getToolbarElement(),s=r.getBoundingClientRect(),l=s.top+i,u=s.left+s.width/2,f=a.offsetHeight,c=a.offsetWidth,d=c/2,h;switch(this.sticky?i>l+r.offsetHeight-f-this.stickyTopOffset?(a.style.top=l+r.offsetHeight-f+"px",a.classList.remove("medium-editor-sticky-toolbar")):i>l-f-this.stickyTopOffset?(a.classList.add("medium-editor-sticky-toolbar"),a.style.top=this.stickyTopOffset+"px"):(a.classList.remove("medium-editor-sticky-toolbar"),a.style.top=l-f+"px"):a.style.top=l-f+"px",this.align){case"left":h=s.left;break;case"right":h=s.right-c;break;case"center":h=u-d;break}h<0?h=0:h+c>o&&(h=o-Math.ceil(c)-1),a.style.left=h+"px"},positionToolbar:function(r){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var i=r.getRangeAt(0),o=i.getBoundingClientRect();(!o||o.height===0&&o.width===0&&i.startContainer===i.endContainer)&&(i.startContainer.nodeType===1&&i.startContainer.querySelector("img")?o=i.startContainer.querySelector("img").getBoundingClientRect():o=i.startContainer.getBoundingClientRect());var a=this.window.innerWidth,s=this.getToolbarElement(),l=s.offsetHeight,u=s.offsetWidth,f=u/2,c=50,d=this.diffLeft-f,h=this.getEditorOption("elementsContainer"),v=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,p={},g={},y,m;v?(m=h.getBoundingClientRect(),["top","left"].forEach(function(A){g[A]=o[A]-m[A]}),g.width=o.width,g.height=o.height,o=g,a=m.width,p.top=h.scrollTop):p.top=this.window.pageYOffset,y=o.left+o.width/2,p.top+=o.top-l,o.top<c?(s.classList.add("medium-toolbar-arrow-over"),s.classList.remove("medium-toolbar-arrow-under"),p.top+=c+o.height-this.diffTop):(s.classList.add("medium-toolbar-arrow-under"),s.classList.remove("medium-toolbar-arrow-over"),p.top+=this.diffTop),y<f?(p.left=d+f,p.right="initial"):a-y<f?(p.left="auto",p.right=0):(p.left=d+y,p.right="initial"),["top","left","right"].forEach(function(A){s.style[A]=p[A]+(isNaN(p[A])?"":"px")})}});e.extensions.toolbar=n}(),function(){var n=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(r){var i="medium-editor-dragover";r.preventDefault(),r.dataTransfer.dropEffect="copy",r.type==="dragover"?r.target.classList.add(i):r.type==="dragleave"&&r.target.classList.remove(i)},handleDrop:function(r){var i="medium-editor-dragover",o;r.preventDefault(),r.stopPropagation(),r.dataTransfer.files&&(o=Array.prototype.slice.call(r.dataTransfer.files,0),o.some((function(a){if(a.type.match("image")){var s,l;s=new FileReader,s.readAsDataURL(a),l="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+l+'" />'),s.onload=(function(){var u=this.document.getElementById(l);u&&(u.removeAttribute("id"),u.removeAttribute("class"),u.src=s.result)}).bind(this)}}).bind(this))),r.target.classList.remove(i)}});e.extensions.imageDragging=n}(),function(){function n(w){var D=e.selection.getSelectionStart(this.options.ownerDocument),R=D.textContent,K=e.selection.getCaretOffsets(D);(R[K.left-1]===void 0||R[K.left-1].trim()===""||R[K.left]!==void 0&&R[K.left].trim()==="")&&w.preventDefault()}function r(w,D){if(this.options.disableReturn||D.getAttribute("data-disable-return"))w.preventDefault();else if(this.options.disableDoubleReturn||D.getAttribute("data-disable-double-return")){var R=e.selection.getSelectionStart(this.options.ownerDocument);(R&&R.textContent.trim()===""&&R.nodeName.toLowerCase()!=="li"||R.previousElementSibling&&R.previousElementSibling.nodeName.toLowerCase()!=="br"&&R.previousElementSibling.textContent.trim()==="")&&w.preventDefault()}}function i(w){var D=e.selection.getSelectionStart(this.options.ownerDocument),R=D&&D.nodeName.toLowerCase();R==="pre"&&(w.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(D)&&(w.preventDefault(),w.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(w){var D,R=e.selection.getSelectionStart(this.options.ownerDocument),K=R.nodeName.toLowerCase(),ye=/^(\s+|<br\/?>)?$/i,Oe=/h\d/i;e.util.isKey(w,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&R.previousElementSibling&&Oe.test(K)&&e.selection.getCaretOffsets(R).left===0?e.util.isKey(w,e.util.keyCode.BACKSPACE)&&ye.test(R.previousElementSibling.innerHTML)?(R.previousElementSibling.parentNode.removeChild(R.previousElementSibling),w.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(w,e.util.keyCode.ENTER)&&(D=this.options.ownerDocument.createElement("p"),D.innerHTML="<br>",R.previousElementSibling.parentNode.insertBefore(D,R),w.preventDefault()):e.util.isKey(w,e.util.keyCode.DELETE)&&R.nextElementSibling&&R.previousElementSibling&&!Oe.test(K)&&ye.test(R.innerHTML)&&Oe.test(R.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,R.nextElementSibling),R.previousElementSibling.parentNode.removeChild(R),w.preventDefault()):e.util.isKey(w,e.util.keyCode.BACKSPACE)&&K==="li"&&ye.test(R.innerHTML)&&!R.previousElementSibling&&!R.parentElement.previousElementSibling&&R.nextElementSibling&&R.nextElementSibling.nodeName.toLowerCase()==="li"?(D=this.options.ownerDocument.createElement("p"),D.innerHTML="<br>",R.parentElement.parentElement.insertBefore(D,R.parentElement),e.selection.moveCursor(this.options.ownerDocument,D),R.parentElement.removeChild(R),w.preventDefault()):e.util.isKey(w,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(R,"blockquote")!==!1&&e.selection.getCaretOffsets(R).left===0?(w.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p")):e.util.isKey(w,e.util.keyCode.ENTER)&&e.util.getClosestTag(R,"blockquote")!==!1&&e.selection.getCaretOffsets(R).right===0?(D=this.options.ownerDocument.createElement("p"),D.innerHTML="<br>",R.parentElement.insertBefore(D,R.nextSibling),e.selection.moveCursor(this.options.ownerDocument,D),w.preventDefault()):e.util.isKey(w,e.util.keyCode.BACKSPACE)&&e.util.isMediumEditorElement(R.parentElement)&&!R.previousElementSibling&&R.nextElementSibling&&ye.test(R.innerHTML)&&(w.preventDefault(),e.selection.moveCursor(this.options.ownerDocument,R.nextSibling),R.parentElement.removeChild(R))}function a(w){var D=e.selection.getSelectionStart(this.options.ownerDocument),R;D&&(e.util.isMediumEditorElement(D)&&D.children.length===0&&!e.util.isBlockContainer(D)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),e.util.isKey(w,e.util.keyCode.ENTER)&&!e.util.isListItem(D)&&!e.util.isBlockContainer(D)&&(R=D.nodeName.toLowerCase(),R==="a"?this.options.ownerDocument.execCommand("unlink",!1,null):!w.shiftKey&&!w.ctrlKey&&this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function s(w,D){var R=D.parentNode.querySelector('textarea[medium-editor-textarea-id="'+D.getAttribute("medium-editor-textarea-id")+'"]');R&&(R.value=D.innerHTML.trim())}function l(w){w._mediumEditors||(w._mediumEditors=[null]),this.id||(this.id=w._mediumEditors.length),w._mediumEditors[this.id]=this}function u(w){!w._mediumEditors||!w._mediumEditors[this.id]||(w._mediumEditors[this.id]=null)}function f(w,D,R){var K=[];if(w||(w=[]),typeof w=="string"&&(w=D.querySelectorAll(w)),e.util.isElement(w)&&(w=[w]),R)for(var ye=0;ye<w.length;ye++){var Oe=w[ye];e.util.isElement(Oe)&&!Oe.getAttribute("data-medium-editor-element")&&!Oe.getAttribute("medium-editor-textarea-id")&&K.push(Oe)}else K=Array.prototype.slice.apply(w);return K}function c(w){var D=w.parentNode.querySelector('textarea[medium-editor-textarea-id="'+w.getAttribute("medium-editor-textarea-id")+'"]');D&&(D.classList.remove("medium-editor-hidden"),D.removeAttribute("medium-editor-textarea-id")),w.parentNode&&w.parentNode.removeChild(w)}function d(w,D){return Object.keys(D).forEach(function(R){w[R]===void 0&&(w[R]=D[R])}),w}function h(w,D,R){var K={window:R.options.contentWindow,document:R.options.ownerDocument,base:R};return w=d(w,K),typeof w.init=="function"&&w.init(),w.name||(w.name=D),w}function v(){return this.elements.every(function(w){return!!w.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function p(){return v.call(this)?this.options.anchorPreview!==!1:!1}function g(){return this.options.placeholder!==!1}function y(){return this.options.autoLink!==!1}function m(){return this.options.imageDragging!==!1}function A(){return this.options.keyboardCommands!==!1}function T(){return!this.options.extensions.imageDragging}function k(w){for(var D=this.options.ownerDocument.createElement("div"),R=Date.now(),K="medium-editor-"+R,ye=w.attributes;this.options.ownerDocument.getElementById(K);)R++,K="medium-editor-"+R;D.className=w.className,D.id=K,D.innerHTML=w.value,w.setAttribute("medium-editor-textarea-id",K);for(var Oe=0,rt=ye.length;Oe<rt;Oe++)D.hasAttribute(ye[Oe].nodeName)||D.setAttribute(ye[Oe].nodeName,ye[Oe].value);return w.form&&this.on(w.form,"reset",(function(it){it.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(K))}).bind(this)),w.classList.add("medium-editor-hidden"),w.parentNode.insertBefore(D,w),D}function C(w,D){if(!w.getAttribute("data-medium-editor-element")){w.nodeName.toLowerCase()==="textarea"&&(w=k.call(this,w),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=s.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),!this.options.disableEditing&&!w.getAttribute("data-disable-editing")&&(w.setAttribute("contentEditable",!0),w.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(w.getAttribute("data-disable-return")||w.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=r.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),!this.options.disableReturn&&!w.getAttribute("data-disable-return")&&this.on(w,"keyup",a.bind(this));var R=e.util.guid();w.setAttribute("data-medium-editor-element",!0),w.classList.add("medium-editor-element"),w.setAttribute("role","textbox"),w.setAttribute("aria-multiline",!0),w.setAttribute("data-medium-editor-editor-index",D),w.setAttribute("medium-editor-index",R),he[R]=w.innerHTML,this.events.attachAllEventsToElement(w)}return w}function S(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",n.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=r.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function I(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(ye){ye!=="toolbar"&&this.options.extensions[ye]&&this.extensions.push(h(this.options.extensions[ye],ye,this))},this),T.call(this)){var w=this.options.fileDragging;w||(w={},m.call(this)||(w.allowedTypes=[])),this.addBuiltInExtension("fileDragging",w)}var D={paste:!0,"anchor-preview":p.call(this),autoLink:y.call(this),keyboardCommands:A.call(this),placeholder:g.call(this)};Object.keys(D).forEach(function(ye){D[ye]&&this.addBuiltInExtension(ye)},this);var R=this.options.extensions.toolbar;if(!R&&v.call(this)){var K=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});R=new e.extensions.toolbar(K)}R&&this.extensions.push(h(R,"toolbar",this))}function X(w,D){var R=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return D&&R.forEach(function(K){D.hasOwnProperty(K[0])&&D[K[0]]!==void 0&&e.util.deprecated(K[0],K[1],"v6.0.0")}),e.util.defaults({},D,w)}function Q(w,D){var R=/^append-(.+)$/gi,K=/justify([A-Za-z]*)$/g,ye,Oe;if(ye=R.exec(w),ye)return e.util.execFormatBlock(this.options.ownerDocument,ye[1]);if(w==="fontSize")return D.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),Oe=D.value||D.size,this.options.ownerDocument.execCommand("fontSize",!1,Oe);if(w==="fontName")return D.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),Oe=D.value||D.name,this.options.ownerDocument.execCommand("fontName",!1,Oe);if(w==="createLink")return this.createLink(D);if(w==="image"){var rt=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,rt)}if(w==="html"){var it=this.options.contentWindow.getSelection().toString().trim();return e.util.insertHTMLCommand(this.options.ownerDocument,it)}if(K.exec(w)){var me=this.options.ownerDocument.execCommand(w,!1,null),ke=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return ke&&ue.call(this,e.util.getTopBlockContainer(ke)),me}return Oe=D&&D.value,this.options.ownerDocument.execCommand(w,!1,Oe)}function ue(w){if(w){var D,R=Array.prototype.slice.call(w.childNodes).filter(function(K){var ye=K.nodeName.toLowerCase()==="div";return ye&&!D&&(D=K.style.textAlign),ye});R.length&&(this.saveSelection(),R.forEach(function(K){if(K.style.textAlign===D){var ye=K.lastChild;if(ye){e.util.unwrap(K,this.options.ownerDocument);var Oe=this.options.ownerDocument.createElement("BR");ye.parentNode.insertBefore(Oe,ye.nextSibling)}}},this),w.style.textAlign=D,this.restoreSelection())}}var he={};e.prototype={init:function(w,D){return this.options=X.call(this,this.defaults,D),this.origElements=w,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(l.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),this.elements.length!==0&&(this.isActive=!0,I.call(this),S.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(w){typeof w.destroy=="function"&&w.destroy()},this),this.events.destroy(),this.elements.forEach(function(w){this.options.spellcheck&&(w.innerHTML=w.innerHTML),w.removeAttribute("contentEditable"),w.removeAttribute("spellcheck"),w.removeAttribute("data-medium-editor-element"),w.classList.remove("medium-editor-element"),w.removeAttribute("role"),w.removeAttribute("aria-multiline"),w.removeAttribute("medium-editor-index"),w.removeAttribute("data-medium-editor-editor-index"),w.getAttribute("medium-editor-textarea-id")&&c(w)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,u.call(this,this.options.contentWindow))},on:function(w,D,R,K){return this.events.attachDOMEvent(w,D,R,K),this},off:function(w,D,R,K){return this.events.detachDOMEvent(w,D,R,K),this},subscribe:function(w,D){return this.events.attachCustomEvent(w,D),this},unsubscribe:function(w,D){return this.events.detachCustomEvent(w,D),this},trigger:function(w,D,R){return this.events.triggerCustomEvent(w,D,R),this},delay:function(w){var D=this;return setTimeout(function(){D.isActive&&w()},this.options.delay)},serialize:function(){var w,D,R={},K=this.elements.length;for(w=0;w<K;w+=1)D=this.elements[w].id!==""?this.elements[w].id:"element-"+w,R[D]={value:this.elements[w].innerHTML.trim()};return R},getExtensionByName:function(w){var D;return this.extensions&&this.extensions.length&&this.extensions.some(function(R){return R.name===w?(D=R,!0):!1}),D},addBuiltInExtension:function(w,D){var R=this.getExtensionByName(w),K;if(R)return R;switch(w){case"anchor":K=e.util.extend({},this.options.anchor,D),R=new e.extensions.anchor(K);break;case"anchor-preview":R=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":R=new e.extensions.autoLink;break;case"fileDragging":R=new e.extensions.fileDragging(D);break;case"fontname":R=new e.extensions.fontName(this.options.fontName);break;case"fontsize":R=new e.extensions.fontSize(D);break;case"keyboardCommands":R=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":R=new e.extensions.paste(this.options.paste);break;case"placeholder":R=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(w)&&(D?(K=e.util.defaults({},D,e.extensions.button.prototype.defaults[w]),R=new e.extensions.button(K)):R=new e.extensions.button(w))}return R&&this.extensions.push(h(R,w,this)),R},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var w=this.getExtensionByName("toolbar");return w&&w.checkState(),this},queryCommandState:function(w){var D=/^full-(.+)$/gi,R,K=null;R=D.exec(w),R&&(w=R[1]);try{K=this.options.ownerDocument.queryCommandState(w)}catch{K=null}return K},execAction:function(w,D){var R=/^full-(.+)$/gi,K,ye;return K=R.exec(w),K?(this.saveSelection(),this.selectAllContents(),ye=Q.call(this,K[1],D),this.restoreSelection()):ye=Q.call(this,w,D),(w==="insertunorderedlist"||w==="insertorderedlist")&&e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),ye},getSelectedParentElement:function(w){return w===void 0&&(w=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(w)},selectAllContents:function(){var w=e.selection.getSelectionElement(this.options.contentWindow);if(w){for(;w.children.length===1;)w=w.children[0];this.selectElement(w)}},selectElement:function(w){e.selection.selectNode(w,this.options.ownerDocument);var D=e.selection.getSelectionElement(this.options.contentWindow);D&&this.events.focusElement(D)},getFocusedElement:function(){var w;return this.elements.some(function(D){return!w&&D.getAttribute("data-medium-focused")&&(w=D),!!w},this),w},exportSelection:function(){var w=e.selection.getSelectionElement(this.options.contentWindow),D=this.elements.indexOf(w),R=null;return D>=0&&(R=e.selection.exportSelection(w,this.options.ownerDocument)),R!==null&&D!==0&&(R.editableElementIndex=D),R},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(w,D){if(w){var R=this.elements[w.editableElementIndex||0];e.selection.importSelection(w,R,this.options.ownerDocument,D)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(w){var D=e.selection.getSelectionElement(this.options.contentWindow),R={},K;if(this.elements.indexOf(D)!==-1){try{if(this.events.disableCustomEvent("editableInput"),w.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),K=w.url||w.value,K&&K.trim().length>0){var ye=this.options.contentWindow.getSelection();if(ye){var Oe=ye.getRangeAt(0),rt=Oe.commonAncestorContainer,it,me,ke,ze;if(Oe.endContainer.nodeType===3&&Oe.startContainer.nodeType!==3&&Oe.startOffset===0&&Oe.startContainer.firstChild===Oe.endContainer&&(rt=Oe.endContainer),me=e.util.getClosestBlockContainer(Oe.startContainer),ke=e.util.getClosestBlockContainer(Oe.endContainer),rt.nodeType!==3&&rt.textContent.length!==0&&me===ke){var Ne=me||D,Xe=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),it=this.exportSelection(),Xe.appendChild(Ne.cloneNode(!0)),D===Ne?e.selection.select(this.options.ownerDocument,Ne.firstChild,0,Ne.lastChild,Ne.lastChild.nodeType===3?Ne.lastChild.nodeValue.length:Ne.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,Ne,0,Ne,Ne.childNodes.length);var M=this.exportSelection();ze=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,Xe,{start:it.start-M.start,end:it.end-M.start,editableElementIndex:it.editableElementIndex}),ze.length===0&&(Xe=this.options.ownerDocument.createDocumentFragment(),Xe.appendChild(rt.cloneNode(!0)),ze=[Xe.firstChild.firstChild,Xe.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,ze,K.trim());var W=(Xe.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,Xe.firstChild.innerHTML.replace(/^\s+/,"")),it.start-=W,it.end-=W,this.importSelection(it)}else this.options.ownerDocument.execCommand("createLink",!1,K);this.options.targetBlank||w.target==="_blank"?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),K):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),K),w.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),w.buttonClass)}}if(this.options.targetBlank||w.target==="_blank"||w.buttonClass){R=this.options.ownerDocument.createEvent("HTMLEvents"),R.initEvent("input",!0,!0,this.options.contentWindow);for(var G=0,ee=this.elements.length;G<ee;G+=1)this.elements[G].dispatchEvent(R)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",R,D)}},cleanPaste:function(w){this.getExtensionByName("paste").cleanPaste(w)},pasteHTML:function(w,D){this.getExtensionByName("paste").pasteHTML(w,D)},setContent:function(w,D){if(D=D||0,this.elements[D]){var R=this.elements[D];R.innerHTML=w,this.checkContentChanged(R)}},getContent:function(w){return w=w||0,this.elements[w]?this.elements[w].innerHTML.trim():null},checkContentChanged:function(w){w=w||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(w,{target:w,currentTarget:w})},resetContent:function(w){if(w){var D=this.elements.indexOf(w);D!==-1&&this.setContent(he[w.getAttribute("medium-editor-index")],D);return}this.elements.forEach(function(R,K){this.setContent(he[R.getAttribute("medium-editor-index")],K)},this)},addElements:function(w){var D=f(w,this.options.ownerDocument,!0);if(D.length===0)return!1;D.forEach(function(R){R=C.call(this,R,this.id),this.elements.push(R),this.trigger("addElement",{target:R,currentTarget:R},R)},this)},removeElements:function(w){var D=f(w,this.options.ownerDocument),R=D.map(function(K){return K.getAttribute("medium-editor-textarea-id")&&K.parentNode?K.parentNode.querySelector('div[medium-editor-textarea-id="'+K.getAttribute("medium-editor-textarea-id")+'"]'):K});this.elements=this.elements.filter(function(K){return R.indexOf(K)!==-1?(this.events.cleanupElement(K),K.getAttribute("medium-editor-textarea-id")&&c(K),this.trigger("removeElement",{target:K,currentTarget:K},K),!1):!0},this)}},e.getEditorFromElement=function(w){var D=w.getAttribute("data-medium-editor-editor-index"),R=w&&w.ownerDocument&&(w.ownerDocument.defaultView||w.ownerDocument.parentWindow);return R&&R._mediumEditors&&R._mediumEditors[D]?R._mediumEditors[D]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(n){var r=n.split("-"),i=r[0].split("."),o=r.length>1?r[1]:"";return{major:parseInt(i[0],10),minor:parseInt(i[1],10),revision:parseInt(i[2],10),preRelease:o,toString:function(){return[i[0],i[1],i[2]].join(".")+(o?"-"+o:"")}}},e.version=e.parseVersionString.call(this,"5.23.3"),e}())}(au)),au.exports}var Y4=U4();const su=Ml(Y4);/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */var fd=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},cd=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),lu=function(){function t(e,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),l;!(i=(l=s.next()).done)&&(r.push(l.value),!(n&&r.length===n));i=!0);}catch(u){o=!0,a=u}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(t){return this.indexOf(t)===0},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var n=this;n.length<t;)n=e+n;return n};var V4={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function L_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return n||"0"}var K4=function(){function t(e,n,r,i){fd(this,t);var o=this;function a(l){if(l.startsWith("hsl")){var u=l.match(/([\-\d\.e]+)/g).map(Number),f=lu(u,4),c=f[0],d=f[1],h=f[2],v=f[3];v===void 0&&(v=1),c/=360,d/=100,h/=100,o.hsla=[c,d,h,v]}else if(l.startsWith("rgb")){var p=l.match(/([\-\d\.e]+)/g).map(Number),g=lu(p,4),y=g[0],m=g[1],A=g[2],T=g[3];T===void 0&&(T=1),o.rgba=[y,m,A,T]}else l.startsWith("#")?o.rgba=t.hexToRgb(l):o.rgba=t.nameToRgb(l)||t.hexToRgb(l)}if(e!==void 0)if(Array.isArray(e))this.rgba=e;else if(r===void 0){var s=e&&""+e;s&&a(s.toLowerCase())}else this.rgba=[e,n,r,i===void 0?1:i]}return cd(t,[{key:"printRGB",value:function(n){var r=n?this.rgba:this.rgba.slice(0,3),i=r.map(function(o,a){return L_(o,a===3?3:0)});return n?"rgba("+i+")":"rgb("+i+")"}},{key:"printHSL",value:function(n){var r=[360,100,100,1],i=["","%","%",""],o=n?this.hsla:this.hsla.slice(0,3),a=o.map(function(s,l){return L_(s*r[l],l===3?3:1)+i[l]});return n?"hsla("+a+")":"hsl("+a+")"}},{key:"printHex",value:function(n){var r=this.hex;return n?r:r.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(n){n.length===3&&(n[3]=1),this._rgba=n,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(n){n.length===3&&(n[3]=1),this._hsla=n,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var n=this.rgba,r=n.map(function(i,o){return o<3?i.toString(16):Math.round(i*255).toString(16)});return"#"+r.map(function(i){return i.padStart(2,"0")}).join("")},set:function(n){this.rgba=t.hexToRgb(n)}}],[{key:"hexToRgb",value:function(n){var r=(n.startsWith("#")?n.slice(1):n).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!r.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+n);var i=r.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o){return parseInt(o,16)});return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(n){var r=n.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=V4[r];return i===void 0?i:t.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(n){var r=lu(n,4),i=r[0],o=r[1],a=r[2],s=r[3];i/=255,o/=255,a/=255;var l=Math.max(i,o,a),u=Math.min(i,o,a),f=void 0,c=void 0,d=(l+u)/2;if(l===u)f=c=0;else{var h=l-u;switch(c=d>.5?h/(2-l-u):h/(l+u),l){case i:f=(o-a)/h+(o<a?6:0);break;case o:f=(a-i)/h+2;break;case a:f=(i-o)/h+4;break}f/=6}return[f,c,d,s]}},{key:"hslToRgb",value:function(n){var r=lu(n,4),i=r[0],o=r[1],a=r[2],s=r[3],l=void 0,u=void 0,f=void 0;if(o===0)l=u=f=a;else{var c=function(g,y,m){return m<0&&(m+=1),m>1&&(m-=1),m<.16666666666666666?g+(y-g)*6*m:m<.5?y:m<.6666666666666666?g+(y-g)*(.6666666666666666-m)*6:g},d=a<.5?a*(1+o):a+o-a*o,h=2*a-d;l=c(h,d,i+1/3),u=c(h,d,i),f=c(h,d,i-1/3)}var v=[l*255,u*255,f*255].map(Math.round);return v[3]=s,v}}]),t}(),q4=function(){function t(){fd(this,t),this._events=[]}return cd(t,[{key:"add",value:function(n,r,i){n.addEventListener(r,i,!1),this._events.push({target:n,type:r,handler:i})}},{key:"remove",value:function(n,r,i){this._events=this._events.filter(function(o){var a=!0;return n&&n!==o.target&&(a=!1),r&&r!==o.type&&(a=!1),i&&i!==o.handler&&(a=!1),a&&t._doRemove(o.target,o.type,o.handler),!a})}},{key:"destroy",value:function(){this._events.forEach(function(n){return t._doRemove(n.target,n.type,n.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(n,r,i){n.removeEventListener(r,i,!1)}}]),t}();function Z4(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}function dd(t,e,n){var r=!1;function i(l,u,f){return Math.max(u,Math.min(l,f))}function o(l,u,f){if(f&&(r=!0),!!r){l.preventDefault();var c=e.getBoundingClientRect(),d=c.width,h=c.height,v=u.clientX,p=u.clientY,g=i(v-c.left,0,d),y=i(p-c.top,0,h);n(g/d,y/h)}}function a(l,u){var f=l.buttons===void 0?l.which:l.buttons;f===1?o(l,l,u):r=!1}function s(l,u){l.touches.length===1?o(l,l.touches[0],u):r=!1}t.add(e,"mousedown",function(l){a(l,!0)}),t.add(e,"touchstart",function(l){s(l,!0)}),t.add(window,"mousemove",a),t.add(e,"touchmove",s),t.add(window,"mouseup",function(l){r=!1}),t.add(e,"touchend",function(l){r=!1}),t.add(e,"touchcancel",function(l){r=!1})}var J4=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,Q4=360,I_="keydown",uu="mousedown",hd="focusin";function Dr(t,e){return(e||document).querySelector(t)}function ej(t){t.preventDefault(),t.stopPropagation()}function pd(t,e,n,r,i){t.add(e,I_,function(o){n.indexOf(o.key)>=0&&r(o)})}var j_=function(){function t(e){fd(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new q4,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return cd(t,[{key:"setOptions",value:function(n){var r=this;if(!n)return;var i=this.settings;function o(u,f,c){for(var d in u)f[d]=u[d]}if(n instanceof HTMLElement)i.parent=n;else{i.parent&&n.parent&&i.parent!==n.parent&&(this._events.remove(i.parent),this._popupInited=!1),o(n,i),n.onChange&&(this.onChange=n.onChange),n.onDone&&(this.onDone=n.onDone),n.onOpen&&(this.onOpen=n.onOpen),n.onClose&&(this.onClose=n.onClose);var a=n.color||n.colour;a&&this._setColor(a)}var s=i.parent;if(s&&i.popup&&!this._popupInited){var l=function(f){return r.openHandler(f)};this._events.add(s,"click",l),pd(this._events,s,[" ","Spacebar","Enter"],l),this._popupInited=!0}else n.parent&&!i.popup&&this.show()}},{key:"openHandler",value:function(n){if(this.show()){n&&n.preventDefault(),this.settings.parent.style.pointerEvents="none";var r=n&&n.type===I_?this._domEdit:this.domElement;setTimeout(function(){return r.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(n){var r=n&&n.type,i=!1;if(!n)i=!0;else if(r===uu||r===hd){var o=(this.__containedEvent||0)+100;n.timeStamp>o&&(i=!0)}else ej(n),i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",r!==uu&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(n,r){this.closeHandler(),this.setOptions(n),r&&this.openHandler()}},{key:"setColor",value:function(n,r){this._setColor(n,{silent:r})}},{key:"_setColor",value:function(n,r){if(typeof n=="string"&&(n=n.trim()),!!n){r=r||{};var i=void 0;try{i=new K4(n)}catch(a){if(r.failSilently)return;throw a}if(!this.settings.alpha){var o=i.hsla;o[3]=1,i.hsla=o}this.colour=this.color=i,this._setHSLA(null,null,null,null,r)}}},{key:"setColour",value:function(n,r){this.setColor(n,r)}},{key:"show",value:function(){var n=this.settings.parent;if(!n)return!1;if(this.domElement){var r=this._toggleDOM(!0);return this._setPosition(),r}var i=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',o=Z4(i);return this.domElement=o,this._domH=Dr(".picker_hue",o),this._domSL=Dr(".picker_sl",o),this._domA=Dr(".picker_alpha",o),this._domEdit=Dr(".picker_editor input",o),this._domSample=Dr(".picker_sample",o),this._domOkay=Dr(".picker_done button",o),this._domCancel=Dr(".picker_cancel button",o),o.classList.add("layout_"+this.settings.layout),this.settings.alpha||o.classList.add("no_alpha"),this.settings.editor||o.classList.add("no_editor"),this.settings.cancelButton||o.classList.add("no_cancel"),this._ifPopup(function(){return o.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var n=this,r=this,i=this.domElement,o=this._events;function a(u,f,c){o.add(u,f,c)}a(i,"click",function(u){return u.preventDefault()}),dd(o,this._domH,function(u,f){return r._setHSLA(u)}),dd(o,this._domSL,function(u,f){return r._setHSLA(null,u,1-f)}),this.settings.alpha&&dd(o,this._domA,function(u,f){return r._setHSLA(null,null,null,1-f)});var s=this._domEdit;a(s,"input",function(u){r._setColor(this.value,{fromEditor:!0,failSilently:!0})}),a(s,"focus",function(u){var f=this;f.selectionStart===f.selectionEnd&&f.select()}),this._ifPopup(function(){var u=function(d){return n.closeHandler(d)};a(window,uu,u),a(window,hd,u),pd(o,i,["Esc","Escape"],u);var f=function(d){n.__containedEvent=d.timeStamp};a(i,uu,f),a(i,hd,f),a(n._domCancel,"click",u)});var l=function(f){n._ifPopup(function(){return n.closeHandler(f)}),n.onDone&&n.onDone(n.colour)};a(this._domOkay,"click",l),pd(o,i,["Enter"],l)}},{key:"_setPosition",value:function(){var n=this.settings.parent,r=this.domElement;n!==r.parentNode&&n.appendChild(r),this._ifPopup(function(i){getComputedStyle(n).position==="static"&&(n.style.position="relative");var o=i===!0?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(a){a===o?r.classList.add(a):r.classList.remove(a)}),r.classList.add(o)})}},{key:"_setHSLA",value:function(n,r,i,o,a){a=a||{};var s=this.colour,l=s.hsla;[n,r,i,o].forEach(function(u,f){(u||u===0)&&(l[f]=u)}),s.hsla=l,this._updateUI(a),this.onChange&&!a.silent&&this.onChange(s)}},{key:"_updateUI",value:function(n){if(!this.domElement)return;n=n||{};var r=this.colour,i=r.hsla,o="hsl("+i[0]*Q4+", 100%, 50%)",a=r.hslString,s=r.hslaString,l=this._domH,u=this._domSL,f=this._domA,c=Dr(".picker_selector",l),d=Dr(".picker_selector",u),h=Dr(".picker_selector",f);function v(C,S,I){S.style.left=I*100+"%"}function p(C,S,I){S.style.top=I*100+"%"}v(l,c,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=o,v(u,d,i[1]),p(u,d,1-i[2]),u.style.color=a,p(f,h,1-i[3]);var g=a,y=g.replace("hsl","hsla").replace(")",", 0)"),m="linear-gradient("+[g,y]+")";if(this._domA.style.background=m+", "+J4,!n.fromEditor){var A=this.settings.editorFormat,T=this.settings.alpha,k=void 0;switch(A){case"rgb":k=r.printRGB(T);break;case"hsl":k=r.printHSL(T);break;default:k=r.printHex(T)}this._domEdit.value=k}this._domSample.style.color=s}},{key:"_ifPopup",value:function(n,r){this.settings.parent&&this.settings.popup?n&&n(this.settings.popup):r&&r()}},{key:"_toggleDOM",value:function(n){var r=this.domElement;if(!r)return!1;var i=n?"":"none",o=r.style.display!==i;return o&&(r.style.display=i),o}}]),t}();{var vd=document.createElement("style");vd.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(vd),j_.StyleElement=vd}var gd={exports:{}},k_;function B_(){return k_||(k_=1,function(t,e){(function(n,r){t.exports=n()})(function(){var n="object",r="function",i="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],a=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],l=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function u(M,W){var G=typeof M[W];return G==r||!!(G==n&&M[W])||G=="unknown"}function f(M,W){return!!(typeof M[W]==n&&M[W])}function c(M,W){return typeof M[W]!=i}function d(M){return function(W,G){for(var ee=G.length;ee--;)if(!M(W,G[ee]))return!1;return!0}}var h=d(u),v=d(f),p=d(c);function g(M){return M&&h(M,l)&&p(M,s)}function y(M){return f(M,"body")?M.body:M.getElementsByTagName("body")[0]}var m=[].forEach?function(M,W){M.forEach(W)}:function(M,W){for(var G=0,ee=M.length;G<ee;++G)W(M[G],G)},A={},T=typeof window!=i&&typeof document!=i,k={isHostMethod:u,isHostObject:f,isHostProperty:c,areHostMethods:h,areHostObjects:v,areHostProperties:p,isTextRange:g,getBody:y,forEach:m},C={version:"1.3.2",initialized:!1,isBrowser:T,supported:!0,util:k,features:{},modules:A,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==i?!0:rangyAutoInitialize}};function S(M){typeof console!=i&&u(console,"log")&&console.log(M)}function I(M,W){T&&W?alert(M):S(M)}function X(M){C.initialized=!0,C.supported=!1,I("Rangy is not supported in this environment. Reason: "+M,C.config.alertOnFail)}C.fail=X;function Q(M){I("Rangy warning: "+M,C.config.alertOnWarn)}C.warn=Q;var ue;({}).hasOwnProperty?(k.extend=ue=function(M,W,G){var ee,re;for(var ge in W)ge==="__proto__"||ge==="constructor"||ge==="prototype"||W.hasOwnProperty(ge)&&(ee=M[ge],re=W[ge],G&&ee!==null&&typeof ee=="object"&&re!==null&&typeof re=="object"&&ue(ee,re,!0),M[ge]=re);return W.hasOwnProperty("toString")&&(M.toString=W.toString),M},k.createOptions=function(M,W){var G={};return ue(G,W),M&&ue(G,M),G}):X("hasOwnProperty not supported"),T||X("Rangy can only run in a browser"),function(){var M;if(T){var W=document.createElement("div");W.appendChild(document.createElement("span"));var G=[].slice;try{G.call(W.childNodes,0)[0].nodeType==1&&(M=function(ee){return G.call(ee,0)})}catch{}}M||(M=function(ee){for(var re=[],ge=0,Se=ee.length;ge<Se;++ge)re[ge]=ee[ge];return re}),k.toArray=M}();var he;T&&(u(document,"addEventListener")?he=function(M,W,G){M.addEventListener(W,G,!1)}:u(document,"attachEvent")?he=function(M,W,G){M.attachEvent("on"+W,G)}:X("Document does not have required addEventListener or attachEvent method"),k.addListener=he);var w=[];function D(M){return M.message||M.description||String(M)}function R(){if(!(!T||C.initialized)){var M,W=!1,G=!1;u(document,"createRange")&&(M=document.createRange(),h(M,a)&&p(M,o)&&(W=!0));var ee=y(document);if(!ee||ee.nodeName.toLowerCase()!="body"){X("No body element found");return}if(ee&&u(ee,"createTextRange")&&(M=ee.createTextRange(),g(M)&&(G=!0)),!W&&!G){X("Neither Range nor TextRange are available");return}C.initialized=!0,C.features={implementsDomRange:W,implementsTextRange:G};var re,ge;for(var Se in A)(re=A[Se])instanceof it&&re.init(re,C);for(var pt=0,Tt=w.length;pt<Tt;++pt)try{w[pt](C)}catch(Rt){ge="Rangy init listener threw an exception. Continuing. Detail: "+D(Rt),S(ge)}}}function K(M,W,G){G&&(M+=" in module "+G.name),C.warn("DEPRECATED: "+M+" is deprecated. Please use "+W+" instead.")}function ye(M,W,G,ee){M[W]=function(){return K(W,G,ee),M[G].apply(M,k.toArray(arguments))}}k.deprecationNotice=K,k.createAliasForDeprecatedMethod=ye,C.init=R,C.addInitListener=function(M){C.initialized?M(C):w.push(M)};var Oe=[];C.addShimListener=function(M){Oe.push(M)};function rt(M){M=M||window,R();for(var W=0,G=Oe.length;W<G;++W)Oe[W](M)}T&&(C.shim=C.createMissingNativeApi=rt,ye(C,"createMissingNativeApi","shim"));function it(M,W,G){this.name=M,this.dependencies=W,this.initialized=!1,this.supported=!1,this.initializer=G}it.prototype={init:function(){for(var M=this.dependencies||[],W=0,G=M.length,ee,re;W<G;++W){if(re=M[W],ee=A[re],!ee||!(ee instanceof it))throw new Error("required module '"+re+"' not found");if(ee.init(),!ee.supported)throw new Error("required module '"+re+"' not supported")}this.initializer(this)},fail:function(M){throw this.initialized=!0,this.supported=!1,new Error(M)},warn:function(M){C.warn("Module "+this.name+": "+M)},deprecationNotice:function(M,W){C.warn("DEPRECATED: "+M+" in module "+this.name+" is deprecated. Please use "+W+" instead")},createError:function(M){return new Error("Error in Rangy "+this.name+" module: "+M)}};function me(M,W,G){var ee=new it(M,W,function(re){if(!re.initialized){re.initialized=!0;try{G(C,re),re.supported=!0}catch(Se){var ge="Module '"+M+"' failed to load: "+D(Se);S(ge),Se.stack&&S(Se.stack)}}});return A[M]=ee,ee}C.createModule=function(M){var W,G;arguments.length==2?(W=arguments[1],G=[]):(W=arguments[2],G=arguments[1]);var ee=me(M,G,W);C.initialized&&C.supported&&ee.init()},C.createCoreModule=function(M,W,G){me(M,W,G)};function ke(){}C.RangePrototype=ke,C.rangePrototype=new ke;function ze(){}C.selectionPrototype=new ze,C.createCoreModule("DomUtil",[],function(M,W){var G="undefined",ee=M.util,re=ee.getBody;ee.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||W.fail("document missing a Node creation method"),ee.isHostMethod(document,"getElementsByTagName")||W.fail("document missing getElementsByTagName method");var ge=document.createElement("div");ee.areHostMethods(ge,["insertBefore","appendChild","cloneNode"])||W.fail("Incomplete Element implementation"),ee.isHostProperty(ge,"innerHTML")||W.fail("Element is missing innerHTML property");var Se=document.createTextNode("test");ee.areHostMethods(Se,["splitText","deleteData","insertData","appendData","cloneNode"])||W.fail("Incomplete Text Node implementation");var pt=function(H,ne){for(var je=H.length;je--;)if(H[je]===ne)return!0;return!1};function Tt(H){var ne;return typeof H.namespaceURI==G||(ne=H.namespaceURI)===null||ne=="http://www.w3.org/1999/xhtml"}function Rt(H){var ne=H.parentNode;return ne.nodeType==1?ne:null}function st(H){for(var ne=0;H=H.previousSibling;)++ne;return ne}function $t(H){switch(H.nodeType){case 7:case 10:return 0;case 3:case 8:return H.length;default:return H.childNodes.length}}function Ut(H,ne){var je=[],Ee;for(Ee=H;Ee;Ee=Ee.parentNode)je.push(Ee);for(Ee=ne;Ee;Ee=Ee.parentNode)if(pt(je,Ee))return Ee;return null}function E(H,ne,je){for(var Ee=je?ne:ne.parentNode;Ee;){if(Ee===H)return!0;Ee=Ee.parentNode}return!1}function O(H,ne){return E(H,ne,!0)}function N(H,ne,je){for(var Ee,St=je?H:H.parentNode;St;){if(Ee=St.parentNode,Ee===ne)return St;St=Ee}return null}function z(H){var ne=H.nodeType;return ne==3||ne==4||ne==8}function P(H){if(!H)return!1;var ne=H.nodeType;return ne==3||ne==8}function q(H,ne){var je=ne.nextSibling,Ee=ne.parentNode;return je?Ee.insertBefore(H,je):Ee.appendChild(H),H}function Y(H,ne,je){var Ee=H.cloneNode(!1);if(Ee.deleteData(0,ne),H.deleteData(ne,H.length-ne),q(Ee,H),je)for(var St=0,ft;ft=je[St++];)ft.node==H&&ft.offset>ne?(ft.node=Ee,ft.offset-=ne):ft.node==H.parentNode&&ft.offset>st(H)&&++ft.offset;return Ee}function Z(H){if(H.nodeType==9)return H;if(typeof H.ownerDocument!=G)return H.ownerDocument;if(typeof H.document!=G)return H.document;if(H.parentNode)return Z(H.parentNode);throw W.createError("getDocument: no document found for node")}function Ae(H){var ne=Z(H);if(typeof ne.defaultView!=G)return ne.defaultView;if(typeof ne.parentWindow!=G)return ne.parentWindow;throw W.createError("Cannot get a window object for node")}function ve(H){if(typeof H.contentDocument!=G)return H.contentDocument;if(typeof H.contentWindow!=G)return H.contentWindow.document;throw W.createError("getIframeDocument: No Document object found for iframe element")}function oe(H){if(typeof H.contentWindow!=G)return H.contentWindow;if(typeof H.contentDocument!=G)return H.contentDocument.defaultView;throw W.createError("getIframeWindow: No Window object found for iframe element")}function Je(H){return H&&ee.isHostMethod(H,"setTimeout")&&ee.isHostObject(H,"document")}function Ye(H,ne,je){var Ee;if(H?ee.isHostProperty(H,"nodeType")?Ee=H.nodeType==1&&H.tagName.toLowerCase()=="iframe"?ve(H):Z(H):Je(H)&&(Ee=H.document):Ee=document,!Ee)throw ne.createError(je+"(): Parameter must be a Window object or DOM node");return Ee}function Ke(H){for(var ne;ne=H.parentNode;)H=ne;return H}function Yt(H,ne,je,Ee){var St,ft,yr,Dn,dn;if(H==je)return ne===Ee?0:ne<Ee?-1:1;if(St=N(je,H,!0))return ne<=st(St)?-1:1;if(St=N(H,je,!0))return st(St)<Ee?-1:1;if(ft=Ut(H,je),!ft)throw new Error("comparePoints error: nodes have no common ancestor");if(yr=H===ft?ft:N(H,ft,!0),Dn=je===ft?ft:N(je,ft,!0),yr===Dn)throw W.createError("comparePoints got to case 4 and childA and childB are the same!");for(dn=ft.firstChild;dn;){if(dn===yr)return-1;if(dn===Dn)return 1;dn=dn.nextSibling}}var se=!1;function _e(H){var ne;try{return ne=H.parentNode,!1}catch{return!0}}(function(){var H=document.createElement("b");H.innerHTML="1";var ne=H.firstChild;H.innerHTML="<br />",se=_e(ne),M.features.crashyTextNodes=se})();function et(H){if(!H)return"[No node]";if(se&&_e(H))return"[Broken node]";if(z(H))return'"'+H.data+'"';if(H.nodeType==1){var ne=H.id?' id="'+H.id+'"':"";return"<"+H.nodeName+ne+">[index:"+st(H)+",length:"+H.childNodes.length+"]["+(H.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return H.nodeName}function yt(H){for(var ne=Z(H).createDocumentFragment(),je;je=H.firstChild;)ne.appendChild(je);return ne}var Lt;typeof window.getComputedStyle!=G?Lt=function(H,ne){return Ae(H).getComputedStyle(H,null)[ne]}:typeof document.documentElement.currentStyle!=G?Lt=function(H,ne){return H.currentStyle?H.currentStyle[ne]:""}:W.fail("No means of obtaining computed style properties found");function Pn(H,ne,je){var Ee=re(H),St=H.createElement("div");St.contentEditable=""+!!je,ne&&(St.innerHTML=ne);var ft=Ee.firstChild;return ft?Ee.insertBefore(St,ft):Ee.appendChild(St),St}function cn(H){return H.parentNode.removeChild(H)}function Vt(H){this.root=H,this._next=H}Vt.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var H=this._current=this._next,ne,je;if(this._current)if(ne=H.firstChild,ne)this._next=ne;else{for(je=null;H!==this.root&&!(je=H.nextSibling);)H=H.parentNode;this._next=je}return this._current},detach:function(){this._current=this._next=this.root=null}};function Kt(H){return new Vt(H)}function tn(H,ne){this.node=H,this.offset=ne}tn.prototype={equals:function(H){return!!H&&this.node===H.node&&this.offset==H.offset},inspect:function(){return"[DomPosition("+et(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function xn(H){this.code=this[H],this.codeName=H,this.message="DOMException: "+this.codeName}xn.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},xn.prototype.toString=function(){return this.message},M.dom={arrayContains:pt,isHtmlNamespace:Tt,parentElement:Rt,getNodeIndex:st,getNodeLength:$t,getCommonAncestor:Ut,isAncestorOf:E,isOrIsAncestorOf:O,getClosestAncestorIn:N,isCharacterDataNode:z,isTextOrCommentNode:P,insertAfter:q,splitDataNode:Y,getDocument:Z,getWindow:Ae,getIframeWindow:oe,getIframeDocument:ve,getBody:re,isWindow:Je,getContentDocument:Ye,getRootContainer:Ke,comparePoints:Yt,isBrokenNode:_e,inspectNode:et,getComputedStyleProperty:Lt,createTestElement:Pn,removeNode:cn,fragmentFromNodeChildren:yt,createIterator:Kt,DomPosition:tn},M.DOMException=xn}),C.createCoreModule("DomRange",["DomUtil"],function(M,W){var G=M.dom,ee=M.util,re=G.DomPosition,ge=M.DOMException,Se=G.isCharacterDataNode,pt=G.getNodeIndex,Tt=G.isOrIsAncestorOf,Rt=G.getDocument,st=G.comparePoints,$t=G.splitDataNode,Ut=G.getClosestAncestorIn,E=G.getNodeLength,O=G.arrayContains,N=G.getRootContainer,z=M.features.crashyTextNodes,P=G.removeNode;function q(x,L){return x.nodeType!=3&&(Tt(x,L.startContainer)||Tt(x,L.endContainer))}function Y(x){return x.document||Rt(x.startContainer)}function Z(x){return N(x.startContainer)}function Ae(x){return new re(x.parentNode,pt(x))}function ve(x){return new re(x.parentNode,pt(x)+1)}function oe(x,L,U){var te=x.nodeType==11?x.firstChild:x;return Se(L)?U==L.length?G.insertAfter(x,L):L.parentNode.insertBefore(x,U==0?L:$t(L,U)):U>=L.childNodes.length?L.appendChild(x):L.insertBefore(x,L.childNodes[U]),te}function Je(x,L,U){if(vt(x),vt(L),Y(L)!=Y(x))throw new ge("WRONG_DOCUMENT_ERR");var te=st(x.startContainer,x.startOffset,L.endContainer,L.endOffset),be=st(x.endContainer,x.endOffset,L.startContainer,L.startOffset);return U?te<=0&&be>=0:te<0&&be>0}function Ye(x){for(var L,U,te=Y(x.range).createDocumentFragment(),be;U=x.next();){if(L=x.isPartiallySelectedSubtree(),U=U.cloneNode(!L),L&&(be=x.getSubtreeIterator(),U.appendChild(Ye(be)),be.detach()),U.nodeType==10)throw new ge("HIERARCHY_REQUEST_ERR");te.appendChild(U)}return te}function Ke(x,L,U){var te,be;U=U||{stop:!1};for(var qe,J;qe=x.next();)if(x.isPartiallySelectedSubtree()){if(L(qe)===!1){U.stop=!0;return}else if(J=x.getSubtreeIterator(),Ke(J,L,U),J.detach(),U.stop)return}else for(te=G.createIterator(qe);be=te.next();)if(L(be)===!1){U.stop=!0;return}}function Yt(x){for(var L;x.next();)x.isPartiallySelectedSubtree()?(L=x.getSubtreeIterator(),Yt(L),L.detach()):x.remove()}function se(x){for(var L,U=Y(x.range).createDocumentFragment(),te;L=x.next();){if(x.isPartiallySelectedSubtree()?(L=L.cloneNode(!1),te=x.getSubtreeIterator(),L.appendChild(se(te)),te.detach()):x.remove(),L.nodeType==10)throw new ge("HIERARCHY_REQUEST_ERR");U.appendChild(L)}return U}function _e(x,L,U){var te=!!(L&&L.length),be,qe=!!U;te&&(be=new RegExp("^("+L.join("|")+")$"));var J=[];return Ke(new yt(x,!1),function(pe){if(!(te&&!be.test(pe.nodeType))&&!(qe&&!U(pe))){var Ce=x.startContainer;if(!(pe==Ce&&Se(Ce)&&x.startOffset==Ce.length)){var Ve=x.endContainer;pe==Ve&&Se(Ve)&&x.endOffset==0||J.push(pe)}}}),J}function et(x){var L=typeof x.getName>"u"?"Range":x.getName();return"["+L+"("+G.inspectNode(x.startContainer)+":"+x.startOffset+", "+G.inspectNode(x.endContainer)+":"+x.endOffset+")]"}function yt(x,L){if(this.range=x,this.clonePartiallySelectedTextNodes=L,!x.collapsed){this.sc=x.startContainer,this.so=x.startOffset,this.ec=x.endContainer,this.eo=x.endOffset;var U=x.commonAncestorContainer;this.sc===this.ec&&Se(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===U&&!Se(this.sc)?this.sc.childNodes[this.so]:Ut(this.sc,U,!0),this._last=this.ec===U&&!Se(this.ec)?this.ec.childNodes[this.eo-1]:Ut(this.ec,U,!0))}}yt.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var x=this._current=this._next;return x&&(this._next=x!==this._last?x.nextSibling:null,Se(x)&&this.clonePartiallySelectedTextNodes&&(x===this.ec&&(x=x.cloneNode(!0)).deleteData(this.eo,x.length-this.eo),this._current===this.sc&&(x=x.cloneNode(!0)).deleteData(0,this.so))),x},remove:function(){var x=this._current,L,U;Se(x)&&(x===this.sc||x===this.ec)?(L=x===this.sc?this.so:0,U=x===this.ec?this.eo:x.length,L!=U&&x.deleteData(L,U-L)):x.parentNode&&P(x)},isPartiallySelectedSubtree:function(){var x=this._current;return q(x,this.range)},getSubtreeIterator:function(){var x;if(this.isSingleCharacterDataNode)x=this.range.cloneRange(),x.collapse(!1);else{x=new It(Y(this.range));var L=this._current,U=L,te=0,be=L,qe=E(L);Tt(L,this.sc)&&(U=this.sc,te=this.so),Tt(L,this.ec)&&(be=this.ec,qe=this.eo),tt(x,U,te,be,qe)}return new yt(x,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Lt=[1,3,4,5,7,8,10],Pn=[2,9,11],cn=[5,6,10,12],Vt=[1,3,4,5,7,8,10,11],Kt=[1,3,4,5,7,8];function tn(x){return function(L,U){for(var te,be=U?L:L.parentNode;be;){if(te=be.nodeType,O(x,te))return be;be=be.parentNode}return null}}var xn=tn([9,11]),H=tn(cn),ne=tn([6,10,12]),je=tn([1]);function Ee(x,L){if(ne(x,L))throw new ge("INVALID_NODE_TYPE_ERR")}function St(x,L){if(!O(L,x.nodeType))throw new ge("INVALID_NODE_TYPE_ERR")}function ft(x,L){if(L<0||L>(Se(x)?x.length:x.childNodes.length))throw new ge("INDEX_SIZE_ERR")}function yr(x,L){if(xn(x,!0)!==xn(L,!0))throw new ge("WRONG_DOCUMENT_ERR")}function Dn(x){if(H(x,!0))throw new ge("NO_MODIFICATION_ALLOWED_ERR")}function dn(x,L){if(!x)throw new ge(L)}function Ua(x,L){return L<=(Se(x)?x.length:x.childNodes.length)}function Wi(x){return!!x.startContainer&&!!x.endContainer&&!(z&&(G.isBrokenNode(x.startContainer)||G.isBrokenNode(x.endContainer)))&&N(x.startContainer)==N(x.endContainer)&&Ua(x.startContainer,x.startOffset)&&Ua(x.endContainer,x.endOffset)}function vt(x){if(!Wi(x))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+x.inspect()+")")}var Ya=document.createElement("style"),Gr=!1;try{Ya.innerHTML="<b>x</b>",Gr=Ya.firstChild.nodeType==3}catch{}M.features.htmlParsingConforms=Gr;var Va=Gr?function(x){var L=this.startContainer,U=Rt(L);if(!L)throw new ge("INVALID_STATE_ERR");var te=null;return L.nodeType==1?te=L:Se(L)&&(te=G.parentElement(L)),te===null||te.nodeName=="HTML"&&G.isHtmlNamespace(Rt(te).documentElement)&&G.isHtmlNamespace(te)?te=U.createElement("body"):te=te.cloneNode(!1),te.innerHTML=x,G.fragmentFromNodeChildren(te)}:function(x){var L=Y(this),U=L.createElement("body");return U.innerHTML=x,G.fragmentFromNodeChildren(U)};function Fo(x,L){vt(x);var U=x.startContainer,te=x.startOffset,be=x.endContainer,qe=x.endOffset,J=U===be;Se(be)&&qe>0&&qe<be.length&&$t(be,qe,L),Se(U)&&te>0&&te<U.length&&(U=$t(U,te,L),J?(qe-=te,be=U):be==U.parentNode&&qe>=pt(U)&&qe++,te=0),x.setStartAndEnd(U,te,be,qe)}function Be(x){vt(x);var L=x.commonAncestorContainer.parentNode.cloneNode(!1);return L.appendChild(x.cloneContents()),L.innerHTML}var $o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Ho=0,zi=1,hu=2,mi=3,Xi=0,Ka=1,qa=2,Wo=3;ee.extend(M.rangePrototype,{compareBoundaryPoints:function(x,L){vt(this),yr(this.startContainer,L.startContainer);var U,te,be,qe,J=x==mi||x==Ho?"start":"end",pe=x==zi||x==Ho?"start":"end";return U=this[J+"Container"],te=this[J+"Offset"],be=L[pe+"Container"],qe=L[pe+"Offset"],st(U,te,be,qe)},insertNode:function(x){if(vt(this),St(x,Vt),Dn(this.startContainer),Tt(x,this.startContainer))throw new ge("HIERARCHY_REQUEST_ERR");var L=oe(x,this.startContainer,this.startOffset);this.setStartBefore(L)},cloneContents:function(){vt(this);var x,L;if(this.collapsed)return Y(this).createDocumentFragment();if(this.startContainer===this.endContainer&&Se(this.startContainer))return x=this.startContainer.cloneNode(!0),x.data=x.data.slice(this.startOffset,this.endOffset),L=Y(this).createDocumentFragment(),L.appendChild(x),L;var U=new yt(this,!0);return x=Ye(U),U.detach(),x},canSurroundContents:function(){vt(this),Dn(this.startContainer),Dn(this.endContainer);var x=new yt(this,!0),L=x._first&&q(x._first,this)||x._last&&q(x._last,this);return x.detach(),!L},surroundContents:function(x){if(St(x,Kt),!this.canSurroundContents())throw new ge("INVALID_STATE_ERR");var L=this.extractContents();if(x.hasChildNodes())for(;x.lastChild;)x.removeChild(x.lastChild);oe(x,this.startContainer,this.startOffset),x.appendChild(L),this.selectNode(x)},cloneRange:function(){vt(this);for(var x=new It(Y(this)),L=$o.length,U;L--;)U=$o[L],x[U]=this[U];return x},toString:function(){vt(this);var x=this.startContainer;if(x===this.endContainer&&Se(x))return x.nodeType==3||x.nodeType==4?x.data.slice(this.startOffset,this.endOffset):"";var L=[],U=new yt(this,!0);return Ke(U,function(te){(te.nodeType==3||te.nodeType==4)&&L.push(te.data)}),U.detach(),L.join("")},compareNode:function(x){vt(this);var L=x.parentNode,U=pt(x);if(!L)throw new ge("NOT_FOUND_ERR");var te=this.comparePoint(L,U),be=this.comparePoint(L,U+1);return te<0?be>0?qa:Xi:be>0?Ka:Wo},comparePoint:function(x,L){return vt(this),dn(x,"HIERARCHY_REQUEST_ERR"),yr(x,this.startContainer),st(x,L,this.startContainer,this.startOffset)<0?-1:st(x,L,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Va,toHtml:function(){return Be(this)},intersectsNode:function(x,L){if(vt(this),N(x)!=Z(this))return!1;var U=x.parentNode,te=pt(x);if(!U)return!0;var be=st(U,te,this.endContainer,this.endOffset),qe=st(U,te+1,this.startContainer,this.startOffset);return L?be<=0&&qe>=0:be<0&&qe>0},isPointInRange:function(x,L){return vt(this),dn(x,"HIERARCHY_REQUEST_ERR"),yr(x,this.startContainer),st(x,L,this.startContainer,this.startOffset)>=0&&st(x,L,this.endContainer,this.endOffset)<=0},intersectsRange:function(x){return Je(this,x,!1)},intersectsOrTouchesRange:function(x){return Je(this,x,!0)},intersection:function(x){if(this.intersectsRange(x)){var L=st(this.startContainer,this.startOffset,x.startContainer,x.startOffset),U=st(this.endContainer,this.endOffset,x.endContainer,x.endOffset),te=this.cloneRange();return L==-1&&te.setStart(x.startContainer,x.startOffset),U==1&&te.setEnd(x.endContainer,x.endOffset),te}return null},union:function(x){if(this.intersectsOrTouchesRange(x)){var L=this.cloneRange();return st(x.startContainer,x.startOffset,this.startContainer,this.startOffset)==-1&&L.setStart(x.startContainer,x.startOffset),st(x.endContainer,x.endOffset,this.endContainer,this.endOffset)==1&&L.setEnd(x.endContainer,x.endOffset),L}else throw new ge("Ranges do not intersect")},containsNode:function(x,L){return L?this.intersectsNode(x,!1):this.compareNode(x)==Wo},containsNodeContents:function(x){return this.comparePoint(x,0)>=0&&this.comparePoint(x,E(x))<=0},containsRange:function(x){var L=this.intersection(x);return L!==null&&x.equals(L)},containsNodeText:function(x){var L=this.cloneRange();L.selectNode(x);var U=L.getNodes([3]);if(U.length>0){L.setStart(U[0],0);var te=U.pop();return L.setEnd(te,te.length),this.containsRange(L)}else return this.containsNodeContents(x)},getNodes:function(x,L){return vt(this),_e(this,x,L)},getDocument:function(){return Y(this)},collapseBefore:function(x){this.setEndBefore(x),this.collapse(!1)},collapseAfter:function(x){this.setStartAfter(x),this.collapse(!0)},getBookmark:function(x){var L=Y(this),U=M.createRange(L);x=x||G.getBody(L),U.selectNodeContents(x);var te=this.intersection(U),be=0,qe=0;return te&&(U.setEnd(te.startContainer,te.startOffset),be=U.toString().length,qe=be+te.toString().length),{start:be,end:qe,containerNode:x}},moveToBookmark:function(x){var L=x.containerNode,U=0;this.setStart(L,0),this.collapse(!0);for(var te=[L],be,qe=!1,J=!1,pe,Ce,Ve;!J&&(be=te.pop());)if(be.nodeType==3)pe=U+be.length,!qe&&x.start>=U&&x.start<=pe&&(this.setStart(be,x.start-U),qe=!0),qe&&x.end>=U&&x.end<=pe&&(this.setEnd(be,x.end-U),J=!0),U=pe;else for(Ve=be.childNodes,Ce=Ve.length;Ce--;)te.push(Ve[Ce])},getName:function(){return"DomRange"},equals:function(x){return It.rangesEqual(this,x)},isValid:function(){return Wi(this)},inspect:function(){return et(this)},detach:function(){}});function b(x){x.START_TO_START=Ho,x.START_TO_END=zi,x.END_TO_END=hu,x.END_TO_START=mi,x.NODE_BEFORE=Xi,x.NODE_AFTER=Ka,x.NODE_BEFORE_AND_AFTER=qa,x.NODE_INSIDE=Wo}function j(x){b(x),b(x.prototype)}function V(x,L){return function(){vt(this);var U=this.startContainer,te=this.startOffset,be=this.commonAncestorContainer,qe=new yt(this,!0),J,pe;U!==be&&(J=Ut(U,be,!0),pe=ve(J),U=pe.node,te=pe.offset),Ke(qe,Dn),qe.reset();var Ce=x(qe);return qe.detach(),L(this,U,te,U,te),Ce}}function le(x,L){function U(J,pe){return function(Ce){St(Ce,Lt),St(N(Ce),Pn);var Ve=(J?Ae:ve)(Ce);(pe?te:be)(this,Ve.node,Ve.offset)}}function te(J,pe,Ce){var Ve=J.endContainer,hn=J.endOffset;(pe!==J.startContainer||Ce!==J.startOffset)&&((N(pe)!=N(Ve)||st(pe,Ce,Ve,hn)==1)&&(Ve=pe,hn=Ce),L(J,pe,Ce,Ve,hn))}function be(J,pe,Ce){var Ve=J.startContainer,hn=J.startOffset;(pe!==J.endContainer||Ce!==J.endOffset)&&((N(pe)!=N(Ve)||st(pe,Ce,Ve,hn)==-1)&&(Ve=pe,hn=Ce),L(J,Ve,hn,pe,Ce))}var qe=function(){};qe.prototype=M.rangePrototype,x.prototype=new qe,ee.extend(x.prototype,{setStart:function(J,pe){Ee(J,!0),ft(J,pe),te(this,J,pe)},setEnd:function(J,pe){Ee(J,!0),ft(J,pe),be(this,J,pe)},setStartAndEnd:function(){var J=arguments,pe=J[0],Ce=J[1],Ve=pe,hn=Ce;switch(J.length){case 3:hn=J[2];break;case 4:Ve=J[2],hn=J[3];break}Ee(pe,!0),ft(pe,Ce),Ee(Ve,!0),ft(Ve,hn),L(this,pe,Ce,Ve,hn)},setBoundary:function(J,pe,Ce){this["set"+(Ce?"Start":"End")](J,pe)},setStartBefore:U(!0,!0),setStartAfter:U(!1,!0),setEndBefore:U(!0,!1),setEndAfter:U(!1,!1),collapse:function(J){vt(this),J?L(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):L(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(J){Ee(J,!0),L(this,J,0,J,E(J))},selectNode:function(J){Ee(J,!1),St(J,Lt);var pe=Ae(J),Ce=ve(J);L(this,pe.node,pe.offset,Ce.node,Ce.offset)},extractContents:V(se,L),deleteContents:V(Yt,L),canSurroundContents:function(){vt(this),Dn(this.startContainer),Dn(this.endContainer);var J=new yt(this,!0),pe=J._first&&q(J._first,this)||J._last&&q(J._last,this);return J.detach(),!pe},splitBoundaries:function(){Fo(this)},splitBoundariesPreservingPositions:function(J){Fo(this,J)},normalizeBoundaries:function(){vt(this);var J=this.startContainer,pe=this.startOffset,Ce=this.endContainer,Ve=this.endOffset,hn=function(En){var Rr=En.nextSibling;Rr&&Rr.nodeType==En.nodeType&&(Ce=En,Ve=En.length,En.appendData(Rr.data),P(Rr))},e0=function(En){var Rr=En.previousSibling;if(Rr&&Rr.nodeType==En.nodeType){J=En;var bj=En.length;if(pe=Rr.length,En.insertData(0,Rr.data),P(Rr),J==Ce)Ve+=pe,Ce=J;else if(Ce==En.parentNode){var t0=pt(En);Ve==t0?(Ce=En,Ve=bj):Ve>t0&&Ve--}}},bd=!0,qn;if(Se(Ce))Ve==Ce.length?hn(Ce):Ve==0&&(qn=Ce.previousSibling,qn&&qn.nodeType==Ce.nodeType&&(Ve=qn.length,J==Ce&&(bd=!1),qn.appendData(Ce.data),P(Ce),Ce=qn));else{if(Ve>0){var xd=Ce.childNodes[Ve-1];xd&&Se(xd)&&hn(xd)}bd=!this.collapsed}if(bd){if(Se(J))pe==0?e0(J):pe==J.length&&(qn=J.nextSibling,qn&&qn.nodeType==J.nodeType&&(Ce==qn&&(Ce=J,Ve+=J.length),J.appendData(qn.data),P(qn)));else if(pe<J.childNodes.length){var Ed=J.childNodes[pe];Ed&&Se(Ed)&&e0(Ed)}}else J=Ce,pe=Ve;L(this,J,pe,Ce,Ve)},collapseToPoint:function(J,pe){Ee(J,!0),ft(J,pe),this.setStartAndEnd(J,pe)},parentElement:function(){vt(this);var J=this.commonAncestorContainer;return J?je(this.commonAncestorContainer,!0):null}}),j(x)}function Pe(x){x.collapsed=x.startContainer===x.endContainer&&x.startOffset===x.endOffset,x.commonAncestorContainer=x.collapsed?x.startContainer:G.getCommonAncestor(x.startContainer,x.endContainer)}function tt(x,L,U,te,be){x.startContainer=L,x.startOffset=U,x.endContainer=te,x.endOffset=be,x.document=G.getDocument(L),Pe(x)}function It(x){tt(this,x,0,x,0)}le(It,tt),ee.extend(It,{rangeProperties:$o,RangeIterator:yt,copyComparisonConstants:j,createPrototypeRange:le,inspect:et,toHtml:Be,getRangeDocument:Y,rangesEqual:function(x,L){return x.startContainer===L.startContainer&&x.startOffset===L.startOffset&&x.endContainer===L.endContainer&&x.endOffset===L.endOffset}}),M.DomRange=It}),C.createCoreModule("WrappedRange",["DomRange"],function(M,W){var G,ee,re=M.dom,ge=M.util,Se=re.DomPosition,pt=M.DomRange,Tt=re.getBody,Rt=re.getContentDocument,st=re.isCharacterDataNode;if(M.features.implementsDomRange&&function(){var P,q=pt.rangeProperties;function Y(se){for(var _e=q.length,et;_e--;)et=q[_e],se[et]=se.nativeRange[et];se.collapsed=se.startContainer===se.endContainer&&se.startOffset===se.endOffset}function Z(se,_e,et,yt,Lt){var Pn=se.startContainer!==_e||se.startOffset!=et,cn=se.endContainer!==yt||se.endOffset!=Lt,Vt=!se.equals(se.nativeRange);(Pn||cn||Vt)&&(se.setEnd(yt,Lt),se.setStart(_e,et))}var Ae;G=function(se){if(!se)throw W.createError("WrappedRange: Range must be specified");this.nativeRange=se,Y(this)},pt.createPrototypeRange(G,Z),P=G.prototype,P.selectNode=function(se){this.nativeRange.selectNode(se),Y(this)},P.cloneContents=function(){return this.nativeRange.cloneContents()},P.surroundContents=function(se){this.nativeRange.surroundContents(se),Y(this)},P.collapse=function(se){this.nativeRange.collapse(se),Y(this)},P.cloneRange=function(){return new G(this.nativeRange.cloneRange())},P.refresh=function(){Y(this)},P.toString=function(){return this.nativeRange.toString()};var ve=document.createTextNode("test");Tt(document).appendChild(ve);var oe=document.createRange();oe.setStart(ve,0),oe.setEnd(ve,0);try{oe.setStart(ve,1),P.setStart=function(se,_e){this.nativeRange.setStart(se,_e),Y(this)},P.setEnd=function(se,_e){this.nativeRange.setEnd(se,_e),Y(this)},Ae=function(se){return function(_e){this.nativeRange[se](_e),Y(this)}}}catch{P.setStart=function(_e,et){try{this.nativeRange.setStart(_e,et)}catch{this.nativeRange.setEnd(_e,et),this.nativeRange.setStart(_e,et)}Y(this)},P.setEnd=function(_e,et){try{this.nativeRange.setEnd(_e,et)}catch{this.nativeRange.setStart(_e,et),this.nativeRange.setEnd(_e,et)}Y(this)},Ae=function(_e,et){return function(yt){try{this.nativeRange[_e](yt)}catch{this.nativeRange[et](yt),this.nativeRange[_e](yt)}Y(this)}}}P.setStartBefore=Ae("setStartBefore","setEndBefore"),P.setStartAfter=Ae("setStartAfter","setEndAfter"),P.setEndBefore=Ae("setEndBefore","setStartBefore"),P.setEndAfter=Ae("setEndAfter","setStartAfter"),P.selectNodeContents=function(se){this.setStartAndEnd(se,0,re.getNodeLength(se))},oe.selectNodeContents(ve),oe.setEnd(ve,3);var Je=document.createRange();Je.selectNodeContents(ve),Je.setEnd(ve,4),Je.setStart(ve,2),oe.compareBoundaryPoints(oe.START_TO_END,Je)==-1&&oe.compareBoundaryPoints(oe.END_TO_START,Je)==1?P.compareBoundaryPoints=function(se,_e){return _e=_e.nativeRange||_e,se==_e.START_TO_END?se=_e.END_TO_START:se==_e.END_TO_START&&(se=_e.START_TO_END),this.nativeRange.compareBoundaryPoints(se,_e)}:P.compareBoundaryPoints=function(se,_e){return this.nativeRange.compareBoundaryPoints(se,_e.nativeRange||_e)};var Ye=document.createElement("div");Ye.innerHTML="123";var Ke=Ye.firstChild,Yt=Tt(document);Yt.appendChild(Ye),oe.setStart(Ke,1),oe.setEnd(Ke,2),oe.deleteContents(),Ke.data=="13"&&(P.deleteContents=function(){this.nativeRange.deleteContents(),Y(this)},P.extractContents=function(){var se=this.nativeRange.extractContents();return Y(this),se}),Yt.removeChild(Ye),Yt=null,ge.isHostMethod(oe,"createContextualFragment")&&(P.createContextualFragment=function(se){return this.nativeRange.createContextualFragment(se)}),Tt(document).removeChild(ve),P.getName=function(){return"WrappedRange"},M.WrappedRange=G,M.createNativeRange=function(se){return se=Rt(se,W,"createNativeRange"),se.createRange()}}(),M.features.implementsTextRange){var $t=function(P){var q=P.parentElement(),Y=P.duplicate();Y.collapse(!0);var Z=Y.parentElement();Y=P.duplicate(),Y.collapse(!1);var Ae=Y.parentElement(),ve=Z==Ae?Z:re.getCommonAncestor(Z,Ae);return ve==q?ve:re.getCommonAncestor(q,ve)},Ut=function(P){return P.compareEndPoints("StartToEnd",P)==0},E=function(P,q,Y,Z,Ae){var ve=P.duplicate();ve.collapse(Y);var oe=ve.parentElement();if(re.isOrIsAncestorOf(q,oe)||(oe=q),!oe.canHaveHTML){var Je=new Se(oe.parentNode,re.getNodeIndex(oe));return{boundaryPosition:Je,nodeInfo:{nodeIndex:Je.offset,containerElement:Je.node}}}var Ye=re.getDocument(oe).createElement("span");Ye.parentNode&&re.removeNode(Ye);for(var Ke,Yt=Y?"StartToStart":"StartToEnd",se,_e,et,yt,Lt=Ae&&Ae.containerElement==oe?Ae.nodeIndex:0,Pn=oe.childNodes.length,cn=Pn,Vt=cn;Vt==Pn?oe.appendChild(Ye):oe.insertBefore(Ye,oe.childNodes[Vt]),ve.moveToElementText(Ye),Ke=ve.compareEndPoints(Yt,P),!(Ke==0||Lt==cn);){if(Ke==-1){if(cn==Lt+1)break;Lt=Vt}else cn=cn==Lt+1?Lt:Vt;Vt=Math.floor((Lt+cn)/2),oe.removeChild(Ye)}if(yt=Ye.nextSibling,Ke==-1&&yt&&st(yt)){ve.setEndPoint(Y?"EndToStart":"EndToEnd",P);var Kt;if(/[\r\n]/.test(yt.data)){var tn=ve.duplicate(),xn=tn.text.replace(/\r\n/g,"\r").length;for(Kt=tn.moveStart("character",xn);(Ke=tn.compareEndPoints("StartToEnd",tn))==-1;)Kt++,tn.moveStart("character",1)}else Kt=ve.text.length;et=new Se(yt,Kt)}else se=(Z||!Y)&&Ye.previousSibling,_e=(Z||Y)&&Ye.nextSibling,_e&&st(_e)?et=new Se(_e,0):se&&st(se)?et=new Se(se,se.data.length):et=new Se(oe,re.getNodeIndex(Ye));return re.removeNode(Ye),{boundaryPosition:et,nodeInfo:{nodeIndex:Vt,containerElement:oe}}},O=function(P,q){var Y,Z,Ae=P.offset,ve=re.getDocument(P.node),oe,Je,Ye=Tt(ve).createTextRange(),Ke=st(P.node);return Ke?(Y=P.node,Z=Y.parentNode):(Je=P.node.childNodes,Y=Ae<Je.length?Je[Ae]:null,Z=P.node),oe=ve.createElement("span"),oe.innerHTML="&#feff;",Y?Z.insertBefore(oe,Y):Z.appendChild(oe),Ye.moveToElementText(oe),Ye.collapse(!q),Z.removeChild(oe),Ke&&Ye[q?"moveStart":"moveEnd"]("character",Ae),Ye};ee=function(P){this.textRange=P,this.refresh()},ee.prototype=new pt(document),ee.prototype.refresh=function(){var P,q,Y,Z=$t(this.textRange);Ut(this.textRange)?q=P=E(this.textRange,Z,!0,!0).boundaryPosition:(Y=E(this.textRange,Z,!0,!1),P=Y.boundaryPosition,q=E(this.textRange,Z,!1,!1,Y.nodeInfo).boundaryPosition),this.setStart(P.node,P.offset),this.setEnd(q.node,q.offset)},ee.prototype.getName=function(){return"WrappedTextRange"},pt.copyComparisonConstants(ee);var N=function(P){if(P.collapsed)return O(new Se(P.startContainer,P.startOffset),!0);var q=O(new Se(P.startContainer,P.startOffset),!0),Y=O(new Se(P.endContainer,P.endOffset),!1),Z=Tt(pt.getRangeDocument(P)).createTextRange();return Z.setEndPoint("StartToStart",q),Z.setEndPoint("EndToEnd",Y),Z};if(ee.rangeToTextRange=N,ee.prototype.toTextRange=function(){return N(this)},M.WrappedTextRange=ee,!M.features.implementsDomRange||M.config.preferTextRange){var z=function(P){return P("return this;")()}(Function);typeof z.Range>"u"&&(z.Range=ee),M.createNativeRange=function(P){return P=Rt(P,W,"createNativeRange"),Tt(P).createTextRange()},M.WrappedRange=ee}}M.createRange=function(P){return P=Rt(P,W,"createRange"),new M.WrappedRange(M.createNativeRange(P))},M.createRangyRange=function(P){return P=Rt(P,W,"createRangyRange"),new pt(P)},ge.createAliasForDeprecatedMethod(M,"createIframeRange","createRange"),ge.createAliasForDeprecatedMethod(M,"createIframeRangyRange","createRangyRange"),M.addShimListener(function(P){var q=P.document;typeof q.createRange>"u"&&(q.createRange=function(){return M.createRange(q)}),q=P=null})}),C.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(M,W){M.config.checkSelectionRanges=!0;var G="boolean",ee="number",re=M.dom,ge=M.util,Se=ge.isHostMethod,pt=M.DomRange,Tt=M.WrappedRange,Rt=M.DOMException,st=re.DomPosition,$t,Ut,E=M.features,O="Control",N=re.getDocument,z=re.getBody,P=pt.rangesEqual;function q(b){return typeof b=="string"?/^backward(s)?$/i.test(b):!!b}function Y(b,j){if(b){if(re.isWindow(b))return b;if(b instanceof vt)return b.win;var V=re.getContentDocument(b,W,j);return re.getWindow(V)}else return window}function Z(b){return Y(b,"getWinSelection").getSelection()}function Ae(b){return Y(b,"getDocSelection").document.selection}function ve(b){var j=!1;return b.anchorNode&&(j=re.comparePoints(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset)==1),j}var oe=Se(window,"getSelection"),Je=ge.isHostObject(document,"selection");E.implementsWinGetSelection=oe,E.implementsDocSelection=Je;var Ye=Je&&(!oe||M.config.preferTextRange);if(Ye)$t=Ae,M.isSelectionValid=function(b){var j=Y(b,"isSelectionValid").document,V=j.selection;return V.type!="None"||N(V.createRange().parentElement())==j};else if(oe)$t=Z,M.isSelectionValid=function(){return!0};else return W.fail("Neither document.selection or window.getSelection() detected."),!1;M.getNativeSelection=$t;var Ke=$t();if(!Ke)return W.fail("Native selection was null (possibly issue 138?)"),!1;var Yt=M.createNativeRange(document),se=z(document),_e=ge.areHostProperties(Ke,["anchorNode","focusNode","anchorOffset","focusOffset"]);E.selectionHasAnchorAndFocus=_e;var et=Se(Ke,"extend");E.selectionHasExtend=et;var yt=Se(Ke,"setBaseAndExtent");E.selectionHasSetBaseAndExtent=yt;var Lt=typeof Ke.rangeCount==ee;E.selectionHasRangeCount=Lt;var Pn=!1,cn=!0,Vt=et?function(b,j){var V=pt.getRangeDocument(j),le=M.createRange(V);le.collapseToPoint(j.endContainer,j.endOffset),b.addRange(Ee(le)),b.extend(j.startContainer,j.startOffset)}:null;ge.areHostMethods(Ke,["addRange","getRangeAt","removeAllRanges"])&&typeof Ke.rangeCount==ee&&E.implementsDomRange&&function(){var b=window.getSelection();if(b){for(var j=b.rangeCount,V=j>1,le=[],Pe=ve(b),tt=0;tt<j;++tt)le[tt]=b.getRangeAt(tt);var It=re.createTestElement(document,"",!1),x=It.appendChild(document.createTextNode("")),L=document.createRange();if(L.setStart(x,1),L.collapse(!0),b.removeAllRanges(),b.addRange(L),cn=b.rangeCount==1,b.removeAllRanges(),!V){var U=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(U&&parseInt(U[1])>=36)Pn=!1;else{var te=L.cloneRange();L.setStart(x,0),te.setEnd(x,3),te.setStart(x,2),b.addRange(L),b.addRange(te),Pn=b.rangeCount==2}}for(re.removeNode(It),b.removeAllRanges(),tt=0;tt<j;++tt)tt==0&&Pe?Vt?Vt(b,le[tt]):(M.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(le[tt])):b.addRange(le[tt])}}(),E.selectionSupportsMultipleRanges=Pn,E.collapsedNonEditableSelectionsSupported=cn;var Kt=!1,tn;se&&Se(se,"createControlRange")&&(tn=se.createControlRange(),ge.areHostProperties(tn,["item","add"])&&(Kt=!0)),E.implementsControlRange=Kt,_e?Ut=function(b){return b.anchorNode===b.focusNode&&b.anchorOffset===b.focusOffset}:Ut=function(b){return b.rangeCount?b.getRangeAt(b.rangeCount-1).collapsed:!1};function xn(b,j,V){var le=V?"end":"start",Pe=V?"start":"end";b.anchorNode=j[le+"Container"],b.anchorOffset=j[le+"Offset"],b.focusNode=j[Pe+"Container"],b.focusOffset=j[Pe+"Offset"]}function H(b){var j=b.nativeSelection;b.anchorNode=j.anchorNode,b.anchorOffset=j.anchorOffset,b.focusNode=j.focusNode,b.focusOffset=j.focusOffset}function ne(b){b.anchorNode=b.focusNode=null,b.anchorOffset=b.focusOffset=0,b.rangeCount=0,b.isCollapsed=!0,b._ranges.length=0,je(b)}function je(b){b.type=b.rangeCount==0?"None":Ut(b)?"Caret":"Range"}function Ee(b){var j;return b instanceof pt?(j=M.createNativeRange(b.getDocument()),j.setEnd(b.endContainer,b.endOffset),j.setStart(b.startContainer,b.startOffset)):b instanceof Tt?j=b.nativeRange:E.implementsDomRange&&b instanceof re.getWindow(b.startContainer).Range&&(j=b),j}function St(b){if(!b.length||b[0].nodeType!=1)return!1;for(var j=1,V=b.length;j<V;++j)if(!re.isAncestorOf(b[0],b[j]))return!1;return!0}function ft(b){var j=b.getNodes();if(!St(j))throw W.createError("getSingleElementFromRange: range "+b.inspect()+" did not consist of a single element");return j[0]}function yr(b){return!!b&&typeof b.text<"u"}function Dn(b,j){var V=new Tt(j);b._ranges=[V],xn(b,V,!1),b.rangeCount=1,b.isCollapsed=V.collapsed,je(b)}function dn(b){if(b._ranges.length=0,b.docSelection.type=="None")ne(b);else{var j=b.docSelection.createRange();if(yr(j))Dn(b,j);else{b.rangeCount=j.length;for(var V,le=N(j.item(0)),Pe=0;Pe<b.rangeCount;++Pe)V=M.createRange(le),V.selectNode(j.item(Pe)),b._ranges.push(V);b.isCollapsed=b.rangeCount==1&&b._ranges[0].collapsed,xn(b,b._ranges[b.rangeCount-1],!1),je(b)}}}function Ua(b,j){for(var V=b.docSelection.createRange(),le=ft(j),Pe=N(V.item(0)),tt=z(Pe).createControlRange(),It=0,x=V.length;It<x;++It)tt.add(V.item(It));try{tt.add(le)}catch{throw W.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}tt.select(),dn(b)}var Wi;Se(Ke,"getRangeAt")?Wi=function(b,j){try{return b.getRangeAt(j)}catch{return null}}:_e&&(Wi=function(b){var j=N(b.anchorNode),V=M.createRange(j);return V.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),V.collapsed!==this.isCollapsed&&V.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),V});function vt(b,j,V){this.nativeSelection=b,this.docSelection=j,this._ranges=[],this.win=V,this.refresh()}vt.prototype=M.selectionPrototype;function Ya(b){b.win=b.anchorNode=b.focusNode=b._ranges=null,b.rangeCount=b.anchorOffset=b.focusOffset=0,b.detached=!0,je(b)}var Gr=[];function Va(b,j){for(var V=Gr.length,le,Pe;V--;)if(le=Gr[V],Pe=le.selection,j=="deleteAll")Ya(Pe);else if(le.win==b)return j=="delete"?(Gr.splice(V,1),!0):Pe;return j=="deleteAll"&&(Gr.length=0),null}var Fo=function(b){if(b&&b instanceof vt)return b.refresh(),b;b=Y(b,"getNativeSelection");var j=Va(b),V=$t(b),le=Je?Ae(b):null;return j?(j.nativeSelection=V,j.docSelection=le,j.refresh()):(j=new vt(V,le,b),Gr.push({win:b,selection:j})),j};M.getSelection=Fo,ge.createAliasForDeprecatedMethod(M,"getIframeSelection","getSelection");var Be=vt.prototype;function $o(b,j){for(var V=N(j[0].startContainer),le=z(V).createControlRange(),Pe=0,tt,It=j.length;Pe<It;++Pe){tt=ft(j[Pe]);try{le.add(tt)}catch{throw W.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}le.select(),dn(b)}if(!Ye&&_e&&ge.areHostMethods(Ke,["removeAllRanges","addRange"])){Be.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),ne(this)};var Ho=function(b,j){Vt(b.nativeSelection,j),b.refresh()};Lt?Be.addRange=function(b,j){if(Kt&&Je&&this.docSelection.type==O)Ua(this,b);else if(q(j)&&et)Ho(this,b);else{var V;Pn?V=this.rangeCount:(this.removeAllRanges(),V=0);var le=Ee(b).cloneRange();try{this.nativeSelection.addRange(le)}catch{}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==V+1){if(M.config.checkSelectionRanges){var Pe=Wi(this.nativeSelection,this.rangeCount-1);Pe&&!P(Pe,b)&&(b=new Tt(Pe))}this._ranges[this.rangeCount-1]=b,xn(this,b,mi(this.nativeSelection)),this.isCollapsed=Ut(this),je(this)}else this.refresh()}}:Be.addRange=function(b,j){q(j)&&et?Ho(this,b):(this.nativeSelection.addRange(Ee(b)),this.refresh())},Be.setRanges=function(b){if(Kt&&Je&&b.length>1)$o(this,b);else{this.removeAllRanges();for(var j=0,V=b.length;j<V;++j)this.addRange(b[j])}}}else if(Se(Ke,"empty")&&Se(Yt,"select")&&Kt&&Ye)Be.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var b;if(this.anchorNode)b=N(this.anchorNode);else if(this.docSelection.type==O){var j=this.docSelection.createRange();j.length&&(b=N(j.item(0)))}if(b){var V=z(b).createTextRange();V.select(),this.docSelection.empty()}}}catch{}ne(this)},Be.addRange=function(b){this.docSelection.type==O?Ua(this,b):(M.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,xn(this,b,!1),je(this))},Be.setRanges=function(b){this.removeAllRanges();var j=b.length;j>1?$o(this,b):j&&this.addRange(b[0])};else return W.fail("No means of selecting a Range or TextRange was found"),!1;Be.getRangeAt=function(b){if(b<0||b>=this.rangeCount)throw new Rt("INDEX_SIZE_ERR");return this._ranges[b].cloneRange()};var zi;if(Ye)zi=function(b){var j;M.isSelectionValid(b.win)?j=b.docSelection.createRange():(j=z(b.win.document).createTextRange(),j.collapse(!0)),b.docSelection.type==O?dn(b):yr(j)?Dn(b,j):ne(b)};else if(Se(Ke,"getRangeAt")&&typeof Ke.rangeCount==ee)zi=function(b){if(Kt&&Je&&b.docSelection.type==O)dn(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var j=0,V=b.rangeCount;j<V;++j)b._ranges[j]=new M.WrappedRange(b.nativeSelection.getRangeAt(j));xn(b,b._ranges[b.rangeCount-1],mi(b.nativeSelection)),b.isCollapsed=Ut(b),je(b)}else ne(b)};else if(_e&&typeof Ke.isCollapsed==G&&typeof Yt.collapsed==G&&E.implementsDomRange)zi=function(b){var j,V=b.nativeSelection;V.anchorNode?(j=Wi(V,0),b._ranges=[j],b.rangeCount=1,H(b),b.isCollapsed=Ut(b),je(b)):ne(b)};else return W.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;Be.refresh=function(b){var j=b?this._ranges.slice(0):null,V=this.anchorNode,le=this.anchorOffset;if(zi(this),b){var Pe=j.length;if(Pe!=this._ranges.length||this.anchorNode!=V||this.anchorOffset!=le)return!0;for(;Pe--;)if(!P(j[Pe],this._ranges[Pe]))return!0;return!1}};var hu=function(b,j){var V=b.getAllRanges();b.removeAllRanges();for(var le=0,Pe=V.length;le<Pe;++le)P(j,V[le])||b.addRange(V[le]);b.rangeCount||ne(b)};Kt&&Je?Be.removeRange=function(b){if(this.docSelection.type==O){for(var j=this.docSelection.createRange(),V=ft(b),le=N(j.item(0)),Pe=z(le).createControlRange(),tt,It=!1,x=0,L=j.length;x<L;++x)tt=j.item(x),tt!==V||It?Pe.add(j.item(x)):It=!0;Pe.select(),dn(this)}else hu(this,b)}:Be.removeRange=function(b){hu(this,b)};var mi;!Ye&&_e&&E.implementsDomRange?(mi=ve,Be.isBackward=function(){return mi(this)}):mi=Be.isBackward=function(){return!1},Be.isBackwards=Be.isBackward,Be.toString=function(){for(var b=[],j=0,V=this.rangeCount;j<V;++j)b[j]=""+this._ranges[j];return b.join("")};function Xi(b,j){if(b.win.document!=N(j))throw new Rt("WRONG_DOCUMENT_ERR")}function Ka(b,j){if(j<0||j>(re.isCharacterDataNode(b)?b.length:b.childNodes.length))throw new Rt("INDEX_SIZE_ERR")}Be.collapse=function(b,j){Xi(this,b);var V=M.createRange(b);V.collapseToPoint(b,j),this.setSingleRange(V),this.isCollapsed=!0},Be.collapseToStart=function(){if(this.rangeCount){var b=this._ranges[0];this.collapse(b.startContainer,b.startOffset)}else throw new Rt("INVALID_STATE_ERR")},Be.collapseToEnd=function(){if(this.rangeCount){var b=this._ranges[this.rangeCount-1];this.collapse(b.endContainer,b.endOffset)}else throw new Rt("INVALID_STATE_ERR")},Be.selectAllChildren=function(b){Xi(this,b);var j=M.createRange(b);j.selectNodeContents(b),this.setSingleRange(j)},yt?Be.setBaseAndExtent=function(b,j,V,le){this.nativeSelection.setBaseAndExtent(b,j,V,le),this.refresh()}:et&&(Be.setBaseAndExtent=function(b,j,V,le){Ka(b,j),Ka(V,le),Xi(this,b),Xi(this,V);var Pe=M.createRange(node),tt=re.comparePoints(b,j,V,le)==-1;tt?Pe.setStartAndEnd(V,le,b,j):Pe.setStartAndEnd(b,j,V,le),this.setSingleRange(Pe,tt)}),Be.deleteFromDocument=function(){if(Kt&&Je&&this.docSelection.type==O){for(var b=this.docSelection.createRange(),j;b.length;)j=b.item(0),b.remove(j),re.removeNode(j);this.refresh()}else if(this.rangeCount){var V=this.getAllRanges();if(V.length){this.removeAllRanges();for(var le=0,Pe=V.length;le<Pe;++le)V[le].deleteContents();this.addRange(V[Pe-1])}}},Be.eachRange=function(b,j){for(var V=0,le=this._ranges.length;V<le;++V)if(b(this.getRangeAt(V)))return j},Be.getAllRanges=function(){var b=[];return this.eachRange(function(j){b.push(j)}),b},Be.setSingleRange=function(b,j){this.removeAllRanges(),this.addRange(b,j)},Be.callMethodOnEachRange=function(b,j){var V=[];return this.eachRange(function(le){V.push(le[b].apply(le,j||[]))}),V};function qa(b){return function(j,V){var le;this.rangeCount?(le=this.getRangeAt(0),le["set"+(b?"Start":"End")](j,V)):(le=M.createRange(this.win.document),le.setStartAndEnd(j,V)),this.setSingleRange(le,this.isBackward())}}Be.setStart=qa(!0),Be.setEnd=qa(!1),M.rangePrototype.select=function(b){Fo(this.getDocument()).setSingleRange(this,b)},Be.changeEachRange=function(b){var j=[],V=this.isBackward();this.eachRange(function(le){b(le),j.push(le)}),this.removeAllRanges(),V&&j.length==1?this.addRange(j[0],"backward"):this.setRanges(j)},Be.containsNode=function(b,j){return this.eachRange(function(V){return V.containsNode(b,j)},!0)||!1},Be.getBookmark=function(b){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[b])}},Be.moveToBookmark=function(b){for(var j=[],V=0,le,Pe;le=b.rangeBookmarks[V++];)Pe=M.createRange(this.win),Pe.moveToBookmark(le),j.push(Pe);b.backward?this.setSingleRange(j[0],"backward"):this.setRanges(j)},Be.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},Be.restoreRanges=function(b){this.removeAllRanges();for(var j=0,V;V=b.ranges[j];++j)this.addRange(V,b.backward&&j==0)},Be.toHtml=function(){var b=[];return this.eachRange(function(j){b.push(pt.toHtml(j))}),b.join("")},E.implementsTextRange&&(Be.getNativeTextRange=function(){var b;if(b=this.docSelection){var j=b.createRange();if(yr(j))return j;throw W.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return M.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw W.createError("getNativeTextRange: selection contains no range")}});function Wo(b){var j=[],V=new st(b.anchorNode,b.anchorOffset),le=new st(b.focusNode,b.focusOffset),Pe=typeof b.getName=="function"?b.getName():"Selection";if(typeof b.rangeCount<"u")for(var tt=0,It=b.rangeCount;tt<It;++tt)j[tt]=pt.inspect(b.getRangeAt(tt));return"["+Pe+"(Ranges: "+j.join(", ")+")(anchor: "+V.inspect()+", focus: "+le.inspect()+"]"}Be.getName=function(){return"WrappedSelection"},Be.inspect=function(){return Wo(this)},Be.detach=function(){Va(this.win,"delete"),Ya(this)},vt.detachAll=function(){Va(null,"deleteAll")},vt.inspect=Wo,vt.isDirectionBackward=q,M.Selection=vt,M.selectionPrototype=Be,M.addShimListener(function(b){typeof b.getSelection>"u"&&(b.getSelection=function(){return Fo(b)}),b=null})});var Ne=!1,Xe=function(M){Ne||(Ne=!0,!C.initialized&&C.config.autoInitialize&&R())};return T&&(document.readyState=="complete"?Xe():(u(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",Xe,!1),he(window,"load",Xe))),C})}(gd)),gd.exports}var tj=B_();const F_=Ml(tj);var yd={exports:{}},$_;function nj(){return $_||($_=1,function(t,e){(function(n,r){t.exports=n(B_())})(function(n){return n.createModule("ClassApplier",["WrappedSelection"],function(r,i){var o=r.dom,a=o.DomPosition,s=o.arrayContains,l=r.util,u=l.forEach,f="span",c=l.isHostMethod(document,"createElementNS");function d(E,O){for(var N in E)if(E.hasOwnProperty(N)&&O(N,E[N])===!1)return!1;return!0}function h(E){return E.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function v(E,O){return!!E&&new RegExp("(?:^|\\s)"+O+"(?:\\s|$)").test(E)}function p(E,O){if(typeof E.classList=="object")return E.classList.contains(O);var N=typeof E.className=="string",z=N?E.className:E.getAttribute("class");return v(z,O)}function g(E,O){if(typeof E.classList=="object")E.classList.add(O);else{var N=typeof E.className=="string",z=N?E.className:E.getAttribute("class");z?v(z,O)||(z+=" "+O):z=O,N?E.className=z:E.setAttribute("class",z)}}var y=function(){function E(O,N,z){return N&&z?" ":""}return function(O,N){if(typeof O.classList=="object")O.classList.remove(N);else{var z=typeof O.className=="string",P=z?O.className:O.getAttribute("class");P=P.replace(new RegExp("(^|\\s)"+N+"(\\s|$)"),E),z?O.className=P:O.setAttribute("class",P)}}}();function m(E){var O=typeof E.className=="string";return O?E.className:E.getAttribute("class")}function A(E){return E&&E.split(/\s+/).sort().join(" ")}function T(E){return A(m(E))}function k(E,O){return T(E)==T(O)}function C(E,O){for(var N=O.split(/\s+/),z=0,P=N.length;z<P;++z)if(!p(E,h(N[z])))return!1;return!0}function S(E){var O=E.parentNode;return O&&O.nodeType==1&&!/^(textarea|style|script|select|iframe)$/i.test(O.nodeName)}function I(E,O,N,z,P){var q=E.node,Y=E.offset,Z=q,Ae=Y;q==z&&Y>P&&++Ae,q==O&&(Y==N||Y==N+1)&&(Z=z,Ae+=P-N),q==O&&Y>N+1&&--Ae,E.node=Z,E.offset=Ae}function X(E,O,N){E.node==O&&E.offset>N&&--E.offset}function Q(E,O,N,z){N==-1&&(N=O.childNodes.length);var P=E.parentNode,q=o.getNodeIndex(E);u(z,function(Y){I(Y,P,q,O,N)}),O.childNodes.length==N?O.appendChild(E):O.insertBefore(E,O.childNodes[N])}function ue(E,O){var N=E.parentNode,z=o.getNodeIndex(E);u(O,function(P){X(P,N,z)}),o.removeNode(E)}function he(E,O,N,z,P){for(var q,Y=[];q=E.firstChild;)Q(q,O,N++,P),Y.push(q);return ue(E,P),Y}function w(E,O){return he(E,E.parentNode,o.getNodeIndex(E),!0,O)}function D(E,O){var N=E.cloneRange();N.selectNodeContents(O);var z=N.intersection(E),P=z?z.toString():"";return P!=""}function R(E){for(var O=E.getNodes([3]),N=0,z;(z=O[N])&&!D(E,z);)++N;for(var P=O.length-1;(z=O[P])&&!D(E,z);)--P;return O.slice(N,P+1)}function K(E,O){if(E.attributes.length!=O.attributes.length)return!1;for(var N=0,z=E.attributes.length,P,q,Y;N<z;++N)if(P=E.attributes[N],Y=P.name,Y!="class"&&(q=O.attributes.getNamedItem(Y),P===null!=(q===null)||P.specified!=q.specified||P.specified&&P.nodeValue!==q.nodeValue))return!1;return!0}function ye(E,O){for(var N=0,z=E.attributes.length,P;N<z;++N)if(P=E.attributes[N].name,!(O&&s(O,P))&&E.attributes[N].specified&&P!="class")return!0;return!1}var Oe=o.getComputedStyleProperty,rt=function(){var E=document.createElement("div");return typeof E.isContentEditable=="boolean"?function(O){return O&&O.nodeType==1&&O.isContentEditable}:function(O){return!O||O.nodeType!=1||O.contentEditable=="false"?!1:O.contentEditable=="true"||rt(O.parentNode)}}();function it(E){var O;return E&&E.nodeType==1&&((O=E.parentNode)&&O.nodeType==9&&O.designMode=="on"||rt(E)&&!rt(E.parentNode))}function me(E){return(rt(E)||E.nodeType!=1&&rt(E.parentNode))&&!it(E)}var ke=/^inline(-block|-table)?$/i;function ze(E){return E&&E.nodeType==1&&!ke.test(Oe(E,"display"))}var Ne=/[^\r\n\t\f \u200B]/;function Xe(E){if(E.data.length==0)return!0;if(Ne.test(E.data))return!1;var O=Oe(E.parentNode,"whiteSpace");switch(O){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(E.data))return!1}return ze(E.previousSibling)||ze(E.nextSibling)}function M(E){var O=[],N,z;for(N=0;z=E[N++];)O.push(new a(z.startContainer,z.startOffset),new a(z.endContainer,z.endOffset));return O}function W(E,O){for(var N=0,z,P,q,Y=E.length;N<Y;++N)z=E[N],P=O[N*2],q=O[N*2+1],z.setStartAndEnd(P.node,P.offset,q.node,q.offset)}function G(E,O){return o.isCharacterDataNode(E)?O==0?!!E.previousSibling:O==E.length?!!E.nextSibling:!0:O>0&&O<E.childNodes.length}function ee(E,O,N,z){var P,q,Y=N==0;if(o.isAncestorOf(O,E))return E;if(o.isCharacterDataNode(O)){var Z=o.getNodeIndex(O);if(N==0)N=Z;else if(N==O.length)N=Z+1;else throw i.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+N+" in "+O.data);O=O.parentNode}if(G(O,N)){P=O.cloneNode(!1),q=O.parentNode,P.id&&P.removeAttribute("id");for(var Ae,ve=0;Ae=O.childNodes[N];)Q(Ae,P,ve++,z);return Q(P,q,o.getNodeIndex(O)+1,z),O==E?P:ee(E,q,o.getNodeIndex(P),z)}else if(E!=O){P=O.parentNode;var oe=o.getNodeIndex(O);return Y||oe++,ee(E,P,oe,z)}return E}function re(E,O){return E.namespaceURI==O.namespaceURI&&E.tagName.toLowerCase()==O.tagName.toLowerCase()&&k(E,O)&&K(E,O)&&Oe(E,"display")=="inline"&&Oe(O,"display")=="inline"}function ge(E){var O=E?"nextSibling":"previousSibling";return function(N,z){var P=N.parentNode,q=N[O];if(q){if(q&&q.nodeType==3)return q}else if(z&&(q=P[O],q&&q.nodeType==1&&re(P,q))){var Y=q[E?"firstChild":"lastChild"];if(Y&&Y.nodeType==3)return Y}return null}}var Se=ge(!1),pt=ge(!0);function Tt(E){this.isElementMerge=E.nodeType==1,this.textNodes=[];var O=this.isElementMerge?E.lastChild:E;O&&(this.textNodes[0]=O)}Tt.prototype={doMerge:function(E){var O=this.textNodes,N=O[0];if(O.length>1){var z=o.getNodeIndex(N),P=[],q=0,Y;u(O,function(Z,Ae){Y=Z.parentNode,Ae>0&&(Y.removeChild(Z),Y.hasChildNodes()||o.removeNode(Y),E&&u(E,function(ve){ve.node==Z&&(ve.node=N,ve.offset+=q),ve.node==Y&&ve.offset>z&&(--ve.offset,ve.offset==z+1&&Ae<O.length-1&&(ve.node=N,ve.offset=q))})),P[Ae]=Z.data,q+=Z.data.length}),N.data=P.join("")}return N.data},getLength:function(){for(var E=this.textNodes.length,O=0;E--;)O+=this.textNodes[E].length;return O},toString:function(){var E=[];return u(this.textNodes,function(O,N){E[N]="'"+O.data+"'"}),"[Merge("+E.join(",")+")]"}};var Rt=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],st={};function $t(E,O,N){var z,P,q,Y,Z=this;Z.cssClass=Z.className=E;var Ae=null,ve={};if(typeof O=="object"&&O!==null){for(typeof O.elementTagName<"u"&&(O.elementTagName=O.elementTagName.toLowerCase()),N=O.tagNames,Ae=O.elementProperties,ve=O.elementAttributes,P=0;Y=Rt[P++];)O.hasOwnProperty(Y)&&(Z[Y]=O[Y]);z=O.normalize}else z=O;Z.normalize=typeof z>"u"?!0:z,Z.attrExceptions=[];var oe=document.createElement(Z.elementTagName);Z.elementProperties=Z.copyPropertiesToElement(Ae,oe,!0),d(ve,function(Ye,Ke){Z.attrExceptions.push(Ye),ve[Ye]=""+Ke}),Z.elementAttributes=ve,Z.elementSortedClassName=Z.elementProperties.hasOwnProperty("className")?A(Z.elementProperties.className+" "+E):E,Z.applyToAnyTagName=!1;var Je=typeof N;if(Je=="string")N=="*"?Z.applyToAnyTagName=!0:Z.tagNames=h(N.toLowerCase()).split(/\s*,\s*/);else if(Je=="object"&&typeof N.length=="number")for(Z.tagNames=[],P=0,q=N.length;P<q;++P)N[P]=="*"?Z.applyToAnyTagName=!0:Z.tagNames.push(N[P].toLowerCase());else Z.tagNames=[Z.elementTagName]}$t.prototype={elementTagName:f,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(E,O,N){var z,P,q={},Y,Z,Ae,ve;for(var oe in E)if(E.hasOwnProperty(oe))if(Z=E[oe],Ae=O[oe],oe=="className")g(O,Z),g(O,this.className),O[oe]=A(O[oe]),N&&(q[oe]=Z);else if(oe=="style"){P=Ae,N&&(q[oe]=Y={});for(z in E[oe])E[oe].hasOwnProperty(z)&&(P[z]=Z[z],N&&(Y[z]=P[z]));this.attrExceptions.push(oe)}else O[oe]=Z,N&&(q[oe]=O[oe],ve=st.hasOwnProperty(oe)?st[oe]:oe,this.attrExceptions.push(ve));return N?q:""},copyAttributesToElement:function(E,O){for(var N in E)E.hasOwnProperty(N)&&!/^class(?:Name)?$/i.test(N)&&O.setAttribute(N,E[N])},appliesToElement:function(E){return s(this.tagNames,E.tagName.toLowerCase())},getEmptyElements:function(E){var O=this;return E.getNodes([1],function(N){return O.appliesToElement(N)&&!N.hasChildNodes()})},hasClass:function(E){return E.nodeType==1&&(this.applyToAnyTagName||this.appliesToElement(E))&&p(E,this.className)},getSelfOrAncestorWithClass:function(E){for(;E;){if(this.hasClass(E))return E;E=E.parentNode}return null},isModifiable:function(E){return!this.applyToEditableOnly||me(E)},isIgnorableWhiteSpaceNode:function(E){return this.ignoreWhiteSpace&&E&&E.nodeType==3&&Xe(E)},postApply:function(E,O,N,z){var P=E[0],q=E[E.length-1],Y=[],Z,Ae=P,ve=q,oe=0,Je=q.length,Ye;u(E,function(_e){Ye=Se(_e,!z),Ye?(Z||(Z=new Tt(Ye),Y.push(Z)),Z.textNodes.push(_e),_e===P&&(Ae=Z.textNodes[0],oe=Ae.length),_e===q&&(ve=Z.textNodes[0],Je=Z.getLength())):Z=null});var Ke=pt(q,!z);if(Ke&&(Z||(Z=new Tt(q),Y.push(Z)),Z.textNodes.push(Ke)),Y.length){for(var Yt=0,se=Y.length;Yt<se;++Yt)Y[Yt].doMerge(N);O.setStartAndEnd(Ae,oe,ve,Je)}},createContainer:function(E){var O=o.getDocument(E),N=c&&!o.isHtmlNamespace(E)&&E.namespaceURI?O.createElementNS(E.namespaceURI,this.elementTagName):O.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,N,!1),this.copyAttributesToElement(this.elementAttributes,N),g(N,this.className),this.onElementCreate&&this.onElementCreate(N,this),N},elementHasProperties:function(E,O){var N=this;return d(O,function(z,P){if(z=="className")return C(E,P);if(typeof P=="object"){if(!N.elementHasProperties(E[z],P))return!1}else if(E[z]!==P)return!1})},elementHasAttributes:function(E,O){return d(O,function(N,z){if(E.getAttribute(N)!==z)return!1})},applyToTextNode:function(E,O){if(S(E)){var N=E.parentNode;if(N.childNodes.length==1&&this.useExistingElements&&this.appliesToElement(N)&&this.elementHasProperties(N,this.elementProperties)&&this.elementHasAttributes(N,this.elementAttributes))g(N,this.className);else{var z=E.parentNode,P=this.createContainer(z);z.insertBefore(P,E),P.appendChild(E)}}},isRemovable:function(E){return E.tagName.toLowerCase()==this.elementTagName&&T(E)==this.elementSortedClassName&&this.elementHasProperties(E,this.elementProperties)&&!ye(E,this.attrExceptions)&&this.elementHasAttributes(E,this.elementAttributes)&&this.isModifiable(E)},isEmptyContainer:function(E){var O=E.childNodes.length;return E.nodeType==1&&this.isRemovable(E)&&(O==0||O==1&&this.isEmptyContainer(E.firstChild))},removeEmptyContainers:function(E){var O=this,N=E.getNodes([1],function(q){return O.isEmptyContainer(q)}),z=[E],P=M(z);u(N,function(q){ue(q,P)}),W(z,P)},undoToTextNode:function(E,O,N,z){if(!O.containsNode(N)){var P=O.cloneRange();P.selectNode(N),P.isPointInRange(O.endContainer,O.endOffset)&&(ee(N,O.endContainer,O.endOffset,z),O.setEndAfter(N)),P.isPointInRange(O.startContainer,O.startOffset)&&(N=ee(N,O.startContainer,O.startOffset,z))}this.isRemovable(N)?w(N,z):y(N,this.className)},splitAncestorWithClass:function(E,O,N){var z=this.getSelfOrAncestorWithClass(E);z&&ee(z,E,O,N)},undoToAncestor:function(E,O){this.isRemovable(E)?w(E,O):y(E,this.className)},applyToRange:function(E,O){var N=this;O=O||[];var z=M(O||[]);E.splitBoundariesPreservingPositions(z),N.removeEmptyElements&&N.removeEmptyContainers(E);var P=R(E);if(P.length){u(P,function(Z){!N.isIgnorableWhiteSpaceNode(Z)&&!N.getSelfOrAncestorWithClass(Z)&&N.isModifiable(Z)&&N.applyToTextNode(Z,z)});var q=P[P.length-1];E.setStartAndEnd(P[0],0,q,q.length),N.normalize&&N.postApply(P,E,z,!1),W(O,z)}var Y=N.getEmptyElements(E);u(Y,function(Z){g(Z,N.className)})},applyToRanges:function(E){for(var O=E.length;O--;)this.applyToRange(E[O],E);return E},applyToSelection:function(E){var O=r.getSelection(E);O.setRanges(this.applyToRanges(O.getAllRanges()))},undoToRange:function(E,O){var N=this;O=O||[];var z=M(O);E.splitBoundariesPreservingPositions(z),N.removeEmptyElements&&N.removeEmptyContainers(E,z);var P=R(E),q,Y,Z=P[P.length-1];if(P.length){N.splitAncestorWithClass(E.endContainer,E.endOffset,z),N.splitAncestorWithClass(E.startContainer,E.startOffset,z);for(var Ae=0,ve=P.length;Ae<ve;++Ae)q=P[Ae],Y=N.getSelfOrAncestorWithClass(q),Y&&N.isModifiable(q)&&N.undoToAncestor(Y,z);E.setStartAndEnd(P[0],0,Z,Z.length),N.normalize&&N.postApply(P,E,z,!0),W(O,z)}var oe=N.getEmptyElements(E);u(oe,function(Je){y(Je,N.className)})},undoToRanges:function(E){for(var O=E.length;O--;)this.undoToRange(E[O],E);return E},undoToSelection:function(E){var O=r.getSelection(E),N=r.getSelection(E).getAllRanges();this.undoToRanges(N),O.setRanges(N)},isAppliedToRange:function(E){if(E.collapsed||E.toString()=="")return!!this.getSelfOrAncestorWithClass(E.commonAncestorContainer);var O=E.getNodes([3]);if(O.length){for(var N=0,z;z=O[N++];)if(!this.isIgnorableWhiteSpaceNode(z)&&D(E,z)&&this.isModifiable(z)&&!this.getSelfOrAncestorWithClass(z))return!1}return!0},isAppliedToRanges:function(E){var O=E.length;if(O==0)return!1;for(;O--;)if(!this.isAppliedToRange(E[O]))return!1;return!0},isAppliedToSelection:function(E){var O=r.getSelection(E);return this.isAppliedToRanges(O.getAllRanges())},toggleRange:function(E){this.isAppliedToRange(E)?this.undoToRange(E):this.applyToRange(E)},toggleSelection:function(E){this.isAppliedToSelection(E)?this.undoToSelection(E):this.applyToSelection(E)},getElementsWithClassIntersectingRange:function(E){var O=[],N=this;return E.getNodes([3],function(z){var P=N.getSelfOrAncestorWithClass(z);P&&!s(O,P)&&O.push(P)}),O},detach:function(){}};function Ut(E,O,N){return new $t(E,O,N)}$t.util={hasClass:p,addClass:g,removeClass:y,getClass:m,hasSameClasses:k,hasAllClasses:C,replaceWithOwnChildren:w,elementsHaveSameNonClassAttributes:K,elementHasNonClassAttributes:ye,splitNodeAt:ee,isEditableElement:rt,isEditingHost:it,isEditable:me},r.CssClassApplier=r.ClassApplier=$t,r.createClassApplier=Ut,l.createAliasForDeprecatedMethod(r,"createCssClassApplier","createClassApplier",i)}),n})}(yd)),yd.exports}nj();var H_={toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","colorpicker","italic","underline","strikethrough","quote","justifyLeft","justifyCenter","justifyRight","justifyFull","superscript","subscript","orderedlist","unorderedlist","pre","removeFormat","outdent","indent","h2","h3"],standardizeSelectionStart:!1,updateOnEmptySelection:!1},placeholder:{text:"",hideOnClick:!0},disableEditing:!0},W_=su.extensions.button.extend({name:"colorpicker",tagNames:["mark"],contentDefault:"<b>Color</b>",aria:"Color Picker",action:"colorPicker",init:function(){var t=this;F_.init(),su.extensions.button.prototype.init.call(this),this.colorPicker=new j_({parent:this.button,color:"#000",onDone:function(e){t.coloredText&&t.coloredText.isAppliedToSelection()&&t.coloredText.undoToSelection(),t.coloredText=F_.createClassApplier("colored",{elementTagName:"span",elementProperties:{style:{color:e.hex}},normalize:!0}),t.coloredText.toggleSelection(),t.base.checkContentChanged(),t.setInactive()}})},getButton:function(){return this.button},handleClick:function(){this.setActive(),this.colorPicker.show()},isAlreadyApplied:function(t){return t.nodeName.toLowerCase()==="mark"},isActive:function(){return this.button.classList.contains("medium-editor-button-active")},setInactive:function(){this.button.classList.remove("medium-editor-button-active")},setActive:function(){this.button.classList.add("medium-editor-button-active")}}),rj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ij=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},z_=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},X_=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};(function(t){rj(e,t);function e(n){var r=t.call(this,n)||this;r.labelMap=new Map;var i=n.lf,o=n.graphModel;return r.lf=i,r.graphModel=o,r.state={tick:0},r}return e.prototype.componentDidMount=function(){var n=this,r=this.props.graphModel;this.editor=new su(".lf-label-editor",_o(H_,{autoLink:!0,extensions:{colorPicker:new W_}})),r.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop",function(){}),r.eventCenter.on("node:properties-change,node:properties-delete",function(){n.setState({tick:n.state.tick+1})})},e.prototype.componentDidUpdate=function(){var n;this.editor&&this.editor.elements.length>0?this.editor.addElements(".lf-label-editor"):((n=this.editor)===null||n===void 0||n.destroy(),this.editor=new su(".lf-label-editor",_o(H_,{autoLink:!0,extensions:{colorPicker:new W_}})))},e.prototype.componentWillUnmount=function(){var n;(n=this.editor)===null||n===void 0||n.destroy()},e.prototype.getLabels=function(){var n=this,r=this.props,i=r.lf.extension,o=r.graphModel,a=X_(X_([],z_(o.nodes),!1),z_(o.edges),!1),s=i.label;if(s){var l=[];return at(a,function(u){var f,c,d=u.getData(),h=(c=(f=d.properties)===null||f===void 0?void 0:f._label)!==null&&c!==void 0?c:[];at(h,function(v){var p=n.labelMap,g=new G4(v,u,o);p.set(g.id,g),l.push(B(z4,{label:g,element:u,graphModel:o},g.id))})}),l}return null},e.prototype.render=function(){return B("foreignObject",{id:"lf-label-overlay",class:"lf-label-overlay",children:this.getLabels()})},e.toolName="label-edit-tool",e=ij([sn],e),e})(Ge);var G_=function(){return G_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},G_.apply(this,arguments)},U_=function(){return U_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},U_.apply(this,arguments)},Y_=function(){return Y_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Y_.apply(this,arguments)},oj=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},aj=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},sj=function(){function t(e){var n=e.lf,r=this;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"",text:"",onClick:function(){r.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"",text:"",onClick:function(){r.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"",text:"",onClick:function(){r.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"",text:"",onClick:function(){r.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"",text:"",onClick:function(){r.lf.redo()}}],this.lf=n}return t.prototype.render=function(e,n){this.destroy();var r=this.getControlTool();this.toolEl=r,n.appendChild(r),this.domContainer=n},t.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},t.prototype.addItem=function(e){this.controlItems.push(e)},t.prototype.removeItem=function(e){var n=this.controlItems.findIndex(function(r){return r.key===e});return n==-1?null:this.controlItems.splice(n,1)[0]},t.prototype.getControlTool=function(){var e=this,n="lf-control-item",r="lf-control-item disabled",i=document.createElement("div"),o=[];return i.className="lf-control",this.controlItems.forEach(function(a){var s=document.createElement("div"),l=document.createElement("i"),u=document.createElement("span");switch(s.className=r,a.onClick&&(s.onclick=a.onClick.bind(null,e.lf)),a.onMouseEnter&&(s.onmouseenter=a.onMouseEnter.bind(null,e.lf)),a.onMouseLeave&&(s.onmouseleave=a.onMouseLeave.bind(null,e.lf)),l.className=a.iconClass,u.className="lf-control-text",u.title=a.title,u.innerText=a.text,s.append(l,u),a.text){case"":e.lf.on("history:change",function(f){var c=f.data.undoAble;s.className=c?n:r});break;case"":e.lf.on("history:change",function(f){var c=f.data.redoAble;s.className=c?n:r});break;default:s.className=n;break}o.push(s)}),i.append.apply(i,aj([],oj(o),!1)),i},t.pluginName="control",t}(),lj=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},uj=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Wa="lf:defaultNodeMenu",za="lf:defaultEdgeMenu",Xa="lf:defaultGraphMenu",V_="lf:defaultSelectionMenu",fj=function(){function t(e){var n=e.lf,r=this;this.__currentData=null,this.lf=n;var i=n.options.isSilentMode;i||(this.__menuDOM=document.createElement("ul"),this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){r.setMenuConfig(o)},this.lf.addMenuConfig=function(o){r.addMenuConfig(o)},this.lf.setMenuByType=function(o){r.setMenuByType(o)})}return t.prototype.init=function(){var e=this,n,r,i,o,a=[{text:"",callback:function(u){e.lf.deleteNode(u.id)}},{text:"",callback:function(u){e.lf.graphModel.editText(u.id)}},{text:"",callback:function(u){e.lf.cloneNode(u.id)}}];(n=this.menuTypeMap)===null||n===void 0||n.set(Wa,a);var s=[{text:"",callback:function(u){e.lf.deleteEdge(u.id)}},{text:"",callback:function(u){e.lf.graphModel.editText(u.id)}}];(r=this.menuTypeMap)===null||r===void 0||r.set(za,s),(i=this.menuTypeMap)===null||i===void 0||i.set(Xa,[]);var l=[{text:"",callback:function(u){e.lf.clearSelectElements(),u.edges.forEach(function(f){return e.lf.deleteEdge(f.id)}),u.nodes.forEach(function(f){return e.lf.deleteNode(f.id)})}}];(o=this.menuTypeMap)===null||o===void 0||o.set(V_,l)},t.prototype.render=function(e,n){var r=this;e.options.isSilentMode||(this.__container=n,this.__currentData=null,this.__menuDOM&&(this.__menuDOM.className="lf-menu",n.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(i){i.stopPropagation();for(var o=i.target;Array.from(o.classList).indexOf("lf-menu-item")===-1&&Array.from(o.classList).indexOf("lf-menu")===-1;)o=o==null?void 0:o.parentElement;Array.from(o.classList).indexOf("lf-menu-item")>-1?(o.onclickCallback(r.__currentData),r.__menuDOM&&(r.__menuDOM.style.display="none"),r.__currentData=null):console.warn("")},!0)),this.lf.on("node:contextmenu",function(i){var o,a,s=i.data,l=i.position,u=i.e,f=l.domOverlayPosition,c=f.x,d=f.y,h=s.id,v=r.lf.graphModel.getNodeModelById(h);if(v){var p=[],g=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(v.type);v&&v.menu&&Array.isArray(v.menu)?p=v.menu:g?p=g:p=(a=r.menuTypeMap)===null||a===void 0?void 0:a.get(Wa),r.__currentData=s,r.showMenu(c,d,p,{width:v.width,height:v.height,clientX:u.clientX,clientY:u.clientY})}}),this.lf.on("edge:contextmenu",function(i){var o,a,s,l=i.data,u=i.position,f=i.e,c=u.domOverlayPosition,d=c.x,h=c.y,v=l.id,p=r.lf.graphModel.getEdgeModelById(v);if(p){var g=[],y=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(p.type);p&&p.menu&&Array.isArray(p.menu)?g=p.menu:y?g=y:g=(s=(a=r.menuTypeMap)===null||a===void 0?void 0:a.get(za))!==null&&s!==void 0?s:[],r.__currentData=l,r.showMenu(d,h,g,{width:p.width,height:p.height,clientX:f.clientX,clientY:f.clientY})}}),this.lf.on("blank:contextmenu",function(i){var o,a,s=i.position,l=(a=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(Xa))!==null&&a!==void 0?a:[],u=s.domOverlayPosition,f=u.x,c=u.y;r.showMenu(f,c,l)}),this.lf.on("selection:contextmenu",function(i){var o,a=i.data,s=i.position,l=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(V_),u=s.domOverlayPosition,f=u.x,c=u.y;r.__currentData=a,r.showMenu(f,c,l)}),this.lf.on("node:mousedown",function(){r.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){r.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){r.__menuDOM.style.display="none"}))},t.prototype.destroy=function(){var e;this.__menuDOM&&((e=this===null||this===void 0?void 0:this.__container)===null||e===void 0||e.removeChild(this.__menuDOM),this.__menuDOM=void 0)},t.prototype.showMenu=function(e,n,r,i){if(!(!r||!r.length)){var o=this.__menuDOM;if(o){if(o.innerHTML="",o.append.apply(o,uj([],lj(this.__getMenuDom(r)),!1)),!o.children.length)return;if(o.style.display="block",!i){o.style.top="".concat(n,"px"),o.style.left="".concat(e,"px");return}var a=i.width,s=i.height,l=i.clientX,u=i.clientY,f=this.lf.graphModel,c=o.offsetWidth,d=!0,h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,v=h-l,p=f.rootEl.getBoundingClientRect(),g=p.left+p.width;g<h&&(v=g-l),v<c&&(d=!1),d?o.style.left="".concat(e,"px"):o.style.left="".concat(e-a,"px");var y=o.offsetHeight,m=!0,A=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,T=A-u,k=p.top+p.height;k<A&&(T=k-u),T<y&&(m=!1),m?o.style.top="".concat(n,"px"):o.style.top="".concat(n-s,"px")}}},t.prototype.setMenuByType=function(e){var n,r=e.type,i=e.menu;!r||!i||(n=this.menuTypeMap)===null||n===void 0||n.set(r,i)},t.prototype.__getMenuDom=function(e){var n=[];return e&&e.length>0&&e.forEach(function(r){var i=document.createElement("li");if(r.className?i.className="lf-menu-item ".concat(r.className):i.className="lf-menu-item",r.icon===!0){var o=document.createElement("span");o.className="lf-menu-item-icon",i.appendChild(o)}var a=document.createElement("span");a.className="lf-menu-item-text",r.text&&(a.innerText=r.text),i.appendChild(a),i.onclickCallback=r.callback,n.push(i)}),n},t.prototype.setMenuConfig=function(e){var n,r,i;e&&(e.nodeMenu!==void 0&&((n=this.menuTypeMap)===null||n===void 0||n.set(Wa,e.nodeMenu?e.nodeMenu:[])),e.edgeMenu!==void 0&&((r=this.menuTypeMap)===null||r===void 0||r.set(za,e.edgeMenu?e.edgeMenu:[])),e.graphMenu!==void 0&&((i=this.menuTypeMap)===null||i===void 0||i.set(Xa,e.graphMenu?e.graphMenu:[])))},t.prototype.addMenuConfig=function(e){var n,r,i,o,a,s,l,u,f;if(e){if(Array.isArray(e.nodeMenu)){var c=(r=(n=this.menuTypeMap)===null||n===void 0?void 0:n.get(Wa))!==null&&r!==void 0?r:[];(i=this.menuTypeMap)===null||i===void 0||i.set(Wa,c.concat(e.nodeMenu))}if(Array.isArray(e.edgeMenu)){var c=(a=(o=this.menuTypeMap)===null||o===void 0?void 0:o.get(za))!==null&&a!==void 0?a:[];(s=this.menuTypeMap)===null||s===void 0||s.set(za,c.concat(e.edgeMenu))}if(Array.isArray(e.graphMenu)){var c=(u=(l=this.menuTypeMap)===null||l===void 0?void 0:l.get(Xa))!==null&&u!==void 0?u:[];(f=this.menuTypeMap)===null||f===void 0||f.set(Xa,c.concat(e.graphMenu))}}},t.prototype.changeMenuItem=function(e,n){if(e==="add")this.addMenuConfig(n);else if(e==="reset")this.setMenuConfig(n);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},t.pluginName="menu",t}(),cj=function(){function t(e){var n=e.lf,r=this;this.lf=n,this.lf.setPatternItems=function(i){r.setPatternItems(i)}}return t.prototype.render=function(e,n){var r=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=n;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(i){var o;(o=r.panelEl)===null||o===void 0||o.appendChild(r.createDndItem(i))}),n.appendChild(this.panelEl),this.domContainer=n},t.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},t.prototype.setPatternItems=function(e){this.shapeList=e,this.domContainer&&this.render(this.lf,this.domContainer)},t.prototype.createDndItem=function(e){var n=this,r=document.createElement("div");r.className=e.className?"lf-dnd-item ".concat(e.className):"lf-dnd-item";var i=document.createElement("div");if(i.className="lf-dnd-shape",e.icon&&(i.style.backgroundImage="url(".concat(e.icon,")")),r.appendChild(i),e.label){var o=document.createElement("div");o.innerText=e.label,o.className="lf-dnd-text",r.appendChild(o)}return e.disabled?(r.classList.add("disabled"),r.onmousedown=function(){e.callback&&e.callback(n.lf,n.domContainer)},r):(r.onmousedown=function(){e.type&&n.lf.dnd.startDrag({type:e.type,properties:e.properties,text:e.text}),e.callback&&e.callback(n.lf,n.domContainer)},r.ondblclick=function(a){n.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:a,data:e})},r.onclick=function(a){n.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:a,data:e})},r.oncontextmenu=function(a){n.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:a,data:e})},r)},t.pluginName="dndPanel",t}(),K_=function(){return K_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},K_.apply(this,arguments)},q_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bo=function(){return Bo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bo.apply(this,arguments)},Ga=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},dj={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function hj(t){for(var e=t,n=1;n<e.length-1;){var r=Ga(e[n-1],2),i=r[0],o=r[1],a=Ga(e[n],2),s=a[0],l=a[1],u=Ga(e[n+1],2),f=u[0],c=u[1];i===s&&s===f||o===l&&l===c?e.splice(n,1):n++}return e}function pj(t,e,n,r){var i=[t[0],t[1]],o=[t[0],t[1]];switch(n){case"tl":return e==="tr"?(i[1]+=r,o[0]+=r):e==="lb"&&(i[0]+=r,o[1]+=r),[i,o];case"tr":return e==="tl"?(i[1]+=r,o[0]-=r):e==="rb"&&(i[0]-=r,o[1]+=r),[i,o];case"bl":return e==="br"?(i[1]-=r,o[0]+=r):e==="lt"&&(i[0]+=r,o[1]-=r),[i,o];case"br":return e==="bl"?(i[1]-=r,o[0]-=r):e==="rt"&&(i[0]-=r,o[1]-=r),[i,o];default:return[]}}function vj(t,e,n,r){var i,o="",a="";t[0]===e[0]?o=t[1]>e[1]?"t":"b":t[1]===e[1]&&(o=t[0]>e[0]?"l":"r"),e[0]===n[0]?a=e[1]>n[1]?"t":"b":e[1]===n[1]&&(a=e[0]>n[0]?"l":"r");var s=Math.min(Math.hypot(e[0]-t[0],e[1]-t[1])/2,Math.hypot(n[0]-e[0],n[1]-e[1])/2,r)||1/5*r,l="".concat(o).concat(a),u=dj[l]||"-",f="L ".concat(t[0]," ").concat(t[1]);if(u==="-")f+="L ".concat(e[0]," ").concat(e[1]," L ").concat(n[0]," ").concat(n[1]);else{var c=Ga(pj(e,l,u,s),2),d=c[0],h=c[1];d&&h&&(f+="L ".concat(d[0]," ").concat(d[1]," Q ").concat(e[0]," ").concat(e[1]," ").concat(h[0]," ").concat(h[1]),i=Ga(h,2),e[0]=i[0],e[1]=i[1])}return f}function gj(t,e){var n=0,r="";if(t.length===2)r+="M".concat(t[n][0]," ").concat(t[n++][1]," L ").concat(t[n][0]," ").concat(t[n][1]);else{for(r+="M".concat(t[n][0]," ").concat(t[n++][1]);n+1<t.length;){var i=t[n-1],o=t[n],a=t[n+++1];r+=vj(i,o,a,e)}r+="L ".concat(t[n][0]," ").concat(t[n][1])}return r}(function(t){q_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEdge=function(){var n=this.props.model,r=n.points,i=n.isAnimation,o=n.arrowConfig,a=n.radius,s=a===void 0?5:a,l=n.getEdgeStyle(),u=n.getEdgeAnimationStyle(),f=hj(r.split(" ").map(function(h){return h.split(",").map(function(v){return+v})})),c=gj(f,s),d=Bo(Bo(Bo({style:i?u:{}},l),o),{fill:"none"});return ae("path",Bo({d:c},d))},e})(Do),function(t){q_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Co);var Z_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fu=function(){return fu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},fu.apply(this,arguments)},J_=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Q_=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},yj=function(t){Z_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var n=this.props.model,r=n.id,i=n.x,o=n.y,a=n.width,s=n.height,l=n.properties,u=this.props.model.getNodeStyle();return ae("svg",{x:i-a/2,y:o-s/2,width:50,height:24,style:"z-index: 0; background: none; overflow: auto;"},[l.labelText?ae("text",{x:0,y:-5,fontSize:"16px",fill:u.stroke},l.labelText):"",l.disabledDelete?"":ae("text",{x:l.labelText?50:0,y:-5,fontSize:"24px",cursor:"pointer",fill:u.stroke,onclick:this.handleCustomDeleteIconClick.bind(this,r)},"x")])},e.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.id,l=this.props.model.getNodeStyle();return ae("g",{},[ae("rect",fu(fu({},l),{x:r-o/2,y:i-a/2,width:o,height:a,id:s})),this.getLabelShape()])},e.prototype.toFront=function(){},e.prototype.handleCustomDeleteIconClick=function(n){var r=this.props.graphModel;r.deleteNode(n)},e}(Il),mj=function(t){Z_(e,t);function e(){var n=t.apply(this,Q_([],J_(arguments),!1))||this;return n.d=10,n.isResize=!1,n}return e.prototype.initNodeData=function(n){n.text={value:"",x:n.x,y:n.y,draggable:!1,editable:!1},t.prototype.initNodeData.call(this,n),this.zIndex=0,this.draggable=!0},e.prototype.setAttributes=function(){var n=this,r;this.points=[],((r=this.properties)===null||r===void 0?void 0:r.node_selection_ids).length>1&&setTimeout(function(){var i;n.updatePointsByNodes(((i=n.properties)===null||i===void 0?void 0:i.node_selection_ids)||[])})},e.prototype.getNodeStyle=function(){var n=t.prototype.getNodeStyle.call(this);return n.stroke=this.properties.strokeColor||"#008000",n.strokeDasharray="10 5",n},e.prototype.getDefaultAnchor=function(){return[]},e.prototype.updatePoints=function(n){this.points=n},e.prototype.updateCoordinate=function(n){var r=n.x,i=n.y;this.x=r,this.y=i},e.prototype.updatePointsByNodes=function(n){var r=this,i=[],o=1/0,a=1/0,s=-1/0,l=-1/0;n.forEach(function(u){var f=r.graphModel.getNodeModelById(u);if(f){var c=f.width,d=f.height,h=f.x,v=f.y;o=Math.min(o,h-c/2-r.d),a=Math.min(a,v-d/2-r.d),s=Math.max(s,h+c/2+r.d),l=Math.max(l,v+d/2+r.d)}}),i.push([o,a],[s,a],[s,l],[o,l]),![o,a,s,l].some(function(u){return Math.abs(u)===1/0})&&(this.updatePoints(i),this.updateCoordinate({x:(s+o)/2,y:(l+a)/2}))},e.prototype.resize=function(n){var r;this.isResize=!0;for(var i=n.width,o=n.height,a={x:i/this.width,y:o/this.height},s=(this.properties.node_selection_ids||[]).slice(),l=[],u=new Set;s.length;){var f=s.shift(),c=(r=this.graphModel.nodesMap[f])===null||r===void 0?void 0:r.model;if(c){if(!cu(c)){l.push(c);continue}u.has(c.id)||(u.add(c.id),s.push.apply(s,Q_([],J_(c.properties.node_selection_ids||[]),!1)))}}var d={x:this.x-this.width/2,y:this.y-this.height/2},h=t.prototype.resize.call(this,n),v={x:this.x-this.width/2,y:this.y-this.height/2};return l.forEach(function(p){p.width=p.width*a.x,p.height=p.height*a.y;var g=(p.x-d.x)*a.x+v.x-p.x,y=(p.y-d.y)*a.y+v.y-p.y;p.move(g,y,!0)}),this.isResize=!1,h},e}(Cl),md="node-selection";(function(){function t(e){var n=e.lf;this.selectNodes=[],this.d=10,this.lf=n,n.register({type:md,view:yj,model:mj})}return Object.defineProperty(t.prototype,"selectNodesIds",{get:function(){return this.selectNodes.map(function(e){return e.id})},enumerable:!1,configurable:!0}),t.prototype.addNodeSelection=function(){var e=this.lf.addNode({type:"node-selection",text:"",properties:{node_selection_ids:this.selectNodesIds},x:0,y:0});e.updatePointsByNodes(this.selectNodesIds)},t.prototype.updateNodeSelection=function(){var e,n=this.getNodeSelection();n&&(this.lf.setProperties(n.id,{node_selection_ids:this.selectNodesIds}),(e=this.lf.getNodeModelById(n.id))===null||e===void 0||e.updatePointsByNodes(this.selectNodesIds))},t.prototype.getNodeSelection=function(){var e=this,n=this.selectNodesIds,r=this.lf.getGraphRawData(),i=n.filter(function(o){return o!==e.currentClickNode.id});return r.nodes.find(function(o){if(o.type==="node-selection"){var a=ho(o,"properties.node_selection_ids",[]);return i.every(function(s){return a.includes(s)})}return!1})},t.prototype.onNodeChange=function(e,n){var r=e.graphModel.nodes.filter(function(i){if(!cu(i))return!1;var o=i.properties.node_selection_ids||[];return o.includes(n.id)});Promise.resolve().then(function(){r.forEach(function(i){i.updatePointsByNodes(i.properties.node_selection_ids||[])})})},t.prototype.render=function(e){var n=this;this.lf=e,e.on("node:click",function(r){var i;if(!(!r.e.shiftKey||r.data.type===md)){n.currentClickNode=r.data;var o=!1;n.selectNodesIds.includes(r.data.id)&&((i=n.lf.getNodeModelById(r.data.id))===null||i===void 0||i.setSelected(!1),o=!0);var a=e.getSelectElements(!0).nodes;n.selectNodes=a,n.selectNodes.length===1?o?n.updateNodeSelection():n.addNodeSelection():n.selectNodes.length>1&&n.updateNodeSelection()}}),e.graphModel.addNodeMoveRules(function(r,i,o){if(n.onNodeChange(e,r),cu(r)&&!r.isResize){var a=r.properties.node_selection_ids||[];return e.graphModel.moveNodes(a,i,o,!0),!0}return!0}),e.graphModel.addNodeResizeRules(function(r){return cu(r)||n.onNodeChange(e,r),!0})},t.pluginName="node-selection",t})();var cu=function(t){return!!(t&&t.type===md)},_j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),du=function(){return du=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},du.apply(this,arguments)};(function(t){_j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=n.properties;return ae("text",{x:r-o/2+5,y:i-a/2+16,fontSize:12,fill:"blue"},s.moreText)},e.prototype.getShape=function(){var n=this.props.model,r=n.x,i=n.y,o=n.width,a=n.height,s=this.props.model.getNodeStyle();return ae("g",{},[ae("rect",du(du({},s),{fill:"#FFFFFF",x:r-o/2,y:i-a/2})),this.getLabelShape()])},e})(pr);const _d=((t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n})(Rn.defineComponent({__name:"index",setup(t,{expose:e}){ka.use(cj),ka.use(sj),ka.use(N4),ka.use(fj);const n=Rn.ref(),r=Rn.ref();Rn.provide("LF",r);function i(){var s,l,u,f,c,d;n.value&&(r.value=new ka({container:n.value,grid:!0,edgeTextDraggable:!0,stopScrollGraph:!0,stopZoomGraph:!0,autoFocus:!0,style:{baseEdge:{stroke:"#000",strokeWidth:1.5}}}),Array.isArray(Io)&&r.value&&(Io==null||Io.forEach(h=>{var v;(v=r.value)==null||v.register(h)})),Array.isArray(zl)&&r.value&&(zl==null||zl.forEach(h=>{var v;(v=r.value)==null||v.register(h)})),(l=(s=r.value)==null?void 0:s.extension.dndPanel)==null||l.setPatternItems(Io),(f=(u=r.value)==null?void 0:u.extension.control)==null||f.addItem({key:"download",iconClass:"custom-icon custom-download",title:"XML",text:"",onClick:()=>{var v,p,g;const h=((v=r.value)==null?void 0:v.adapterOut)&&((g=r.value)==null?void 0:g.adapterOut((p=r.value)==null?void 0:p.getGraphRawData()));debugger;o("logic-flow.bpmn",h),console.log("object")}}),(d=(c=r.value)==null?void 0:c.extension.control)==null||d.addItem({key:"clear",iconClass:"custom-icon custom-clear",title:"",text:"",onClick:()=>{var h;(h=r.value)==null||h.clearData()}}),r.value.render({}))}function o(s,l){var u=document.createElement("a");u.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(l)),u.setAttribute("download",s),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u)}function a(s){var c,d,h;if(!r.value||!r.value.adapterIn||!r.value.render)return;(c=r.value)==null||c.clearData();let l=(d=r.value)==null?void 0:d.adapterIn(s);console.log(l);let{edges:u,nodes:f}=l;u.forEach(v=>{v.startPoint=v.pointsList[0],v.endPoint=v.pointsList[v.pointsList.length-1]}),f.forEach(v=>{console.log(Io),["bpmn:dataImportTask","bpmn:processorTask"].some(g=>g===v.type)&&(v.x=v.x+v.properties.width/2,v.y=v.y+v.properties.height/2)}),(h=r.value)==null||h.renderRawData({edges:u,nodes:f})}return Rn.onMounted(()=>{i()}),e({renderData:a}),(s,l)=>(Rn.openBlock(),Rn.createElementBlock("div",{id:"container",ref_key:"container",ref:n},null,512))}}),[["__scopeId","data-v-140f5a1f"]]);return _d.install=function(t){t.component("FlowDesigner",_d)},_d});
