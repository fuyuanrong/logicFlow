import { h, RectNode, RectNodeModel } from '@logicflow/core';

class CustomRectModel extends RectNodeModel {
	getNodeStyle() {
		const style = super.getNodeStyle();
		// 修改节点的样式
		return style;
	}
	setAttributes() {
		this.width = 100;
		this.height = 80;
		this.radius = 2; // 圆角半径
	}
}

// const customNodeIcon: Record<string, string> = {
// 	plugin_dataSource: 'M975.657143 96.914286l-48.457143-48.457143c-1.828571-1.828571-4.114286-2.628571-6.514286-2.628572s-4.685714 0.914286-6.514285 2.628572l-86.971429 86.971428a227.737143 227.737143 0 0 0-128.114286-39.2c-58.514286 0-117.028571 22.285714-161.714285 66.971429L420.914286 279.657143a9.177143 9.177143 0 0 0 0 12.914286L731.428571 603.085714c1.828571 1.828571 4.114286 2.628571 6.514286 2.628572 2.285714 0 4.685714-0.914286 6.514286-2.628572l116.457143-116.457143c78.742857-78.857143 88-200.8 27.771428-289.714285l86.971429-86.971429c3.542857-3.657143 3.542857-9.485714 0-13.028571zM805.828571 431.657143l-67.885714 67.885714-213.485714-213.485714 67.885714-67.885714c28.457143-28.457143 66.4-44.228571 106.742857-44.228572 40.342857 0 78.171429 15.657143 106.742857 44.228572 28.457143 28.457143 44.228571 66.4 44.228572 106.742857 0 40.342857-15.771429 78.171429-44.228572 106.742857z m-217.371428 120a9.177143 9.177143 0 0 0-12.914286 0L499.428571 627.771429 396.228571 524.571429l76.228572-76.228572c3.542857-3.542857 3.542857-9.371429 0-12.914286L430.857143 393.828571a9.177143 9.177143 0 0 0-12.914286 0L341.714286 470.057143l-49.142857-49.142857a8.971429 8.971429 0 0 0-6.514286-2.628572c-2.285714 0-4.685714 0.914286-6.514286 2.628572L163.2 537.371429c-78.742857 78.857143-88 200.8-27.771429 289.714285l-86.971428 86.971429a9.177143 9.177143 0 0 0 0 12.914286l48.457143 48.457142c1.828571 1.828571 4.114286 2.628571 6.514285 2.628572s4.685714-0.914286 6.514286-2.628572l86.971429-86.971428c38.514286 26.171429 83.314286 39.2 128.114285 39.2 58.514286 0 117.028571-22.285714 161.714286-66.971429l116.457143-116.457143c3.542857-3.542857 3.542857-9.371429 0-12.914285l-49.142857-49.142857 76.228571-76.228572c3.542857-3.542857 3.542857-9.371429 0-12.914286l-41.828571-41.371428zM431.657143 805.828571a150.08 150.08 0 0 1-106.742857 44.228572c-40.342857 0-78.171429-15.657143-106.742857-44.228572a150.08 150.08 0 0 1-44.228572-106.742857c0-40.342857 15.657143-78.171429 44.228572-106.742857l67.885714-67.885714 213.485714 213.485714-67.885714 67.885714z',
// 	plugin_recorder: 'M519.68 1016.32a26.88 26.88 0 0 1-15.36-4.48l-407.68-235.52a30.08 30.08 0 0 1-16-26.88V278.4a30.08 30.08 0 0 1 16-26.88L504.32 16a30.72 30.72 0 0 1 31.36 0l407.68 235.52a30.72 30.72 0 0 1 15.36 26.88v471.04a30.72 30.72 0 0 1-15.36 26.88l-407.68 235.52a28.8 28.8 0 0 1-16 4.48z m-375.68-285.44l375.68 217.6 376.32-217.6V296.96L519.68 80 144 296.96z M519.68 540.8a28.16 28.16 0 0 1-15.36-4.48l-407.68-230.4a31.36 31.36 0 0 1-12.16-42.88 32.64 32.64 0 0 1 43.52-12.16l407.04 231.04a31.36 31.36 0 0 1-15.36 58.88z M512 545.28a31.36 31.36 0 0 1-15.36-58.88L901.12 256a31.36 31.36 0 0 1 42.88 12.16 32 32 0 0 1-12.16 42.88l-407.68 230.4a32 32 0 0 1-12.16 3.84z M519.68 1000.96a31.36 31.36 0 0 1-31.36-31.36V501.12a31.36 31.36 0 1 1 64 0v468.48a31.36 31.36 0 0 1-32.64 31.36z',
// 	plugin_processor: 'M 851.412 806.16 l -90.696 90.32 l -67.696 -67.696 l 90.508 -90.508 c 87.48 -87.48 87.48 -229.308 0 -316.784 c -87.48 -87.48 -229.304 -87.48 -316.784 0 l -90.528 90.528 l -67.88 -67.88 l 90.528 -90.532 c 124.968 -124.968 327.58 -124.968 452.548 0 c 124.968 124.968 124.968 327.58 0 452.548 ZM 172.588 217.84 l 90.696 -90.32 l 67.696 67.696 l -90.508 90.508 c -87.48 87.48 -87.48 229.308 0 316.784 c 87.48 87.48 229.304 87.48 316.784 0 l 90.528 -90.528 l 67.88 67.88 l -90.528 90.532 c -124.968 124.968 -327.58 124.968 -452.548 0 c -124.968 -124.968 -124.968 -327.58 0 -452.548 Z',
// };
// const defaultIcon: string = 'M439.264 208a16 16 0 0 0-16 16v67.968a239.744 239.744 0 0 0-46.496 26.896l-58.912-34a16 16 0 0 0-21.856 5.856l-80 138.56a16 16 0 0 0 5.856 21.856l58.896 34a242.624 242.624 0 0 0 0 53.728l-58.88 34a16 16 0 0 0-6.72 20.176l0.848 1.68 80 138.56a16 16 0 0 0 21.856 5.856l58.912-34a239.744 239.744 0 0 0 46.496 26.88V800a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16v-67.968a239.744 239.744 0 0 0 46.512-26.896l58.912 34a16 16 0 0 0 21.856-5.856l80-138.56a16 16 0 0 0-4.288-20.832l-1.568-1.024-58.896-34a242.624 242.624 0 0 0 0-53.728l58.88-34a16 16 0 0 0 6.72-20.176l-0.848-1.68-80-138.56a16 16 0 0 0-21.856-5.856l-58.912 34a239.744 239.744 0 0 0-46.496-26.88V224a16 16 0 0 0-16-16h-160z m32 48h96v67.376l28.8 12.576c13.152 5.76 25.632 12.976 37.184 21.52l25.28 18.688 58.448-33.728 48 83.136-58.368 33.68 3.472 31.2a194.624 194.624 0 0 1 0 43.104l-3.472 31.2 58.368 33.68-48 83.136-58.432-33.728-25.296 18.688c-11.552 8.544-24.032 15.76-37.184 21.52l-28.8 12.576V768h-96v-67.376l-28.784-12.576c-13.152-5.76-25.632-12.976-37.184-21.52l-25.28-18.688-58.448 33.728-48-83.136 58.368-33.68-3.472-31.2a194.624 194.624 0 0 1 0-43.104l3.472-31.2-58.368-33.68 48-83.136 58.432 33.728 25.296-18.688a191.744 191.744 0 0 1 37.184-21.52l28.8-12.576V256z m47.28 144a112 112 0 1 0 0 224 112 112 0 0 0 0-224z m0 48a64 64 0 1 1 0 128 64 64 0 0 1 0-128z'

class customRectView extends RectNode {
	private getLabelShape() {
		const { model } = this.props;
		const { x, y, width, height } = model;
		const style = model.getNodeStyle();
		return h(
			'svg',
			{
				x: x - width / 2 + 5,
				y: y - height / 2 + 5,
				width: 25,
				height: 25,
				viewBox: '0 0 1274 1024',
			},
			h('path', {
				fill: style.stroke,
				d: 'M607.68 464.128c-26.112 0-56.512 8.704-78.272 26.112-21.76 17.408-43.52 39.168-52.224 65.28-8.704 26.048-13.056 56.512-8.704 82.56 4.352 26.176 17.408 52.224 39.168 73.984 21.76 21.76 43.52 34.816 73.92 39.168 26.112 4.352 56.576 4.352 82.688-8.704 26.048-8.704 47.808-30.464 65.28-52.224 17.28-21.76 26.048-52.16 26.048-78.272 0-39.168-13.056-73.92-43.52-100.032-30.464-30.464-65.28-47.872-104.32-47.872z m52.224 195.776c-13.056 13.056-30.464 21.76-52.224 21.76-13.056 0-26.112-4.416-39.104-13.056-13.056-8.704-21.76-17.408-26.112-30.464-4.352-13.056-8.704-26.112-4.352-39.168 4.352-13.056 8.704-26.112 17.408-34.752 8.704-8.704 21.76-17.408 34.752-17.408 13.056-4.352 26.112 0 39.168 4.352 13.056 4.352 26.112 13.056 30.464 26.048 8.704 13.056 13.056 26.112 13.056 39.168 4.288 8.704 0 30.464-13.056 43.52z M955.648 533.76a59.968 59.968 0 0 0-17.408-13.056l-65.28-21.76 30.464-65.28c4.416-8.64 4.416-12.992 4.416-21.76 0-8.64-4.416-12.992-8.704-17.344L825.152 320.64a32.96 32.96 0 0 0-17.408-8.704c-8.704 0-13.056 0-21.76 4.352l-69.568 26.112-21.76-65.28 4.352 8.704 17.408-39.168c4.352-8.704 4.352-13.056 4.352-21.76 0-8.64-4.352-12.992-8.704-17.344L638.144 133.568a32.96 32.96 0 0 0-17.408-8.704c-8.704 0-13.056 0-21.76 4.352l-65.28 30.464L512 94.4a118.912 118.912 0 0 0-17.408-21.76 33.28 33.28 0 0 0-21.76-8.64h-104.32a33.28 33.28 0 0 0-21.76 8.704c-8.704 4.352-13.056 8.704-13.056 17.408l-21.76 65.28-65.28-30.528c-4.352-4.352-13.056-4.352-21.76-4.352-8.64 0-12.992 4.352-17.344 8.704L129.216 207.552a32.96 32.96 0 0 0-8.704 17.408c0 8.64 0 12.992 4.352 21.76l30.464 65.216-65.28 21.76a60.032 60.032 0 0 0-17.344 12.992 33.28 33.28 0 0 0-8.704 21.76v108.8c0 8.64 4.352 12.992 8.704 21.76A60.032 60.032 0 0 0 90.112 512l65.28 21.76-30.528 65.28c-4.352 8.64-4.352 12.992-4.352 21.696s4.352 13.056 8.704 17.408l73.984 73.92a32.96 32.96 0 0 0 17.408 8.704c8.704 0 12.992 0 21.76-4.352l39.104-17.408 60.928 17.408-30.464 65.28c-4.352 8.704-4.352 13.056-4.352 21.76 0 8.64 4.352 12.992 8.704 17.344l73.92 73.984a33.024 33.024 0 0 0 17.408 8.704c8.704 0 13.056 0 21.76-4.416l65.28-30.4 21.696 65.28c4.352 8.64 8.704 12.992 13.056 17.344a33.28 33.28 0 0 0 21.76 8.704h108.736c8.704 0 13.056-4.352 21.76-8.704 4.288-4.352 8.64-8.704 12.992-17.408l21.76-65.28 65.28 30.528a39.168 39.168 0 0 0 21.76 4.352c8.64 0 12.992-4.416 17.344-8.704l73.984-73.984a32.96 32.96 0 0 0 8.704-17.408c0-8.704 0-13.056-4.416-21.76l-26.048-65.216 65.28-21.76a60.16 60.16 0 0 0 17.344-13.056 33.28 33.28 0 0 0 8.704-21.76V551.232a32.96 32.96 0 0 0-8.704-17.408zM237.952 642.496l-39.104-39.168 21.76-39.104c4.352-8.704 8.704-17.408 8.704-30.464 0-8.704 0-21.76-4.352-30.464-8.704-8.704-13.056-17.408-21.76-26.112-4.352-4.352-17.408-13.056-26.112-13.056l-43.52-12.992v-56.576l43.52-13.056c8.704-4.352 21.76-13.056 26.112-17.408 8.704-8.704 13.056-17.408 17.408-26.048 4.352-8.704 4.352-21.76 4.352-30.464 0-8.704-4.352-21.76-8.704-30.464l-17.408-39.168 39.104-39.104 39.168 21.76c8.704 4.352 17.408 8.704 30.464 8.704 8.704 0 21.76 0 30.464-4.352 8.64-4.352 17.344-8.704 26.048-17.408 4.352-8.704 13.056-21.76 13.056-30.464l13.056-43.52h56.576l12.992 43.52c4.352 8.704 8.704 17.408 17.408 26.112 8.704 8.704 17.408 13.056 26.112 17.408 8.704 4.352 21.76 4.352 30.464 4.352 8.704 0 21.76-4.352 30.464-8.704l39.104-21.76 39.168 43.52-8.704 12.992H551.168c-8.704 0-13.056 4.352-21.76 8.704-4.352 4.352-8.704 8.704-13.056 17.408l-17.408 65.28-65.28-30.464c-4.288-4.352-12.992-4.352-21.76-4.352-8.64 0-12.992 4.352-17.344 8.704L316.288 394.56a32.96 32.96 0 0 0-8.704 17.408c0 8.704 0 13.056 4.352 21.76l30.464 65.28-65.28 21.696a60.032 60.032 0 0 0-17.408 13.056 33.28 33.28 0 0 0-8.704 21.76v82.56l-13.056 4.416z m656.832-8.704l-43.52 13.056c-8.704 4.352-17.408 8.704-26.112 17.408a91.008 91.008 0 0 0-17.408 26.048c-4.352 8.704-4.352 21.76-4.352 30.464 0 8.704 4.352 21.76 8.704 30.464l21.76 39.168-39.104 39.104-39.168-21.76c-13.056-4.352-26.112-4.352-34.816-4.352-8.704 0-21.76 0-30.464 4.352a91.008 91.008 0 0 0-26.048 17.408c-8.704 8.704-13.056 17.408-17.408 26.112l-13.056 43.52h-56.576l-12.992-43.52a90.88 90.88 0 0 0-17.408-26.112 90.88 90.88 0 0 0-26.112-17.408c-8.704-4.352-21.76-4.352-30.464-4.352-8.704 0-21.76 4.352-30.464 8.704l-39.104 21.76-39.168-39.104 21.76-39.168c8.704-13.056 8.704-26.112 13.056-34.816 0-8.704 0-21.76-4.352-30.464-4.352-8.704-8.704-17.344-17.408-26.048-8.704-8.704-17.408-13.056-26.112-17.408l-43.52-13.056v-56.576l43.52-12.992c8.704-4.352 17.408-8.704 26.112-17.408 8.704-8.704 13.056-17.408 17.408-26.112 4.352-8.704 4.352-21.76 4.352-30.464-4.352-4.352-4.352-17.408-8.704-26.112l-21.76-39.104 39.168-39.168 39.104 21.76c8.704 4.352 21.76 4.352 30.464 8.704 8.704 0 21.76 0 30.464-4.352 8.704-4.352 17.408-8.704 26.112-17.408 8.704-8.704 13.056-17.408 17.344-26.112l13.056-43.52h56.576l13.056 43.52c4.352 8.704 8.704 17.408 17.408 26.112 8.704 8.704 17.344 13.056 26.048 17.408 8.704 4.352 21.76 4.352 30.464 4.352 8.704 0 21.76-4.352 30.464-8.704l39.168-21.76 39.104 39.168-21.76 39.104c-8.704 8.704-8.704 21.76-8.704 30.464 0 8.704 0 21.76 4.352 30.464 4.352 8.704 8.704 17.408 17.408 26.112 8.704 8.704 17.408 13.056 26.112 17.344l43.52 13.056v52.224z',
			})
		);
	}
	//自定义节点外观
	getShape() {
		const { model } = this.props;
		const { x, y, width, height, radius } = model;
		const style = model.getNodeStyle();
		return h('g', {}, [
			h('rect', {
				...style,
				x: x - width / 2,
				y: y - height / 2,
				width,
				height,
				rx: radius,
				ry: radius,
			}),
			this.getLabelShape(),
		]);
	}
}
//数据源节点
export default {
	type: 'bpmn:serviceTask',
	view: customRectView,
	model: CustomRectModel,
	text: '',
};
